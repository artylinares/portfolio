const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ElevationLayer-B52fTs3M.js","./ArcGISCachedService-DwTMWoiz.js","./TileInfoTilemapCache-DRFPasLo.js","./TilemapCache-eT1gPcvu.js","./ArcGISService-D_cABxcB.js","./WorkerHandle-CqbZrnv2.js","./ElevationQuery-D96JKoyK.js","./GeometryDescriptor-BzGsfUgv.js","./projectOperator-DZMbRw9d.js","./operatorProject-C63JV2XQ.js","./SimpleGeometryCursor-B92kdZ15.js","./projectOperator-COZchowl.js","./statsWorker-CJxkKKsV.js","./utils-CuSO6C3x.js","./utils-DFuzGCVN.js","./ClassBreaksDefinition-utg9vjtt.js","./geometryEngineWorker-BkMQzpX8.js","./geometryEngineJSON-B_JiqPb-.js","./geometryEngineBase-BQTefT4Y.js","./_commonjsHelpers-DCkdB7M8.js","./CSVSourceWorker-B33JlpN-.js","./date-DCujAECq.js","./OptimizedFeature-D_GvOUMl.js","./FeatureStore-B_Lb5BC_.js","./featureConversionUtils-umfQxtpj.js","./OptimizedFeatureSet-BR8EEvDc.js","./BoundsStore-BjdyCzpm.js","./PooledRBush-BJYNk3c8.js","./timeSupport-DmGkKwAf.js","./queryUtils-CBfNs_2f.js","./optimizedFeatureQueryEngineAdapter-CcuPh93B.js","./QueryEngine-YQjlqXwo.js","./WhereClauseCache-CQ06TB9_.js","./WhereClause-BTLj5ySA.js","./SnappingCandidate-DGkpYqI6.js","./FixedIntervalBinParameters-DKi8BM-R.js","./number-D78sc8Co.js","./locationUtils-DQbfm0re.js","./EdgeProcessingWorker-D1WbLWZB.js","./workerHelper-BdZuTvaX.js","./InterleavedLayout-DtbZ-5ze.js","./BufferView-DA1GEvam.js","./types-BKo2foNY.js","./VertexElementDescriptor-BLyltQyJ.js","./VertexAttributeLocations-BfZbt_DV.js","./edgeProcessing-tMOSUT00.js","./deduplicate-C1P3N4zN.js","./Indices-JRtum3E0.js","./Normals-CtkNp_8g.js","./ElevationSamplerWorker-DfN8Yjqy.js","./MeshLocalVertexSpace-CPISDZ3p.js","./vertexSpaceConversion-BXQfM9tC.js","./spatialReferenceEllipsoidUtils-CS0HjQnB.js","./computeTranslationToOriginAndRotation-BqO82rwv.js","./projectPointToVector-Cu9oGeWa.js","./meshVertexSpaceUtils-DNCMLvUh.js","./vec3-BohsJXeV.js","./vec4-CquklQAK.js","./FeatureServiceSnappingSourceWorker-DZn8xYdO.js","./symbologySnappingCandidates-BGbrTOQq.js","./pbfQueryUtils-D6Iu4e7o.js","./pbf-Cs1bl0sY.js","./query-CSCjffvP.js","./queryZScale-drAkRVU2.js","./GeoJSONSourceWorker-Bsq9LyDB.js","./geojson-DlelNdXz.js","./sourceUtils-D8jD0705.js","./MemorySourceWorker-CboZRAJp.js","./objectIdUtils-BmFjqQA3.js","./PBFDecoderWorker-CIHarv1P.js","./dehydratedFeatures-DR7UiGp_.js","./FeaturePipelineWorker-B1g1tulw.js","./AttributeStore-BgsXerwH.js","./Utils-BAZbFThO.js","./UpdateTracking2D-T6O78D_Z.js","./FeatureStoreQueryAdapter-Dk8jZCb5.js","./constants-BBnGEY1d.js","./streamLayerUtils-DFlbJ4P1.js","./MeshWriterRegistry-yXlpWNR1.js","./TexturedLineMeshWriter-BEmFDwjB.js","./TurboLine-B_BYCgMv.js","./grouping-CN_qtdtY.js","./QueueProcessor-aBZEdK_i.js","./FeatureMetadata-BGCmy6U6.js","./SourceChunkStore-BoMSN1Gr.js","./parquet-JyULu0-8.js","./operatorGeodeticDensify-B-HRZTH3.js","./geodeticCurveType-CirnHLSB.js","./normalizeUtilsSync-C8GtLEXl.js","./FeatureIdInfo-DIizuoQC.js","./ogcFeatureUtils-pQaPsBsu.js","./CircularArray-CujHzHWW.js","./createConnection-C2K9Emqu.js","./PointCloudWorker-DgAf9PiY.js","./quat-D-CPDCi5.js","./quatf64-aQ5IuZRd.js","./vec3f32-WCVSSNPR.js","./PointCloudUniqueValueRenderer-KVmTtH4w.js","./I3SBinaryReader-DIN2fZMk.js","./orientedBoundingBox-BWfH5jmm.js","./plane-Lq4YhOGl.js","./vectorStacks-BDH9BqnR.js","./RasterWorker-sE6hwKP8.js","./PixelBlock-PVMattq0.js","./RasterSymbolizer-B1YPhPgW.js","./vectorFieldUtils-BsL7yKQj.js","./rasterFunctionHelper-Du8xrUCi.js","./clipUtils-BEz45KDQ.js","./rasterProjectionHelper-CBFsmUB7.js","./PolynomialTransform-BSlW4zUj.js","./dataUtils-DO0S1MMP.js","./SceneLayerSnappingSourceWorker-g0N80xlp.js","./lineSegment-ZnG6H560.js","./sphere-Bt3h2C2K.js","./Octree-OXNK_ixS.js","./frustum-CORjWSmb.js","./SceneLayerWorker-JmZQKDWe.js","./projectVectorToVector-hCkMxHR3.js","./WFSSourceWorker-nOdtgFoE.js","./wfsUtils-D6tghwRi.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-BUgLMhuX.js","./constants-BHYAGdRm.js","./config-BOD8--da.js","./SourceLayerData-BUNG-tCY.js","./StyleRepository-_c28nBXm.js","./earcut-D9gy186-.js","./Feature3DPipelineWorker-BTL2VNVn.js","./HUDMaterial.glsl-B3dJIroO.js","./hydratedFeatures-C_rIJiB8.js","./OutputColorHighlightOID.glsl-DwdqLrg1.js","./triangle-B9G8cZWO.js","./renderState-CKc66y4x.js","./glsl-B5bJgrnA.js","./ShaderBuilder-AS_x1hwJ.js","./placementUtils-CrLLKdkq.js","./sdfPrimitives-DL3QuYQB.js","./Texture-B_gfOn-a.js","./videoUtils-BDipTC2z.js","./requestImageUtils-R4kBGEDW.js","./primitiveObjectSymbolUtils-Cm3JMy67.js","./RealisticTree.glsl-d3loJWOy.js","./VertexBuffer-CltW2dL7.js","./BufferObject-CSOU3VXD.js","./boundedPlane-BKdr0zEI.js","./FlowWorker-DO7OZSb5.js","./ParquetSourceWorker-DUDHJSI4.js","./parquetUtils-BI-nShk5.js","./PanoramicMeshWorker-HH0PSgtY.js","./Popup-BUrYoR-M.js","./throttle-DQn711mM.js","./unitFormatUtils-B8QhVX-s.js","./quantityUtils-BaCJVnm7.js","./AttachmentInfo-DJ5ZX-kl.js","./featureUtils-1tmKJwie.js","./executeQueryJSON-HfhaXPV8.js","./shared-C9yySHpb.js","./isImageryGraphicOrigin-Ccuhb4eK.js","./isImageryTileGraphicOrigin-ZR-gBf9D.js","./FeatureLayer-CPKsrUVP.js","./FormTemplate-DtHNhWLW.js","./editsZScale-BF_PNZET.js","./APIKeyMixin-CV4lM8tZ.js","./EditBusLayer-QPPqW7-q.js","./FeatureLayerBase-CqBNPL1e.js","./LayerFloorInfo-CVdt9aqv.js","./multiLayerServiceUtils-BAZ48rZr.js","./Relationship-DUMVrYY8.js","./serviceCapabilitiesUtils-D1ilPaCO.js","./infoFor3D-DhzudQro.js","./FeatureType-C1xmgScA.js","./TitleCreator-Cx6bIRh4.js","./versionUtils-B0QyCIJQ.js","./NetworkElement-BCQzkW8N.js","./ReactiveSet-oxVTP6us.js","./layerViewUtils-F5sJb3vQ.js","./arcadeUtils-Df-hhVu7.js","./arcade-BvHY1nN0.js","./arcadeEnvironment-B5hvzRiK.js","./Dictionary-VCcY2Dpu.js","./ImmutableArray-BPVd6ESQ.js","./Feature-C7H4WhRD.js","./aiServices-mcU-WylD.js","./commonProperties-DHiB1uzW.js","./unitConversion-DRJ9Q05m.js","./rasterFieldUtils-RxUW8RwZ.js","./batchExec-D3rH3msY.js","./geometryServiceUtils-Da7sc5wA.js","./project-BqfbZ4ls.js","./webglDeps-Tmr2IJ84.js","./FramebufferObject-BJMnwqZA.js","./ProgramTemplate-CcVzD4hB.js","./VertexArrayObject-RUoqvJww.js","./mapViewDeps-Bcdv3JRS.js","./FeatureCommandQueue-C9ao8lJA.js","./GraphShaderModule-B6CeF_1m.js","./utils-BCPhtPXY.js","./WGLContainer-Cc7lS526.js","./Container-C-WQ8qHv.js","./SDFHelper-CUaRTovA.js","./GridShader-BiDVdUuv.js","./testSVGPremultipliedAlpha-DubaoM9I.js","./SymbolFader-DdPC_hBS.js","./RenderingContext-Bu_Fj_DO.js","./utils-tOvskqVW.js","./utils-DDjZAYSk.js","./GraphicsView2D-B9yljWTx.js","./densifyCurvedGeometry-lQmRCmu5.js","./GraphicContainer-CiXdGPVz.js","./AGraphicContainer-BKZ5V93P.js","./TechniqueInstance-DA7qDaqf.js","./TileContainer-BMlQ0Yvf.js","./gridUtils-BPPzqXEh.js","./TileLayerView2D-5TeEvXdS.js","./imageUtils-BgsR1R88.js","./BitmapTechnique-I5lGRFxC.js","./bitmapUtils-BxuqE0Cr.js","./LayerView2D-kYW9WCKN.js","./HighlightGraphicContainer-CjrfYqIG.js","./LayerView-S5xZQR1K.js","./RefreshableLayerView-Bey49Yy8.js","./MapServiceLayerViewHelper-CR8Gicg3.js","./drapedUtils-i5kNlJ4P.js","./popupUtils-CkGlLnPu.js","./highlightOptionsUtils-CUjL4JB5.js","./FeatureLayerView2D-Ck5j3z8W.js","./timeSupport-BuWJiNWd.js","./AttributeBinsFeatureSet-DMWAGHTB.js","./AttributeBinsQuery-DLbLEKO_.js","./constants-SxxbBSOD.js","./BaseDynamicLayerView2D-BIiJW8xj.js","./BitmapContainer-DcDEblb-.js","./ExportStrategy-CQutF7NY.js","./CatalogLayerView2D-CFjnaqsF.js","./CatalogDynamicGroupLayerView2D-Dbc3ud0u.js","./CatalogFootprintLayerView2D-vwpi-7sq.js","./GeoRSSLayerView2D-hwtkeLI1.js","./GraphicsLayerView2D-DHyKHD9a.js","./GroupLayerView2D-Cagdtf2m.js","./ImageryLayerView2D-CGSIj9OA.js","./RasterVFDisplayObject-B2RnzNmp.js","./ImageryTileLayerView2D-D_2b2TVX.js","./datasetUtils-C-5BNWTW.js","./rasterUtils-CkctFESg.js","./RawBlockCache-BY3UInvd.js","./KMLLayerView2D-CwpCejXX.js","./kmlUtils-BetBEBm0.js","./KnowledgeGraphLayerView2D-DMP7z53Y.js","./MapImageLayerView2D-lioPPba8.js","./MapNotesLayerView2D-1v-oa3gV.js","./MediaLayerView2D-BNuvbpMw.js","./mediaLayerUtils-43yhwWtH.js","./OverlayContainer-CT6xzz6X.js","./OGCFeatureLayerView2D-ciVaSGg6.js","./RouteLayerView2D-CuGp4ddr.js","./Stop-DIQxbrXz.js","./networkEnums-DLExiBRs.js","./StreamLayerView2D--hWgEtda.js","./SubtypeGroupLayerView2D-CCAJ9_JA.js","./VectorTileLayerView2D-DDwI4kbi.js","./VideoLayerView2D-CfiIXTRO.js","./GraphicsLayer-Dsql8GCN.js","./videoUtils-BnV9189D.js","./ControlPoint-CbSpsSzF.js","./WMSLayerView2D-Bu3Jno0u.js","./ExportWMSImageParameters-CW2LrWbx.js","./WMTSLayerView2D-DUFQbveu.js","./ElevationProfileAnalysisView2D-Cvz8UTqL.js","./createUtils-C7Nn7ZUz.js","./distanceOperator-BNTkN1_M.js","./Point2D-ByVU2sJE.js","./Distance2DCalculator-CXhBP-8I-CCjbKNsj.js","./ProjectionTransformation-CTmMCEuX.js","./Envelope2D-PYZ6irrd.js","./Transformation2D-HOoFpL6n.js","./OperatorDefinitions-DP7_WWTp.js","./apiConverter-tDbXallS.js","./jsonConverter-CG1Urldb.js","./simplifyOperator-DMB5OxZO.js","./operatorSimplify-DO0N0FWK.js","./mapCollectionUtils-JNelCTWg.js","./elevationInfoUtils-BpZCtdgC.js","./SketchViewModel-9N570lFW.js","./hitTestSelectUtils-D-wxzu9c.js","./geodeticLengthOperator-6aSZOzz9.js","./apng-DKGEKyov.js","./index-Bwf2GSA2.js","./index-DQ5AHs1L.js","./guid-LcV_DAvu.js","./useT9n-C8TrgYdx.js","./index-BfzcS5HD.js","./index-CgzgUqVR.js","./dom-B7NWVcRY.js","./observers-b59Y11zG.js","./ref-YaLdi40i.js","./static-Dp-lBfyN.js","./form-B1PUKEob.js","./interactive-DnjzjVuI.js","./label-C3wVRNdG.js","./useSetFocus-QMFUjYhu.js","./editingSupport-CZkQuNl9.js","./layersLoader-C7KQLO-f.js","./jsonContext-BX3WkMcf.js","./index-ARj2DFlA.js","./keyed-HwzO4KkV.js","./index-DCCUQuut.js","./index-DyvJWL-X.js","./floating-ui-C0Qq6Cas.js","./debounce-D0Dr7phT.js","./openCloseComponent-BL2b_lyG.js","./FloatingArrow-CmEIhUOE.js","./useFocusTrap-CKDos1_9.js","./key-Cyh_1epf.js","./index-_yu3e8mG.js","./array-bGYQmELK.js","./index-DDSQx9he.js","./index-BDVO6tV8.js","./dynamicClasses-6uzzLOUQ.js","./index-CNjSus5V.js","./resources7-v6zOX8CA.js","./index-BaNT28Fk.js","./utils2-Dh7VDDsY.js","./resources5-DhgIM17F.js","./index-CgKu5SLQ.js","./index-Bl7LazHz.js","./index-B3aNnNkM.js","./customElement-N3XIoAK1.js","./index-CDCnYOXp.js","./useCancelable-BK0fZQ0_.js","./index-cQFjWTJj.js","./index-BcvZaUoN.js","./index-B9lyc2O_.js","./index-b3ygKNJX.js","./index-BstpI9Ps.js","./previewSymbol2D-DdSe73XZ.js","./bufferOperator-BTdbO6uM.js","./operatorBuffer-C_ZWKddW.js","./Bufferer-Dw9Qi4T1-Dr_ehwaS.js","./GeometryCleaner-BEJM7I4l-B71Cw7gc.js","./OperatorSimplifyOGC-C_FzB_9q.js","./OperatorGeneralize-CiCTjp-K.js","./convexHullOperator-CsVVLanh.js","./operatorConvexHull-DSeVGdSp.js","./lengthOperator-0IuoD1XH.js","./generalizeOperator-CG9KIxFy.js","./operatorGeneralize-DQI-A1hN.js","./graphicBufferOperator-zG_HWIzA.js","./offsetOperator-B4N7CdG2.js","./operatorOffset-CO_XCx1m.js","./simplifyOperator-nhHgnq51.js","./index-Dr8XRocL.js","./index-Dyb1lWbI.js","./index-ChWB8Duk.js","./usePreventDocumentScroll-CuboDj0Y.js","./BingMapsLayer-DBwtOXff.js","./imageBitmapUtils-Lm_GeRe2.js","./BuildingSceneLayer-DfQk-qRh.js","./capabilities-Cs4k8cuT.js","./SceneService-ABC4Xjh9.js","./originUtils-DYvykSnr.js","./resourceUtils-Dc20l_q2.js","./resourceUtils-lm35tY7b.js","./I3SLayerDefinitions-D-ViO9sM.js","./I3SUtil-C3SbyuPT.js","./edgeUtils-E24KcF1H.js","./CSVLayer-CY92gaV4.js","./CatalogLayer-CURo_tF0.js","./FeatureLayerSource-CIfY9ZbA.js","./External-C17GPT6n.js","./MeshTransform-D5bjeKWM.js","./axisAngleDegrees-CQowHu_N.js","./QueryTask-DvAkHGEB.js","./executeForIds-B5DiYR20.js","./DimensionLayer-C8plNY2o.js","./Analysis-CJFGPHdu.js","./GaussianSplatLayer--OtgxSEg.js","./tiles3DUtils-CmFQHzWT.js","./ImageryLayer-CJCdcOOt.js","./RasterJobHandlerMixin-Bm1wSKA7.js","./RasterPresetRendererMixin-_4ebNUzD.js","./ImageryTileLayer-DXTF1hkZ.js","./xmlUtilities-DfaBqri0.js","./IntegratedMesh3DTilesLayer-BxUqycMH.js","./SceneModifications-DO6h1Zbi.js","./IntegratedMeshLayer-C4bkZUUS.js","./KMLLayer-pdX-AHo9.js","./KnowledgeGraphLayer-Chbu_XBL.js","./KnowledgeGraphSublayer-B2f3SBLX.js","./knowledgeGraphService-DFNL_Jfh.js","./GPMessage-Cs5OoPAh.js","./GraphQueryStreaming-CopzzGf8.js","./LineOfSightLayer-Bs6ONO7y.js","./featureReferenceUtils-CDKPAfK8.js","./LinkChartLayer-Cpy2AIe8.js","./MapImageLayer-D1F2DmC7.js","./SublayersOwner-Cte-XaMN.js","./MapNotesLayer-DZZx3UTG.js","./MediaLayer-THUHgJjQ.js","./OGCFeatureLayer-D8TxWgTW.js","./OpenStreetMapLayer-CkgJyWOT.js","./WebTileLayer-D9KRkynz.js","./OrientedImageryLayer-3_V7vsIC.js","./ParquetLayer-B6VUTMgO.js","./PointCloudLayer-BMZQiwpO.js","./RouteLayer-Cw4FNevC.js","./SceneLayer-Bxz8qv09.js","./meshSpatialReferenceScaleUtils-DGDzN02j.js","./StreamLayer-BHV0_XPX.js","./SubtypeGroupLayer-DPgPbaM6.js","./TileLayer-CrlzflSd.js","./VectorTileLayer-ZiKLOhmk.js","./VideoLayer-CLxKi_Mq.js","./ViewshedLayer-UGIfgBB3.js","./VoxelLayer-CrJ88LU3.js","./WCSLayer-CcgVuB1p.js","./crsUtils-DAndLU68.js","./WFSLayer-DhoBjrGk.js","./WMSLayer-BdkefpU_.js","./WMTSLayer-BIVOi-xV.js","./groupLayerUtils-CueYoC0-.js","./utils-_MlJEqtl.js","./index-gTxvlsdY.js"])))=>i.map(i=>d[i]);
var Ele=Object.getPrototypeOf;var Cle=Reflect.get;var Y8=t=>{throw TypeError(t)};var BI=(t,e,i)=>e.has(t)||Y8("Cannot "+i);var Zt=(t,e,i)=>(BI(t,e,"read from private field"),i?i.call(t):e.get(t)),fo=(t,e,i)=>e.has(t)?Y8("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),mo=(t,e,i,r)=>(BI(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),w_=(t,e,i)=>(BI(t,e,"access private method"),i);var J8=(t,e,i)=>Cle(Ele(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();var HI={exports:{}},S_={};var X8;function Ile(){if(X8)return S_;X8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,s,n){var a=null;if(n!==void 0&&(a=""+n),s.key!==void 0&&(a=""+s.key),"key"in s){n={};for(var o in s)o!=="key"&&(n[o]=s[o])}else n=s;return s=n.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:n}}return S_.Fragment=e,S_.jsx=i,S_.jsxs=i,S_}var Q8;function Lle(){return Q8||(Q8=1,HI.exports=Ile()),HI.exports}var XA=Lle(),WI={exports:{}},ut={};var K8;function Ale(){if(K8)return ut;K8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function b(W){return W===null||typeof W!="object"?null:(W=v&&W[v]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function T(W,pe,Te){this.props=W,this.context=pe,this.refs=M,this.updater=Te||w}T.prototype.isReactComponent={},T.prototype.setState=function(W,pe){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,pe,"setState")},T.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function I(){}I.prototype=T.prototype;function L(W,pe,Te){this.props=W,this.context=pe,this.refs=M,this.updater=Te||w}var O=L.prototype=new I;O.constructor=L,S(O,T.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function z(){}var j={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function B(W,pe,Te){var Pe=Te.ref;return{$$typeof:t,type:W,key:pe,ref:Pe!==void 0?Pe:null,props:Te}}function Q(W,pe){return B(W.type,pe,W.props)}function oe(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function ue(W){var pe={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Te){return pe[Te]})}var Se=/\/+/g;function me(W,pe){return typeof W=="object"&&W!==null&&W.key!=null?ue(""+W.key):pe.toString(36)}function ke(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(z,z):(W.status="pending",W.then(function(pe){W.status==="pending"&&(W.status="fulfilled",W.value=pe)},function(pe){W.status==="pending"&&(W.status="rejected",W.reason=pe)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function te(W,pe,Te,Pe,tt){var ot=typeof W;(ot==="undefined"||ot==="boolean")&&(W=null);var Et=!1;if(W===null)Et=!0;else switch(ot){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(W.$$typeof){case t:case e:Et=!0;break;case p:return Et=W._init,te(Et(W._payload),pe,Te,Pe,tt)}}if(Et)return tt=tt(W),Et=Pe===""?"."+me(W,0):Pe,R(tt)?(Te="",Et!=null&&(Te=Et.replace(Se,"$&/")+"/"),te(tt,pe,Te,"",function(Wn){return Wn})):tt!=null&&(oe(tt)&&(tt=Q(tt,Te+(tt.key==null||W&&W.key===tt.key?"":(""+tt.key).replace(Se,"$&/")+"/")+Et)),pe.push(tt)),1;Et=0;var lr=Pe===""?".":Pe+":";if(R(W))for(var ci=0;ci<W.length;ci++)Pe=W[ci],ot=lr+me(Pe,ci),Et+=te(Pe,pe,Te,ot,tt);else if(ci=b(W),typeof ci=="function")for(W=ci.call(W),ci=0;!(Pe=W.next()).done;)Pe=Pe.value,ot=lr+me(Pe,ci++),Et+=te(Pe,pe,Te,ot,tt);else if(ot==="object"){if(typeof W.then=="function")return te(ke(W),pe,Te,Pe,tt);throw pe=String(W),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return Et}function be(W,pe,Te){if(W==null)return W;var Pe=[],tt=0;return te(W,Pe,"","",function(ot){return pe.call(Te,ot,tt++)}),Pe}function Me(W){if(W._status===-1){var pe=W._result;pe=pe(),pe.then(function(Te){(W._status===0||W._status===-1)&&(W._status=1,W._result=Te)},function(Te){(W._status===0||W._status===-1)&&(W._status=2,W._result=Te)}),W._status===-1&&(W._status=0,W._result=pe)}if(W._status===1)return W._result.default;throw W._result}var et=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},_t={map:be,forEach:function(W,pe,Te){be(W,function(){pe.apply(this,arguments)},Te)},count:function(W){var pe=0;return be(W,function(){pe++}),pe},toArray:function(W){return be(W,function(pe){return pe})||[]},only:function(W){if(!oe(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return ut.Activity=y,ut.Children=_t,ut.Component=T,ut.Fragment=i,ut.Profiler=s,ut.PureComponent=L,ut.StrictMode=r,ut.Suspense=u,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,ut.__COMPILER_RUNTIME={__proto__:null,c:function(W){return j.H.useMemoCache(W)}},ut.cache=function(W){return function(){return W.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(W,pe,Te){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Pe=S({},W.props),tt=W.key;if(pe!=null)for(ot in pe.key!==void 0&&(tt=""+pe.key),pe)!U.call(pe,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&pe.ref===void 0||(Pe[ot]=pe[ot]);var ot=arguments.length-2;if(ot===1)Pe.children=Te;else if(1<ot){for(var Et=Array(ot),lr=0;lr<ot;lr++)Et[lr]=arguments[lr+2];Pe.children=Et}return B(W.type,tt,Pe)},ut.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:n,_context:W},W},ut.createElement=function(W,pe,Te){var Pe,tt={},ot=null;if(pe!=null)for(Pe in pe.key!==void 0&&(ot=""+pe.key),pe)U.call(pe,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(tt[Pe]=pe[Pe]);var Et=arguments.length-2;if(Et===1)tt.children=Te;else if(1<Et){for(var lr=Array(Et),ci=0;ci<Et;ci++)lr[ci]=arguments[ci+2];tt.children=lr}if(W&&W.defaultProps)for(Pe in Et=W.defaultProps,Et)tt[Pe]===void 0&&(tt[Pe]=Et[Pe]);return B(W,ot,tt)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(W){return{$$typeof:o,render:W}},ut.isValidElement=oe,ut.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:Me}},ut.memo=function(W,pe){return{$$typeof:h,type:W,compare:pe===void 0?null:pe}},ut.startTransition=function(W){var pe=j.T,Te={};j.T=Te;try{var Pe=W(),tt=j.S;tt!==null&&tt(Te,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(z,et)}catch(ot){et(ot)}finally{pe!==null&&Te.types!==null&&(pe.types=Te.types),j.T=pe}},ut.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},ut.use=function(W){return j.H.use(W)},ut.useActionState=function(W,pe,Te){return j.H.useActionState(W,pe,Te)},ut.useCallback=function(W,pe){return j.H.useCallback(W,pe)},ut.useContext=function(W){return j.H.useContext(W)},ut.useDebugValue=function(){},ut.useDeferredValue=function(W,pe){return j.H.useDeferredValue(W,pe)},ut.useEffect=function(W,pe){return j.H.useEffect(W,pe)},ut.useEffectEvent=function(W){return j.H.useEffectEvent(W)},ut.useId=function(){return j.H.useId()},ut.useImperativeHandle=function(W,pe,Te){return j.H.useImperativeHandle(W,pe,Te)},ut.useInsertionEffect=function(W,pe){return j.H.useInsertionEffect(W,pe)},ut.useLayoutEffect=function(W,pe){return j.H.useLayoutEffect(W,pe)},ut.useMemo=function(W,pe){return j.H.useMemo(W,pe)},ut.useOptimistic=function(W,pe){return j.H.useOptimistic(W,pe)},ut.useReducer=function(W,pe,Te){return j.H.useReducer(W,pe,Te)},ut.useRef=function(W){return j.H.useRef(W)},ut.useState=function(W){return j.H.useState(W)},ut.useSyncExternalStore=function(W,pe,Te){return j.H.useSyncExternalStore(W,pe,Te)},ut.useTransition=function(){return j.H.useTransition()},ut.version="19.2.0",ut}var eV;function V5(){return eV||(eV=1,WI.exports=Ale()),WI.exports}var QA=V5(),ZI={exports:{}},x_={},YI={exports:{}},JI={};var tV;function Ple(){return tV||(tV=1,(function(t){function e(te,be){var Me=te.length;te.push(be);e:for(;0<Me;){var et=Me-1>>>1,_t=te[et];if(0<s(_t,be))te[et]=be,te[Me]=_t,Me=et;else break e}}function i(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var be=te[0],Me=te.pop();if(Me!==be){te[0]=Me;e:for(var et=0,_t=te.length,W=_t>>>1;et<W;){var pe=2*(et+1)-1,Te=te[pe],Pe=pe+1,tt=te[Pe];if(0>s(Te,Me))Pe<_t&&0>s(tt,Te)?(te[et]=tt,te[Pe]=Me,et=Pe):(te[et]=Te,te[pe]=Me,et=pe);else if(Pe<_t&&0>s(tt,Me))te[et]=tt,te[Pe]=Me,et=Pe;else break e}}return be}function s(te,be){var Me=te.sortIndex-be.sortIndex;return Me!==0?Me:te.id-be.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],h=[],p=1,y=null,v=3,b=!1,w=!1,S=!1,M=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(te){for(var be=i(h);be!==null;){if(be.callback===null)r(h);else if(be.startTime<=te)r(h),be.sortIndex=be.expirationTime,e(u,be);else break;be=i(h)}}function R(te){if(S=!1,O(te),!w)if(i(u)!==null)w=!0,z||(z=!0,ue());else{var be=i(h);be!==null&&ke(R,be.startTime-te)}}var z=!1,j=-1,U=5,B=-1;function Q(){return M?!0:!(t.unstable_now()-B<U)}function oe(){if(M=!1,z){var te=t.unstable_now();B=te;var be=!0;try{e:{w=!1,S&&(S=!1,I(j),j=-1),b=!0;var Me=v;try{t:{for(O(te),y=i(u);y!==null&&!(y.expirationTime>te&&Q());){var et=y.callback;if(typeof et=="function"){y.callback=null,v=y.priorityLevel;var _t=et(y.expirationTime<=te);if(te=t.unstable_now(),typeof _t=="function"){y.callback=_t,O(te),be=!0;break t}y===i(u)&&r(u),O(te)}else r(u);y=i(u)}if(y!==null)be=!0;else{var W=i(h);W!==null&&ke(R,W.startTime-te),be=!1}}break e}finally{y=null,v=Me,b=!1}be=void 0}}finally{be?ue():z=!1}}}var ue;if(typeof L=="function")ue=function(){L(oe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,me=Se.port2;Se.port1.onmessage=oe,ue=function(){me.postMessage(null)}}else ue=function(){T(oe,0)};function ke(te,be){j=T(function(){te(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(te){switch(v){case 1:case 2:case 3:var be=3;break;default:be=v}var Me=v;v=be;try{return te()}finally{v=Me}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(te,be){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Me=v;v=te;try{return be()}finally{v=Me}},t.unstable_scheduleCallback=function(te,be,Me){var et=t.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?et+Me:et):Me=et,te){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=Me+_t,te={id:p++,callback:be,priorityLevel:te,startTime:Me,expirationTime:_t,sortIndex:-1},Me>et?(te.sortIndex=Me,e(h,te),i(u)===null&&te===i(h)&&(S?(I(j),j=-1):S=!0,ke(R,Me-et))):(te.sortIndex=_t,e(u,te),w||b||(w=!0,z||(z=!0,ue()))),te},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(te){var be=v;return function(){var Me=v;v=be;try{return te.apply(this,arguments)}finally{v=Me}}}})(JI)),JI}var iV;function Ole(){return iV||(iV=1,YI.exports=Ple()),YI.exports}var XI={exports:{}},gs={};var rV;function kle(){if(rV)return gs;rV=1;var t=V5();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(u,h,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:u,containerInfo:h,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gs.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return n(u,h,null,p)},gs.flushSync=function(u){var h=a.T,p=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=h,r.p=p,r.d.f()}},gs.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},gs.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},gs.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,y=o(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):p==="script"&&r.d.X(u,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gs.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=o(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},gs.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,y=o(p,h.crossOrigin);r.d.L(u,p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gs.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=o(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},gs.requestFormReset=function(u){r.d.r(u)},gs.unstable_batchedUpdates=function(u,h){return u(h)},gs.useFormState=function(u,h,p){return a.H.useFormState(u,h,p)},gs.useFormStatus=function(){return a.H.useHostTransitionStatus()},gs.version="19.2.0",gs}var sV;function Rle(){if(sV)return XI.exports;sV=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),XI.exports=kle(),XI.exports}var nV;function Dle(){if(nV)return x_;nV=1;var t=Ole(),e=V5(),i=Rle();function r(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function n(l){var c=l,f=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(f=c.return),l=c.return;while(l)}return c.tag===3?f:null}function a(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function o(l){if(l.tag===31){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function u(l){if(n(l)!==l)throw Error(r(188))}function h(l){var c=l.alternate;if(!c){if(c=n(l),c===null)throw Error(r(188));return c!==l?null:l}for(var f=l,_=c;;){var x=f.return;if(x===null)break;var $=x.alternate;if($===null){if(_=x.return,_!==null){f=_;continue}break}if(x.child===$.child){for($=x.child;$;){if($===f)return u(x),l;if($===_)return u(x),c;$=$.sibling}throw Error(r(188))}if(f.return!==_.return)f=x,_=$;else{for(var A=!1,D=x.child;D;){if(D===f){A=!0,f=x,_=$;break}if(D===_){A=!0,_=x,f=$;break}D=D.sibling}if(!A){for(D=$.child;D;){if(D===f){A=!0,f=$,_=x;break}if(D===_){A=!0,_=$,f=x;break}D=D.sibling}if(!A)throw Error(r(189))}}if(f.alternate!==_)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:c}function p(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=p(l),c!==null)return c;l=l.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function ue(l){return l===null||typeof l!="object"?null:(l=oe&&l[oe]||l["@@iterator"],typeof l=="function"?l:null)}var Se=Symbol.for("react.client.reference");function me(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Se?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case T:return"Profiler";case M:return"StrictMode";case R:return"Suspense";case z:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case L:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case O:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case j:return c=l.displayName||null,c!==null?c:me(l.type)||"Memo";case U:c=l._payload,l=l._init;try{return me(l(c))}catch{}}return null}var ke=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},et=[],_t=-1;function W(l){return{current:l}}function pe(l){0>_t||(l.current=et[_t],et[_t]=null,_t--)}function Te(l,c){_t++,et[_t]=l.current,l.current=c}var Pe=W(null),tt=W(null),ot=W(null),Et=W(null);function lr(l,c){switch(Te(ot,c),Te(tt,l),Te(Pe,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?v8(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=v8(c),l=_8(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}pe(Pe),Te(Pe,l)}function ci(){pe(Pe),pe(tt),pe(ot)}function Wn(l){l.memoizedState!==null&&Te(Et,l);var c=Pe.current,f=_8(c,l.type);c!==f&&(Te(tt,l),Te(Pe,f))}function uo(l){tt.current===l&&(pe(Pe),pe(tt)),Et.current===l&&(pe(Et),g_._currentValue=Me)}var Lv,c2;function vu(l){if(Lv===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Lv=c&&c[1]||"",c2=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lv+l+c2}var Av=!1;function Pv(l,c){if(!l||Av)return"";Av=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(c){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var ne=ce}Reflect.construct(l,[],ye)}else{try{ye.call()}catch(ce){ne=ce}l.call(ye.prototype)}}else{try{throw Error()}catch(ce){ne=ce}(ye=l())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&ne&&typeof ce.stack=="string")return[ce.stack,ne.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=_.DetermineComponentFrameRoot(),A=$[0],D=$[1];if(A&&D){var q=A.split(`
`),se=D.split(`
`);for(x=_=0;_<q.length&&!q[_].includes("DetermineComponentFrameRoot");)_++;for(;x<se.length&&!se[x].includes("DetermineComponentFrameRoot");)x++;if(_===q.length||x===se.length)for(_=q.length-1,x=se.length-1;1<=_&&0<=x&&q[_]!==se[x];)x--;for(;1<=_&&0<=x;_--,x--)if(q[_]!==se[x]){if(_!==1||x!==1)do if(_--,x--,0>x||q[_]!==se[x]){var de=`
`+q[_].replace(" at new "," at ");return l.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",l.displayName)),de}while(1<=_&&0<=x);break}}}finally{Av=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?vu(f):""}function TE(l,c){switch(l.tag){case 26:case 27:case 5:return vu(l.type);case 16:return vu("Lazy");case 13:return l.child!==c&&c!==null?vu("Suspense Fallback"):vu("Suspense");case 19:return vu("SuspenseList");case 0:case 15:return Pv(l.type,!1);case 11:return Pv(l.type.render,!1);case 1:return Pv(l.type,!0);case 31:return vu("Activity");default:return""}}function h2(l){try{var c="",f=null;do c+=TE(l,f),f=l,l=l.return;while(l);return c}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var Pm=Object.prototype.hasOwnProperty,Om=t.unstable_scheduleCallback,wa=t.unstable_cancelCallback,EE=t.unstable_shouldYield,CE=t.unstable_requestPaint,qs=t.unstable_now,IE=t.unstable_getCurrentPriorityLevel,d2=t.unstable_ImmediatePriority,p2=t.unstable_UserBlockingPriority,km=t.unstable_NormalPriority,hz=t.unstable_LowPriority,f2=t.unstable_IdlePriority,LE=t.log,AE=t.unstable_setDisableYieldValue,tp=null,Bs=null;function tl(l){if(typeof LE=="function"&&AE(l),Bs&&typeof Bs.setStrictMode=="function")try{Bs.setStrictMode(tp,l)}catch{}}var Hs=Math.clz32?Math.clz32:kE,PE=Math.log,OE=Math.LN2;function kE(l){return l>>>=0,l===0?32:31-(PE(l)/OE|0)|0}var Rm=256,Dm=262144,Nm=4194304;function _u(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function zm(l,c,f){var _=l.pendingLanes;if(_===0)return 0;var x=0,$=l.suspendedLanes,A=l.pingedLanes;l=l.warmLanes;var D=_&134217727;return D!==0?(_=D&~$,_!==0?x=_u(_):(A&=D,A!==0?x=_u(A):f||(f=D&~l,f!==0&&(x=_u(f))))):(D=_&~$,D!==0?x=_u(D):A!==0?x=_u(A):f||(f=_&~l,f!==0&&(x=_u(f)))),x===0?0:c!==0&&c!==x&&(c&$)===0&&($=x&-x,f=c&-c,$>=f||$===32&&(f&4194048)!==0)?c:x}function ip(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function RE(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ae(){var l=Nm;return Nm<<=1,(Nm&62914560)===0&&(Nm=4194304),l}function ri(l){for(var c=[],f=0;31>f;f++)c.push(l);return c}function Sa(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function rp(l,c,f,_,x,$){var A=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var D=l.entanglements,q=l.expirationTimes,se=l.hiddenUpdates;for(f=A&~f;0<f;){var de=31-Hs(f),ye=1<<de;D[de]=0,q[de]=-1;var ne=se[de];if(ne!==null)for(se[de]=null,de=0;de<ne.length;de++){var ce=ne[de];ce!==null&&(ce.lane&=-536870913)}f&=~ye}_!==0&&fn(l,_,0),$!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=$&~(A&~c))}function fn(l,c,f){l.pendingLanes|=c,l.suspendedLanes&=~c;var _=31-Hs(c);l.entangledLanes|=c,l.entanglements[_]=l.entanglements[_]|1073741824|f&261930}function sp(l,c){var f=l.entangledLanes|=c;for(l=l.entanglements;f;){var _=31-Hs(f),x=1<<_;x&c|l[_]&c&&(l[_]|=c),f&=~x}}function Fe(l,c){var f=c&-c;return f=(f&42)!==0?1:Xc(f),(f&(l.suspendedLanes|c))!==0?0:f}function Xc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ov(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ur(){var l=be.p;return l!==0?l:(l=window.event,l===void 0?32:U8(l.type))}function Qc(l,c){var f=be.p;try{return be.p=l,c()}finally{be.p=f}}var il=Math.random().toString(36).slice(2),mi="__reactFiber$"+il,ts="__reactProps$"+il,bu="__reactContainer$"+il,it="__reactEvents$"+il,DE="__reactListeners$"+il,m2="__reactHandles$"+il,y2="__reactResources$"+il,np="__reactMarker$"+il;function ap(l){delete l[mi],delete l[ts],delete l[it],delete l[DE],delete l[m2]}function Kc(l){var c=l[mi];if(c)return c;for(var f=l.parentNode;f;){if(c=f[bu]||f[mi]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(l=T8(l);l!==null;){if(f=l[mi])return f;l=T8(l)}return c}l=f,f=l.parentNode}return null}function rl(l){if(l=l[mi]||l[bu]){var c=l.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return l}return null}function ki(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(r(33))}function eh(l){var c=l[y2];return c||(c=l[y2]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function cr(l){l[np]=!0}var g2=new Set,v2={};function wu(l,c){th(l,c),th(l+"Capture",c)}function th(l,c){for(v2[l]=c,l=0;l<c.length;l++)g2.add(c[l])}var NE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ws={},_2={};function zE(l){return Pm.call(_2,l)?!0:Pm.call(Ws,l)?!1:NE.test(l)?_2[l]=!0:(Ws[l]=!0,!1)}function ih(l,c,f){if(zE(c))if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var _=c.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+f)}}function op(l,c,f){if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+f)}}function V(l,c,f,_){if(_===null)l.removeAttribute(f);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(c,f,""+_)}}function ie(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function xe(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(l,c,f){var _=Object.getOwnPropertyDescriptor(l.constructor.prototype,c);if(!l.hasOwnProperty(c)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var x=_.get,$=_.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return x.call(this)},set:function(A){f=""+A,$.call(this,A)}}),Object.defineProperty(l,c,{enumerable:_.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Pt(l){if(!l._valueTracker){var c=xe(l)?"checked":"value";l._valueTracker=Je(l,c,""+l[c])}}function $i(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var f=c.getValue(),_="";return l&&(_=xe(l)?l.checked?"true":"false":l.value),l=_,l!==f?(c.setValue(l),!0):!1}function Ri(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var qr=/[\n"\\]/g;function xa(l){return l.replace(qr,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function FE(l,c,f,_,x,$,A,D){l.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?l.type=A:l.removeAttribute("type"),c!=null?A==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+ie(c)):l.value!==""+ie(c)&&(l.value=""+ie(c)):A!=="submit"&&A!=="reset"||l.removeAttribute("value"),c!=null?VE(l,A,ie(c)):f!=null?VE(l,A,ie(f)):_!=null&&l.removeAttribute("value"),x==null&&$!=null&&(l.defaultChecked=!!$),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+ie(D):l.removeAttribute("name")}function dz(l,c,f,_,x,$,A,D){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.type=$),c!=null||f!=null){if(!($!=="submit"&&$!=="reset"||c!=null)){Pt(l);return}f=f!=null?""+ie(f):"",c=c!=null?""+ie(c):f,D||c===l.value||(l.value=c),l.defaultValue=c}_=_??x,_=typeof _!="function"&&typeof _!="symbol"&&!!_,l.checked=D?l.checked:!!_,l.defaultChecked=!!_,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.name=A),Pt(l)}function VE(l,c,f){c==="number"&&Ri(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function Fm(l,c,f,_){if(l=l.options,c){c={};for(var x=0;x<f.length;x++)c["$"+f[x]]=!0;for(f=0;f<l.length;f++)x=c.hasOwnProperty("$"+l[f].value),l[f].selected!==x&&(l[f].selected=x),x&&_&&(l[f].defaultSelected=!0)}else{for(f=""+ie(f),c=null,x=0;x<l.length;x++){if(l[x].value===f){l[x].selected=!0,_&&(l[x].defaultSelected=!0);return}c!==null||l[x].disabled||(c=l[x])}c!==null&&(c.selected=!0)}}function pz(l,c,f){if(c!=null&&(c=""+ie(c),c!==l.value&&(l.value=c),f==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=f!=null?""+ie(f):""}function fz(l,c,f,_){if(c==null){if(_!=null){if(f!=null)throw Error(r(92));if(ke(_)){if(1<_.length)throw Error(r(93));_=_[0]}f=_}f==null&&(f=""),c=f}f=ie(c),l.defaultValue=f,_=l.textContent,_===f&&_!==""&&_!==null&&(l.value=_),Pt(l)}function Vm(l,c){if(c){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=c;return}}l.textContent=c}var Sae=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mz(l,c,f){var _=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?_?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":_?l.setProperty(c,f):typeof f!="number"||f===0||Sae.has(c)?c==="float"?l.cssFloat=f:l[c]=(""+f).trim():l[c]=f+"px"}function yz(l,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(l=l.style,f!=null){for(var _ in f)!f.hasOwnProperty(_)||c!=null&&c.hasOwnProperty(_)||(_.indexOf("--")===0?l.setProperty(_,""):_==="float"?l.cssFloat="":l[_]="");for(var x in c)_=c[x],c.hasOwnProperty(x)&&f[x]!==_&&mz(l,x,_)}else for(var $ in c)c.hasOwnProperty($)&&mz(l,$,c[$])}function jE(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xae=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$ae=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function b2(l){return $ae.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Su(){}var UE=null;function GE(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var jm=null,Um=null;function gz(l){var c=rl(l);if(c&&(l=c.stateNode)){var f=l[ts]||null;e:switch(l=c.stateNode,c.type){case"input":if(FE(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+xa(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var _=f[c];if(_!==l&&_.form===l.form){var x=_[ts]||null;if(!x)throw Error(r(90));FE(_,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<f.length;c++)_=f[c],_.form===l.form&&$i(_)}break e;case"textarea":pz(l,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Fm(l,!!f.multiple,c,!1)}}}var qE=!1;function vz(l,c,f){if(qE)return l(c,f);qE=!0;try{var _=l(c);return _}finally{if(qE=!1,(jm!==null||Um!==null)&&(oS(),jm&&(c=jm,l=Um,Um=jm=null,gz(c),l)))for(c=0;c<l.length;c++)gz(l[c])}}function kv(l,c){var f=l.stateNode;if(f===null)return null;var _=f[ts]||null;if(_===null)return null;f=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var xu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BE=!1;if(xu)try{var Rv={};Object.defineProperty(Rv,"passive",{get:function(){BE=!0}}),window.addEventListener("test",Rv,Rv),window.removeEventListener("test",Rv,Rv)}catch{BE=!1}var rh=null,HE=null,w2=null;function _z(){if(w2)return w2;var l,c=HE,f=c.length,_,x="value"in rh?rh.value:rh.textContent,$=x.length;for(l=0;l<f&&c[l]===x[l];l++);var A=f-l;for(_=1;_<=A&&c[f-_]===x[$-_];_++);return w2=x.slice(l,1<_?1-_:void 0)}function S2(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function x2(){return!0}function bz(){return!1}function mn(l){function c(f,_,x,$,A){this._reactName=f,this._targetInst=x,this.type=_,this.nativeEvent=$,this.target=A,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(f=l[D],this[D]=f?f($):$[D]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?x2:bz,this.isPropagationStopped=bz,this}return y(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=x2)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=x2)},persist:function(){},isPersistent:x2}),c}var lp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$2=mn(lp),Dv=y({},lp,{view:0,detail:0}),Mae=mn(Dv),WE,ZE,Nv,M2=y({},Dv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JE,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Nv&&(Nv&&l.type==="mousemove"?(WE=l.screenX-Nv.screenX,ZE=l.screenY-Nv.screenY):ZE=WE=0,Nv=l),WE)},movementY:function(l){return"movementY"in l?l.movementY:ZE}}),wz=mn(M2),Tae=y({},M2,{dataTransfer:0}),Eae=mn(Tae),Cae=y({},Dv,{relatedTarget:0}),YE=mn(Cae),Iae=y({},lp,{animationName:0,elapsedTime:0,pseudoElement:0}),Lae=mn(Iae),Aae=y({},lp,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Pae=mn(Aae),Oae=y({},lp,{data:0}),Sz=mn(Oae),kae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nae(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Dae[l])?!!c[l]:!1}function JE(){return Nae}var zae=y({},Dv,{key:function(l){if(l.key){var c=kae[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=S2(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Rae[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JE,charCode:function(l){return l.type==="keypress"?S2(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?S2(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fae=mn(zae),Vae=y({},M2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xz=mn(Vae),jae=y({},Dv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JE}),Uae=mn(jae),Gae=y({},lp,{propertyName:0,elapsedTime:0,pseudoElement:0}),qae=mn(Gae),Bae=y({},M2,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Hae=mn(Bae),Wae=y({},lp,{newState:0,oldState:0}),Zae=mn(Wae),Yae=[9,13,27,32],XE=xu&&"CompositionEvent"in window,zv=null;xu&&"documentMode"in document&&(zv=document.documentMode);var Jae=xu&&"TextEvent"in window&&!zv,$z=xu&&(!XE||zv&&8<zv&&11>=zv),Mz=" ",Tz=!1;function Ez(l,c){switch(l){case"keyup":return Yae.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cz(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Gm=!1;function Xae(l,c){switch(l){case"compositionend":return Cz(c);case"keypress":return c.which!==32?null:(Tz=!0,Mz);case"textInput":return l=c.data,l===Mz&&Tz?null:l;default:return null}}function Qae(l,c){if(Gm)return l==="compositionend"||!XE&&Ez(l,c)?(l=_z(),w2=HE=rh=null,Gm=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return $z&&c.locale!=="ko"?null:c.data;default:return null}}var Kae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iz(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Kae[l.type]:c==="textarea"}function Lz(l,c,f,_){jm?Um?Um.push(_):Um=[_]:jm=_,c=fS(c,"onChange"),0<c.length&&(f=new $2("onChange","change",null,f,_),l.push({event:f,listeners:c}))}var Fv=null,Vv=null;function eoe(l){d8(l,0)}function T2(l){var c=ki(l);if($i(c))return l}function Az(l,c){if(l==="change")return c}var Pz=!1;if(xu){var QE;if(xu){var KE="oninput"in document;if(!KE){var Oz=document.createElement("div");Oz.setAttribute("oninput","return;"),KE=typeof Oz.oninput=="function"}QE=KE}else QE=!1;Pz=QE&&(!document.documentMode||9<document.documentMode)}function kz(){Fv&&(Fv.detachEvent("onpropertychange",Rz),Vv=Fv=null)}function Rz(l){if(l.propertyName==="value"&&T2(Vv)){var c=[];Lz(c,Vv,l,GE(l)),vz(eoe,c)}}function toe(l,c,f){l==="focusin"?(kz(),Fv=c,Vv=f,Fv.attachEvent("onpropertychange",Rz)):l==="focusout"&&kz()}function ioe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return T2(Vv)}function roe(l,c){if(l==="click")return T2(c)}function soe(l,c){if(l==="input"||l==="change")return T2(c)}function noe(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Zn=typeof Object.is=="function"?Object.is:noe;function jv(l,c){if(Zn(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var f=Object.keys(l),_=Object.keys(c);if(f.length!==_.length)return!1;for(_=0;_<f.length;_++){var x=f[_];if(!Pm.call(c,x)||!Zn(l[x],c[x]))return!1}return!0}function Dz(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Nz(l,c){var f=Dz(l);l=0;for(var _;f;){if(f.nodeType===3){if(_=l+f.textContent.length,l<=c&&_>=c)return{node:f,offset:c-l};l=_}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Dz(f)}}function zz(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?zz(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Fz(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=Ri(l.document);c instanceof l.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)l=c.contentWindow;else break;c=Ri(l.document)}return c}function eC(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var aoe=xu&&"documentMode"in document&&11>=document.documentMode,qm=null,tC=null,Uv=null,iC=!1;function Vz(l,c,f){var _=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;iC||qm==null||qm!==Ri(_)||(_=qm,"selectionStart"in _&&eC(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Uv&&jv(Uv,_)||(Uv=_,_=fS(tC,"onSelect"),0<_.length&&(c=new $2("onSelect","select",null,c,f),l.push({event:c,listeners:_}),c.target=qm)))}function up(l,c){var f={};return f[l.toLowerCase()]=c.toLowerCase(),f["Webkit"+l]="webkit"+c,f["Moz"+l]="moz"+c,f}var Bm={animationend:up("Animation","AnimationEnd"),animationiteration:up("Animation","AnimationIteration"),animationstart:up("Animation","AnimationStart"),transitionrun:up("Transition","TransitionRun"),transitionstart:up("Transition","TransitionStart"),transitioncancel:up("Transition","TransitionCancel"),transitionend:up("Transition","TransitionEnd")},rC={},jz={};xu&&(jz=document.createElement("div").style,"AnimationEvent"in window||(delete Bm.animationend.animation,delete Bm.animationiteration.animation,delete Bm.animationstart.animation),"TransitionEvent"in window||delete Bm.transitionend.transition);function cp(l){if(rC[l])return rC[l];if(!Bm[l])return l;var c=Bm[l],f;for(f in c)if(c.hasOwnProperty(f)&&f in jz)return rC[l]=c[f];return l}var Uz=cp("animationend"),Gz=cp("animationiteration"),qz=cp("animationstart"),ooe=cp("transitionrun"),loe=cp("transitionstart"),uoe=cp("transitioncancel"),Bz=cp("transitionend"),Hz=new Map,sC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sC.push("scrollEnd");function co(l,c){Hz.set(l,c),wu(c,[l])}var E2=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},$a=[],Hm=0,nC=0;function C2(){for(var l=Hm,c=nC=Hm=0;c<l;){var f=$a[c];$a[c++]=null;var _=$a[c];$a[c++]=null;var x=$a[c];$a[c++]=null;var $=$a[c];if($a[c++]=null,_!==null&&x!==null){var A=_.pending;A===null?x.next=x:(x.next=A.next,A.next=x),_.pending=x}$!==0&&Wz(f,x,$)}}function I2(l,c,f,_){$a[Hm++]=l,$a[Hm++]=c,$a[Hm++]=f,$a[Hm++]=_,nC|=_,l.lanes|=_,l=l.alternate,l!==null&&(l.lanes|=_)}function aC(l,c,f,_){return I2(l,c,f,_),L2(l)}function hp(l,c){return I2(l,null,null,c),L2(l)}function Wz(l,c,f){l.lanes|=f;var _=l.alternate;_!==null&&(_.lanes|=f);for(var x=!1,$=l.return;$!==null;)$.childLanes|=f,_=$.alternate,_!==null&&(_.childLanes|=f),$.tag===22&&(l=$.stateNode,l===null||l._visibility&1||(x=!0)),l=$,$=$.return;return l.tag===3?($=l.stateNode,x&&c!==null&&(x=31-Hs(f),l=$.hiddenUpdates,_=l[x],_===null?l[x]=[c]:_.push(c),c.lane=f|536870912),$):null}function L2(l){if(50<c_)throw c_=0,mI=null,Error(r(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var Wm={};function coe(l,c,f,_){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(l,c,f,_){return new coe(l,c,f,_)}function oC(l){return l=l.prototype,!(!l||!l.isReactComponent)}function $u(l,c){var f=l.alternate;return f===null?(f=Yn(l.tag,c,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=c,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,c=l.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Zz(l,c){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,c=f.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function A2(l,c,f,_,x,$){var A=0;if(_=l,typeof l=="function")oC(l)&&(A=1);else if(typeof l=="string")A=mle(l,f,Pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=Yn(31,f,c,x),l.elementType=B,l.lanes=$,l;case S:return dp(f.children,x,$,c);case M:A=8,x|=24;break;case T:return l=Yn(12,f,c,x|2),l.elementType=T,l.lanes=$,l;case R:return l=Yn(13,f,c,x),l.elementType=R,l.lanes=$,l;case z:return l=Yn(19,f,c,x),l.elementType=z,l.lanes=$,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case L:A=10;break e;case I:A=9;break e;case O:A=11;break e;case j:A=14;break e;case U:A=16,_=null;break e}A=29,f=Error(r(130,l===null?"null":typeof l,"")),_=null}return c=Yn(A,f,c,x),c.elementType=l,c.type=_,c.lanes=$,c}function dp(l,c,f,_){return l=Yn(7,l,_,c),l.lanes=f,l}function lC(l,c,f){return l=Yn(6,l,null,c),l.lanes=f,l}function Yz(l){var c=Yn(18,null,null,0);return c.stateNode=l,c}function uC(l,c,f){return c=Yn(4,l.children!==null?l.children:[],l.key,c),c.lanes=f,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var Jz=new WeakMap;function Ma(l,c){if(typeof l=="object"&&l!==null){var f=Jz.get(l);return f!==void 0?f:(c={value:l,source:c,stack:h2(c)},Jz.set(l,c),c)}return{value:l,source:c,stack:h2(c)}}var Zm=[],Ym=0,P2=null,Gv=0,Ta=[],Ea=0,sh=null,sl=1,nl="";function Mu(l,c){Zm[Ym++]=Gv,Zm[Ym++]=P2,P2=l,Gv=c}function Xz(l,c,f){Ta[Ea++]=sl,Ta[Ea++]=nl,Ta[Ea++]=sh,sh=l;var _=sl;l=nl;var x=32-Hs(_)-1;_&=~(1<<x),f+=1;var $=32-Hs(c)+x;if(30<$){var A=x-x%5;$=(_&(1<<A)-1).toString(32),_>>=A,x-=A,sl=1<<32-Hs(c)+x|f<<x|_,nl=$+l}else sl=1<<$|f<<x|_,nl=l}function cC(l){l.return!==null&&(Mu(l,1),Xz(l,1,0))}function hC(l){for(;l===P2;)P2=Zm[--Ym],Zm[Ym]=null,Gv=Zm[--Ym],Zm[Ym]=null;for(;l===sh;)sh=Ta[--Ea],Ta[Ea]=null,nl=Ta[--Ea],Ta[Ea]=null,sl=Ta[--Ea],Ta[Ea]=null}function Qz(l,c){Ta[Ea++]=sl,Ta[Ea++]=nl,Ta[Ea++]=sh,sl=c.id,nl=c.overflow,sh=l}var is=null,Mi=null,At=!1,nh=null,Ca=!1,dC=Error(r(519));function ah(l){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qv(Ma(c,l)),dC}function Kz(l){var c=l.stateNode,f=l.type,_=l.memoizedProps;switch(c[mi]=l,c[ts]=_,f){case"dialog":xt("cancel",c),xt("close",c);break;case"iframe":case"object":case"embed":xt("load",c);break;case"video":case"audio":for(f=0;f<d_.length;f++)xt(d_[f],c);break;case"source":xt("error",c);break;case"img":case"image":case"link":xt("error",c),xt("load",c);break;case"details":xt("toggle",c);break;case"input":xt("invalid",c),dz(c,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":xt("invalid",c);break;case"textarea":xt("invalid",c),fz(c,_.value,_.defaultValue,_.children)}f=_.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||_.suppressHydrationWarning===!0||y8(c.textContent,f)?(_.popover!=null&&(xt("beforetoggle",c),xt("toggle",c)),_.onScroll!=null&&xt("scroll",c),_.onScrollEnd!=null&&xt("scrollend",c),_.onClick!=null&&(c.onclick=Su),c=!0):c=!1,c||ah(l,!0)}function e6(l){for(is=l.return;is;)switch(is.tag){case 5:case 31:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:is=is.return}}function Jm(l){if(l!==is)return!1;if(!At)return e6(l),At=!0,!1;var c=l.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||LI(l.type,l.memoizedProps)),f=!f),f&&Mi&&ah(l),e6(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Mi=M8(l)}else if(c===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Mi=M8(l)}else c===27?(c=Mi,bh(l.type)?(l=RI,RI=null,Mi=l):Mi=c):Mi=is?La(l.stateNode.nextSibling):null;return!0}function pp(){Mi=is=null,At=!1}function pC(){var l=nh;return l!==null&&(_n===null?_n=l:_n.push.apply(_n,l),nh=null),l}function qv(l){nh===null?nh=[l]:nh.push(l)}var fC=W(null),fp=null,Tu=null;function oh(l,c,f){Te(fC,c._currentValue),c._currentValue=f}function Eu(l){l._currentValue=fC.current,pe(fC)}function mC(l,c,f){for(;l!==null;){var _=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),l===f)break;l=l.return}}function yC(l,c,f,_){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var $=x.dependencies;if($!==null){var A=x.child;$=$.firstContext;e:for(;$!==null;){var D=$;$=x;for(var q=0;q<c.length;q++)if(D.context===c[q]){$.lanes|=f,D=$.alternate,D!==null&&(D.lanes|=f),mC($.return,f,l),_||(A=null);break e}$=D.next}}else if(x.tag===18){if(A=x.return,A===null)throw Error(r(341));A.lanes|=f,$=A.alternate,$!==null&&($.lanes|=f),mC(A,f,l),A=null}else A=x.child;if(A!==null)A.return=x;else for(A=x;A!==null;){if(A===l){A=null;break}if(x=A.sibling,x!==null){x.return=A.return,A=x;break}A=A.return}x=A}}function Xm(l,c,f,_){l=null;for(var x=c,$=!1;x!==null;){if(!$){if((x.flags&524288)!==0)$=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var A=x.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var D=x.type;Zn(x.pendingProps.value,A.value)||(l!==null?l.push(D):l=[D])}}else if(x===Et.current){if(A=x.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(g_):l=[g_])}x=x.return}l!==null&&yC(c,l,f,_),c.flags|=262144}function O2(l){for(l=l.firstContext;l!==null;){if(!Zn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function mp(l){fp=l,Tu=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function rs(l){return t6(fp,l)}function k2(l,c){return fp===null&&mp(l),t6(l,c)}function t6(l,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Tu===null){if(l===null)throw Error(r(308));Tu=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Tu=Tu.next=c;return f}var hoe=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(f,_){l.push(_)}};this.abort=function(){c.aborted=!0,l.forEach(function(f){return f()})}},doe=t.unstable_scheduleCallback,poe=t.unstable_NormalPriority,wr={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gC(){return{controller:new hoe,data:new Map,refCount:0}}function Bv(l){l.refCount--,l.refCount===0&&doe(poe,function(){l.controller.abort()})}var Hv=null,vC=0,Qm=0,Km=null;function foe(l,c){if(Hv===null){var f=Hv=[];vC=0,Qm=wI(),Km={status:"pending",value:void 0,then:function(_){f.push(_)}}}return vC++,c.then(i6,i6),c}function i6(){if(--vC===0&&Hv!==null){Km!==null&&(Km.status="fulfilled");var l=Hv;Hv=null,Qm=0,Km=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function moe(l,c){var f=[],_={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return l.then(function(){_.status="fulfilled",_.value=c;for(var x=0;x<f.length;x++)(0,f[x])(c)},function(x){for(_.status="rejected",_.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),_}var r6=te.S;te.S=function(l,c){VF=qs(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&foe(l,c),r6!==null&&r6(l,c)};var yp=W(null);function _C(){var l=yp.current;return l!==null?l:hi.pooledCache}function R2(l,c){c===null?Te(yp,yp.current):Te(yp,c.pool)}function s6(){var l=_C();return l===null?null:{parent:wr._currentValue,pool:l}}var ey=Error(r(460)),bC=Error(r(474)),D2=Error(r(542)),N2={then:function(){}};function n6(l){return l=l.status,l==="fulfilled"||l==="rejected"}function a6(l,c,f){switch(f=l[f],f===void 0?l.push(c):f!==c&&(c.then(Su,Su),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l6(l),l;default:if(typeof c.status=="string")c.then(Su,Su);else{if(l=hi,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=c,l.status="pending",l.then(function(_){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=_}},function(_){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=_}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l6(l),l}throw vp=c,ey}}function gp(l){try{var c=l._init;return c(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(vp=f,ey):f}}var vp=null;function o6(){if(vp===null)throw Error(r(459));var l=vp;return vp=null,l}function l6(l){if(l===ey||l===D2)throw Error(r(483))}var ty=null,Wv=0;function z2(l){var c=Wv;return Wv+=1,ty===null&&(ty=[]),a6(ty,l,c)}function Zv(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function F2(l,c){throw c.$$typeof===v?Error(r(525)):(l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function u6(l){function c(ee,Y){if(l){var re=ee.deletions;re===null?(ee.deletions=[Y],ee.flags|=16):re.push(Y)}}function f(ee,Y){if(!l)return null;for(;Y!==null;)c(ee,Y),Y=Y.sibling;return null}function _(ee){for(var Y=new Map;ee!==null;)ee.key!==null?Y.set(ee.key,ee):Y.set(ee.index,ee),ee=ee.sibling;return Y}function x(ee,Y){return ee=$u(ee,Y),ee.index=0,ee.sibling=null,ee}function $(ee,Y,re){return ee.index=re,l?(re=ee.alternate,re!==null?(re=re.index,re<Y?(ee.flags|=67108866,Y):re):(ee.flags|=67108866,Y)):(ee.flags|=1048576,Y)}function A(ee){return l&&ee.alternate===null&&(ee.flags|=67108866),ee}function D(ee,Y,re,fe){return Y===null||Y.tag!==6?(Y=lC(re,ee.mode,fe),Y.return=ee,Y):(Y=x(Y,re),Y.return=ee,Y)}function q(ee,Y,re,fe){var Ze=re.type;return Ze===S?de(ee,Y,re.props.children,fe,re.key):Y!==null&&(Y.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===U&&gp(Ze)===Y.type)?(Y=x(Y,re.props),Zv(Y,re),Y.return=ee,Y):(Y=A2(re.type,re.key,re.props,null,ee.mode,fe),Zv(Y,re),Y.return=ee,Y)}function se(ee,Y,re,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=uC(re,ee.mode,fe),Y.return=ee,Y):(Y=x(Y,re.children||[]),Y.return=ee,Y)}function de(ee,Y,re,fe,Ze){return Y===null||Y.tag!==7?(Y=dp(re,ee.mode,fe,Ze),Y.return=ee,Y):(Y=x(Y,re),Y.return=ee,Y)}function ye(ee,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=lC(""+Y,ee.mode,re),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return re=A2(Y.type,Y.key,Y.props,null,ee.mode,re),Zv(re,Y),re.return=ee,re;case w:return Y=uC(Y,ee.mode,re),Y.return=ee,Y;case U:return Y=gp(Y),ye(ee,Y,re)}if(ke(Y)||ue(Y))return Y=dp(Y,ee.mode,re,null),Y.return=ee,Y;if(typeof Y.then=="function")return ye(ee,z2(Y),re);if(Y.$$typeof===L)return ye(ee,k2(ee,Y),re);F2(ee,Y)}return null}function ne(ee,Y,re,fe){var Ze=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ze!==null?null:D(ee,Y,""+re,fe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return re.key===Ze?q(ee,Y,re,fe):null;case w:return re.key===Ze?se(ee,Y,re,fe):null;case U:return re=gp(re),ne(ee,Y,re,fe)}if(ke(re)||ue(re))return Ze!==null?null:de(ee,Y,re,fe,null);if(typeof re.then=="function")return ne(ee,Y,z2(re),fe);if(re.$$typeof===L)return ne(ee,Y,k2(ee,re),fe);F2(ee,re)}return null}function ce(ee,Y,re,fe,Ze){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return ee=ee.get(re)||null,D(Y,ee,""+fe,Ze);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return ee=ee.get(fe.key===null?re:fe.key)||null,q(Y,ee,fe,Ze);case w:return ee=ee.get(fe.key===null?re:fe.key)||null,se(Y,ee,fe,Ze);case U:return fe=gp(fe),ce(ee,Y,re,fe,Ze)}if(ke(fe)||ue(fe))return ee=ee.get(re)||null,de(Y,ee,fe,Ze,null);if(typeof fe.then=="function")return ce(ee,Y,re,z2(fe),Ze);if(fe.$$typeof===L)return ce(ee,Y,re,k2(Y,fe),Ze);F2(Y,fe)}return null}function ze(ee,Y,re,fe){for(var Ze=null,zt=null,Ue=Y,dt=Y=0,It=null;Ue!==null&&dt<re.length;dt++){Ue.index>dt?(It=Ue,Ue=null):It=Ue.sibling;var Ft=ne(ee,Ue,re[dt],fe);if(Ft===null){Ue===null&&(Ue=It);break}l&&Ue&&Ft.alternate===null&&c(ee,Ue),Y=$(Ft,Y,dt),zt===null?Ze=Ft:zt.sibling=Ft,zt=Ft,Ue=It}if(dt===re.length)return f(ee,Ue),At&&Mu(ee,dt),Ze;if(Ue===null){for(;dt<re.length;dt++)Ue=ye(ee,re[dt],fe),Ue!==null&&(Y=$(Ue,Y,dt),zt===null?Ze=Ue:zt.sibling=Ue,zt=Ue);return At&&Mu(ee,dt),Ze}for(Ue=_(Ue);dt<re.length;dt++)It=ce(Ue,ee,dt,re[dt],fe),It!==null&&(l&&It.alternate!==null&&Ue.delete(It.key===null?dt:It.key),Y=$(It,Y,dt),zt===null?Ze=It:zt.sibling=It,zt=It);return l&&Ue.forEach(function(Mh){return c(ee,Mh)}),At&&Mu(ee,dt),Ze}function Ke(ee,Y,re,fe){if(re==null)throw Error(r(151));for(var Ze=null,zt=null,Ue=Y,dt=Y=0,It=null,Ft=re.next();Ue!==null&&!Ft.done;dt++,Ft=re.next()){Ue.index>dt?(It=Ue,Ue=null):It=Ue.sibling;var Mh=ne(ee,Ue,Ft.value,fe);if(Mh===null){Ue===null&&(Ue=It);break}l&&Ue&&Mh.alternate===null&&c(ee,Ue),Y=$(Mh,Y,dt),zt===null?Ze=Mh:zt.sibling=Mh,zt=Mh,Ue=It}if(Ft.done)return f(ee,Ue),At&&Mu(ee,dt),Ze;if(Ue===null){for(;!Ft.done;dt++,Ft=re.next())Ft=ye(ee,Ft.value,fe),Ft!==null&&(Y=$(Ft,Y,dt),zt===null?Ze=Ft:zt.sibling=Ft,zt=Ft);return At&&Mu(ee,dt),Ze}for(Ue=_(Ue);!Ft.done;dt++,Ft=re.next())Ft=ce(Ue,ee,dt,Ft.value,fe),Ft!==null&&(l&&Ft.alternate!==null&&Ue.delete(Ft.key===null?dt:Ft.key),Y=$(Ft,Y,dt),zt===null?Ze=Ft:zt.sibling=Ft,zt=Ft);return l&&Ue.forEach(function(Tle){return c(ee,Tle)}),At&&Mu(ee,dt),Ze}function ai(ee,Y,re,fe){if(typeof re=="object"&&re!==null&&re.type===S&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case b:e:{for(var Ze=re.key;Y!==null;){if(Y.key===Ze){if(Ze=re.type,Ze===S){if(Y.tag===7){f(ee,Y.sibling),fe=x(Y,re.props.children),fe.return=ee,ee=fe;break e}}else if(Y.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===U&&gp(Ze)===Y.type){f(ee,Y.sibling),fe=x(Y,re.props),Zv(fe,re),fe.return=ee,ee=fe;break e}f(ee,Y);break}else c(ee,Y);Y=Y.sibling}re.type===S?(fe=dp(re.props.children,ee.mode,fe,re.key),fe.return=ee,ee=fe):(fe=A2(re.type,re.key,re.props,null,ee.mode,fe),Zv(fe,re),fe.return=ee,ee=fe)}return A(ee);case w:e:{for(Ze=re.key;Y!==null;){if(Y.key===Ze)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){f(ee,Y.sibling),fe=x(Y,re.children||[]),fe.return=ee,ee=fe;break e}else{f(ee,Y);break}else c(ee,Y);Y=Y.sibling}fe=uC(re,ee.mode,fe),fe.return=ee,ee=fe}return A(ee);case U:return re=gp(re),ai(ee,Y,re,fe)}if(ke(re))return ze(ee,Y,re,fe);if(ue(re)){if(Ze=ue(re),typeof Ze!="function")throw Error(r(150));return re=Ze.call(re),Ke(ee,Y,re,fe)}if(typeof re.then=="function")return ai(ee,Y,z2(re),fe);if(re.$$typeof===L)return ai(ee,Y,k2(ee,re),fe);F2(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Y!==null&&Y.tag===6?(f(ee,Y.sibling),fe=x(Y,re),fe.return=ee,ee=fe):(f(ee,Y),fe=lC(re,ee.mode,fe),fe.return=ee,ee=fe),A(ee)):f(ee,Y)}return function(ee,Y,re,fe){try{Wv=0;var Ze=ai(ee,Y,re,fe);return ty=null,Ze}catch(Ue){if(Ue===ey||Ue===D2)throw Ue;var zt=Yn(29,Ue,null,ee.mode);return zt.lanes=fe,zt.return=ee,zt}finally{}}}var _p=u6(!0),c6=u6(!1),lh=!1;function wC(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function SC(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function uh(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ch(l,c,f){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(qt&2)!==0){var x=_.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),_.pending=c,c=L2(l),Wz(l,null,f),c}return I2(l,_,c,f),L2(l)}function Yv(l,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var _=c.lanes;_&=l.pendingLanes,f|=_,c.lanes=f,sp(l,f)}}function xC(l,c){var f=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,f===_)){var x=null,$=null;if(f=f.firstBaseUpdate,f!==null){do{var A={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};$===null?x=$=A:$=$.next=A,f=f.next}while(f!==null);$===null?x=$=c:$=$.next=c}else x=$=c;f={baseState:_.baseState,firstBaseUpdate:x,lastBaseUpdate:$,shared:_.shared,callbacks:_.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=c}var $C=!1;function Jv(){if($C){var l=Km;if(l!==null)throw l}}function Xv(l,c,f,_){$C=!1;var x=l.updateQueue;lh=!1;var $=x.firstBaseUpdate,A=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var q=D,se=q.next;q.next=null,A===null?$=se:A.next=se,A=q;var de=l.alternate;de!==null&&(de=de.updateQueue,D=de.lastBaseUpdate,D!==A&&(D===null?de.firstBaseUpdate=se:D.next=se,de.lastBaseUpdate=q))}if($!==null){var ye=x.baseState;A=0,de=se=q=null,D=$;do{var ne=D.lane&-536870913,ce=ne!==D.lane;if(ce?(Ct&ne)===ne:(_&ne)===ne){ne!==0&&ne===Qm&&($C=!0),de!==null&&(de=de.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ze=l,Ke=D;ne=c;var ai=f;switch(Ke.tag){case 1:if(ze=Ke.payload,typeof ze=="function"){ye=ze.call(ai,ye,ne);break e}ye=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ke.payload,ne=typeof ze=="function"?ze.call(ai,ye,ne):ze,ne==null)break e;ye=y({},ye,ne);break e;case 2:lh=!0}}ne=D.callback,ne!==null&&(l.flags|=64,ce&&(l.flags|=8192),ce=x.callbacks,ce===null?x.callbacks=[ne]:ce.push(ne))}else ce={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},de===null?(se=de=ce,q=ye):de=de.next=ce,A|=ne;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,x.lastBaseUpdate=ce,x.shared.pending=null}}while(!0);de===null&&(q=ye),x.baseState=q,x.firstBaseUpdate=se,x.lastBaseUpdate=de,$===null&&(x.shared.lanes=0),mh|=A,l.lanes=A,l.memoizedState=ye}}function h6(l,c){if(typeof l!="function")throw Error(r(191,l));l.call(c)}function d6(l,c){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)h6(f[l],c)}var iy=W(null),V2=W(0);function p6(l,c){l=Du,Te(V2,l),Te(iy,c),Du=l|c.baseLanes}function MC(){Te(V2,Du),Te(iy,iy.current)}function TC(){Du=V2.current,pe(iy),pe(V2)}var Jn=W(null),Ia=null;function hh(l){var c=l.alternate;Te(hr,hr.current&1),Te(Jn,l),Ia===null&&(c===null||iy.current!==null||c.memoizedState!==null)&&(Ia=l)}function EC(l){Te(hr,hr.current),Te(Jn,l),Ia===null&&(Ia=l)}function f6(l){l.tag===22?(Te(hr,hr.current),Te(Jn,l),Ia===null&&(Ia=l)):dh()}function dh(){Te(hr,hr.current),Te(Jn,Jn.current)}function Xn(l){pe(Jn),Ia===l&&(Ia=null),pe(hr)}var hr=W(0);function j2(l){for(var c=l;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||OI(f)||kI(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Cu=0,ht=null,si=null,Sr=null,U2=!1,ry=!1,bp=!1,G2=0,Qv=0,sy=null,yoe=0;function Zi(){throw Error(r(321))}function CC(l,c){if(c===null)return!1;for(var f=0;f<c.length&&f<l.length;f++)if(!Zn(l[f],c[f]))return!1;return!0}function IC(l,c,f,_,x,$){return Cu=$,ht=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,te.H=l===null||l.memoizedState===null?X6:qC,bp=!1,$=f(_,x),bp=!1,ry&&($=y6(c,f,_,x)),m6(l),$}function m6(l){te.H=t_;var c=si!==null&&si.next!==null;if(Cu=0,Sr=si=ht=null,U2=!1,Qv=0,sy=null,c)throw Error(r(300));l===null||xr||(l=l.dependencies,l!==null&&O2(l)&&(xr=!0))}function y6(l,c,f,_){ht=l;var x=0;do{if(ry&&(sy=null),Qv=0,ry=!1,25<=x)throw Error(r(301));if(x+=1,Sr=si=null,l.updateQueue!=null){var $=l.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}te.H=Q6,$=c(f,_)}while(ry);return $}function goe(){var l=te.H,c=l.useState()[0];return c=typeof c.then=="function"?Kv(c):c,l=l.useState()[0],(si!==null?si.memoizedState:null)!==l&&(ht.flags|=1024),c}function LC(){var l=G2!==0;return G2=0,l}function AC(l,c,f){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~f}function PC(l){if(U2){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}U2=!1}Cu=0,Sr=si=ht=null,ry=!1,Qv=G2=0,sy=null}function Zs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?ht.memoizedState=Sr=l:Sr=Sr.next=l,Sr}function dr(){if(si===null){var l=ht.alternate;l=l!==null?l.memoizedState:null}else l=si.next;var c=Sr===null?ht.memoizedState:Sr.next;if(c!==null)Sr=c,si=l;else{if(l===null)throw ht.alternate===null?Error(r(467)):Error(r(310));si=l,l={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},Sr===null?ht.memoizedState=Sr=l:Sr=Sr.next=l}return Sr}function q2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kv(l){var c=Qv;return Qv+=1,sy===null&&(sy=[]),l=a6(sy,l,c),c=ht,(Sr===null?c.memoizedState:Sr.next)===null&&(c=c.alternate,te.H=c===null||c.memoizedState===null?X6:qC),l}function B2(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Kv(l);if(l.$$typeof===L)return rs(l)}throw Error(r(438,String(l)))}function OC(l){var c=null,f=ht.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var _=ht.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(c={data:_.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=q2(),ht.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(l),_=0;_<l;_++)f[_]=Q;return c.index++,f}function Iu(l,c){return typeof c=="function"?c(l):c}function H2(l){var c=dr();return kC(c,si,l)}function kC(l,c,f){var _=l.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=f;var x=l.baseQueue,$=_.pending;if($!==null){if(x!==null){var A=x.next;x.next=$.next,$.next=A}c.baseQueue=x=$,_.pending=null}if($=l.baseState,x===null)l.memoizedState=$;else{c=x.next;var D=A=null,q=null,se=c,de=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(Ct&ye)===ye:(Cu&ye)===ye){var ne=se.revertLane;if(ne===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===Qm&&(de=!0);else if((Cu&ne)===ne){se=se.next,ne===Qm&&(de=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?(D=q=ye,A=$):q=q.next=ye,ht.lanes|=ne,mh|=ne;ye=se.action,bp&&f($,ye),$=se.hasEagerState?se.eagerState:f($,ye)}else ne={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?(D=q=ne,A=$):q=q.next=ne,ht.lanes|=ye,mh|=ye;se=se.next}while(se!==null&&se!==c);if(q===null?A=$:q.next=D,!Zn($,l.memoizedState)&&(xr=!0,de&&(f=Km,f!==null)))throw f;l.memoizedState=$,l.baseState=A,l.baseQueue=q,_.lastRenderedState=$}return x===null&&(_.lanes=0),[l.memoizedState,_.dispatch]}function RC(l){var c=dr(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var _=f.dispatch,x=f.pending,$=c.memoizedState;if(x!==null){f.pending=null;var A=x=x.next;do $=l($,A.action),A=A.next;while(A!==x);Zn($,c.memoizedState)||(xr=!0),c.memoizedState=$,c.baseQueue===null&&(c.baseState=$),f.lastRenderedState=$}return[$,_]}function g6(l,c,f){var _=ht,x=dr(),$=At;if($){if(f===void 0)throw Error(r(407));f=f()}else f=c();var A=!Zn((si||x).memoizedState,f);if(A&&(x.memoizedState=f,xr=!0),x=x.queue,zC(b6.bind(null,_,x,l),[l]),x.getSnapshot!==c||A||Sr!==null&&Sr.memoizedState.tag&1){if(_.flags|=2048,ny(9,{destroy:void 0},_6.bind(null,_,x,f,c),null),hi===null)throw Error(r(349));$||(Cu&127)!==0||v6(_,c,f)}return f}function v6(l,c,f){l.flags|=16384,l={getSnapshot:c,value:f},c=ht.updateQueue,c===null?(c=q2(),ht.updateQueue=c,c.stores=[l]):(f=c.stores,f===null?c.stores=[l]:f.push(l))}function _6(l,c,f,_){c.value=f,c.getSnapshot=_,w6(c)&&S6(l)}function b6(l,c,f){return f(function(){w6(c)&&S6(l)})}function w6(l){var c=l.getSnapshot;l=l.value;try{var f=c();return!Zn(l,f)}catch{return!0}}function S6(l){var c=hp(l,2);c!==null&&bn(c,l,2)}function DC(l){var c=Zs();if(typeof l=="function"){var f=l;if(l=f(),bp){tl(!0);try{f()}finally{tl(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:l},c}function x6(l,c,f,_){return l.baseState=f,kC(l,si,typeof _=="function"?_:Iu)}function voe(l,c,f,_,x){if(Y2(l))throw Error(r(485));if(l=c.action,l!==null){var $={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){$.listeners.push(A)}};te.T!==null?f(!0):$.isTransition=!1,_($),f=c.pending,f===null?($.next=c.pending=$,$6(c,$)):($.next=f.next,c.pending=f.next=$)}}function $6(l,c){var f=c.action,_=c.payload,x=l.state;if(c.isTransition){var $=te.T,A={};te.T=A;try{var D=f(x,_),q=te.S;q!==null&&q(A,D),M6(l,c,D)}catch(se){NC(l,c,se)}finally{$!==null&&A.types!==null&&($.types=A.types),te.T=$}}else try{$=f(x,_),M6(l,c,$)}catch(se){NC(l,c,se)}}function M6(l,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(_){T6(l,c,_)},function(_){return NC(l,c,_)}):T6(l,c,f)}function T6(l,c,f){c.status="fulfilled",c.value=f,E6(c),l.state=f,c=l.pending,c!==null&&(f=c.next,f===c?l.pending=null:(f=f.next,c.next=f,$6(l,f)))}function NC(l,c,f){var _=l.pending;if(l.pending=null,_!==null){_=_.next;do c.status="rejected",c.reason=f,E6(c),c=c.next;while(c!==_)}l.action=null}function E6(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function C6(l,c){return c}function I6(l,c){if(At){var f=hi.formState;if(f!==null){e:{var _=ht;if(At){if(Mi){t:{for(var x=Mi,$=Ca;x.nodeType!==8;){if(!$){x=null;break t}if(x=La(x.nextSibling),x===null){x=null;break t}}$=x.data,x=$==="F!"||$==="F"?x:null}if(x){Mi=La(x.nextSibling),_=x.data==="F!";break e}}ah(_)}_=!1}_&&(c=f[0])}}return f=Zs(),f.memoizedState=f.baseState=c,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C6,lastRenderedState:c},f.queue=_,f=Z6.bind(null,ht,_),_.dispatch=f,_=DC(!1),$=GC.bind(null,ht,!1,_.queue),_=Zs(),x={state:c,dispatch:null,action:l,pending:null},_.queue=x,f=voe.bind(null,ht,x,$,f),x.dispatch=f,_.memoizedState=l,[c,f,!1]}function L6(l){var c=dr();return A6(c,si,l)}function A6(l,c,f){if(c=kC(l,c,C6)[0],l=H2(Iu)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var _=Kv(c)}catch(A){throw A===ey?D2:A}else _=c;c=dr();var x=c.queue,$=x.dispatch;return f!==c.memoizedState&&(ht.flags|=2048,ny(9,{destroy:void 0},_oe.bind(null,x,f),null)),[_,$,l]}function _oe(l,c){l.action=c}function P6(l){var c=dr(),f=si;if(f!==null)return A6(c,f,l);dr(),c=c.memoizedState,f=dr();var _=f.queue.dispatch;return f.memoizedState=l,[c,_,!1]}function ny(l,c,f,_){return l={tag:l,create:f,deps:_,inst:c,next:null},c=ht.updateQueue,c===null&&(c=q2(),ht.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=l.next=l:(_=f.next,f.next=l,l.next=_,c.lastEffect=l),l}function O6(){return dr().memoizedState}function W2(l,c,f,_){var x=Zs();ht.flags|=l,x.memoizedState=ny(1|c,{destroy:void 0},f,_===void 0?null:_)}function Z2(l,c,f,_){var x=dr();_=_===void 0?null:_;var $=x.memoizedState.inst;si!==null&&_!==null&&CC(_,si.memoizedState.deps)?x.memoizedState=ny(c,$,f,_):(ht.flags|=l,x.memoizedState=ny(1|c,$,f,_))}function k6(l,c){W2(8390656,8,l,c)}function zC(l,c){Z2(2048,8,l,c)}function boe(l){ht.flags|=4;var c=ht.updateQueue;if(c===null)c=q2(),ht.updateQueue=c,c.events=[l];else{var f=c.events;f===null?c.events=[l]:f.push(l)}}function R6(l){var c=dr().memoizedState;return boe({ref:c,nextImpl:l}),function(){if((qt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function D6(l,c){return Z2(4,2,l,c)}function N6(l,c){return Z2(4,4,l,c)}function z6(l,c){if(typeof c=="function"){l=l();var f=c(l);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function F6(l,c,f){f=f!=null?f.concat([l]):null,Z2(4,4,z6.bind(null,c,l),f)}function FC(){}function V6(l,c){var f=dr();c=c===void 0?null:c;var _=f.memoizedState;return c!==null&&CC(c,_[1])?_[0]:(f.memoizedState=[l,c],l)}function j6(l,c){var f=dr();c=c===void 0?null:c;var _=f.memoizedState;if(c!==null&&CC(c,_[1]))return _[0];if(_=l(),bp){tl(!0);try{l()}finally{tl(!1)}}return f.memoizedState=[_,c],_}function VC(l,c,f){return f===void 0||(Cu&1073741824)!==0&&(Ct&261930)===0?l.memoizedState=c:(l.memoizedState=f,l=UF(),ht.lanes|=l,mh|=l,f)}function U6(l,c,f,_){return Zn(f,c)?f:iy.current!==null?(l=VC(l,f,_),Zn(l,c)||(xr=!0),l):(Cu&42)===0||(Cu&1073741824)!==0&&(Ct&261930)===0?(xr=!0,l.memoizedState=f):(l=UF(),ht.lanes|=l,mh|=l,c)}function G6(l,c,f,_,x){var $=be.p;be.p=$!==0&&8>$?$:8;var A=te.T,D={};te.T=D,GC(l,!1,c,f);try{var q=x(),se=te.S;if(se!==null&&se(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var de=moe(q,_);e_(l,c,de,ea(l))}else e_(l,c,_,ea(l))}catch(ye){e_(l,c,{then:function(){},status:"rejected",reason:ye},ea())}finally{be.p=$,A!==null&&D.types!==null&&(A.types=D.types),te.T=A}}function woe(){}function jC(l,c,f,_){if(l.tag!==5)throw Error(r(476));var x=q6(l).queue;G6(l,x,c,Me,f===null?woe:function(){return B6(l),f(_)})}function q6(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:Me},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:f},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function B6(l){var c=q6(l);c.next===null&&(c=l.alternate.memoizedState),e_(l,c.next.queue,{},ea())}function UC(){return rs(g_)}function H6(){return dr().memoizedState}function W6(){return dr().memoizedState}function Soe(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var f=ea();l=uh(f);var _=ch(c,l,f);_!==null&&(bn(_,c,f),Yv(_,c,f)),c={cache:gC()},l.payload=c;return}c=c.return}}function xoe(l,c,f){var _=ea();f={lane:_,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Y2(l)?Y6(c,f):(f=aC(l,c,f,_),f!==null&&(bn(f,l,_),J6(f,c,_)))}function Z6(l,c,f){var _=ea();e_(l,c,f,_)}function e_(l,c,f,_){var x={lane:_,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Y2(l))Y6(c,x);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=c.lastRenderedReducer,$!==null))try{var A=c.lastRenderedState,D=$(A,f);if(x.hasEagerState=!0,x.eagerState=D,Zn(D,A))return I2(l,c,x,0),hi===null&&C2(),!1}catch{}finally{}if(f=aC(l,c,x,_),f!==null)return bn(f,l,_),J6(f,c,_),!0}return!1}function GC(l,c,f,_){if(_={lane:2,revertLane:wI(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Y2(l)){if(c)throw Error(r(479))}else c=aC(l,f,_,2),c!==null&&bn(c,l,2)}function Y2(l){var c=l.alternate;return l===ht||c!==null&&c===ht}function Y6(l,c){ry=U2=!0;var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}function J6(l,c,f){if((f&4194048)!==0){var _=c.lanes;_&=l.pendingLanes,f|=_,c.lanes=f,sp(l,f)}}var t_={readContext:rs,use:B2,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};t_.useEffectEvent=Zi;var X6={readContext:rs,use:B2,useCallback:function(l,c){return Zs().memoizedState=[l,c===void 0?null:c],l},useContext:rs,useEffect:k6,useImperativeHandle:function(l,c,f){f=f!=null?f.concat([l]):null,W2(4194308,4,z6.bind(null,c,l),f)},useLayoutEffect:function(l,c){return W2(4194308,4,l,c)},useInsertionEffect:function(l,c){W2(4,2,l,c)},useMemo:function(l,c){var f=Zs();c=c===void 0?null:c;var _=l();if(bp){tl(!0);try{l()}finally{tl(!1)}}return f.memoizedState=[_,c],_},useReducer:function(l,c,f){var _=Zs();if(f!==void 0){var x=f(c);if(bp){tl(!0);try{f(c)}finally{tl(!1)}}}else x=c;return _.memoizedState=_.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},_.queue=l,l=l.dispatch=xoe.bind(null,ht,l),[_.memoizedState,l]},useRef:function(l){var c=Zs();return l={current:l},c.memoizedState=l},useState:function(l){l=DC(l);var c=l.queue,f=Z6.bind(null,ht,c);return c.dispatch=f,[l.memoizedState,f]},useDebugValue:FC,useDeferredValue:function(l,c){var f=Zs();return VC(f,l,c)},useTransition:function(){var l=DC(!1);return l=G6.bind(null,ht,l.queue,!0,!1),Zs().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,f){var _=ht,x=Zs();if(At){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),hi===null)throw Error(r(349));(Ct&127)!==0||v6(_,c,f)}x.memoizedState=f;var $={value:f,getSnapshot:c};return x.queue=$,k6(b6.bind(null,_,$,l),[l]),_.flags|=2048,ny(9,{destroy:void 0},_6.bind(null,_,$,f,c),null),f},useId:function(){var l=Zs(),c=hi.identifierPrefix;if(At){var f=nl,_=sl;f=(_&~(1<<32-Hs(_)-1)).toString(32)+f,c="_"+c+"R_"+f,f=G2++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=yoe++,c="_"+c+"r_"+f.toString(32)+"_";return l.memoizedState=c},useHostTransitionStatus:UC,useFormState:I6,useActionState:I6,useOptimistic:function(l){var c=Zs();c.memoizedState=c.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=GC.bind(null,ht,!0,f),f.dispatch=c,[l,c]},useMemoCache:OC,useCacheRefresh:function(){return Zs().memoizedState=Soe.bind(null,ht)},useEffectEvent:function(l){var c=Zs(),f={impl:l};return c.memoizedState=f,function(){if((qt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},qC={readContext:rs,use:B2,useCallback:V6,useContext:rs,useEffect:zC,useImperativeHandle:F6,useInsertionEffect:D6,useLayoutEffect:N6,useMemo:j6,useReducer:H2,useRef:O6,useState:function(){return H2(Iu)},useDebugValue:FC,useDeferredValue:function(l,c){var f=dr();return U6(f,si.memoizedState,l,c)},useTransition:function(){var l=H2(Iu)[0],c=dr().memoizedState;return[typeof l=="boolean"?l:Kv(l),c]},useSyncExternalStore:g6,useId:H6,useHostTransitionStatus:UC,useFormState:L6,useActionState:L6,useOptimistic:function(l,c){var f=dr();return x6(f,si,l,c)},useMemoCache:OC,useCacheRefresh:W6};qC.useEffectEvent=R6;var Q6={readContext:rs,use:B2,useCallback:V6,useContext:rs,useEffect:zC,useImperativeHandle:F6,useInsertionEffect:D6,useLayoutEffect:N6,useMemo:j6,useReducer:RC,useRef:O6,useState:function(){return RC(Iu)},useDebugValue:FC,useDeferredValue:function(l,c){var f=dr();return si===null?VC(f,l,c):U6(f,si.memoizedState,l,c)},useTransition:function(){var l=RC(Iu)[0],c=dr().memoizedState;return[typeof l=="boolean"?l:Kv(l),c]},useSyncExternalStore:g6,useId:H6,useHostTransitionStatus:UC,useFormState:P6,useActionState:P6,useOptimistic:function(l,c){var f=dr();return si!==null?x6(f,si,l,c):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:OC,useCacheRefresh:W6};Q6.useEffectEvent=R6;function BC(l,c,f,_){c=l.memoizedState,f=f(_,c),f=f==null?c:y({},c,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var HC={enqueueSetState:function(l,c,f){l=l._reactInternals;var _=ea(),x=uh(_);x.payload=c,f!=null&&(x.callback=f),c=ch(l,x,_),c!==null&&(bn(c,l,_),Yv(c,l,_))},enqueueReplaceState:function(l,c,f){l=l._reactInternals;var _=ea(),x=uh(_);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=ch(l,x,_),c!==null&&(bn(c,l,_),Yv(c,l,_))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var f=ea(),_=uh(f);_.tag=2,c!=null&&(_.callback=c),c=ch(l,_,f),c!==null&&(bn(c,l,f),Yv(c,l,f))}};function K6(l,c,f,_,x,$,A){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,$,A):c.prototype&&c.prototype.isPureReactComponent?!jv(f,_)||!jv(x,$):!0}function eF(l,c,f,_){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,_),c.state!==l&&HC.enqueueReplaceState(c,c.state,null)}function wp(l,c){var f=c;if("ref"in c){f={};for(var _ in c)_!=="ref"&&(f[_]=c[_])}if(l=l.defaultProps){f===c&&(f=y({},f));for(var x in l)f[x]===void 0&&(f[x]=l[x])}return f}function tF(l){E2(l)}function iF(l){console.error(l)}function rF(l){E2(l)}function J2(l,c){try{var f=l.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(_){setTimeout(function(){throw _})}}function sF(l,c,f){try{var _=l.onCaughtError;_(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function WC(l,c,f){return f=uh(f),f.tag=3,f.payload={element:null},f.callback=function(){J2(l,c)},f}function nF(l){return l=uh(l),l.tag=3,l}function aF(l,c,f,_){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var $=_.value;l.payload=function(){return x($)},l.callback=function(){sF(c,f,_)}}var A=f.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(l.callback=function(){sF(c,f,_),typeof x!="function"&&(yh===null?yh=new Set([this]):yh.add(this));var D=_.stack;this.componentDidCatch(_.value,{componentStack:D!==null?D:""})})}function $oe(l,c,f,_,x){if(f.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(c=f.alternate,c!==null&&Xm(c,f,x,!0),f=Jn.current,f!==null){switch(f.tag){case 31:case 13:return Ia===null?lS():f.alternate===null&&Yi===0&&(Yi=3),f.flags&=-257,f.flags|=65536,f.lanes=x,_===N2?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([_]):c.add(_),vI(l,_,x)),!1;case 22:return f.flags|=65536,_===N2?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([_])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([_]):f.add(_)),vI(l,_,x)),!1}throw Error(r(435,f.tag))}return vI(l,_,x),lS(),!1}if(At)return c=Jn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,_!==dC&&(l=Error(r(422),{cause:_}),qv(Ma(l,f)))):(_!==dC&&(c=Error(r(423),{cause:_}),qv(Ma(c,f))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,_=Ma(_,f),x=WC(l.stateNode,_,x),xC(l,x),Yi!==4&&(Yi=2)),!1;var $=Error(r(520),{cause:_});if($=Ma($,f),u_===null?u_=[$]:u_.push($),Yi!==4&&(Yi=2),c===null)return!0;_=Ma(_,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,l=x&-x,f.lanes|=l,l=WC(f.stateNode,_,l),xC(f,l),!1;case 1:if(c=f.type,$=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(yh===null||!yh.has($))))return f.flags|=65536,x&=-x,f.lanes|=x,x=nF(x),aF(x,l,f,_),xC(f,x),!1}f=f.return}while(f!==null);return!1}var ZC=Error(r(461)),xr=!1;function ss(l,c,f,_){c.child=l===null?c6(c,null,f,_):_p(c,l.child,f,_)}function oF(l,c,f,_,x){f=f.render;var $=c.ref;if("ref"in _){var A={};for(var D in _)D!=="ref"&&(A[D]=_[D])}else A=_;return mp(c),_=IC(l,c,f,A,$,x),D=LC(),l!==null&&!xr?(AC(l,c,x),Lu(l,c,x)):(At&&D&&cC(c),c.flags|=1,ss(l,c,_,x),c.child)}function lF(l,c,f,_,x){if(l===null){var $=f.type;return typeof $=="function"&&!oC($)&&$.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=$,uF(l,c,$,_,x)):(l=A2(f.type,null,_,c,c.mode,x),l.ref=c.ref,l.return=c,c.child=l)}if($=l.child,!iI(l,x)){var A=$.memoizedProps;if(f=f.compare,f=f!==null?f:jv,f(A,_)&&l.ref===c.ref)return Lu(l,c,x)}return c.flags|=1,l=$u($,_),l.ref=c.ref,l.return=c,c.child=l}function uF(l,c,f,_,x){if(l!==null){var $=l.memoizedProps;if(jv($,_)&&l.ref===c.ref)if(xr=!1,c.pendingProps=_=$,iI(l,x))(l.flags&131072)!==0&&(xr=!0);else return c.lanes=l.lanes,Lu(l,c,x)}return YC(l,c,f,_,x)}function cF(l,c,f,_){var x=_.children,$=l!==null?l.memoizedState:null;if(l===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((c.flags&128)!==0){if($=$!==null?$.baseLanes|f:f,l!==null){for(_=c.child=l.child,x=0;_!==null;)x=x|_.lanes|_.childLanes,_=_.sibling;_=x&~$}else _=0,c.child=null;return hF(l,c,$,f,_)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&R2(c,$!==null?$.cachePool:null),$!==null?p6(c,$):MC(),f6(c);else return _=c.lanes=536870912,hF(l,c,$!==null?$.baseLanes|f:f,f,_)}else $!==null?(R2(c,$.cachePool),p6(c,$),dh(),c.memoizedState=null):(l!==null&&R2(c,null),MC(),dh());return ss(l,c,x,f),c.child}function i_(l,c){return l!==null&&l.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function hF(l,c,f,_,x){var $=_C();return $=$===null?null:{parent:wr._currentValue,pool:$},c.memoizedState={baseLanes:f,cachePool:$},l!==null&&R2(c,null),MC(),f6(c),l!==null&&Xm(l,c,_,!0),c.childLanes=x,null}function X2(l,c){return c=K2({mode:c.mode,children:c.children},l.mode),c.ref=l.ref,l.child=c,c.return=l,c}function dF(l,c,f){return _p(c,l.child,null,f),l=X2(c,c.pendingProps),l.flags|=2,Xn(c),c.memoizedState=null,l}function Moe(l,c,f){var _=c.pendingProps,x=(c.flags&128)!==0;if(c.flags&=-129,l===null){if(At){if(_.mode==="hidden")return l=X2(c,_),c.lanes=536870912,i_(null,l);if(EC(c),(l=Mi)?(l=$8(l,Ca),l=l!==null&&l.data==="&"?l:null,l!==null&&(c.memoizedState={dehydrated:l,treeContext:sh!==null?{id:sl,overflow:nl}:null,retryLane:536870912,hydrationErrors:null},f=Yz(l),f.return=c,c.child=f,is=c,Mi=null)):l=null,l===null)throw ah(c);return c.lanes=536870912,null}return X2(c,_)}var $=l.memoizedState;if($!==null){var A=$.dehydrated;if(EC(c),x)if(c.flags&256)c.flags&=-257,c=dF(l,c,f);else if(c.memoizedState!==null)c.child=l.child,c.flags|=128,c=null;else throw Error(r(558));else if(xr||Xm(l,c,f,!1),x=(f&l.childLanes)!==0,xr||x){if(_=hi,_!==null&&(A=Fe(_,f),A!==0&&A!==$.retryLane))throw $.retryLane=A,hp(l,A),bn(_,l,A),ZC;lS(),c=dF(l,c,f)}else l=$.treeContext,Mi=La(A.nextSibling),is=c,At=!0,nh=null,Ca=!1,l!==null&&Qz(c,l),c=X2(c,_),c.flags|=4096;return c}return l=$u(l.child,{mode:_.mode,children:_.children}),l.ref=c.ref,c.child=l,l.return=c,l}function Q2(l,c){var f=c.ref;if(f===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(c.flags|=4194816)}}function YC(l,c,f,_,x){return mp(c),f=IC(l,c,f,_,void 0,x),_=LC(),l!==null&&!xr?(AC(l,c,x),Lu(l,c,x)):(At&&_&&cC(c),c.flags|=1,ss(l,c,f,x),c.child)}function pF(l,c,f,_,x,$){return mp(c),c.updateQueue=null,f=y6(c,_,f,x),m6(l),_=LC(),l!==null&&!xr?(AC(l,c,$),Lu(l,c,$)):(At&&_&&cC(c),c.flags|=1,ss(l,c,f,$),c.child)}function fF(l,c,f,_,x){if(mp(c),c.stateNode===null){var $=Wm,A=f.contextType;typeof A=="object"&&A!==null&&($=rs(A)),$=new f(_,$),c.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=HC,c.stateNode=$,$._reactInternals=c,$=c.stateNode,$.props=_,$.state=c.memoizedState,$.refs={},wC(c),A=f.contextType,$.context=typeof A=="object"&&A!==null?rs(A):Wm,$.state=c.memoizedState,A=f.getDerivedStateFromProps,typeof A=="function"&&(BC(c,f,A,_),$.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(A=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),A!==$.state&&HC.enqueueReplaceState($,$.state,null),Xv(c,_,$,x),Jv(),$.state=c.memoizedState),typeof $.componentDidMount=="function"&&(c.flags|=4194308),_=!0}else if(l===null){$=c.stateNode;var D=c.memoizedProps,q=wp(f,D);$.props=q;var se=$.context,de=f.contextType;A=Wm,typeof de=="object"&&de!==null&&(A=rs(de));var ye=f.getDerivedStateFromProps;de=typeof ye=="function"||typeof $.getSnapshotBeforeUpdate=="function",D=c.pendingProps!==D,de||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(D||se!==A)&&eF(c,$,_,A),lh=!1;var ne=c.memoizedState;$.state=ne,Xv(c,_,$,x),Jv(),se=c.memoizedState,D||ne!==se||lh?(typeof ye=="function"&&(BC(c,f,ye,_),se=c.memoizedState),(q=lh||K6(c,f,q,_,ne,se,A))?(de||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(c.flags|=4194308)):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=se),$.props=_,$.state=se,$.context=A,_=q):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{$=c.stateNode,SC(l,c),A=c.memoizedProps,de=wp(f,A),$.props=de,ye=c.pendingProps,ne=$.context,se=f.contextType,q=Wm,typeof se=="object"&&se!==null&&(q=rs(se)),D=f.getDerivedStateFromProps,(se=typeof D=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(A!==ye||ne!==q)&&eF(c,$,_,q),lh=!1,ne=c.memoizedState,$.state=ne,Xv(c,_,$,x),Jv();var ce=c.memoizedState;A!==ye||ne!==ce||lh||l!==null&&l.dependencies!==null&&O2(l.dependencies)?(typeof D=="function"&&(BC(c,f,D,_),ce=c.memoizedState),(de=lh||K6(c,f,de,_,ne,ce,q)||l!==null&&l.dependencies!==null&&O2(l.dependencies))?(se||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,ce,q),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,ce,q)),typeof $.componentDidUpdate=="function"&&(c.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof $.componentDidUpdate!="function"||A===l.memoizedProps&&ne===l.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&ne===l.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=ce),$.props=_,$.state=ce,$.context=q,_=de):(typeof $.componentDidUpdate!="function"||A===l.memoizedProps&&ne===l.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&ne===l.memoizedState||(c.flags|=1024),_=!1)}return $=_,Q2(l,c),_=(c.flags&128)!==0,$||_?($=c.stateNode,f=_&&typeof f.getDerivedStateFromError!="function"?null:$.render(),c.flags|=1,l!==null&&_?(c.child=_p(c,l.child,null,x),c.child=_p(c,null,f,x)):ss(l,c,f,x),c.memoizedState=$.state,l=c.child):l=Lu(l,c,x),l}function mF(l,c,f,_){return pp(),c.flags|=256,ss(l,c,f,_),c.child}var JC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function XC(l){return{baseLanes:l,cachePool:s6()}}function QC(l,c,f){return l=l!==null?l.childLanes&~f:0,c&&(l|=Kn),l}function yF(l,c,f){var _=c.pendingProps,x=!1,$=(c.flags&128)!==0,A;if((A=$)||(A=l!==null&&l.memoizedState===null?!1:(hr.current&2)!==0),A&&(x=!0,c.flags&=-129),A=(c.flags&32)!==0,c.flags&=-33,l===null){if(At){if(x?hh(c):dh(),(l=Mi)?(l=$8(l,Ca),l=l!==null&&l.data!=="&"?l:null,l!==null&&(c.memoizedState={dehydrated:l,treeContext:sh!==null?{id:sl,overflow:nl}:null,retryLane:536870912,hydrationErrors:null},f=Yz(l),f.return=c,c.child=f,is=c,Mi=null)):l=null,l===null)throw ah(c);return kI(l)?c.lanes=32:c.lanes=536870912,null}var D=_.children;return _=_.fallback,x?(dh(),x=c.mode,D=K2({mode:"hidden",children:D},x),_=dp(_,x,f,null),D.return=c,_.return=c,D.sibling=_,c.child=D,_=c.child,_.memoizedState=XC(f),_.childLanes=QC(l,A,f),c.memoizedState=JC,i_(null,_)):(hh(c),KC(c,D))}var q=l.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if($)c.flags&256?(hh(c),c.flags&=-257,c=eI(l,c,f)):c.memoizedState!==null?(dh(),c.child=l.child,c.flags|=128,c=null):(dh(),D=_.fallback,x=c.mode,_=K2({mode:"visible",children:_.children},x),D=dp(D,x,f,null),D.flags|=2,_.return=c,D.return=c,_.sibling=D,c.child=_,_p(c,l.child,null,f),_=c.child,_.memoizedState=XC(f),_.childLanes=QC(l,A,f),c.memoizedState=JC,c=i_(null,_));else if(hh(c),kI(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var se=A.dgst;A=se,_=Error(r(419)),_.stack="",_.digest=A,qv({value:_,source:null,stack:null}),c=eI(l,c,f)}else if(xr||Xm(l,c,f,!1),A=(f&l.childLanes)!==0,xr||A){if(A=hi,A!==null&&(_=Fe(A,f),_!==0&&_!==q.retryLane))throw q.retryLane=_,hp(l,_),bn(A,l,_),ZC;OI(D)||lS(),c=eI(l,c,f)}else OI(D)?(c.flags|=192,c.child=l.child,c=null):(l=q.treeContext,Mi=La(D.nextSibling),is=c,At=!0,nh=null,Ca=!1,l!==null&&Qz(c,l),c=KC(c,_.children),c.flags|=4096);return c}return x?(dh(),D=_.fallback,x=c.mode,q=l.child,se=q.sibling,_=$u(q,{mode:"hidden",children:_.children}),_.subtreeFlags=q.subtreeFlags&65011712,se!==null?D=$u(se,D):(D=dp(D,x,f,null),D.flags|=2),D.return=c,_.return=c,_.sibling=D,c.child=_,i_(null,_),_=c.child,D=l.child.memoizedState,D===null?D=XC(f):(x=D.cachePool,x!==null?(q=wr._currentValue,x=x.parent!==q?{parent:q,pool:q}:x):x=s6(),D={baseLanes:D.baseLanes|f,cachePool:x}),_.memoizedState=D,_.childLanes=QC(l,A,f),c.memoizedState=JC,i_(l.child,_)):(hh(c),f=l.child,l=f.sibling,f=$u(f,{mode:"visible",children:_.children}),f.return=c,f.sibling=null,l!==null&&(A=c.deletions,A===null?(c.deletions=[l],c.flags|=16):A.push(l)),c.child=f,c.memoizedState=null,f)}function KC(l,c){return c=K2({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function K2(l,c){return l=Yn(22,l,null,c),l.lanes=0,l}function eI(l,c,f){return _p(c,l.child,null,f),l=KC(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function gF(l,c,f){l.lanes|=c;var _=l.alternate;_!==null&&(_.lanes|=c),mC(l.return,c,f)}function tI(l,c,f,_,x,$){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:f,tailMode:x,treeForkCount:$}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=_,A.tail=f,A.tailMode=x,A.treeForkCount=$)}function vF(l,c,f){var _=c.pendingProps,x=_.revealOrder,$=_.tail;_=_.children;var A=hr.current,D=(A&2)!==0;if(D?(A=A&1|2,c.flags|=128):A&=1,Te(hr,A),ss(l,c,_,f),_=At?Gv:0,!D&&l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&gF(l,f,c);else if(l.tag===19)gF(l,f,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(x){case"forwards":for(f=c.child,x=null;f!==null;)l=f.alternate,l!==null&&j2(l)===null&&(x=f),f=f.sibling;f=x,f===null?(x=c.child,c.child=null):(x=f.sibling,f.sibling=null),tI(c,!1,x,f,$,_);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=c.child,c.child=null;x!==null;){if(l=x.alternate,l!==null&&j2(l)===null){c.child=x;break}l=x.sibling,x.sibling=f,f=x,x=l}tI(c,!0,f,null,$,_);break;case"together":tI(c,!1,null,null,void 0,_);break;default:c.memoizedState=null}return c.child}function Lu(l,c,f){if(l!==null&&(c.dependencies=l.dependencies),mh|=c.lanes,(f&c.childLanes)===0)if(l!==null){if(Xm(l,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,f=$u(l,l.pendingProps),c.child=f,f.return=c;l.sibling!==null;)l=l.sibling,f=f.sibling=$u(l,l.pendingProps),f.return=c;f.sibling=null}return c.child}function iI(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&O2(l)))}function Toe(l,c,f){switch(c.tag){case 3:lr(c,c.stateNode.containerInfo),oh(c,wr,l.memoizedState.cache),pp();break;case 27:case 5:Wn(c);break;case 4:lr(c,c.stateNode.containerInfo);break;case 10:oh(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,EC(c),null;break;case 13:var _=c.memoizedState;if(_!==null)return _.dehydrated!==null?(hh(c),c.flags|=128,null):(f&c.child.childLanes)!==0?yF(l,c,f):(hh(c),l=Lu(l,c,f),l!==null?l.sibling:null);hh(c);break;case 19:var x=(l.flags&128)!==0;if(_=(f&c.childLanes)!==0,_||(Xm(l,c,f,!1),_=(f&c.childLanes)!==0),x){if(_)return vF(l,c,f);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Te(hr,hr.current),_)break;return null;case 22:return c.lanes=0,cF(l,c,f,c.pendingProps);case 24:oh(c,wr,l.memoizedState.cache)}return Lu(l,c,f)}function _F(l,c,f){if(l!==null)if(l.memoizedProps!==c.pendingProps)xr=!0;else{if(!iI(l,f)&&(c.flags&128)===0)return xr=!1,Toe(l,c,f);xr=(l.flags&131072)!==0}else xr=!1,At&&(c.flags&1048576)!==0&&Xz(c,Gv,c.index);switch(c.lanes=0,c.tag){case 16:e:{var _=c.pendingProps;if(l=gp(c.elementType),c.type=l,typeof l=="function")oC(l)?(_=wp(l,_),c.tag=1,c=fF(null,c,l,_,f)):(c.tag=0,c=YC(null,c,l,_,f));else{if(l!=null){var x=l.$$typeof;if(x===O){c.tag=11,c=oF(null,c,l,_,f);break e}else if(x===j){c.tag=14,c=lF(null,c,l,_,f);break e}}throw c=me(l)||l,Error(r(306,c,""))}}return c;case 0:return YC(l,c,c.type,c.pendingProps,f);case 1:return _=c.type,x=wp(_,c.pendingProps),fF(l,c,_,x,f);case 3:e:{if(lr(c,c.stateNode.containerInfo),l===null)throw Error(r(387));_=c.pendingProps;var $=c.memoizedState;x=$.element,SC(l,c),Xv(c,_,null,f);var A=c.memoizedState;if(_=A.cache,oh(c,wr,_),_!==$.cache&&yC(c,[wr],f,!0),Jv(),_=A.element,$.isDehydrated)if($={element:_,isDehydrated:!1,cache:A.cache},c.updateQueue.baseState=$,c.memoizedState=$,c.flags&256){c=mF(l,c,_,f);break e}else if(_!==x){x=Ma(Error(r(424)),c),qv(x),c=mF(l,c,_,f);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Mi=La(l.firstChild),is=c,At=!0,nh=null,Ca=!0,f=c6(c,null,_,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(pp(),_===x){c=Lu(l,c,f);break e}ss(l,c,_,f)}c=c.child}return c;case 26:return Q2(l,c),l===null?(f=L8(c.type,null,c.pendingProps,null))?c.memoizedState=f:At||(f=c.type,l=c.pendingProps,_=mS(ot.current).createElement(f),_[mi]=c,_[ts]=l,ns(_,f,l),cr(_),c.stateNode=_):c.memoizedState=L8(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Wn(c),l===null&&At&&(_=c.stateNode=E8(c.type,c.pendingProps,ot.current),is=c,Ca=!0,x=Mi,bh(c.type)?(RI=x,Mi=La(_.firstChild)):Mi=x),ss(l,c,c.pendingProps.children,f),Q2(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&At&&((x=_=Mi)&&(_=ile(_,c.type,c.pendingProps,Ca),_!==null?(c.stateNode=_,is=c,Mi=La(_.firstChild),Ca=!1,x=!0):x=!1),x||ah(c)),Wn(c),x=c.type,$=c.pendingProps,A=l!==null?l.memoizedProps:null,_=$.children,LI(x,$)?_=null:A!==null&&LI(x,A)&&(c.flags|=32),c.memoizedState!==null&&(x=IC(l,c,goe,null,null,f),g_._currentValue=x),Q2(l,c),ss(l,c,_,f),c.child;case 6:return l===null&&At&&((l=f=Mi)&&(f=rle(f,c.pendingProps,Ca),f!==null?(c.stateNode=f,is=c,Mi=null,l=!0):l=!1),l||ah(c)),null;case 13:return yF(l,c,f);case 4:return lr(c,c.stateNode.containerInfo),_=c.pendingProps,l===null?c.child=_p(c,null,_,f):ss(l,c,_,f),c.child;case 11:return oF(l,c,c.type,c.pendingProps,f);case 7:return ss(l,c,c.pendingProps,f),c.child;case 8:return ss(l,c,c.pendingProps.children,f),c.child;case 12:return ss(l,c,c.pendingProps.children,f),c.child;case 10:return _=c.pendingProps,oh(c,c.type,_.value),ss(l,c,_.children,f),c.child;case 9:return x=c.type._context,_=c.pendingProps.children,mp(c),x=rs(x),_=_(x),c.flags|=1,ss(l,c,_,f),c.child;case 14:return lF(l,c,c.type,c.pendingProps,f);case 15:return uF(l,c,c.type,c.pendingProps,f);case 19:return vF(l,c,f);case 31:return Moe(l,c,f);case 22:return cF(l,c,f,c.pendingProps);case 24:return mp(c),_=rs(wr),l===null?(x=_C(),x===null&&(x=hi,$=gC(),x.pooledCache=$,$.refCount++,$!==null&&(x.pooledCacheLanes|=f),x=$),c.memoizedState={parent:_,cache:x},wC(c),oh(c,wr,x)):((l.lanes&f)!==0&&(SC(l,c),Xv(c,null,null,f),Jv()),x=l.memoizedState,$=c.memoizedState,x.parent!==_?(x={parent:_,cache:_},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),oh(c,wr,_)):(_=$.cache,oh(c,wr,_),_!==x.cache&&yC(c,[wr],f,!0))),ss(l,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Au(l){l.flags|=4}function rI(l,c,f,_,x){if((c=(l.mode&32)!==0)&&(c=!1),c){if(l.flags|=16777216,(x&335544128)===x)if(l.stateNode.complete)l.flags|=8192;else if(HF())l.flags|=8192;else throw vp=N2,bC}else l.flags&=-16777217}function bF(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!R8(c))if(HF())l.flags|=8192;else throw vp=N2,bC}function eS(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?ae():536870912,l.lanes|=c,uy|=c)}function r_(l,c){if(!At)switch(l.tailMode){case"hidden":c=l.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Ti(l){var c=l.alternate!==null&&l.alternate.child===l.child,f=0,_=0;if(c)for(var x=l.child;x!==null;)f|=x.lanes|x.childLanes,_|=x.subtreeFlags&65011712,_|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)f|=x.lanes|x.childLanes,_|=x.subtreeFlags,_|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=_,l.childLanes=f,c}function Eoe(l,c,f){var _=c.pendingProps;switch(hC(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(c),null;case 1:return Ti(c),null;case 3:return f=c.stateNode,_=null,l!==null&&(_=l.memoizedState.cache),c.memoizedState.cache!==_&&(c.flags|=2048),Eu(wr),ci(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Jm(c)?Au(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,pC())),Ti(c),null;case 26:var x=c.type,$=c.memoizedState;return l===null?(Au(c),$!==null?(Ti(c),bF(c,$)):(Ti(c),rI(c,x,null,_,f))):$?$!==l.memoizedState?(Au(c),Ti(c),bF(c,$)):(Ti(c),c.flags&=-16777217):(l=l.memoizedProps,l!==_&&Au(c),Ti(c),rI(c,x,l,_,f)),null;case 27:if(uo(c),f=ot.current,x=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==_&&Au(c);else{if(!_){if(c.stateNode===null)throw Error(r(166));return Ti(c),null}l=Pe.current,Jm(c)?Kz(c):(l=E8(x,_,f),c.stateNode=l,Au(c))}return Ti(c),null;case 5:if(uo(c),x=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==_&&Au(c);else{if(!_){if(c.stateNode===null)throw Error(r(166));return Ti(c),null}if($=Pe.current,Jm(c))Kz(c);else{var A=mS(ot.current);switch($){case 1:$=A.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:$=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":$=A.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":$=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":$=A.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof _.is=="string"?A.createElement("select",{is:_.is}):A.createElement("select"),_.multiple?$.multiple=!0:_.size&&($.size=_.size);break;default:$=typeof _.is=="string"?A.createElement(x,{is:_.is}):A.createElement(x)}}$[mi]=c,$[ts]=_;e:for(A=c.child;A!==null;){if(A.tag===5||A.tag===6)$.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break e;for(;A.sibling===null;){if(A.return===null||A.return===c)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}c.stateNode=$;e:switch(ns($,x,_),x){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&Au(c)}}return Ti(c),rI(c,c.type,l===null?null:l.memoizedProps,c.pendingProps,f),null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==_&&Au(c);else{if(typeof _!="string"&&c.stateNode===null)throw Error(r(166));if(l=ot.current,Jm(c)){if(l=c.stateNode,f=c.memoizedProps,_=null,x=is,x!==null)switch(x.tag){case 27:case 5:_=x.memoizedProps}l[mi]=c,l=!!(l.nodeValue===f||_!==null&&_.suppressHydrationWarning===!0||y8(l.nodeValue,f)),l||ah(c,!0)}else l=mS(l).createTextNode(_),l[mi]=c,c.stateNode=l}return Ti(c),null;case 31:if(f=c.memoizedState,l===null||l.memoizedState!==null){if(_=Jm(c),f!==null){if(l===null){if(!_)throw Error(r(318));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[mi]=c}else pp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ti(c),l=!1}else f=pC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return c.flags&256?(Xn(c),c):(Xn(c),null);if((c.flags&128)!==0)throw Error(r(558))}return Ti(c),null;case 13:if(_=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=Jm(c),_!==null&&_.dehydrated!==null){if(l===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[mi]=c}else pp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ti(c),x=!1}else x=pC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Xn(c),c):(Xn(c),null)}return Xn(c),(c.flags&128)!==0?(c.lanes=f,c):(f=_!==null,l=l!==null&&l.memoizedState!==null,f&&(_=c.child,x=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(x=_.alternate.memoizedState.cachePool.pool),$=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&($=_.memoizedState.cachePool.pool),$!==x&&(_.flags|=2048)),f!==l&&f&&(c.child.flags|=8192),eS(c,c.updateQueue),Ti(c),null);case 4:return ci(),l===null&&MI(c.stateNode.containerInfo),Ti(c),null;case 10:return Eu(c.type),Ti(c),null;case 19:if(pe(hr),_=c.memoizedState,_===null)return Ti(c),null;if(x=(c.flags&128)!==0,$=_.rendering,$===null)if(x)r_(_,!1);else{if(Yi!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if($=j2(l),$!==null){for(c.flags|=128,r_(_,!1),l=$.updateQueue,c.updateQueue=l,eS(c,l),c.subtreeFlags=0,l=f,f=c.child;f!==null;)Zz(f,l),f=f.sibling;return Te(hr,hr.current&1|2),At&&Mu(c,_.treeForkCount),c.child}l=l.sibling}_.tail!==null&&qs()>nS&&(c.flags|=128,x=!0,r_(_,!1),c.lanes=4194304)}else{if(!x)if(l=j2($),l!==null){if(c.flags|=128,x=!0,l=l.updateQueue,c.updateQueue=l,eS(c,l),r_(_,!0),_.tail===null&&_.tailMode==="hidden"&&!$.alternate&&!At)return Ti(c),null}else 2*qs()-_.renderingStartTime>nS&&f!==536870912&&(c.flags|=128,x=!0,r_(_,!1),c.lanes=4194304);_.isBackwards?($.sibling=c.child,c.child=$):(l=_.last,l!==null?l.sibling=$:c.child=$,_.last=$)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=qs(),l.sibling=null,f=hr.current,Te(hr,x?f&1|2:f&1),At&&Mu(c,_.treeForkCount),l):(Ti(c),null);case 22:case 23:return Xn(c),TC(),_=c.memoizedState!==null,l!==null?l.memoizedState!==null!==_&&(c.flags|=8192):_&&(c.flags|=8192),_?(f&536870912)!==0&&(c.flags&128)===0&&(Ti(c),c.subtreeFlags&6&&(c.flags|=8192)):Ti(c),f=c.updateQueue,f!==null&&eS(c,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==f&&(c.flags|=2048),l!==null&&pe(yp),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Eu(wr),Ti(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function Coe(l,c){switch(hC(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Eu(wr),ci(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return uo(c),null;case 31:if(c.memoizedState!==null){if(Xn(c),c.alternate===null)throw Error(r(340));pp()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 13:if(Xn(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));pp()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return pe(hr),null;case 4:return ci(),null;case 10:return Eu(c.type),null;case 22:case 23:return Xn(c),TC(),l!==null&&pe(yp),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return Eu(wr),null;case 25:return null;default:return null}}function wF(l,c){switch(hC(c),c.tag){case 3:Eu(wr),ci();break;case 26:case 27:case 5:uo(c);break;case 4:ci();break;case 31:c.memoizedState!==null&&Xn(c);break;case 13:Xn(c);break;case 19:pe(hr);break;case 10:Eu(c.type);break;case 22:case 23:Xn(c),TC(),l!==null&&pe(yp);break;case 24:Eu(wr)}}function s_(l,c){try{var f=c.updateQueue,_=f!==null?f.lastEffect:null;if(_!==null){var x=_.next;f=x;do{if((f.tag&l)===l){_=void 0;var $=f.create,A=f.inst;_=$(),A.destroy=_}f=f.next}while(f!==x)}}catch(D){ti(c,c.return,D)}}function ph(l,c,f){try{var _=c.updateQueue,x=_!==null?_.lastEffect:null;if(x!==null){var $=x.next;_=$;do{if((_.tag&l)===l){var A=_.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,x=c;var q=f,se=D;try{se()}catch(de){ti(x,q,de)}}}_=_.next}while(_!==$)}}catch(de){ti(c,c.return,de)}}function SF(l){var c=l.updateQueue;if(c!==null){var f=l.stateNode;try{d6(c,f)}catch(_){ti(l,l.return,_)}}}function xF(l,c,f){f.props=wp(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(_){ti(l,c,_)}}function n_(l,c){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var _=l.stateNode;break;case 30:_=l.stateNode;break;default:_=l.stateNode}typeof f=="function"?l.refCleanup=f(_):f.current=_}}catch(x){ti(l,c,x)}}function al(l,c){var f=l.ref,_=l.refCleanup;if(f!==null)if(typeof _=="function")try{_()}catch(x){ti(l,c,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){ti(l,c,x)}else f.current=null}function $F(l){var c=l.type,f=l.memoizedProps,_=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&_.focus();break e;case"img":f.src?_.src=f.src:f.srcSet&&(_.srcset=f.srcSet)}}catch(x){ti(l,l.return,x)}}function sI(l,c,f){try{var _=l.stateNode;Joe(_,l.type,f,c),_[ts]=c}catch(x){ti(l,l.return,x)}}function MF(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&bh(l.type)||l.tag===4}function nI(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||MF(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&bh(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function aI(l,c,f){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(l),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Su));else if(_!==4&&(_===27&&bh(l.type)&&(f=l.stateNode,c=null),l=l.child,l!==null))for(aI(l,c,f),l=l.sibling;l!==null;)aI(l,c,f),l=l.sibling}function tS(l,c,f){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?f.insertBefore(l,c):f.appendChild(l);else if(_!==4&&(_===27&&bh(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(tS(l,c,f),l=l.sibling;l!==null;)tS(l,c,f),l=l.sibling}function TF(l){var c=l.stateNode,f=l.memoizedProps;try{for(var _=l.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);ns(c,_,f),c[mi]=l,c[ts]=f}catch($){ti(l,l.return,$)}}var Pu=!1,$r=!1,oI=!1,EF=typeof WeakSet=="function"?WeakSet:Set,Br=null;function Ioe(l,c){if(l=l.containerInfo,CI=SS,l=Fz(l),eC(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var _=f.getSelection&&f.getSelection();if(_&&_.rangeCount!==0){f=_.anchorNode;var x=_.anchorOffset,$=_.focusNode;_=_.focusOffset;try{f.nodeType,$.nodeType}catch{f=null;break e}var A=0,D=-1,q=-1,se=0,de=0,ye=l,ne=null;t:for(;;){for(var ce;ye!==f||x!==0&&ye.nodeType!==3||(D=A+x),ye!==$||_!==0&&ye.nodeType!==3||(q=A+_),ye.nodeType===3&&(A+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)ne=ye,ye=ce;for(;;){if(ye===l)break t;if(ne===f&&++se===x&&(D=A),ne===$&&++de===_&&(q=A),(ce=ye.nextSibling)!==null)break;ye=ne,ne=ye.parentNode}ye=ce}f=D===-1||q===-1?null:{start:D,end:q}}else f=null}f=f||{start:0,end:0}}else f=null;for(II={focusedElem:l,selectionRange:f},SS=!1,Br=c;Br!==null;)if(c=Br,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,Br=l;else for(;Br!==null;){switch(c=Br,$=c.alternate,l=c.flags,c.tag){case 0:if((l&4)!==0&&(l=c.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)x=l[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&$!==null){l=void 0,f=c,x=$.memoizedProps,$=$.memoizedState,_=f.stateNode;try{var ze=wp(f.type,x);l=_.getSnapshotBeforeUpdate(ze,$),_.__reactInternalSnapshotBeforeUpdate=l}catch(Ke){ti(f,f.return,Ke)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,f=l.nodeType,f===9)PI(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":PI(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=c.sibling,l!==null){l.return=c.return,Br=l;break}Br=c.return}}function CF(l,c,f){var _=f.flags;switch(f.tag){case 0:case 11:case 15:ku(l,f),_&4&&s_(5,f);break;case 1:if(ku(l,f),_&4)if(l=f.stateNode,c===null)try{l.componentDidMount()}catch(A){ti(f,f.return,A)}else{var x=wp(f.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(x,c,l.__reactInternalSnapshotBeforeUpdate)}catch(A){ti(f,f.return,A)}}_&64&&SF(f),_&512&&n_(f,f.return);break;case 3:if(ku(l,f),_&64&&(l=f.updateQueue,l!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{d6(l,c)}catch(A){ti(f,f.return,A)}}break;case 27:c===null&&_&4&&TF(f);case 26:case 5:ku(l,f),c===null&&_&4&&$F(f),_&512&&n_(f,f.return);break;case 12:ku(l,f);break;case 31:ku(l,f),_&4&&AF(l,f);break;case 13:ku(l,f),_&4&&PF(l,f),_&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=zoe.bind(null,f),sle(l,f))));break;case 22:if(_=f.memoizedState!==null||Pu,!_){c=c!==null&&c.memoizedState!==null||$r,x=Pu;var $=$r;Pu=_,($r=c)&&!$?Ru(l,f,(f.subtreeFlags&8772)!==0):ku(l,f),Pu=x,$r=$}break;case 30:break;default:ku(l,f)}}function IF(l){var c=l.alternate;c!==null&&(l.alternate=null,IF(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&ap(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Di=null,yn=!1;function Ou(l,c,f){for(f=f.child;f!==null;)LF(l,c,f),f=f.sibling}function LF(l,c,f){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(tp,f)}catch{}switch(f.tag){case 26:$r||al(f,c),Ou(l,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:$r||al(f,c);var _=Di,x=yn;bh(f.type)&&(Di=f.stateNode,yn=!1),Ou(l,c,f),f_(f.stateNode),Di=_,yn=x;break;case 5:$r||al(f,c);case 6:if(_=Di,x=yn,Di=null,Ou(l,c,f),Di=_,yn=x,Di!==null)if(yn)try{(Di.nodeType===9?Di.body:Di.nodeName==="HTML"?Di.ownerDocument.body:Di).removeChild(f.stateNode)}catch($){ti(f,c,$)}else try{Di.removeChild(f.stateNode)}catch($){ti(f,c,$)}break;case 18:Di!==null&&(yn?(l=Di,S8(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),gy(l)):S8(Di,f.stateNode));break;case 4:_=Di,x=yn,Di=f.stateNode.containerInfo,yn=!0,Ou(l,c,f),Di=_,yn=x;break;case 0:case 11:case 14:case 15:ph(2,f,c),$r||ph(4,f,c),Ou(l,c,f);break;case 1:$r||(al(f,c),_=f.stateNode,typeof _.componentWillUnmount=="function"&&xF(f,c,_)),Ou(l,c,f);break;case 21:Ou(l,c,f);break;case 22:$r=(_=$r)||f.memoizedState!==null,Ou(l,c,f),$r=_;break;default:Ou(l,c,f)}}function AF(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{gy(l)}catch(f){ti(c,c.return,f)}}}function PF(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{gy(l)}catch(f){ti(c,c.return,f)}}function Loe(l){switch(l.tag){case 31:case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new EF),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new EF),c;default:throw Error(r(435,l.tag))}}function iS(l,c){var f=Loe(l);c.forEach(function(_){if(!f.has(_)){f.add(_);var x=Foe.bind(null,l,_);_.then(x,x)}})}function gn(l,c){var f=c.deletions;if(f!==null)for(var _=0;_<f.length;_++){var x=f[_],$=l,A=c,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(bh(D.type)){Di=D.stateNode,yn=!1;break e}break;case 5:Di=D.stateNode,yn=!1;break e;case 3:case 4:Di=D.stateNode.containerInfo,yn=!0;break e}D=D.return}if(Di===null)throw Error(r(160));LF($,A,x),Di=null,yn=!1,$=x.alternate,$!==null&&($.return=null),x.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)OF(c,l),c=c.sibling}var ho=null;function OF(l,c){var f=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:gn(c,l),vn(l),_&4&&(ph(3,l,l.return),s_(3,l),ph(5,l,l.return));break;case 1:gn(c,l),vn(l),_&512&&($r||f===null||al(f,f.return)),_&64&&Pu&&(l=l.updateQueue,l!==null&&(_=l.callbacks,_!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?_:f.concat(_))));break;case 26:var x=ho;if(gn(c,l),vn(l),_&512&&($r||f===null||al(f,f.return)),_&4){var $=f!==null?f.memoizedState:null;if(_=l.memoizedState,f===null)if(_===null)if(l.stateNode===null){e:{_=l.type,f=l.memoizedProps,x=x.ownerDocument||x;t:switch(_){case"title":$=x.getElementsByTagName("title")[0],(!$||$[np]||$[mi]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=x.createElement(_),x.head.insertBefore($,x.querySelector("head > title"))),ns($,_,f),$[mi]=l,cr($),_=$;break e;case"link":var A=O8("link","href",x).get(_+(f.href||""));if(A){for(var D=0;D<A.length;D++)if($=A[D],$.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&$.getAttribute("rel")===(f.rel==null?null:f.rel)&&$.getAttribute("title")===(f.title==null?null:f.title)&&$.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){A.splice(D,1);break t}}$=x.createElement(_),ns($,_,f),x.head.appendChild($);break;case"meta":if(A=O8("meta","content",x).get(_+(f.content||""))){for(D=0;D<A.length;D++)if($=A[D],$.getAttribute("content")===(f.content==null?null:""+f.content)&&$.getAttribute("name")===(f.name==null?null:f.name)&&$.getAttribute("property")===(f.property==null?null:f.property)&&$.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&$.getAttribute("charset")===(f.charSet==null?null:f.charSet)){A.splice(D,1);break t}}$=x.createElement(_),ns($,_,f),x.head.appendChild($);break;default:throw Error(r(468,_))}$[mi]=l,cr($),_=$}l.stateNode=_}else k8(x,l.type,l.stateNode);else l.stateNode=P8(x,_,l.memoizedProps);else $!==_?($===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):$.count--,_===null?k8(x,l.type,l.stateNode):P8(x,_,l.memoizedProps)):_===null&&l.stateNode!==null&&sI(l,l.memoizedProps,f.memoizedProps)}break;case 27:gn(c,l),vn(l),_&512&&($r||f===null||al(f,f.return)),f!==null&&_&4&&sI(l,l.memoizedProps,f.memoizedProps);break;case 5:if(gn(c,l),vn(l),_&512&&($r||f===null||al(f,f.return)),l.flags&32){x=l.stateNode;try{Vm(x,"")}catch(ze){ti(l,l.return,ze)}}_&4&&l.stateNode!=null&&(x=l.memoizedProps,sI(l,x,f!==null?f.memoizedProps:x)),_&1024&&(oI=!0);break;case 6:if(gn(c,l),vn(l),_&4){if(l.stateNode===null)throw Error(r(162));_=l.memoizedProps,f=l.stateNode;try{f.nodeValue=_}catch(ze){ti(l,l.return,ze)}}break;case 3:if(vS=null,x=ho,ho=yS(c.containerInfo),gn(c,l),ho=x,vn(l),_&4&&f!==null&&f.memoizedState.isDehydrated)try{gy(c.containerInfo)}catch(ze){ti(l,l.return,ze)}oI&&(oI=!1,kF(l));break;case 4:_=ho,ho=yS(l.stateNode.containerInfo),gn(c,l),vn(l),ho=_;break;case 12:gn(c,l),vn(l);break;case 31:gn(c,l),vn(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,iS(l,_)));break;case 13:gn(c,l),vn(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(sS=qs()),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,iS(l,_)));break;case 22:x=l.memoizedState!==null;var q=f!==null&&f.memoizedState!==null,se=Pu,de=$r;if(Pu=se||x,$r=de||q,gn(c,l),$r=de,Pu=se,vn(l),_&8192)e:for(c=l.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(f===null||q||Pu||$r||Sp(l)),f=null,c=l;;){if(c.tag===5||c.tag===26){if(f===null){q=f=c;try{if($=q.stateNode,x)A=$.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=q.stateNode;var ye=q.memoizedProps.style,ne=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ze){ti(q,q.return,ze)}}}else if(c.tag===6){if(f===null){q=c;try{q.stateNode.nodeValue=x?"":q.memoizedProps}catch(ze){ti(q,q.return,ze)}}}else if(c.tag===18){if(f===null){q=c;try{var ce=q.stateNode;x?x8(ce,!0):x8(q.stateNode,!1)}catch(ze){ti(q,q.return,ze)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}_&4&&(_=l.updateQueue,_!==null&&(f=_.retryQueue,f!==null&&(_.retryQueue=null,iS(l,f))));break;case 19:gn(c,l),vn(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,iS(l,_)));break;case 30:break;case 21:break;default:gn(c,l),vn(l)}}function vn(l){var c=l.flags;if(c&2){try{for(var f,_=l.return;_!==null;){if(MF(_)){f=_;break}_=_.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,$=nI(l);tS(l,$,x);break;case 5:var A=f.stateNode;f.flags&32&&(Vm(A,""),f.flags&=-33);var D=nI(l);tS(l,D,A);break;case 3:case 4:var q=f.stateNode.containerInfo,se=nI(l);aI(l,se,q);break;default:throw Error(r(161))}}catch(de){ti(l,l.return,de)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function kF(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;kF(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function ku(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)CF(l,c.alternate,c),c=c.sibling}function Sp(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:ph(4,c,c.return),Sp(c);break;case 1:al(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&xF(c,c.return,f),Sp(c);break;case 27:f_(c.stateNode);case 26:case 5:al(c,c.return),Sp(c);break;case 22:c.memoizedState===null&&Sp(c);break;case 30:Sp(c);break;default:Sp(c)}l=l.sibling}}function Ru(l,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var _=c.alternate,x=l,$=c,A=$.flags;switch($.tag){case 0:case 11:case 15:Ru(x,$,f),s_(4,$);break;case 1:if(Ru(x,$,f),_=$,x=_.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(se){ti(_,_.return,se)}if(_=$,x=_.updateQueue,x!==null){var D=_.stateNode;try{var q=x.shared.hiddenCallbacks;if(q!==null)for(x.shared.hiddenCallbacks=null,x=0;x<q.length;x++)h6(q[x],D)}catch(se){ti(_,_.return,se)}}f&&A&64&&SF($),n_($,$.return);break;case 27:TF($);case 26:case 5:Ru(x,$,f),f&&_===null&&A&4&&$F($),n_($,$.return);break;case 12:Ru(x,$,f);break;case 31:Ru(x,$,f),f&&A&4&&AF(x,$);break;case 13:Ru(x,$,f),f&&A&4&&PF(x,$);break;case 22:$.memoizedState===null&&Ru(x,$,f),n_($,$.return);break;case 30:break;default:Ru(x,$,f)}c=c.sibling}}function lI(l,c){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&Bv(f))}function uI(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Bv(l))}function po(l,c,f,_){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)RF(l,c,f,_),c=c.sibling}function RF(l,c,f,_){var x=c.flags;switch(c.tag){case 0:case 11:case 15:po(l,c,f,_),x&2048&&s_(9,c);break;case 1:po(l,c,f,_);break;case 3:po(l,c,f,_),x&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Bv(l)));break;case 12:if(x&2048){po(l,c,f,_),l=c.stateNode;try{var $=c.memoizedProps,A=$.id,D=$.onPostCommit;typeof D=="function"&&D(A,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(q){ti(c,c.return,q)}}else po(l,c,f,_);break;case 31:po(l,c,f,_);break;case 13:po(l,c,f,_);break;case 23:break;case 22:$=c.stateNode,A=c.alternate,c.memoizedState!==null?$._visibility&2?po(l,c,f,_):a_(l,c):$._visibility&2?po(l,c,f,_):($._visibility|=2,ay(l,c,f,_,(c.subtreeFlags&10256)!==0||!1)),x&2048&&lI(A,c);break;case 24:po(l,c,f,_),x&2048&&uI(c.alternate,c);break;default:po(l,c,f,_)}}function ay(l,c,f,_,x){for(x=x&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var $=l,A=c,D=f,q=_,se=A.flags;switch(A.tag){case 0:case 11:case 15:ay($,A,D,q,x),s_(8,A);break;case 23:break;case 22:var de=A.stateNode;A.memoizedState!==null?de._visibility&2?ay($,A,D,q,x):a_($,A):(de._visibility|=2,ay($,A,D,q,x)),x&&se&2048&&lI(A.alternate,A);break;case 24:ay($,A,D,q,x),x&&se&2048&&uI(A.alternate,A);break;default:ay($,A,D,q,x)}c=c.sibling}}function a_(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=l,_=c,x=_.flags;switch(_.tag){case 22:a_(f,_),x&2048&&lI(_.alternate,_);break;case 24:a_(f,_),x&2048&&uI(_.alternate,_);break;default:a_(f,_)}c=c.sibling}}var o_=8192;function oy(l,c,f){if(l.subtreeFlags&o_)for(l=l.child;l!==null;)DF(l,c,f),l=l.sibling}function DF(l,c,f){switch(l.tag){case 26:oy(l,c,f),l.flags&o_&&l.memoizedState!==null&&yle(f,ho,l.memoizedState,l.memoizedProps);break;case 5:oy(l,c,f);break;case 3:case 4:var _=ho;ho=yS(l.stateNode.containerInfo),oy(l,c,f),ho=_;break;case 22:l.memoizedState===null&&(_=l.alternate,_!==null&&_.memoizedState!==null?(_=o_,o_=16777216,oy(l,c,f),o_=_):oy(l,c,f));break;default:oy(l,c,f)}}function NF(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function l_(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var _=c[f];Br=_,FF(_,l)}NF(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zF(l),l=l.sibling}function zF(l){switch(l.tag){case 0:case 11:case 15:l_(l),l.flags&2048&&ph(9,l,l.return);break;case 3:l_(l);break;case 12:l_(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,rS(l)):l_(l);break;default:l_(l)}}function rS(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var _=c[f];Br=_,FF(_,l)}NF(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:ph(8,c,c.return),rS(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,rS(c));break;default:rS(c)}l=l.sibling}}function FF(l,c){for(;Br!==null;){var f=Br;switch(f.tag){case 0:case 11:case 15:ph(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var _=f.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Bv(f.memoizedState.cache)}if(_=f.child,_!==null)_.return=f,Br=_;else e:for(f=l;Br!==null;){_=Br;var x=_.sibling,$=_.return;if(IF(_),_===f){Br=null;break e}if(x!==null){x.return=$,Br=x;break e}Br=$}}}var Aoe={getCacheForType:function(l){var c=rs(wr),f=c.data.get(l);return f===void 0&&(f=l(),c.data.set(l,f)),f},cacheSignal:function(){return rs(wr).controller.signal}},Poe=typeof WeakMap=="function"?WeakMap:Map,qt=0,hi=null,St=null,Ct=0,ei=0,Qn=null,fh=!1,ly=!1,cI=!1,Du=0,Yi=0,mh=0,xp=0,hI=0,Kn=0,uy=0,u_=null,_n=null,dI=!1,sS=0,VF=0,nS=1/0,aS=null,yh=null,Pr=0,gh=null,cy=null,Nu=0,pI=0,fI=null,jF=null,c_=0,mI=null;function ea(){return(qt&2)!==0&&Ct!==0?Ct&-Ct:te.T!==null?wI():ur()}function UF(){if(Kn===0)if((Ct&536870912)===0||At){var l=Dm;Dm<<=1,(Dm&3932160)===0&&(Dm=262144),Kn=l}else Kn=536870912;return l=Jn.current,l!==null&&(l.flags|=32),Kn}function bn(l,c,f){(l===hi&&(ei===2||ei===9)||l.cancelPendingCommit!==null)&&(hy(l,0),vh(l,Ct,Kn,!1)),Sa(l,f),((qt&2)===0||l!==hi)&&(l===hi&&((qt&2)===0&&(xp|=f),Yi===4&&vh(l,Ct,Kn,!1)),ol(l))}function GF(l,c,f){if((qt&6)!==0)throw Error(r(327));var _=!f&&(c&127)===0&&(c&l.expiredLanes)===0||ip(l,c),x=_?Roe(l,c):gI(l,c,!0),$=_;do{if(x===0){ly&&!_&&vh(l,c,0,!1);break}else{if(f=l.current.alternate,$&&!Ooe(f)){x=gI(l,c,!1),$=!1;continue}if(x===2){if($=c,l.errorRecoveryDisabledLanes&$)var A=0;else A=l.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){c=A;e:{var D=l;x=u_;var q=D.current.memoizedState.isDehydrated;if(q&&(hy(D,A).flags|=256),A=gI(D,A,!1),A!==2){if(cI&&!q){D.errorRecoveryDisabledLanes|=$,xp|=$,x=4;break e}$=_n,_n=x,$!==null&&(_n===null?_n=$:_n.push.apply(_n,$))}x=A}if($=!1,x!==2)continue}}if(x===1){hy(l,0),vh(l,c,0,!0);break}e:{switch(_=l,$=x,$){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:vh(_,c,Kn,!fh);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=sS+300-qs(),10<x)){if(vh(_,c,Kn,!fh),zm(_,0,!0)!==0)break e;Nu=c,_.timeoutHandle=b8(qF.bind(null,_,f,_n,aS,dI,c,Kn,xp,uy,fh,$,"Throttled",-0,0),x);break e}qF(_,f,_n,aS,dI,c,Kn,xp,uy,fh,$,null,-0,0)}}break}while(!0);ol(l)}function qF(l,c,f,_,x,$,A,D,q,se,de,ye,ne,ce){if(l.timeoutHandle=-1,ye=c.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Su},DF(c,$,ye);var ze=($&62914560)===$?sS-qs():($&4194048)===$?VF-qs():0;if(ze=gle(ye,ze),ze!==null){Nu=$,l.cancelPendingCommit=ze(QF.bind(null,l,c,$,f,_,x,A,D,q,de,ye,null,ne,ce)),vh(l,$,A,!se);return}}QF(l,c,$,f,_,x,A,D,q)}function Ooe(l){for(var c=l;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var _=0;_<f.length;_++){var x=f[_],$=x.getSnapshot;x=x.value;try{if(!Zn($(),x))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vh(l,c,f,_){c&=~hI,c&=~xp,l.suspendedLanes|=c,l.pingedLanes&=~c,_&&(l.warmLanes|=c),_=l.expirationTimes;for(var x=c;0<x;){var $=31-Hs(x),A=1<<$;_[$]=-1,x&=~A}f!==0&&fn(l,f,c)}function oS(){return(qt&6)===0?(h_(0),!1):!0}function yI(){if(St!==null){if(ei===0)var l=St.return;else l=St,Tu=fp=null,PC(l),ty=null,Wv=0,l=St;for(;l!==null;)wF(l.alternate,l),l=l.return;St=null}}function hy(l,c){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,Koe(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Nu=0,yI(),hi=l,St=f=$u(l.current,null),Ct=c,ei=0,Qn=null,fh=!1,ly=ip(l,c),cI=!1,uy=Kn=hI=xp=mh=Yi=0,_n=u_=null,dI=!1,(c&8)!==0&&(c|=c&32);var _=l.entangledLanes;if(_!==0)for(l=l.entanglements,_&=c;0<_;){var x=31-Hs(_),$=1<<x;c|=l[x],_&=~$}return Du=c,C2(),f}function BF(l,c){ht=null,te.H=t_,c===ey||c===D2?(c=o6(),ei=3):c===bC?(c=o6(),ei=4):ei=c===ZC?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Qn=c,St===null&&(Yi=1,J2(l,Ma(c,l.current)))}function HF(){var l=Jn.current;return l===null?!0:(Ct&4194048)===Ct?Ia===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?l===Ia:!1}function WF(){var l=te.H;return te.H=t_,l===null?t_:l}function ZF(){var l=te.A;return te.A=Aoe,l}function lS(){Yi=4,fh||(Ct&4194048)!==Ct&&Jn.current!==null||(ly=!0),(mh&134217727)===0&&(xp&134217727)===0||hi===null||vh(hi,Ct,Kn,!1)}function gI(l,c,f){var _=qt;qt|=2;var x=WF(),$=ZF();(hi!==l||Ct!==c)&&(aS=null,hy(l,c)),c=!1;var A=Yi;e:do try{if(ei!==0&&St!==null){var D=St,q=Qn;switch(ei){case 8:yI(),A=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(c=!0);var se=ei;if(ei=0,Qn=null,dy(l,D,q,se),f&&ly){A=0;break e}break;default:se=ei,ei=0,Qn=null,dy(l,D,q,se)}}koe(),A=Yi;break}catch(de){BF(l,de)}while(!0);return c&&l.shellSuspendCounter++,Tu=fp=null,qt=_,te.H=x,te.A=$,St===null&&(hi=null,Ct=0,C2()),A}function koe(){for(;St!==null;)YF(St)}function Roe(l,c){var f=qt;qt|=2;var _=WF(),x=ZF();hi!==l||Ct!==c?(aS=null,nS=qs()+500,hy(l,c)):ly=ip(l,c);e:do try{if(ei!==0&&St!==null){c=St;var $=Qn;t:switch(ei){case 1:ei=0,Qn=null,dy(l,c,$,1);break;case 2:case 9:if(n6($)){ei=0,Qn=null,JF(c);break}c=function(){ei!==2&&ei!==9||hi!==l||(ei=7),ol(l)},$.then(c,c);break e;case 3:ei=7;break e;case 4:ei=5;break e;case 7:n6($)?(ei=0,Qn=null,JF(c)):(ei=0,Qn=null,dy(l,c,$,7));break;case 5:var A=null;switch(St.tag){case 26:A=St.memoizedState;case 5:case 27:var D=St;if(A?R8(A):D.stateNode.complete){ei=0,Qn=null;var q=D.sibling;if(q!==null)St=q;else{var se=D.return;se!==null?(St=se,uS(se)):St=null}break t}}ei=0,Qn=null,dy(l,c,$,5);break;case 6:ei=0,Qn=null,dy(l,c,$,6);break;case 8:yI(),Yi=6;break e;default:throw Error(r(462))}}Doe();break}catch(de){BF(l,de)}while(!0);return Tu=fp=null,te.H=_,te.A=x,qt=f,St!==null?0:(hi=null,Ct=0,C2(),Yi)}function Doe(){for(;St!==null&&!EE();)YF(St)}function YF(l){var c=_F(l.alternate,l,Du);l.memoizedProps=l.pendingProps,c===null?uS(l):St=c}function JF(l){var c=l,f=c.alternate;switch(c.tag){case 15:case 0:c=pF(f,c,c.pendingProps,c.type,void 0,Ct);break;case 11:c=pF(f,c,c.pendingProps,c.type.render,c.ref,Ct);break;case 5:PC(c);default:wF(f,c),c=St=Zz(c,Du),c=_F(f,c,Du)}l.memoizedProps=l.pendingProps,c===null?uS(l):St=c}function dy(l,c,f,_){Tu=fp=null,PC(c),ty=null,Wv=0;var x=c.return;try{if($oe(l,x,c,f,Ct)){Yi=1,J2(l,Ma(f,l.current)),St=null;return}}catch($){if(x!==null)throw St=x,$;Yi=1,J2(l,Ma(f,l.current)),St=null;return}c.flags&32768?(At||_===1?l=!0:ly||(Ct&536870912)!==0?l=!1:(fh=l=!0,(_===2||_===9||_===3||_===6)&&(_=Jn.current,_!==null&&_.tag===13&&(_.flags|=16384))),XF(c,l)):uS(c)}function uS(l){var c=l;do{if((c.flags&32768)!==0){XF(c,fh);return}l=c.return;var f=Eoe(c.alternate,c,Du);if(f!==null){St=f;return}if(c=c.sibling,c!==null){St=c;return}St=c=l}while(c!==null);Yi===0&&(Yi=5)}function XF(l,c){do{var f=Coe(l.alternate,l);if(f!==null){f.flags&=32767,St=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(l=l.sibling,l!==null)){St=l;return}St=l=f}while(l!==null);Yi=6,St=null}function QF(l,c,f,_,x,$,A,D,q){l.cancelPendingCommit=null;do cS();while(Pr!==0);if((qt&6)!==0)throw Error(r(327));if(c!==null){if(c===l.current)throw Error(r(177));if($=c.lanes|c.childLanes,$|=nC,rp(l,f,$,A,D,q),l===hi&&(St=hi=null,Ct=0),cy=c,gh=l,Nu=f,pI=$,fI=x,jF=_,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Voe(km,function(){return r8(),null})):(l.callbackNode=null,l.callbackPriority=0),_=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||_){_=te.T,te.T=null,x=be.p,be.p=2,A=qt,qt|=4;try{Ioe(l,c,f)}finally{qt=A,be.p=x,te.T=_}}Pr=1,KF(),e8(),t8()}}function KF(){if(Pr===1){Pr=0;var l=gh,c=cy,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=te.T,te.T=null;var _=be.p;be.p=2;var x=qt;qt|=4;try{OF(c,l);var $=II,A=Fz(l.containerInfo),D=$.focusedElem,q=$.selectionRange;if(A!==D&&D&&D.ownerDocument&&zz(D.ownerDocument.documentElement,D)){if(q!==null&&eC(D)){var se=q.start,de=q.end;if(de===void 0&&(de=se),"selectionStart"in D)D.selectionStart=se,D.selectionEnd=Math.min(de,D.value.length);else{var ye=D.ownerDocument||document,ne=ye&&ye.defaultView||window;if(ne.getSelection){var ce=ne.getSelection(),ze=D.textContent.length,Ke=Math.min(q.start,ze),ai=q.end===void 0?Ke:Math.min(q.end,ze);!ce.extend&&Ke>ai&&(A=ai,ai=Ke,Ke=A);var ee=Nz(D,Ke),Y=Nz(D,ai);if(ee&&Y&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==Y.node||ce.focusOffset!==Y.offset)){var re=ye.createRange();re.setStart(ee.node,ee.offset),ce.removeAllRanges(),Ke>ai?(ce.addRange(re),ce.extend(Y.node,Y.offset)):(re.setEnd(Y.node,Y.offset),ce.addRange(re))}}}}for(ye=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ye.length;D++){var fe=ye[D];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}SS=!!CI,II=CI=null}finally{qt=x,be.p=_,te.T=f}}l.current=c,Pr=2}}function e8(){if(Pr===2){Pr=0;var l=gh,c=cy,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=te.T,te.T=null;var _=be.p;be.p=2;var x=qt;qt|=4;try{CF(l,c.alternate,c)}finally{qt=x,be.p=_,te.T=f}}Pr=3}}function t8(){if(Pr===4||Pr===3){Pr=0,CE();var l=gh,c=cy,f=Nu,_=jF;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Pr=5:(Pr=0,cy=gh=null,i8(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(yh=null),Ov(f),c=c.stateNode,Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(tp,c,void 0,(c.current.flags&128)===128)}catch{}if(_!==null){c=te.T,x=be.p,be.p=2,te.T=null;try{for(var $=l.onRecoverableError,A=0;A<_.length;A++){var D=_[A];$(D.value,{componentStack:D.stack})}}finally{te.T=c,be.p=x}}(Nu&3)!==0&&cS(),ol(l),x=l.pendingLanes,(f&261930)!==0&&(x&42)!==0?l===mI?c_++:(c_=0,mI=l):c_=0,h_(0)}}function i8(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Bv(c)))}function cS(){return KF(),e8(),t8(),r8()}function r8(){if(Pr!==5)return!1;var l=gh,c=pI;pI=0;var f=Ov(Nu),_=te.T,x=be.p;try{be.p=32>f?32:f,te.T=null,f=fI,fI=null;var $=gh,A=Nu;if(Pr=0,cy=gh=null,Nu=0,(qt&6)!==0)throw Error(r(331));var D=qt;if(qt|=4,zF($.current),RF($,$.current,A,f),qt=D,h_(0,!1),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(tp,$)}catch{}return!0}finally{be.p=x,te.T=_,i8(l,c)}}function s8(l,c,f){c=Ma(f,c),c=WC(l.stateNode,c,2),l=ch(l,c,2),l!==null&&(Sa(l,2),ol(l))}function ti(l,c,f){if(l.tag===3)s8(l,l,f);else for(;c!==null;){if(c.tag===3){s8(c,l,f);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(yh===null||!yh.has(_))){l=Ma(f,l),f=nF(2),_=ch(c,f,2),_!==null&&(aF(f,_,c,l),Sa(_,2),ol(_));break}}c=c.return}}function vI(l,c,f){var _=l.pingCache;if(_===null){_=l.pingCache=new Poe;var x=new Set;_.set(c,x)}else x=_.get(c),x===void 0&&(x=new Set,_.set(c,x));x.has(f)||(cI=!0,x.add(f),l=Noe.bind(null,l,c,f),c.then(l,l))}function Noe(l,c,f){var _=l.pingCache;_!==null&&_.delete(c),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,hi===l&&(Ct&f)===f&&(Yi===4||Yi===3&&(Ct&62914560)===Ct&&300>qs()-sS?(qt&2)===0&&hy(l,0):hI|=f,uy===Ct&&(uy=0)),ol(l)}function n8(l,c){c===0&&(c=ae()),l=hp(l,c),l!==null&&(Sa(l,c),ol(l))}function zoe(l){var c=l.memoizedState,f=0;c!==null&&(f=c.retryLane),n8(l,f)}function Foe(l,c){var f=0;switch(l.tag){case 31:case 13:var _=l.stateNode,x=l.memoizedState;x!==null&&(f=x.retryLane);break;case 19:_=l.stateNode;break;case 22:_=l.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(c),n8(l,f)}function Voe(l,c){return Om(l,c)}var hS=null,py=null,_I=!1,dS=!1,bI=!1,_h=0;function ol(l){l!==py&&l.next===null&&(py===null?hS=py=l:py=py.next=l),dS=!0,_I||(_I=!0,Uoe())}function h_(l,c){if(!bI&&dS){bI=!0;do for(var f=!1,_=hS;_!==null;){if(l!==0){var x=_.pendingLanes;if(x===0)var $=0;else{var A=_.suspendedLanes,D=_.pingedLanes;$=(1<<31-Hs(42|l)+1)-1,$&=x&~(A&~D),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(f=!0,u8(_,$))}else $=Ct,$=zm(_,_===hi?$:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),($&3)===0||ip(_,$)||(f=!0,u8(_,$));_=_.next}while(f);bI=!1}}function joe(){a8()}function a8(){dS=_I=!1;var l=0;_h!==0&&Qoe()&&(l=_h);for(var c=qs(),f=null,_=hS;_!==null;){var x=_.next,$=o8(_,c);$===0?(_.next=null,f===null?hS=x:f.next=x,x===null&&(py=f)):(f=_,(l!==0||($&3)!==0)&&(dS=!0)),_=x}Pr!==0&&Pr!==5||h_(l),_h!==0&&(_h=0)}function o8(l,c){for(var f=l.suspendedLanes,_=l.pingedLanes,x=l.expirationTimes,$=l.pendingLanes&-62914561;0<$;){var A=31-Hs($),D=1<<A,q=x[A];q===-1?((D&f)===0||(D&_)!==0)&&(x[A]=RE(D,c)):q<=c&&(l.expiredLanes|=D),$&=~D}if(c=hi,f=Ct,f=zm(l,l===c?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_=l.callbackNode,f===0||l===c&&(ei===2||ei===9)||l.cancelPendingCommit!==null)return _!==null&&_!==null&&wa(_),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||ip(l,f)){if(c=f&-f,c===l.callbackPriority)return c;switch(_!==null&&wa(_),Ov(f)){case 2:case 8:f=p2;break;case 32:f=km;break;case 268435456:f=f2;break;default:f=km}return _=l8.bind(null,l),f=Om(f,_),l.callbackPriority=c,l.callbackNode=f,c}return _!==null&&_!==null&&wa(_),l.callbackPriority=2,l.callbackNode=null,2}function l8(l,c){if(Pr!==0&&Pr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(cS()&&l.callbackNode!==f)return null;var _=Ct;return _=zm(l,l===hi?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_===0?null:(GF(l,_,c),o8(l,qs()),l.callbackNode!=null&&l.callbackNode===f?l8.bind(null,l):null)}function u8(l,c){if(cS())return null;GF(l,c,!0)}function Uoe(){ele(function(){(qt&6)!==0?Om(d2,joe):a8()})}function wI(){if(_h===0){var l=Qm;l===0&&(l=Rm,Rm<<=1,(Rm&261888)===0&&(Rm=256)),_h=l}return _h}function c8(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:b2(""+l)}function h8(l,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,l.id&&f.setAttribute("form",l.id),c.parentNode.insertBefore(f,c),l=new FormData(l),f.parentNode.removeChild(f),l}function Goe(l,c,f,_,x){if(c==="submit"&&f&&f.stateNode===x){var $=c8((x[ts]||null).action),A=_.submitter;A&&(c=(c=A[ts]||null)?c8(c.formAction):A.getAttribute("formAction"),c!==null&&($=c,A=null));var D=new $2("action","action",null,_,x);l.push({event:D,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(_h!==0){var q=A?h8(x,A):new FormData(x);jC(f,{pending:!0,data:q,method:x.method,action:$},null,q)}}else typeof $=="function"&&(D.preventDefault(),q=A?h8(x,A):new FormData(x),jC(f,{pending:!0,data:q,method:x.method,action:$},$,q))},currentTarget:x}]})}}for(var SI=0;SI<sC.length;SI++){var xI=sC[SI],qoe=xI.toLowerCase(),Boe=xI[0].toUpperCase()+xI.slice(1);co(qoe,"on"+Boe)}co(Uz,"onAnimationEnd"),co(Gz,"onAnimationIteration"),co(qz,"onAnimationStart"),co("dblclick","onDoubleClick"),co("focusin","onFocus"),co("focusout","onBlur"),co(ooe,"onTransitionRun"),co(loe,"onTransitionStart"),co(uoe,"onTransitionCancel"),co(Bz,"onTransitionEnd"),th("onMouseEnter",["mouseout","mouseover"]),th("onMouseLeave",["mouseout","mouseover"]),th("onPointerEnter",["pointerout","pointerover"]),th("onPointerLeave",["pointerout","pointerover"]),wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wu("onBeforeInput",["compositionend","keypress","textInput","paste"]),wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hoe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(d_));function d8(l,c){c=(c&4)!==0;for(var f=0;f<l.length;f++){var _=l[f],x=_.event;_=_.listeners;e:{var $=void 0;if(c)for(var A=_.length-1;0<=A;A--){var D=_[A],q=D.instance,se=D.currentTarget;if(D=D.listener,q!==$&&x.isPropagationStopped())break e;$=D,x.currentTarget=se;try{$(x)}catch(de){E2(de)}x.currentTarget=null,$=q}else for(A=0;A<_.length;A++){if(D=_[A],q=D.instance,se=D.currentTarget,D=D.listener,q!==$&&x.isPropagationStopped())break e;$=D,x.currentTarget=se;try{$(x)}catch(de){E2(de)}x.currentTarget=null,$=q}}}}function xt(l,c){var f=c[it];f===void 0&&(f=c[it]=new Set);var _=l+"__bubble";f.has(_)||(p8(c,l,2,!1),f.add(_))}function $I(l,c,f){var _=0;c&&(_|=4),p8(f,l,_,c)}var pS="_reactListening"+Math.random().toString(36).slice(2);function MI(l){if(!l[pS]){l[pS]=!0,g2.forEach(function(f){f!=="selectionchange"&&(Hoe.has(f)||$I(f,!1,l),$I(f,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[pS]||(c[pS]=!0,$I("selectionchange",!1,c))}}function p8(l,c,f,_){switch(U8(c)){case 2:var x=ble;break;case 8:x=wle;break;default:x=VI}f=x.bind(null,c,f,l),x=void 0,!BE||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),_?x!==void 0?l.addEventListener(c,f,{capture:!0,passive:x}):l.addEventListener(c,f,!0):x!==void 0?l.addEventListener(c,f,{passive:x}):l.addEventListener(c,f,!1)}function TI(l,c,f,_,x){var $=_;if((c&1)===0&&(c&2)===0&&_!==null)e:for(;;){if(_===null)return;var A=_.tag;if(A===3||A===4){var D=_.stateNode.containerInfo;if(D===x)break;if(A===4)for(A=_.return;A!==null;){var q=A.tag;if((q===3||q===4)&&A.stateNode.containerInfo===x)return;A=A.return}for(;D!==null;){if(A=Kc(D),A===null)return;if(q=A.tag,q===5||q===6||q===26||q===27){_=$=A;continue e}D=D.parentNode}}_=_.return}vz(function(){var se=$,de=GE(f),ye=[];e:{var ne=Hz.get(l);if(ne!==void 0){var ce=$2,ze=l;switch(l){case"keypress":if(S2(f)===0)break e;case"keydown":case"keyup":ce=Fae;break;case"focusin":ze="focus",ce=YE;break;case"focusout":ze="blur",ce=YE;break;case"beforeblur":case"afterblur":ce=YE;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=wz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Eae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Uae;break;case Uz:case Gz:case qz:ce=Lae;break;case Bz:ce=qae;break;case"scroll":case"scrollend":ce=Mae;break;case"wheel":ce=Hae;break;case"copy":case"cut":case"paste":ce=Pae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=xz;break;case"toggle":case"beforetoggle":ce=Zae}var Ke=(c&4)!==0,ai=!Ke&&(l==="scroll"||l==="scrollend"),ee=Ke?ne!==null?ne+"Capture":null:ne;Ke=[];for(var Y=se,re;Y!==null;){var fe=Y;if(re=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||re===null||ee===null||(fe=kv(Y,ee),fe!=null&&Ke.push(p_(Y,fe,re))),ai)break;Y=Y.return}0<Ke.length&&(ne=new ce(ne,ze,null,f,de),ye.push({event:ne,listeners:Ke}))}}if((c&7)===0){e:{if(ne=l==="mouseover"||l==="pointerover",ce=l==="mouseout"||l==="pointerout",ne&&f!==UE&&(ze=f.relatedTarget||f.fromElement)&&(Kc(ze)||ze[bu]))break e;if((ce||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,ce?(ze=f.relatedTarget||f.toElement,ce=se,ze=ze?Kc(ze):null,ze!==null&&(ai=n(ze),Ke=ze.tag,ze!==ai||Ke!==5&&Ke!==27&&Ke!==6)&&(ze=null)):(ce=null,ze=se),ce!==ze)){if(Ke=wz,fe="onMouseLeave",ee="onMouseEnter",Y="mouse",(l==="pointerout"||l==="pointerover")&&(Ke=xz,fe="onPointerLeave",ee="onPointerEnter",Y="pointer"),ai=ce==null?ne:ki(ce),re=ze==null?ne:ki(ze),ne=new Ke(fe,Y+"leave",ce,f,de),ne.target=ai,ne.relatedTarget=re,fe=null,Kc(de)===se&&(Ke=new Ke(ee,Y+"enter",ze,f,de),Ke.target=re,Ke.relatedTarget=ai,fe=Ke),ai=fe,ce&&ze)t:{for(Ke=Woe,ee=ce,Y=ze,re=0,fe=ee;fe;fe=Ke(fe))re++;fe=0;for(var Ze=Y;Ze;Ze=Ke(Ze))fe++;for(;0<re-fe;)ee=Ke(ee),re--;for(;0<fe-re;)Y=Ke(Y),fe--;for(;re--;){if(ee===Y||Y!==null&&ee===Y.alternate){Ke=ee;break t}ee=Ke(ee),Y=Ke(Y)}Ke=null}else Ke=null;ce!==null&&f8(ye,ne,ce,Ke,!1),ze!==null&&ai!==null&&f8(ye,ai,ze,Ke,!0)}}e:{if(ne=se?ki(se):window,ce=ne.nodeName&&ne.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ne.type==="file")var zt=Az;else if(Iz(ne))if(Pz)zt=soe;else{zt=ioe;var Ue=toe}else ce=ne.nodeName,!ce||ce.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?se&&jE(se.elementType)&&(zt=Az):zt=roe;if(zt&&(zt=zt(l,se))){Lz(ye,zt,f,de);break e}Ue&&Ue(l,ne,se),l==="focusout"&&se&&ne.type==="number"&&se.memoizedProps.value!=null&&VE(ne,"number",ne.value)}switch(Ue=se?ki(se):window,l){case"focusin":(Iz(Ue)||Ue.contentEditable==="true")&&(qm=Ue,tC=se,Uv=null);break;case"focusout":Uv=tC=qm=null;break;case"mousedown":iC=!0;break;case"contextmenu":case"mouseup":case"dragend":iC=!1,Vz(ye,f,de);break;case"selectionchange":if(aoe)break;case"keydown":case"keyup":Vz(ye,f,de)}var dt;if(XE)e:{switch(l){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Gm?Ez(l,f)&&(It="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(It="onCompositionStart");It&&($z&&f.locale!=="ko"&&(Gm||It!=="onCompositionStart"?It==="onCompositionEnd"&&Gm&&(dt=_z()):(rh=de,HE="value"in rh?rh.value:rh.textContent,Gm=!0)),Ue=fS(se,It),0<Ue.length&&(It=new Sz(It,l,null,f,de),ye.push({event:It,listeners:Ue}),dt?It.data=dt:(dt=Cz(f),dt!==null&&(It.data=dt)))),(dt=Jae?Xae(l,f):Qae(l,f))&&(It=fS(se,"onBeforeInput"),0<It.length&&(Ue=new Sz("onBeforeInput","beforeinput",null,f,de),ye.push({event:Ue,listeners:It}),Ue.data=dt)),Goe(ye,l,se,f,de)}d8(ye,c)})}function p_(l,c,f){return{instance:l,listener:c,currentTarget:f}}function fS(l,c){for(var f=c+"Capture",_=[];l!==null;){var x=l,$=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||$===null||(x=kv(l,f),x!=null&&_.unshift(p_(l,x,$)),x=kv(l,c),x!=null&&_.push(p_(l,x,$))),l.tag===3)return _;l=l.return}return[]}function Woe(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function f8(l,c,f,_,x){for(var $=c._reactName,A=[];f!==null&&f!==_;){var D=f,q=D.alternate,se=D.stateNode;if(D=D.tag,q!==null&&q===_)break;D!==5&&D!==26&&D!==27||se===null||(q=se,x?(se=kv(f,$),se!=null&&A.unshift(p_(f,se,q))):x||(se=kv(f,$),se!=null&&A.push(p_(f,se,q)))),f=f.return}A.length!==0&&l.push({event:c,listeners:A})}var Zoe=/\r\n?/g,Yoe=/\u0000|\uFFFD/g;function m8(l){return(typeof l=="string"?l:""+l).replace(Zoe,`
`).replace(Yoe,"")}function y8(l,c){return c=m8(c),m8(l)===c}function ni(l,c,f,_,x,$){switch(f){case"children":typeof _=="string"?c==="body"||c==="textarea"&&_===""||Vm(l,_):(typeof _=="number"||typeof _=="bigint")&&c!=="body"&&Vm(l,""+_);break;case"className":op(l,"class",_);break;case"tabIndex":op(l,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":op(l,f,_);break;case"style":yz(l,_,$);break;case"data":if(c!=="object"){op(l,"data",_);break}case"src":case"href":if(_===""&&(c!=="a"||f!=="href")){l.removeAttribute(f);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(f);break}_=b2(""+_),l.setAttribute(f,_);break;case"action":case"formAction":if(typeof _=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(f==="formAction"?(c!=="input"&&ni(l,c,"name",x.name,x,null),ni(l,c,"formEncType",x.formEncType,x,null),ni(l,c,"formMethod",x.formMethod,x,null),ni(l,c,"formTarget",x.formTarget,x,null)):(ni(l,c,"encType",x.encType,x,null),ni(l,c,"method",x.method,x,null),ni(l,c,"target",x.target,x,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(f);break}_=b2(""+_),l.setAttribute(f,_);break;case"onClick":_!=null&&(l.onclick=Su);break;case"onScroll":_!=null&&xt("scroll",l);break;case"onScrollEnd":_!=null&&xt("scrollend",l);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(f=_.__html,f!=null){if(x.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":l.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){l.removeAttribute("xlink:href");break}f=b2(""+_),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(f,""+_):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":_===!0?l.setAttribute(f,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(f,_):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?l.setAttribute(f,_):l.removeAttribute(f);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?l.removeAttribute(f):l.setAttribute(f,_);break;case"popover":xt("beforetoggle",l),xt("toggle",l),ih(l,"popover",_);break;case"xlinkActuate":V(l,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":V(l,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":V(l,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":V(l,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":V(l,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":V(l,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":V(l,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":V(l,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":V(l,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":ih(l,"is",_);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=xae.get(f)||f,ih(l,f,_))}}function EI(l,c,f,_,x,$){switch(f){case"style":yz(l,_,$);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(f=_.__html,f!=null){if(x.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof _=="string"?Vm(l,_):(typeof _=="number"||typeof _=="bigint")&&Vm(l,""+_);break;case"onScroll":_!=null&&xt("scroll",l);break;case"onScrollEnd":_!=null&&xt("scrollend",l);break;case"onClick":_!=null&&(l.onclick=Su);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!v2.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),c=f.slice(2,x?f.length-7:void 0),$=l[ts]||null,$=$!=null?$[f]:null,typeof $=="function"&&l.removeEventListener(c,$,x),typeof _=="function")){typeof $!="function"&&$!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(c,_,x);break e}f in l?l[f]=_:_===!0?l.setAttribute(f,""):ih(l,f,_)}}}function ns(l,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",l),xt("load",l);var _=!1,x=!1,$;for($ in f)if(f.hasOwnProperty($)){var A=f[$];if(A!=null)switch($){case"src":_=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ni(l,c,$,A,f,null)}}x&&ni(l,c,"srcSet",f.srcSet,f,null),_&&ni(l,c,"src",f.src,f,null);return;case"input":xt("invalid",l);var D=$=A=x=null,q=null,se=null;for(_ in f)if(f.hasOwnProperty(_)){var de=f[_];if(de!=null)switch(_){case"name":x=de;break;case"type":A=de;break;case"checked":q=de;break;case"defaultChecked":se=de;break;case"value":$=de;break;case"defaultValue":D=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:ni(l,c,_,de,f,null)}}dz(l,$,D,q,se,A,x,!1);return;case"select":xt("invalid",l),_=A=$=null;for(x in f)if(f.hasOwnProperty(x)&&(D=f[x],D!=null))switch(x){case"value":$=D;break;case"defaultValue":A=D;break;case"multiple":_=D;default:ni(l,c,x,D,f,null)}c=$,f=A,l.multiple=!!_,c!=null?Fm(l,!!_,c,!1):f!=null&&Fm(l,!!_,f,!0);return;case"textarea":xt("invalid",l),$=x=_=null;for(A in f)if(f.hasOwnProperty(A)&&(D=f[A],D!=null))switch(A){case"value":_=D;break;case"defaultValue":x=D;break;case"children":$=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:ni(l,c,A,D,f,null)}fz(l,_,x,$);return;case"option":for(q in f)if(f.hasOwnProperty(q)&&(_=f[q],_!=null))switch(q){case"selected":l.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:ni(l,c,q,_,f,null)}return;case"dialog":xt("beforetoggle",l),xt("toggle",l),xt("cancel",l),xt("close",l);break;case"iframe":case"object":xt("load",l);break;case"video":case"audio":for(_=0;_<d_.length;_++)xt(d_[_],l);break;case"image":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"embed":case"source":case"link":xt("error",l),xt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in f)if(f.hasOwnProperty(se)&&(_=f[se],_!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ni(l,c,se,_,f,null)}return;default:if(jE(c)){for(de in f)f.hasOwnProperty(de)&&(_=f[de],_!==void 0&&EI(l,c,de,_,f,void 0));return}}for(D in f)f.hasOwnProperty(D)&&(_=f[D],_!=null&&ni(l,c,D,_,f,null))}function Joe(l,c,f,_){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,$=null,A=null,D=null,q=null,se=null,de=null;for(ce in f){var ye=f[ce];if(f.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":q=ye;default:_.hasOwnProperty(ce)||ni(l,c,ce,null,_,ye)}}for(var ne in _){var ce=_[ne];if(ye=f[ne],_.hasOwnProperty(ne)&&(ce!=null||ye!=null))switch(ne){case"type":$=ce;break;case"name":x=ce;break;case"checked":se=ce;break;case"defaultChecked":de=ce;break;case"value":A=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,c));break;default:ce!==ye&&ni(l,c,ne,ce,_,ye)}}FE(l,A,D,q,se,de,$,x);return;case"select":ce=A=D=ne=null;for($ in f)if(q=f[$],f.hasOwnProperty($)&&q!=null)switch($){case"value":break;case"multiple":ce=q;default:_.hasOwnProperty($)||ni(l,c,$,null,_,q)}for(x in _)if($=_[x],q=f[x],_.hasOwnProperty(x)&&($!=null||q!=null))switch(x){case"value":ne=$;break;case"defaultValue":D=$;break;case"multiple":A=$;default:$!==q&&ni(l,c,x,$,_,q)}c=D,f=A,_=ce,ne!=null?Fm(l,!!f,ne,!1):!!_!=!!f&&(c!=null?Fm(l,!!f,c,!0):Fm(l,!!f,f?[]:"",!1));return;case"textarea":ce=ne=null;for(D in f)if(x=f[D],f.hasOwnProperty(D)&&x!=null&&!_.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ni(l,c,D,null,_,x)}for(A in _)if(x=_[A],$=f[A],_.hasOwnProperty(A)&&(x!=null||$!=null))switch(A){case"value":ne=x;break;case"defaultValue":ce=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==$&&ni(l,c,A,x,_,$)}pz(l,ne,ce);return;case"option":for(var ze in f)if(ne=f[ze],f.hasOwnProperty(ze)&&ne!=null&&!_.hasOwnProperty(ze))switch(ze){case"selected":l.selected=!1;break;default:ni(l,c,ze,null,_,ne)}for(q in _)if(ne=_[q],ce=f[q],_.hasOwnProperty(q)&&ne!==ce&&(ne!=null||ce!=null))switch(q){case"selected":l.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:ni(l,c,q,ne,_,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in f)ne=f[Ke],f.hasOwnProperty(Ke)&&ne!=null&&!_.hasOwnProperty(Ke)&&ni(l,c,Ke,null,_,ne);for(se in _)if(ne=_[se],ce=f[se],_.hasOwnProperty(se)&&ne!==ce&&(ne!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,c));break;default:ni(l,c,se,ne,_,ce)}return;default:if(jE(c)){for(var ai in f)ne=f[ai],f.hasOwnProperty(ai)&&ne!==void 0&&!_.hasOwnProperty(ai)&&EI(l,c,ai,void 0,_,ne);for(de in _)ne=_[de],ce=f[de],!_.hasOwnProperty(de)||ne===ce||ne===void 0&&ce===void 0||EI(l,c,de,ne,_,ce);return}}for(var ee in f)ne=f[ee],f.hasOwnProperty(ee)&&ne!=null&&!_.hasOwnProperty(ee)&&ni(l,c,ee,null,_,ne);for(ye in _)ne=_[ye],ce=f[ye],!_.hasOwnProperty(ye)||ne===ce||ne==null&&ce==null||ni(l,c,ye,ne,_,ce)}function g8(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xoe(){if(typeof performance.getEntriesByType=="function"){for(var l=0,c=0,f=performance.getEntriesByType("resource"),_=0;_<f.length;_++){var x=f[_],$=x.transferSize,A=x.initiatorType,D=x.duration;if($&&D&&g8(A)){for(A=0,D=x.responseEnd,_+=1;_<f.length;_++){var q=f[_],se=q.startTime;if(se>D)break;var de=q.transferSize,ye=q.initiatorType;de&&g8(ye)&&(q=q.responseEnd,A+=de*(q<D?1:(D-se)/(q-se)))}if(--_,c+=8*($+A)/(x.duration/1e3),l++,10<l)break}}if(0<l)return c/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var CI=null,II=null;function mS(l){return l.nodeType===9?l:l.ownerDocument}function v8(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _8(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function LI(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var AI=null;function Qoe(){var l=window.event;return l&&l.type==="popstate"?l===AI?!1:(AI=l,!0):(AI=null,!1)}var b8=typeof setTimeout=="function"?setTimeout:void 0,Koe=typeof clearTimeout=="function"?clearTimeout:void 0,w8=typeof Promise=="function"?Promise:void 0,ele=typeof queueMicrotask=="function"?queueMicrotask:typeof w8<"u"?function(l){return w8.resolve(null).then(l).catch(tle)}:b8;function tle(l){setTimeout(function(){throw l})}function bh(l){return l==="head"}function S8(l,c){var f=c,_=0;do{var x=f.nextSibling;if(l.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(_===0){l.removeChild(x),gy(c);return}_--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")_++;else if(f==="html")f_(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,f_(f);for(var $=f.firstChild;$;){var A=$.nextSibling,D=$.nodeName;$[np]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&$.rel.toLowerCase()==="stylesheet"||f.removeChild($),$=A}}else f==="body"&&f_(l.ownerDocument.body);f=x}while(f);gy(c)}function x8(l,c){var f=l;l=0;do{var _=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),_&&_.nodeType===8)if(f=_.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=_}while(f)}function PI(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":PI(f),ap(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function ile(l,c,f,_){for(;l.nodeType===1;){var x=f;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!_&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(_){if(!l[np])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if($=l.getAttribute("rel"),$==="stylesheet"&&l.hasAttribute("data-precedence"))break;if($!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if($=l.getAttribute("src"),($!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&$&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var $=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===$)return l}else return l;if(l=La(l.nextSibling),l===null)break}return null}function rle(l,c,f){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=La(l.nextSibling),l===null))return null;return l}function $8(l,c){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!c||(l=La(l.nextSibling),l===null))return null;return l}function OI(l){return l.data==="$?"||l.data==="$~"}function kI(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function sle(l,c){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=c;else if(l.data!=="$?"||f.readyState!=="loading")c();else{var _=function(){c(),f.removeEventListener("DOMContentLoaded",_)};f.addEventListener("DOMContentLoaded",_),l._reactRetry=_}}function La(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return l}var RI=null;function M8(l){l=l.nextSibling;for(var c=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(c===0)return La(l.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}l=l.nextSibling}return null}function T8(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return l;c--}else f!=="/$"&&f!=="/&"||c++}l=l.previousSibling}return null}function E8(l,c,f){switch(c=mS(f),l){case"html":if(l=c.documentElement,!l)throw Error(r(452));return l;case"head":if(l=c.head,!l)throw Error(r(453));return l;case"body":if(l=c.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function f_(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);ap(l)}var Aa=new Map,C8=new Set;function yS(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zu=be.d;be.d={f:nle,r:ale,D:ole,C:lle,L:ule,m:cle,X:dle,S:hle,M:ple};function nle(){var l=zu.f(),c=oS();return l||c}function ale(l){var c=rl(l);c!==null&&c.tag===5&&c.type==="form"?B6(c):zu.r(l)}var fy=typeof document>"u"?null:document;function I8(l,c,f){var _=fy;if(_&&typeof c=="string"&&c){var x=xa(c);x='link[rel="'+l+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),C8.has(x)||(C8.add(x),l={rel:l,crossOrigin:f,href:c},_.querySelector(x)===null&&(c=_.createElement("link"),ns(c,"link",l),cr(c),_.head.appendChild(c)))}}function ole(l){zu.D(l),I8("dns-prefetch",l,null)}function lle(l,c){zu.C(l,c),I8("preconnect",l,c)}function ule(l,c,f){zu.L(l,c,f);var _=fy;if(_&&l&&c){var x='link[rel="preload"][as="'+xa(c)+'"]';c==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+xa(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+xa(f.imageSizes)+'"]')):x+='[href="'+xa(l)+'"]';var $=x;switch(c){case"style":$=my(l);break;case"script":$=yy(l)}Aa.has($)||(l=y({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:l,as:c},f),Aa.set($,l),_.querySelector(x)!==null||c==="style"&&_.querySelector(m_($))||c==="script"&&_.querySelector(y_($))||(c=_.createElement("link"),ns(c,"link",l),cr(c),_.head.appendChild(c)))}}function cle(l,c){zu.m(l,c);var f=fy;if(f&&l){var _=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+xa(_)+'"][href="'+xa(l)+'"]',$=x;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=yy(l)}if(!Aa.has($)&&(l=y({rel:"modulepreload",href:l},c),Aa.set($,l),f.querySelector(x)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(y_($)))return}_=f.createElement("link"),ns(_,"link",l),cr(_),f.head.appendChild(_)}}}function hle(l,c,f){zu.S(l,c,f);var _=fy;if(_&&l){var x=eh(_).hoistableStyles,$=my(l);c=c||"default";var A=x.get($);if(!A){var D={loading:0,preload:null};if(A=_.querySelector(m_($)))D.loading=5;else{l=y({rel:"stylesheet",href:l,"data-precedence":c},f),(f=Aa.get($))&&DI(l,f);var q=A=_.createElement("link");cr(q),ns(q,"link",l),q._p=new Promise(function(se,de){q.onload=se,q.onerror=de}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,gS(A,c,_)}A={type:"stylesheet",instance:A,count:1,state:D},x.set($,A)}}}function dle(l,c){zu.X(l,c);var f=fy;if(f&&l){var _=eh(f).hoistableScripts,x=yy(l),$=_.get(x);$||($=f.querySelector(y_(x)),$||(l=y({src:l,async:!0},c),(c=Aa.get(x))&&NI(l,c),$=f.createElement("script"),cr($),ns($,"link",l),f.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(x,$))}}function ple(l,c){zu.M(l,c);var f=fy;if(f&&l){var _=eh(f).hoistableScripts,x=yy(l),$=_.get(x);$||($=f.querySelector(y_(x)),$||(l=y({src:l,async:!0,type:"module"},c),(c=Aa.get(x))&&NI(l,c),$=f.createElement("script"),cr($),ns($,"link",l),f.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},_.set(x,$))}}function L8(l,c,f,_){var x=(x=ot.current)?yS(x):null;if(!x)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=my(f.href),f=eh(x).hoistableStyles,_=f.get(c),_||(_={type:"style",instance:null,count:0,state:null},f.set(c,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=my(f.href);var $=eh(x).hoistableStyles,A=$.get(l);if(A||(x=x.ownerDocument||x,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(l,A),($=x.querySelector(m_(l)))&&!$._p&&(A.instance=$,A.state.loading=5),Aa.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Aa.set(l,f),$||fle(x,l,f,A.state))),c&&_===null)throw Error(r(528,""));return A}if(c&&_!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=yy(f),f=eh(x).hoistableScripts,_=f.get(c),_||(_={type:"script",instance:null,count:0,state:null},f.set(c,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function my(l){return'href="'+xa(l)+'"'}function m_(l){return'link[rel="stylesheet"]['+l+"]"}function A8(l){return y({},l,{"data-precedence":l.precedence,precedence:null})}function fle(l,c,f,_){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?_.loading=1:(c=l.createElement("link"),_.preload=c,c.addEventListener("load",function(){return _.loading|=1}),c.addEventListener("error",function(){return _.loading|=2}),ns(c,"link",f),cr(c),l.head.appendChild(c))}function yy(l){return'[src="'+xa(l)+'"]'}function y_(l){return"script[async]"+l}function P8(l,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var _=l.querySelector('style[data-href~="'+xa(f.href)+'"]');if(_)return c.instance=_,cr(_),_;var x=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return _=(l.ownerDocument||l).createElement("style"),cr(_),ns(_,"style",x),gS(_,f.precedence,l),c.instance=_;case"stylesheet":x=my(f.href);var $=l.querySelector(m_(x));if($)return c.state.loading|=4,c.instance=$,cr($),$;_=A8(f),(x=Aa.get(x))&&DI(_,x),$=(l.ownerDocument||l).createElement("link"),cr($);var A=$;return A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),ns($,"link",_),c.state.loading|=4,gS($,f.precedence,l),c.instance=$;case"script":return $=yy(f.src),(x=l.querySelector(y_($)))?(c.instance=x,cr(x),x):(_=f,(x=Aa.get($))&&(_=y({},f),NI(_,x)),l=l.ownerDocument||l,x=l.createElement("script"),cr(x),ns(x,"link",_),l.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(_=c.instance,c.state.loading|=4,gS(_,f.precedence,l));return c.instance}function gS(l,c,f){for(var _=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=_.length?_[_.length-1]:null,$=x,A=0;A<_.length;A++){var D=_[A];if(D.dataset.precedence===c)$=D;else if($!==x)break}$?$.parentNode.insertBefore(l,$.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(l,c.firstChild))}function DI(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function NI(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var vS=null;function O8(l,c,f){if(vS===null){var _=new Map,x=vS=new Map;x.set(f,_)}else x=vS,_=x.get(f),_||(_=new Map,x.set(f,_));if(_.has(l))return _;for(_.set(l,null),f=f.getElementsByTagName(l),x=0;x<f.length;x++){var $=f[x];if(!($[np]||$[mi]||l==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var A=$.getAttribute(c)||"";A=l+A;var D=_.get(A);D?D.push($):_.set(A,[$])}}return _}function k8(l,c,f){l=l.ownerDocument||l,l.head.insertBefore(f,c==="title"?l.querySelector("head > title"):null)}function mle(l,c,f){if(f===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function R8(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function yle(l,c,f,_){if(f.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=my(_.href),$=c.querySelector(m_(x));if($){c=$._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(l.count++,l=_S.bind(l),c.then(l,l)),f.state.loading|=4,f.instance=$,cr($);return}$=c.ownerDocument||c,_=A8(_),(x=Aa.get(x))&&DI(_,x),$=$.createElement("link"),cr($);var A=$;A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),ns($,"link",_),f.instance=$}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=_S.bind(l),c.addEventListener("load",f),c.addEventListener("error",f))}}var zI=0;function gle(l,c){return l.stylesheets&&l.count===0&&wS(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var _=setTimeout(function(){if(l.stylesheets&&wS(l,l.stylesheets),l.unsuspend){var $=l.unsuspend;l.unsuspend=null,$()}},6e4+c);0<l.imgBytes&&zI===0&&(zI=62500*Xoe());var x=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&wS(l,l.stylesheets),l.unsuspend)){var $=l.unsuspend;l.unsuspend=null,$()}},(l.imgBytes>zI?50:800)+c);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(_),clearTimeout(x)}}:null}function _S(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var bS=null;function wS(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,bS=new Map,c.forEach(vle,l),bS=null,_S.call(l))}function vle(l,c){if(!(c.state.loading&4)){var f=bS.get(l);if(f)var _=f.get(null);else{f=new Map,bS.set(l,f);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<x.length;$++){var A=x[$];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(f.set(A.dataset.precedence,A),_=A)}_&&f.set(null,_)}x=c.instance,A=x.getAttribute("data-precedence"),$=f.get(A)||_,$===_&&f.set(null,x),f.set(A,x),this.count++,_=_S.bind(this),x.addEventListener("load",_),x.addEventListener("error",_),$?$.parentNode.insertBefore(x,$.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),c.state.loading|=4}}var g_={$$typeof:L,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function _le(l,c,f,_,x,$,A,D,q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.hiddenUpdates=ri(null),this.identifierPrefix=_,this.onUncaughtError=x,this.onCaughtError=$,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function D8(l,c,f,_,x,$,A,D,q,se,de,ye){return l=new _le(l,c,f,A,q,se,de,ye,D),c=1,$===!0&&(c|=24),$=Yn(3,null,null,c),l.current=$,$.stateNode=l,c=gC(),c.refCount++,l.pooledCache=c,c.refCount++,$.memoizedState={element:_,isDehydrated:f,cache:c},wC($),l}function N8(l){return l?(l=Wm,l):Wm}function z8(l,c,f,_,x,$){x=N8(x),_.context===null?_.context=x:_.pendingContext=x,_=uh(c),_.payload={element:f},$=$===void 0?null:$,$!==null&&(_.callback=$),f=ch(l,_,c),f!==null&&(bn(f,l,c),Yv(f,l,c))}function F8(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<c?f:c}}function FI(l,c){F8(l,c),(l=l.alternate)&&F8(l,c)}function V8(l){if(l.tag===13||l.tag===31){var c=hp(l,67108864);c!==null&&bn(c,l,67108864),FI(l,67108864)}}function j8(l){if(l.tag===13||l.tag===31){var c=ea();c=Xc(c);var f=hp(l,c);f!==null&&bn(f,l,c),FI(l,c)}}var SS=!0;function ble(l,c,f,_){var x=te.T;te.T=null;var $=be.p;try{be.p=2,VI(l,c,f,_)}finally{be.p=$,te.T=x}}function wle(l,c,f,_){var x=te.T;te.T=null;var $=be.p;try{be.p=8,VI(l,c,f,_)}finally{be.p=$,te.T=x}}function VI(l,c,f,_){if(SS){var x=jI(_);if(x===null)TI(l,c,_,xS,f),G8(l,_);else if(xle(x,l,c,f,_))_.stopPropagation();else if(G8(l,_),c&4&&-1<Sle.indexOf(l)){for(;x!==null;){var $=rl(x);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var A=_u($.pendingLanes);if(A!==0){var D=$;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var q=1<<31-Hs(A);D.entanglements[1]|=q,A&=~q}ol($),(qt&6)===0&&(nS=qs()+500,h_(0))}}break;case 31:case 13:D=hp($,2),D!==null&&bn(D,$,2),oS(),FI($,2)}if($=jI(_),$===null&&TI(l,c,_,xS,f),$===x)break;x=$}x!==null&&_.stopPropagation()}else TI(l,c,_,null,f)}}function jI(l){return l=GE(l),UI(l)}var xS=null;function UI(l){if(xS=null,l=Kc(l),l!==null){var c=n(l);if(c===null)l=null;else{var f=c.tag;if(f===13){if(l=a(c),l!==null)return l;l=null}else if(f===31){if(l=o(c),l!==null)return l;l=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return xS=l,null}function U8(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(IE()){case d2:return 2;case p2:return 8;case km:case hz:return 32;case f2:return 268435456;default:return 32}default:return 32}}var GI=!1,wh=null,Sh=null,xh=null,v_=new Map,__=new Map,$h=[],Sle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G8(l,c){switch(l){case"focusin":case"focusout":wh=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":xh=null;break;case"pointerover":case"pointerout":v_.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":__.delete(c.pointerId)}}function b_(l,c,f,_,x,$){return l===null||l.nativeEvent!==$?(l={blockedOn:c,domEventName:f,eventSystemFlags:_,nativeEvent:$,targetContainers:[x]},c!==null&&(c=rl(c),c!==null&&V8(c)),l):(l.eventSystemFlags|=_,c=l.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),l)}function xle(l,c,f,_,x){switch(c){case"focusin":return wh=b_(wh,l,c,f,_,x),!0;case"dragenter":return Sh=b_(Sh,l,c,f,_,x),!0;case"mouseover":return xh=b_(xh,l,c,f,_,x),!0;case"pointerover":var $=x.pointerId;return v_.set($,b_(v_.get($)||null,l,c,f,_,x)),!0;case"gotpointercapture":return $=x.pointerId,__.set($,b_(__.get($)||null,l,c,f,_,x)),!0}return!1}function q8(l){var c=Kc(l.target);if(c!==null){var f=n(c);if(f!==null){if(c=f.tag,c===13){if(c=a(f),c!==null){l.blockedOn=c,Qc(l.priority,function(){j8(f)});return}}else if(c===31){if(c=o(f),c!==null){l.blockedOn=c,Qc(l.priority,function(){j8(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function $S(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var f=jI(l.nativeEvent);if(f===null){f=l.nativeEvent;var _=new f.constructor(f.type,f);UE=_,f.target.dispatchEvent(_),UE=null}else return c=rl(f),c!==null&&V8(c),l.blockedOn=f,!1;c.shift()}return!0}function B8(l,c,f){$S(l)&&f.delete(c)}function $le(){GI=!1,wh!==null&&$S(wh)&&(wh=null),Sh!==null&&$S(Sh)&&(Sh=null),xh!==null&&$S(xh)&&(xh=null),v_.forEach(B8),__.forEach(B8)}function MS(l,c){l.blockedOn===c&&(l.blockedOn=null,GI||(GI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$le)))}var TS=null;function H8(l){TS!==l&&(TS=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){TS===l&&(TS=null);for(var c=0;c<l.length;c+=3){var f=l[c],_=l[c+1],x=l[c+2];if(typeof _!="function"){if(UI(_||f)===null)continue;break}var $=rl(f);$!==null&&(l.splice(c,3),c-=3,jC($,{pending:!0,data:x,method:f.method,action:_},_,x))}}))}function gy(l){function c(q){return MS(q,l)}wh!==null&&MS(wh,l),Sh!==null&&MS(Sh,l),xh!==null&&MS(xh,l),v_.forEach(c),__.forEach(c);for(var f=0;f<$h.length;f++){var _=$h[f];_.blockedOn===l&&(_.blockedOn=null)}for(;0<$h.length&&(f=$h[0],f.blockedOn===null);)q8(f),f.blockedOn===null&&$h.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(_=0;_<f.length;_+=3){var x=f[_],$=f[_+1],A=x[ts]||null;if(typeof $=="function")A||H8(f);else if(A){var D=null;if($&&$.hasAttribute("formAction")){if(x=$,A=$[ts]||null)D=A.formAction;else if(UI(x)!==null)continue}else D=A.action;typeof D=="function"?f[_+1]=D:(f.splice(_,3),_-=3),H8(f)}}}function W8(){function l($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(A){return x=A})},focusReset:"manual",scroll:"manual"})}function c(){x!==null&&(x(),x=null),_||setTimeout(f,20)}function f(){if(!_&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,x=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){_=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),x!==null&&(x(),x=null)}}}function qI(l){this._internalRoot=l}ES.prototype.render=qI.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,_=ea();z8(f,_,l,c,null,null)},ES.prototype.unmount=qI.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;z8(l.current,2,null,l,null,null),oS(),c[bu]=null}};function ES(l){this._internalRoot=l}ES.prototype.unstable_scheduleHydration=function(l){if(l){var c=ur();l={blockedOn:null,target:l,priority:c};for(var f=0;f<$h.length&&c!==0&&c<$h[f].priority;f++);$h.splice(f,0,l),f===0&&q8(l)}};var Z8=e.version;if(Z8!=="19.2.0")throw Error(r(527,Z8,"19.2.0"));be.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=h(c),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var Mle={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CS.isDisabled&&CS.supportsFiber)try{tp=CS.inject(Mle),Bs=CS}catch{}}return x_.createRoot=function(l,c){if(!s(l))throw Error(r(299));var f=!1,_="",x=tF,$=iF,A=rF;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&($=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=D8(l,1,!1,null,null,f,_,null,x,$,A,W8),l[bu]=c.current,MI(l),new qI(c)},x_.hydrateRoot=function(l,c,f){if(!s(l))throw Error(r(299));var _=!1,x="",$=tF,A=iF,D=rF,q=null;return f!=null&&(f.unstable_strictMode===!0&&(_=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&($=f.onUncaughtError),f.onCaughtError!==void 0&&(A=f.onCaughtError),f.onRecoverableError!==void 0&&(D=f.onRecoverableError),f.formState!==void 0&&(q=f.formState)),c=D8(l,1,!0,c,f??null,_,x,q,$,A,D,W8),c.context=N8(null),f=c.current,_=ea(),_=Xc(_),x=uh(_),x.callback=null,ch(f,x,_),f=_,c.current.lanes=f,Sa(c,f),ol(c),l[bu]=c.current,MI(l),new ES(c)},x_.version="19.2.0",x_}var aV;function Nle(){if(aV)return ZI.exports;aV=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ZI.exports=Dle(),ZI.exports}var zle=Nle();function d(t,e,i,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(n=(s<3?a(n):s>3?a(e,i,n):a(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n}function Aje(t,e){return function(i,r){e(i,r,t)}}function Pje(t,e,i,r){function s(n){return n instanceof i?n:new i(function(a){a(n)})}return new(i||(i=Promise))(function(n,a){function o(p){try{h(r.next(p))}catch(y){a(y)}}function u(p){try{h(r.throw(p))}catch(y){a(y)}}function h(p){p.done?n(p.value):s(p.value).then(o,u)}h((r=r.apply(t,e||[])).next())})}function Oje(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var Fle=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function kje(t){function e(n){t.error=t.hasError?new Fle(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}var i,r=0;function s(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,function(a){return e(a),s()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}const Vle="modulepreload",jle=function(t,e){return new URL(t,e).href},oV={},K=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){let h=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),u=o?.nonce||o?.getAttribute("nonce");s=h(i.map(p=>{if(p=jle(p,r),p in oV)return;oV[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(r)for(let w=a.length-1;w>=0;w--){const S=a[w];if(S.href===p&&(!y||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Vle,y||(b.as="script"),b.crossOrigin="",b.href=p,u&&b.setAttribute("nonce",u),document.head.appendChild(b),y)return new Promise((w,S)=>{b.addEventListener("load",w),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})};let md;const os=globalThis;function X(t){return typeof md[t]=="function"?md[t]=md[t](os):md[t]}md=os.dojoConfig?.has||os.esriConfig?.has?{...os.dojoConfig?.has,...os.esriConfig?.has}:{},X.add=(t,e,i,r)=>{(r||md[t]===void 0)&&(md[t]=e),i&&X(t)},X.cache=md,X.add("big-integer-warning-enabled",!0),X.add("esri-deprecation-warnings",!0),X.add("esri-tests-disable-screenshots",!1),X.add("esri-tests-use-full-window",!1),X.add("esri-tests-post-to-influx",!0),X.add("esri-cim-animations-enable-status","enabled"),X.add("esri-cim-animations-spotlight",!1),X.add("esri-cim-animations-freeze-time",!1),(()=>{X.add("host-webworker",os.WorkerGlobalScope!==void 0&&self instanceof os.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(X.add("host-browser",t),X.add("host-node",!(typeof os.process!="object"||!os.process.versions?.node||!os.process.versions.v8)),X.add("dom",t),X("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,s=parseFloat(r);if(X.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),X.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),X.add("khtml",r.includes("Konqueror")?s:void 0),X.add("edge",parseFloat(i.split("Edge/")[1])||void 0),X.add("opr",parseFloat(i.split("OPR/")[1])||void 0),X.add("webkit",!X("wp")&&!X("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),X.add("chrome",!X("edge")&&!X("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),X.add("android",!X("wp")&&parseFloat(i.split("Android ")[1])||void 0),X.add("safari",!r.includes("Safari")||X("wp")||X("chrome")||X("android")||X("edge")||X("opr")?void 0:parseFloat(r.split("Version/")[1])),X.add("mac",r.includes("Macintosh")),!X("wp")&&/(iPhone|iPod|iPad)/.test(i)){const n=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",o=parseFloat(a.replace(/_/,".").replaceAll("_",""));X.add(n,o),X.add("ios",o)}X("webkit")||(!i.includes("Gecko")||X("wp")||X("khtml")||X("edge")||X.add("mozilla",s),X("mozilla")&&X.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(os.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&X.add("esri-mobile",e),i&&X.add("esri-iPhone",i),X.add("esri-geolocation",!!navigator.geolocation)}X.add("esri-wasm","WebAssembly"in os),X.add("esri-performance-mode-frames-between-render",20),X.add("esri-force-performance-mode",!1),X.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in os,e=os.crossOriginIsolated===!1;return t&&!e}),X.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),X.add("esri-atomics","Atomics"in os),X.add("esri-workers","Worker"in os),X.add("web-feat:cache","caches"in os),X.add("esri-workers-arraybuffer-transfer",!X("safari")||Number(X("safari"))>=12),X.add("workers-pool-size",8),X.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),X.add("featurelayer-simplify-payload-size-factors",[1,1,4]),X.add("featurelayer-fast-triangulation-enabled",!0),X.add("featurelayer-animation-enabled",!0),X.add("featurelayer-snapshot-enabled",!0),X.add("featurelayer-snapshot-initial-tolerance",0),X.add("featurelayer-snapshot-point-min-threshold",8e4),X.add("featurelayer-snapshot-point-max-threshold",4e5),X.add("featurelayer-snapshot-multipoint-min-threshold",2e4),X.add("featurelayer-snapshot-multipoint-max-threshold",1e5),X.add("featurelayer-snapshot-polygon-min-threshold",2e3),X.add("featurelayer-snapshot-polygon-max-threshold",2e3),X.add("featurelayer-snapshot-polyline-min-threshold",2e3),X.add("featurelayer-snapshot-polyline-max-threshold",2e3),X.add("featurelayer-snapshot-max-vertex-count",25e4),X.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),X.add("featurelayer-snapshot-concurrency",4),X.add("featurelayer-snapshot-coverage",.1),X.add("featurelayer-query-max-depth",4),X.add("featurelayer-query-pausing-enabled",!1),X.add("featurelayer-query-tile-concurrency",4),X.add("featurelayer-query-tile-max-features",6e5),X.add("featurelayer-advanced-symbols",!1),X.add("featurelayer-pbf",!0),X.add("featurelayer-pbf-statistics",!1),X.add("feature-layers-workers",!0),X.add("feature-polyline-generalization-factor",1),X.add("parquetlayer-full-query-feature-count",2e4),X.add("parquetlayer-hittest-max-feature-count",1),X.add("parquetlayer-persistence-enabled",!1),X.add("mapview-transitions-duration",200),X.add("mapview-essential-goto-duration",200),X.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),X.add("mapserver-pbf-version-support",10.81),X.add("mapservice-popup-identify-max-tolerance",20),X.add("request-queue-concurrency-hosted",16),X.add("request-queue-concurrency-non-hosted",4),X.add("curve-densification-coarse-segments",128),X.add("curve-densification-max-segments",2e3),X.add("curve-densification-min-segments",3),X.add("curve-densification-pixel-deviation",.5),X.add("view-readyState-waiting-delay",1e3),X.add("gradient-depth-bias",.01),X.add("gradient-depth-epsilon",1e-8),X.add("enable-feature:esri-compress-textures",!0),X("host-webworker")||X("host-browser")&&(X.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),X.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Rje(t){}function Ule(t){return()=>t}function Dje(t){return t}var kn;let j5=(kn=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*kn._m}getInt(){return this._seed=(kn._a*this._seed+kn._c)%kn._m,this._seed}getFloat(){return this.getInt()/(kn._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/kn._m*r}},kn._m=2147483647,kn._a=48271,kn._c=0,kn);const Gle=1.5,Nje=1/Gle,zje=.5;function GB(t){return t}function qle(t,e=GB){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let s=1;s<t.length;++s){const n=t[s],a=Number(e(n));a>r&&(r=a,i=n)}return i}function Fje(t,e=GB){return qle(t,i=>-e(i))}function Vje(t,e){return e?t.filter((i,r,s)=>s.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function Ble(t,e,i,r,s,n,a){if(t==null&&r==null)return!0;e=Math.max(0,e),s=Math.max(0,s),i=Math.max(0,i<0?(t?.length??0)+i:i),n=Math.max(0,n<0?(r?.length??0)+n:n);const o=i-e;if(t==null||r==null||o!==n-s)return!1;if(a){for(let u=0;u<o;u++)if(!a(t[e+u],r[s+u]))return!1}else for(let u=0;u<o;u++)if(t[e+u]!==r[s+u])return!1;return!0}function XT(t,e,i){return Ble(t,0,t?.length??0,e,0,e?.length??0,i)}function jje(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function lV(t,e,i){let r,s;return i?(r=e.filter(n=>!t.some(a=>i(a,n))),s=t.filter(n=>!e.some(a=>i(a,n)))):(r=e.filter(n=>!t.includes(n)),s=t.filter(n=>!e.includes(n))),{added:r,removed:s}}function Uje(t){return t&&typeof t.length=="number"}function Gje(t,e){const i=t.length;if(i===0)return[];const r=[];for(let s=0;s<i;s+=e)r.push(t.slice(s,s+e));return r}let qB=class{constructor(){this.last=0}};const BB=new qB;function KA(t,e,i,r){r=r||BB;const s=Math.max(0,r.last-10);for(let a=s;a<i;++a)if(t[a]===e)return r.last=a,a;const n=Math.min(s,i);for(let a=0;a<n;++a)if(t[a]===e)return r.last=a,a;return-1}function eP(t,e,i,r){const s=t.length,n=KA(t,e,s,r);if(n!==-1)return t[n]=t[s-1],t.pop(),e}const yo=new Set;function Hle(t,e,i=t.length,r=e.length,s,n){if(r===0||i===0)return i;yo.clear();for(let o=0;o<r;++o)yo.add(e[o]);s=s||BB;const a=Math.max(0,s.last-10);for(let o=a;o<i;++o)if(yo.has(t[o])&&(n?.push(t[o]),yo.delete(t[o]),t[o]=t[i-1],--i,--o,yo.size===0||i===0))return yo.clear(),i;for(let o=0;o<a;++o)if(yo.has(t[o])&&(n?.push(t[o]),yo.delete(t[o]),t[o]=t[i-1],--i,--o,yo.size===0||i===0))return yo.clear(),i;return yo.clear(),i}function Wle(t,e){let i=0;for(let r=0;r<t.length;++r){const s=t[r];e(s,r)&&(t[i]=s,i++)}return t.length=i,t}function Bje(t,e,i){const r=t.length;if(e>=r)return t.slice();const s=U5(i),n=new Set,a=[];for(;a.length<e;){const o=Math.floor(s()*r);n.has(o)||(n.add(o),a.push(t[o]))}return a}function U5(t){return t?(uV.seed=t,()=>uV.getFloat()):Math.random}const uV=new j5;function HB(t,e){if(!t)return t;const i=U5(e);for(let r=t.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=t[r];t[r]=t[s],t[s]=n}return t}function G5(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Qr(t,e){return t!=null}const Hje=[];function Wje(t){return t instanceof ArrayBuffer}function q5(t){return t?.constructor?.name==="Int8Array"}function WB(t){return t?.constructor?.name==="Uint8Array"}function ZB(t){return t?.constructor?.name==="Uint8ClampedArray"}function B5(t){return t?.constructor?.name==="Int16Array"}function YB(t){return t?.constructor?.name==="Uint16Array"}function H5(t){return t?.constructor?.name==="Int32Array"}function JB(t){return t?.constructor?.name==="Uint32Array"}function Zle(t){return t?.constructor?.name==="Float16Array"}function QT(t){return t?.constructor?.name==="Float32Array"}function KT(t){return t?.constructor?.name==="Float64Array"}function XB(t){return"buffer"in t}const QB=1024;function Zje(t){return KT(t)||QT(t)||H5(t)||B5(t)||q5(t)}function Yje(t){return KT(t)||QT(t)}function Jje(t){return KT(t)?179769e303:Zle(t)?65504:QT(t)?3402823e32:JB(t)?4294967295:YB(t)?65535:WB(t)||ZB(t)?255:H5(t)?2147483647:B5(t)?32767:q5(t)?127:256}const Xje=-32768,Qje=-2147483648;function Kje(t){return t}function Yle(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function J(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=tH(t);if(e!=null)return e;if(rb(t))return t.clone();if(KB(t))return t.map(J);if(eH(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=J(t[r]);return i}function tP(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=tH(t);if(i!=null)return i;if(KB(t)){let s=!0;const n=t.map(a=>{const o=tP(a,e);return a!=null&&o==null&&(s=!1),o});return s?n:null}if(rb(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(eH(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const n=t[s],a=tP(n);if(n!=null&&a==null)return null;r[s]=a}return r}function rb(t){return typeof t.clone=="function"}function KB(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function eH(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function cV(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function tH(t){if(q5(t)||WB(t)||ZB(t)||B5(t)||YB(t)||H5(t)||JB(t)||QT(t)||KT(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,J(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(J(i));return e}return null}function W5(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function iH(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&XT(t,e):t instanceof Set?e instanceof Set&&Xle(t,e):t instanceof Map?e instanceof Map&&Qle(t,e):!!cV(t)&&cV(e)&&Jle(t,e))}function Jle(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function Xle(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Qle(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function Z5(t,e,i=!1){return sH(t,e,i)}function Ew(t,e){if(e!=null)return e[t]||rH(t.split("."),!1,e)}function pn(t,e,i){const r=t.split("."),s=r.pop(),n=rH(r,!0,i);n&&s&&(n[s]=e)}function hV(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(hV(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(hV(t[i],e[i]))return!0;return!1}return t!==e}function rH(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function sH(t,e,i){return e?Object.keys(e).reduce((r,s)=>{if(s==="__proto__")return r;let n=r[s],a=e[s];return n===a?r:n===void 0?(r[s]=J(a),r):(Array.isArray(a)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],a&&(Array.isArray(a)||(a=[a]),i?a.forEach(o=>{n.includes(o)||n.push(o)}):r[s]=a.slice())):a&&typeof a=="object"?r[s]=sH(n,a,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=a),r)},t||{}):t}function e9e(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function e3(t,e){return Object.values(t).includes(e)}const Tt={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Z5(Tt,globalThis.esriConfig,!0),delete Tt.has),!Tt.assetsPath){{const t="4.34";Tt.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Tt.defaultAssetsPath=Tt.assetsPath}const Kle=/\{([^}]+)\}/g;function dV(t){return t??""}function Hd(t,e){return e?t.replaceAll(Kle,typeof e=="object"?(i,r)=>dV(Ew(r,e)):(i,r)=>dV(e(r))):t}function t9e(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e?.includes(i)?i:`\\${i}`)}function nH(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let pV;function eue(t){return pV??=new DOMParser,pV.parseFromString(t||"","text/html").body.innerText||""}function i9e(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function r9e(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const fV={info:0,warn:1,error:2,none:3};var yr;let le=(yr=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,yr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=yr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,yr._loggers.get(e)||new yr({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!yr._throttlingDisabled){const s=iue(r),n=this._loggedMessages[e].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=yr._tickCounter)return;this._loggedMessages[e].set(s,yr._tickCounter),yr._scheduleTickCounterIncrement()}for(const s of Tt.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const s=r[e];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",tue)}_matchLevel(e){const i=Tt.log.level||"warn";return fV[this._parentWithMember("level",i)]<=fV[e]}static _scheduleTickCounterIncrement(){yr._tickCounterScheduled||(yr._tickCounterScheduled=!0,Promise.resolve().then(()=>{yr._tickCounter++,yr._tickCounterScheduled=!1}))}},yr._loggers=new Map,yr._tickCounter=0,yr._tickCounterScheduled=!1,yr._throttlingDisabled=!1,yr);function tue(t,e,...i){console[t](`[${e}]`,...i)}function iue(...t){return nH(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function rue(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(Ew(r,e)??"").toString())}let aH=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&rue(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},G=class oH extends aH{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return J(i)}catch{return"[object]"}}))}}catch(e){throw le.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new oH(e.name,e.message,e.details)}};G.prototype.type="error";function Fb(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const sue=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,nue={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function mV(t){const e=t?.match(sue);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let n=null,a=null,o=null;const{devext:u,qaext:h,www:p}=nue;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=u);break;case"qa":({customBaseUrl:a,portalHostname:o}=h);break;default:return null}else({customBaseUrl:a,portalHostname:o}=p);else switch(i.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:o}=u);break;case"qaext":({customBaseUrl:a,portalHostname:o}=h);break;case"www":({customBaseUrl:a,portalHostname:o}=p);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:o,urlKey:n}}function lH(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function uH(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function cH(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function aue(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const oue=()=>le.getLogger("esri.core.urlUtils"),sv=Tt.request,yV="esri/config: esriConfig.request.proxyUrl is not set.",hH=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,dH=/^\s*http:/i,lue=/^\s*https:/i,uue=/^\s*file:/i,pH=/:\d+$/,cue=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,hue=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),due=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Dg=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(hue);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(due),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const IS={},pue=new Dg(Tt.applicationUrl);let Os=pue;const fue=mue();let Y5=fue;const J5=()=>Os,a9e=()=>Y5;function mue(){const t=Os.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Os.scheme}://${Os.host}${Os.port!=null?`:${Os.port}`:""}`}${e}`}function Lr(t){if(!t)return null;const e={path:null,query:null},i=new Dg(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=X5(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function X5(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let n,a;s<0?(n=decodeURIComponent(r),a=""):(n=decodeURIComponent(r.slice(0,s)),a=decodeURIComponent(r.slice(s+1)));let o=i[n];typeof o=="string"&&(o=i[n]=[o]),Array.isArray(o)?o.push(a):i[n]=a}return i}function Vb(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=e?.[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(a=>Fb(a)?s+encodeURIComponent(JSON.stringify(a)):s+encodeURIComponent(a)).join("&"):Fb(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function fH(t=!1){let e,i=sv.proxyUrl;if(typeof t=="string"){e=Sue(t);const r=t3(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw oue().warn(yV),new G("urlUtils:proxy-not-set",yV);return e&&rP()&&(i=i4(i)),Lr(i)}function o9e(t,e=!1){const i=t3(t);let r,s;if(i){const n=Q5(i.proxyUrl);r=n.path,s=n.query?X5(n.query):null}else if(e){const n=fH(t);r=n.path,s=n.query}if(r){const n=Lr(t);t=r+"?"+n.path;const a=Vb({...s,...n.query});a&&(t=`${t}?${a}`)}return t}const $_={path:"",query:""};function Q5(t){const e=t.indexOf("?");return e!==-1?($_.path=t.slice(0,e),$_.query=t.slice(e+1)):($_.path=t,$_.query=null),$_}function mH(t){return t=(t=xM(t=Eue(t=Q5(t).path),!0)).toLowerCase()}function yue(t){const e={proxyUrl:t.proxyUrl,urlPrefix:mH(t.urlPrefix)},i=sv.proxyRules,r=e.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const a=i[n].urlPrefix;if(r.startsWith(a)){if(r.length===a.length)return-1;s=n;break}a.startsWith(r)&&(s=n+1)}return i.splice(s,0,e),s}function t3(t){const e=sv.proxyRules,i=mH(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function gue(t,e){if(!t||!e)return!1;t=SM(t),e=SM(e);const i=mV(t),r=mV(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&rm(t,e,!0)}function yH(t,e){return t=SM(t),e=SM(e),xM(t)===xM(e)}function SM(t){const e=(t=io(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function iP(t,e=sv.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function rm(t,e,i=!1){if(!t||!e)return!1;const r=nP(t),s=nP(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function K5(t){if(typeof t=="string"){if(!jn(t))return!0;t=nP(t)}if(rm(t,Os))return!0;const e=sv.trustedServers||[];for(let i=0;i<e.length;i++){const r=vue(e[i]);for(let s=0;s<r.length;s++)if(rm(t,r[s]))return!0}return!1}function vue(t){return IS[t]||(t4(t)||fu(t)?IS[t]=[new Dg(Xa(t))]:IS[t]=[new Dg(`http://${t}`),new Dg(`https://${t}`)]),IS[t]}function Xa(t,e=Y5,i){return fu(t)?i?.preserveProtocolRelative?t:Os.scheme==="http"&&Os.authority===ya(t).slice(2)?`http:${t}`:`https:${t}`:t4(t)?t:Cw(t.startsWith("/")?Tue(e):e,t)}function e4(t,e=Y5,i){if(t==null||!jn(t))return t;const r=io(t),s=r.toLowerCase(),n=io(e).toLowerCase().replace(/\/+$/,""),a=i?io(i).toLowerCase().replace(/\/+$/,""):null;if(a&&!n.startsWith(a))return t;const o=(y,v,b)=>(b=y.indexOf(v,b))===-1?y.length:b;let u=o(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,u+1)===n.slice(0,u)+"/"&&(h=u+1,u!==s.length);)u=o(s,"/",u+1);if(h===-1||a&&h<a.length)return t;t=r.slice(h);const p=n.slice(h-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let y=0;y<p;y++)t=`../${t}`;else t=`./${t}`;return t}function io(t){return t=Lue(t=Iue(t=Cue(t=Xa(t=t.trim()))))}function Cw(...t){const e=t.filter(Qr);if(!e?.length)return;const i=[];if(jn(e[0])){const s=e[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),$ue(e[0])&&(i[0]+="/"),e[0]=s.slice(n+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function ya(t,e=!1){if(t==null||nv(t)||ym(t))return null;let i=t.indexOf("://");if(i===-1&&fu(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=xM(t,!0)),t}function jn(t){return fu(t)||t4(t)}function nv(t){return t!=null&&t.startsWith("blob:")}function ym(t){return t!=null&&t.startsWith("data:")}function _ue(t){const e=I0(t);return e?.isBase64?cH(e.data):null}function l9e(t){return aue(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const bue=/^data:(.*?)(;base64)?,(.*)$/;function I0(t){const e=t.match(bue);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function gH(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function wue(t){return(await fetch(t)).blob()}function u9e(t){const e=_ue(t);if(!e)return null;const i=I0(t);return new Blob([e],{type:i.mediaType})}function fu(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function t4(t){return t!=null&&hH.test(t)}function Sue(t){return t!=null&&lue.test(t)||Os.scheme==="https"&&fu(t)}function xue(t){return t!=null&&dH.test(t)||Os.scheme==="http"&&fu(t)}function $ue(t){return t!=null&&uue.test(t)}function i4(t){return fu(t)?`https:${t}`:t.replace(dH,"https:")}function Mue(){return Os.scheme==="http"}function rP(){return Os.scheme==="https"}function xM(t,e=!1){return fu(t)?t.slice(2):(t=t.replace(hH,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function Tue(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function r4(t){let e=0;if(jn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function c9e(t,e){if(!t)return"";const i=Lr(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return r;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(s,"")}function Eue(t){return t.endsWith("/")?t:`${t}/`}function vH(t){return t.replace(/\/+$/,"")}function Cue(t){if(/^https?:\/\//i.test(t)){const e=Q5(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function Iue(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Lue(t){const e=sv.httpsDomains;if(!xue(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),pH.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return Mue()&&r===Os.authority&&!cue.test(t)||(rP()&&r===Os.authority||e&&e.some(s=>r===s||r.endsWith(`.${s}`))||rP()&&!t3(t))&&(t=i4(t)),t}function sP(t,e,i){if(!(e&&i&&t&&jn(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),n=t.indexOf(":",r+2),a=Math.min(s<0?t.length:s,n<0?t.length:n);return t.slice(r+2,a).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(a)}`}function Aue(t,e){const i=new URL(t);return i.host=e,i.port&&!pH.test(e)&&(i.port=""),i.toString()}function h9e(t){return new URL(t).host}function nP(t){return typeof t=="string"?new Dg(Xa(t)):(t.scheme||(t.scheme=Os.scheme),t)}function d9e(t){return Oue.test(t)}function _H(t,e){const i=Lr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function Pue(t,e,i){const r=Lr(t),s=r.query||{};return s[e]=String(i),`${r.path}?${Vb(s)}`}function Jx(t,e){if(!e)return t;const i=Lr(t),r=i.query||{};for(const[n,a]of Object.entries(e))a!=null&&(r[n]=a);const s=Vb(r);return s?`${i.path}?${s}`:i.path}function bH(t){if(t==null)return null;const e=t.match(wH);return e?e[2]:null}function gV(t){if(t==null)return null;const e=t.match(wH);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function p9e(t){return typeof t=="string"?I0(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(I0(r.result)),r.onerror=s=>i(s)})}const wH=/([^.]*)\.([^/]*)$/,Oue=/(^data:image\/svg|\.svg$)/i,SH="20251114",xH="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const kue="4.34";let pt,s4=kue;function f9e(t){pt=t}function Rue(t){const e=pt?.findCredential(t);return e?.token?Pue(t,"token",e.token):t}s4="4.34.8",X("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),X("host-webworker");function Due(t,e){for(const i of t.values())if(e(i))return!0;return!1}function m9e(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function y9e(t,e){for(const i of t.values())if(e(i))return i;return null}function av(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}function g9e(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Nue={remove:()=>{}};function vt(t){return t?{remove(){t&&(t(),t=void 0)}}:Nue}function $H(t){t.forEach(e=>e?.remove())}function v9e(t){$H(t),t.length=0}function gm(t){return vt(()=>$H(t))}function _9e(t){return vt(()=>t()?.remove())}function zue(t){return vt(()=>t?.abort())}function b9e(t){return vt(t!=null?()=>t.destroy():void 0)}function Fue(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function w9e(t){Fue(t)&&t.remove()}function S9e(t){return{[Symbol.dispose](){t.remove()}}}function Vue(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return vt(()=>t.clearTimeout(r))}}}const ov=Vue(globalThis);function i3(t){return jue(t)||MH(t)}function jue(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function MH(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function lv(t,e,i){if(!i3(t))throw new TypeError("target is not a Evented or EventTarget object");return MH(t)?Uue(t,e,i):t.on(e,i)}function Uue(t,e,i,r){if(Array.isArray(e)){const s=e.slice();for(const n of s)t.addEventListener(n,i,r);return vt(()=>{for(const n of s)t.removeEventListener(n,i,r)})}return t.addEventListener(e,i,r),vt(()=>t.removeEventListener(e,i,r))}function TH(t,e,i){if(!i3(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=lv(t,e,s=>{r.remove(),i.call(t,s)});return r}function Iw(t,e){if(t==null)throw new Error(e??"value is None")}function xi(t){return t?.destroy(),null}function x9e(t){return t?.dispose(),null}function fi(t){return t?.remove(),null}function sm(t){return t?.abort(),null}function $9e(t){return t?.release(),null}function Gue(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function EH(t,e){let i;return t.some((r,s)=>(i=e(r,s),i!=null)),i??void 0}function Ht(t="Aborted"){return new G("AbortError",t)}function Wt(t,e="Aborted"){if(Ns(t))throw Ht(e)}function Lw(t){return t instanceof AbortSignal?t:t?.signal??void 0}function Ns(t){const e=Lw(t);return e!=null&&e.aborted}function zn(t){if(jr(t))throw t}function vV(t){if(!jr(t))throw t}function so(t,e){const i=Lw(t);if(i!=null){if(!i.aborted)return TH(i,"abort",()=>e());e()}}function n4(t,e){const i=Lw(t);if(i!=null)return Wt(i),TH(i,"abort",()=>e(Ht()))}function que(t,e){return Lw(e)==null?t:new Promise((i,r)=>{let s=so(e,()=>r(Ht()));const n=()=>{s=fi(s)};t.then(n,n),t.then(i,r)})}function jr(t){return t?.name==="AbortError"}async function L0(t){try{return await t}catch(e){if(!jr(e))throw e;return}}async function a4(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(a=>t[a]),s=await a4(r),n={};return i.map((a,o)=>n[a]=s[o]),n}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function Bue(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function M9e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function CH(t,e=void 0,i){const r=new AbortController;return so(i,()=>r.abort()),new Promise((s,n)=>{let a=setTimeout(()=>{a=0,s(e)},t);so(r,()=>{a&&(clearTimeout(a),n(Ht()))})})}function T9e(t,e,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout(()=>{n=0,s?.abort()},e);const a=()=>r||new G("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(o=>{if(n===0)throw a();return clearTimeout(n),o},o=>{throw clearTimeout(n),n===0?a():o})}function Hue(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return so(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function zs(t){return t&&typeof t.then=="function"}function aP(t){return zs(t)?t:Promise.resolve(t)}function Aw(t,e=-1){let i,r,s,n,a=null;const o=(...u)=>{if(i){r=u,n&&n.reject(Ht()),n=va();const v=n.promise;if(a){const b=a;a=null,b.abort()}return v}if(s=n||va(),n=null,e>0){const v=new AbortController;i=aP(t(...u,v.signal));const b=i;CH(e).then(()=>{i===b&&(n?v.abort():a=v)})}else i=1,i=aP(t(...u));const h=()=>{const v=r;r=s=i=a=null,v!=null&&o(...v)},p=i,y=s;return p.then(h,h),p.then(y.resolve,y.reject),y.promise};return o}function va(){let t,e;const i=new Promise((s,n)=>{t=s,e=n}),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,n)=>ov.setTimeout(()=>r.reject(n),s),r.promise=i,r}function E9e(t,e){e.then(t.resolve,t.reject)}async function _V(t){await Promise.resolve(),Wt(t)}function Vc(t,e){const i=e?.url?.path;if(t&&i&&(t=Xa(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=e4(t,e.portalItem.itemUrl);r!=null&&r.startsWith(Wue)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=oP(t,e?.portal))&&s3.test(t)?o4(t):t}function nm(t,e,i=0){if((t=t&&s3.test(t)?PH(t):t)==null)return t;!jn(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Xa(t);if(e){const s=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(s){const n=oP(s,e.portal),a=oP(r,e.portal);r=e4(a,n,n),r!=null&&r!==a&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=AH(r,e?.portal),jn(r)&&(r=io(r)),e?.resources&&e?.portalItem&&!jn(r)&&!ym(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function r3(t,e,i){return Vc(t,i)}function am(t,e,i,r){const s=nm(t,r);s!==void 0&&(e[i]=s)}const s3=/\/items\/([^/]+)\/resources\/(.*)/,Wue="./resources/";function IH(t){return(t?.match(s3)??null)?.[1]??null}function LH(t){const e=t?.match(s3)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:a,extension:o}=gV(i);return{prefix:null,filename:a,extension:o}}const{path:s,extension:n}=gV(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function AH(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?sP(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function oP(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=J5();return rm(r,`${r.scheme}://${i}`)?sP(t,e.portalHostname,i):sP(t,i,e.portalHostname)}function o4(t){if(!t)return t||null;let e=t;return e&&pt&&!pt.findCredential(e)&&(e=uH(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function PH(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&pt&&!pt.findCredential(e)&&(e=uH(e)),e}const Zue=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:AH,fromCDNUrl:PH,fromJSON:Vc,itemIdFromResourceUrl:IH,prefixAndFilenameFromResourceUrl:LH,read:r3,toCDNUrl:o4,toJSON:nm,write:am},Symbol.toStringTag,{value:"Module"})),OH={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},kH=Object.values(OH),RH=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${kH.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Yue=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${kH.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Jue=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function C9e(t){return RH.test(t)}function vm(t){if(t==null)return null;const e=Lr(t),i=e?.path.match(RH)||e?.path.match(Yue);if(!i)return null;const[,r,s,n,a]=i,o=s.indexOf("/");return{title:DH(o!==-1?s.slice(o+1):s),serverType:OH[n.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:r}}}function Xue(t){const e=Lr(t).path.match(Jue);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function DH(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function I9e(t,e){const i=[];if(t){const r=vm(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=DH(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function bV(t){let e=ya(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function L9e(t,e){return t&&vH(_H(t,e))}function A9e(t){let{url:e}=t;if(!e)return{url:e};e=_H(e,t.logger);const i=Lr(e),r=vm(i.path);let s;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const n=Xue(i.path);n!=null&&(e=n.serviceUrl,s=n.sublayerId)}return{url:vH(e),layerId:s}}function P9e(t,e,i,r,s){am(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=Cw(r.url,i,t.layerId.toString()))}function O9e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),n=e.includes("/wmsserver");return i&&(r||s||n)}const Que=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function l4(t){if(!u4(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=Tt.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:Tt.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?Tt.apiKey:null}function lP(){return Tt.apiKey!=null||Tt.apiKeys.basemapStyles!=null}function Kue(t,e){return e?u4(t):l4(t)!=null}function u4(t){const e=ya(t,!0);return!!e&&!Que.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function ece(t,e,i=!1,r){return new Promise((s,n)=>{if(Ns(r))return void n(wV());let a=()=>{h(),n(new Error(`Unable to load ${e}`))},o=async()=>{const p=t;try{await p.decode()}catch{}h(),s(p)},u=()=>{if(!t)return;const p=t;h(),p.src="",n(wV())};const h=()=>{t&&(t.removeEventListener("error",a),t.removeEventListener("load",o),a=null,o=null,t=null,r?.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(e))};r?.addEventListener("abort",u),t.addEventListener("error",a),t.addEventListener("load",o)})}function wV(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const NH="Timeout exceeded";function tce(){return new Error(NH)}function k9e(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===NH}function ice(t){Tt.request.crossOriginNoCorsDomains||(Tt.request.crossOriginNoCorsDomains={});const e=Tt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[ya(i)??""]=0:(e[ya("http://"+i)??""]=0,e[ya("https://"+i)??""]=0)}function rce(t){const e=Tt.request.crossOriginNoCorsDomains;if(e){let i=ya(t);if(i)return i=i.toLowerCase(),!rm(i,J5())&&e[i]<Date.now()-36e5}return!1}async function sce(t){const e=Lr(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Tt.request.crossOriginNoCorsDomains,r=ya(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const uP=new Map;function nce(t,e){const i=e?.preferredHost;if(!i||rm(t,`https://${i}`,!0))return;const r=vm(t);if(!r||r.serverType!=="FeatureServer"||lH(t))return;const s=r.url.path.toLowerCase();uP.has(s)||uP.set(s,i)}function SV(t){const e=vm(t)?.url.path.toLowerCase();if(!e)return t;const i=uP.get(e);return i?Aue(t,i):t}async function Ot(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=X5(e.query.toString().replaceAll("+"," ")));const i=ym(t),r=nv(t);r||i||(t=io(t));const s={url:t,requestOptions:{...e}},n=b=>({data:b,getAllHeaders:A0,getHeader:A0,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),a=iP(t,Wa.internalInterceptors);if(a){const b=await $V(a,s);if(b!=null)return n(b)}let o=iP(t);if(o){const b=await $V(o,s);if(b!=null)return n(b);o.after||o.error||(o=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(X("host-webworker")||X("host-node")))throw Jo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw Jo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Jo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await cce(),$M)return $M.execute(t,e);const u=new AbortController,h=so(e,()=>u.abort()),p={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:o,params:s,redoRequest:!1,useIdentity:Wa.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},y=e.useRequestQueue?mce(p):hP(p),v=await y.finally(()=>h?.remove());return o?.after?.(v),v}let $M,zH=!1;const Wa=Tt.request,FH="FormData"in globalThis,ace=new Set([499,498,403,401]),oce=new Set(["COM_0056","COM_0057","SB_0008"]),lce=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],A0=()=>null,MM=Symbol();function uce(t){const e=ya(t);e&&!Ot._corsServers.includes(e)&&Ot._corsServers.push(e)}function xV(t){const e=ya(t);return!e||e.endsWith(".arcgis.com")||Ot._corsServers.includes(e)||K5(e)}function Jo(t,e,i,r){let s;const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:A0,getHeader:A0,ssl:!1};if(e instanceof G)return e.details?(e.details=J(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=n,e;if(e){const a=r&&(()=>Array.from(r.headers)),o=r&&(p=>r.headers.get(p)),u=r?.status,h=e.message;h&&(s=h),a&&o&&(n.getAllHeaders=a,n.getHeader=o),n.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||u||0,n.subCode=e.subcode,n.messageCode=e.messageCode,typeof e.details=="string"?(n.messages=[e.details],s??=e.details):(n.messages=e.details,s??=n.messages?.[0]),n.raw=MM in e?e[MM]:e}return s??="Error",jr(e)?Ht():new G(t,s,n)}async function cce(){X("host-webworker")&&(!$M&&globalThis.invokeStaticMessage?$M=await K(()=>import("./request-BgQ_CG1D.js"),[],import.meta.url):zH=!0)}async function cP(){pt||await K(()=>import("./IdentityManager-CQkbT77r.js"),[],import.meta.url)}async function hce(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let n=null,a=null;if(FH&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(a=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Wa.priority,redirect:"follow",signal:r},(n||a)&&(t.fetchOptions.body=n||a),(zH||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||n?.get("token")),!t.hasToken){const o=l4(e);o&&(i.query??={},i.query.token=o,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!VH(e)&&!Ns(r)){let o;i.authMode==="immediate"?(await cP(),o=await pt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await cP(),o=await pt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):pt&&(o=pt.findCredential(e)),o&&(t.credential=o,t.credentialToken=o.token,t.useSSL=!!o.ssl)}}function VH(t){return lce.some(e=>e.test(t))}async function dce(t){let e=t.params.url,i=SV(e);const r=t.params.requestOptions,s=t.fetchOptions??{},n=nv(e)||ym(e),a=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:Wa.timeout;let u=!1;if(!n){t.useSSL&&(e=i4(e));let b={...r.query};t.credentialToken&&(b.token=t.credentialToken);let w=Vb(b);X("esri-url-encodes-apostrophe")&&(w=w.replaceAll("'","%27"));const S=i.length+1+w.length;let M;u=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||S>Wa.maxUrlLength;const T=r.useProxy||!!t3(e);if(T){const I=fH(e);M=I.path,!u&&M.length+1+S>Wa.maxUrlLength&&(u=!0),I.query&&(b={...I.query,...b})}if(s.method==="HEAD"&&(u||T)){if(u)throw S>Wa.maxUrlLength?Jo("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Jo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(T)throw Jo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}u?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=Jx(e,b):(s.body=Vb(b),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Jx(e,b),T&&(t.useProxy=!0,e=`${M}?${e}`),b.token&&FH&&s.body instanceof FormData&&!lH(e)&&s.body.set("token",b.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:rm(e,J5())||(K5(e)||pt&&pt.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(s.credentials="include",rce(e)&&await sce(u?Jx(e,b):e)),i=SV(e)}let h,p,y=0,v=!1;o>0&&(y=setTimeout(()=>{v=!0,t.controller.abort()},o));try{if(r.responseType==="native-request-init")p=s,p.url=i,r.signal?p.signal=r.signal:delete p.signal;else if(r.responseType!=="image"||s.cache!=="default"||s.keepalive||s.method!=="GET"||u||pce(r.headers)||!n&&!t.useProxy&&Wa.proxyUrl&&!xV(e)){if(Ot._beforeFetch&&await Ot._beforeFetch(e,s),h=await fetch(i,s),Ot._afterFetch&&await Ot._afterFetch(h),t.useProxy||uce(e),r.responseType==="native")p=h;else if(s.method!=="HEAD")if(h.ok){switch(a){case"array-buffer":p=await h.arrayBuffer();break;case"blob":case"image":p=await h.blob();break;default:p=await h.text()}if(y&&(clearTimeout(y),y=0),a==="json"||a==="xml"||a==="document")if(p)switch(a){case"json":p=JSON.parse(p);break;case"xml":p=MV(p,"application/xml");break;case"document":p=MV(p,"text/html")}else p=null;if(p){if(a==="array-buffer"||a==="blob"){const b=h.headers.get("Content-Type");if(b&&/application\/json|text\/plain/i.test(b)&&p[a==="blob"?"size":"byteLength"]<=750)try{const w=await new Response(p).json();w.error&&(p=w)}catch{}}a==="image"&&p instanceof Blob&&(p=await TV(URL.createObjectURL(p),t,!0))}}else{p=await h.text();try{p=JSON.parse(p)}catch{}}}else p=await TV(i,t)}catch(b){if(b.name==="AbortError")throw v?tce():Ht("Request canceled");if(!(!h&&b instanceof TypeError&&Wa.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||xV(e))throw b;t.redoRequest=!0,yue({proxyUrl:Wa.proxyUrl,urlPrefix:ya(e)??""})}finally{y&&clearTimeout(y)}return[h,p]}async function $V(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=Jo("request:interceptor",s,e)}if((r instanceof Error||r instanceof G)&&(i=Jo("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function pce(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function MV(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Ot._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ot._beforeFetch=void 0,Ot._afterFetch=void 0;const fce=new Map;async function mce(t){const e=gce(t.params.url);if(!e)return hP(t);const{QueueProcessor:i}=await K(()=>import("./QueueProcessor-aBZEdK_i.js"),[],import.meta.url);return av(fce,e.origin,()=>{const s=e.isHosted?X("request-queue-concurrency-hosted"):X("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if(Ns(n.params.requestOptions))throw Jo("",Ht("Request canceled"),n.params);return hP(n)}})}).push(t)}async function hP(t){let e,i;await hce(t);try{do[e,i]=await dce(t);while(!await yce(t,e,i))}catch(n){const a=Jo("request:server",n,t.params,e);throw a.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(a),a}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!K5(r)){const n=ya(r,!0);n&&Wa.trustedServers.push(n)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&ice(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&nce(r,i);const s=t.credential;if(s&&pt){let a=pt.findServerInfo(s.server)?.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const o=pt.findCredential(a,s.userId);o&&pt._getIdenticalSvcIdx(a,o)===-1&&o.resources.unshift(a)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):A0,getHeader:e?n=>e.headers.get(n):A0,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function yce(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[MM]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[MM]=i,s;let a,o=null;s&&(n=Number(s.code),o=s.hasOwnProperty("subcode")?Number(s.subcode):null,a=s.messageCode,a=a?.toUpperCase());const u=r.authMode;if(n===403&&(o===4||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(u!=="no-prompt"||n===498)&&n!==void 0&&ace.has(n)&&!VH(t.params.url)&&(n!==403||(!a||!oce.has(a))&&(o==null||o===2&&t.credentialToken))){await cP();try{const h=await pt.getCredential(t.params.url,{error:Jo("request:server",s,t.params),credential:t.credential,prompt:u!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(u==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=h}}if(s)throw s;return!0}function TV(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Wa.priority,s.src=t,ece(s,t,i,r)}function gce(t){let e,i;return typeof t=="string"?(e=ya(t,!0),i=bV(t)):(e=t.origin,i=bV(t.toString())),e==null?null:{origin:e,isHosted:i}}function vce(t){return t?.release&&typeof t.release=="function"}function _ce(t){return t?.acquire&&typeof t.acquire=="function"}var Pd;let _m=(Pd=class{constructor(e,i,r,s=1,n=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let a=0;a<n;a++)this._pool[a]=this._creator();this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Pd.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):_ce(i)&&i.acquire(...e),i}release(e){e&&!Pd.test.disabled&&(this._releaseFunction?this._releaseFunction(e):vce(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Pd.test={disabled:!!X("esri-tests-disable-memory-pools")},Pd);function bce(t){t.length=0}let nn=class{constructor(e=50,i=50){this._pool=new _m(()=>[],void 0,bce,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return QI.acquire()}static release(e){return QI.release(e)}static prune(){QI.prune()}};const QI=new nn(100),EV=new WeakMap;function wce(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let s=EV.get(t);s||(s=new Set,EV.set(t,s)),s.has(e)||(s.add(e),t.warn(r))}const TM="https://www.esriurl.com/";function Pw(t,e,i,r={}){X("esri-deprecation-warnings")&&Rd(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${TM}${i}/`,`Esri's move to web components: ${TM}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function Sce(t,e,i,r={}){X("esri-deprecation-warnings")&&Rd(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${TM}${i}/`,`Esri's move to web components: ${TM}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function D9e(t,e,i={}){X("esri-deprecation-warnings")&&Rd(t,`Module: ${e}`,i)}function jH(t,e,i={}){if(X("esri-deprecation-warnings")){const{moduleName:r}=i;Rd(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function dP(t,e,i={}){if(X("esri-deprecation-warnings")){const{moduleName:r}=i;Rd(t,`Property: ${(r?r+"::":"")+e}`,i)}}function xce(t,e,i={}){X("esri-deprecation-warnings")&&Rd(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Rd(t,e,i={}){if(X("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:a}=i;let o=e;if(r&&(o+=`
	 Replacement: ${r}`),s&&(o+=`
	 Version: ${s}`),n)if(Array.isArray(n)){o+=`
	 See for more details:`;for(const u of n)o+=`
		${u}`}else o+=`
	 See ${n} for more details.`;wce(t,o,a)}}function N9e(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}function $ce(t,e){for(const i of t)if(i!=null&&e(i))return i}function EM(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let uv=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(EM(e)){const r=this._getOrCreateGroup(i);for(const s of e)IV(s)&&r.push(s)}else IV(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(LS(e))}remove(e){if(typeof e!="string"&&EM(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(CV(this._getGroup(e)),this._groups.delete(LS(e)),this):this}removeAll(){return this._groups.forEach(CV),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(LS(e),i),i}_getGroup(e){return this._groups.get(LS(e))}};function LS(t){return t||"_default_"}function CV(t){for(const e of t)e instanceof uv?e.removeAll():e.remove()}function IV(t){return t!=null&&(!!t.remove||t instanceof uv)}const UH=Symbol("Accessor-beforeDestroy");function Us(t){return t.__accessor__??null}function Mce(t,e){return t?.metadata?.[e]!=null}function Xx(t,e,i){return i?CM(t,e,{policy:i,path:""}):CM(t,e,null)}function CM(t,e,i){return e?Object.keys(e).reduce((r,s)=>{const n=s;if(n==="__proto__")return r;let a=null,o="merge";if(i&&(a=i.path?`${i.path}.${s}`:s,o=i.policy(a)),o==="replace"||o==="replace-arrays"&&Array.isArray(r[n]))return r[n]=e[n],r;if(r[n]===void 0)return r[n]=J(e[n]),r;let u=r[n],h=e[n];if(u===h)return r;if(Array.isArray(h)||Array.isArray(r))u=u?Array.isArray(u)?r[n]=u.slice():r[n]=[u]:r[n]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(p=>{u.includes(p)||u.push(p)}));else if(h&&typeof h=="object")if(i){const p=i.path;i.path=a,r[n]=CM(u,h,i),i.path=p}else r[n]=CM(u,h,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[n]=h);return r},t||{}):t}function GH(t){return Array.isArray(t)?t:t.split(".")}function LV(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Tce(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...LV(i));return e}return LV(t)}function qH(t,e,i,r){const s=Tce(e);if(s.length!==1){const n=s.map(a=>r(t,a,i));return gm(n)}return r(t,s[0],i)}function BH(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const r=Us(e);return Mce(r,i)?r.get(i):e[i]}function HH(t,e,i){if(t==null)return t;const r=BH(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:HH(r,e,i+1)}function Ow(t,e,i=0){return typeof e!="string"||e.includes(".")?HH(t,GH(e),i):BH(e,t)}function Rs(t,e){return Ow(t,e)}function AV(t,e){return Ow(e,t)!==void 0}const pa={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function cv(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=J(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function kw(t,e){const i=cv(t);let r=i[e];return r||(r=i[e]={}),r}function Ece(t,e){return Xx(t,e,Ice)}const Cce=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Ice(t){return Cce.test(t)?"replace":"merge"}let Lce=class{constructor(e,i){this._observers=e,this._observer=i}remove(){G5(this._observers,this._observer)}},WH=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Ace;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let a=0;a<n;++a){const o=i[a];if(o.destroyed)s=!0;else if(o===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new Lce(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const Ace=vt(),Ai={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let n3=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const IM=new n3,a1=[];let sb=IM;function We(t){sb.onAccessed(t)}let Qx=!1,Kx=!1;function jc(t,e,i){if(Qx)return c4(t,e,i);let r=null;return ZH(t),r=e.call(i),YH(),r}function Pce(t,e){return jc(IM,t,e)}function c4(t,e,i){const r=Qx;Qx=!0,ZH(t);let s=null;try{s=e.call(i)}catch(n){Kx&&le.getLogger("esri.core.accessorSupport.tracking").error(n)}return YH(),Qx=r,s}function ZH(t){sb=t,a1.push(t)}function YH(){const t=a1.length;if(t>1){const e=a1.pop();sb=a1[t-2],e.onTrackingEnd()}else if(t===1){const e=a1.pop();sb=IM,e.onTrackingEnd()}else sb=IM}function JH(t,e){if(e.flags&Ai.DepTrackingInitialized)return;e.flags|=Ai.DepTrackingInitialized;const i=Kx;Kx=!1,e.flags&Ai.AutoTracked?c4(e.trackingTarget,e.metadata.get,t):XH(t,e),Kx=i}const Oce=[];function XH(t,e){e.flags&Ai.ExplicitlyTracking||(e.flags|=Ai.ExplicitlyTracking,c4(e.trackingTarget,()=>{const i=e.metadata.dependsOn||Oce;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=GH(r);for(let n=0,a=t;n<s.length&&a!=null&&typeof a=="object";++n)a=PV(a,s[n],n!==s.length-1)}else PV(t,r,!1)}),e.flags&=-129)}function PV(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const s=Us(t);if(s){const n=s.propertiesByName.get(r);n&&(We(n),JH(t,n))}return i?t[r]:void 0}let OV=class extends WH{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new n3(this),this.flags=0,this.flags=Ai.Dirty|(i.nonNullable?Ai.NonNullable:0)|(i.hasOwnProperty("value")?Ai.HasDefaultValue:0)|(i.get===void 0?Ai.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ai.AutoTracked:0)}destroy(){this.flags&Ai.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&We(this);const i=e.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&Ai.Computing||~s&Ai.Dirty&&i.has(r))return n;this.flags|=Ai.Computing;const a=e.host;let o;s&Ai.AutoTracked?o=jc(this.trackingTarget,this.metadata.get,a):(XH(a,this),o=this.metadata.get.call(a)),this.flags|=Ai.DepTrackingInitialized,i.set(r,o,1);const u=i.get(r);return u===n?this.flags&=-2:Pce(this.commit,this),this.flags&=-5,u}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Ai.Overridden&&(this.flags|=Ai.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const pP=8;function Ic(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function LM(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function kce(t){return LM(t)}let Rce=class QH{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new QH;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,J(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function vy(t,e,i){return t!==void 0}function kV(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Ai.NonNullable)||(r.lifecycle,!1))}let Dce=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=pa.INITIALIZING,this.store=new Rce,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new OV(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=pa.CONSTRUCTING}constructed(){this.lifecycle=pa.CONSTRUCTED}destroy(){this.lifecycle=pa.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==pa.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!vy(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&We(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Ai.HasDefaultValue)return"defaults"}return LM(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(vy(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);vy(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.propertiesByName.get(i);if(!vy(s))return"";const n=new n3,a=jc(n,()=>s.metadata.get?.call(e));let o=`${r}${e.declaredClass.split(".").pop()}.${i}: ${a}
`;const u=n.accessed??new Set;if(u.size===0)return o;r+="  ";for(const h of u)h instanceof OV&&(o+=`${r}${h.propertyName}: undefined
`);return o}setAtOrigin(e,i,r){const s=this.propertiesByName.get(e);if(vy(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ai.Overridden)}clearOrigin(e,i){const r=this.store,s=this.propertiesByName.get(e);if(!vy(s))return;const n=r.isAtOrigin(e,i)&&!(s.flags&Ai.Overridden);r.delete(e,i),n&&s.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ai.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!kV(r,e,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:a,value:o}=n;if(KI.release(n),!a)return;i=o}r.flags|=Ai.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!kV(r,e,i,this))return;const s=r.metadata.cast;if(s){const a=this._cast(s,i),{valid:o,value:u}=a;if(KI.release(a),!o)return;i=u}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Ic(e)}getDefaultOrigin(){return LM(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==pa.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,n=e.propertyName;if(s.isAtOrigin(n,r)&&W5(i,s.get(n))&&~e.flags&Ai.Overridden)return;const a=s.isBelowOrigin(n,r)||s.isAtOrigin(n,r);a&&e.invalidate(),s.set(n,i,r),a&&e.commit(),JH(this.host,e)}_cast(e,i){const r=KI.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},Nce=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const KI=new _m(()=>new Nce);function AM(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))AM(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),n=s.splice(-1,1)[0];return void AM(Rs(t,s),n,i)}const r=t.__accessor__;r!=null&&zce(e,r),t[e]=i}}function zce(t,e){if(X("esri-unknown-property-errors")&&!Fce(t,e))throw new G("set:unknown-property",Vce(t,e))}function Fce(t,e){return e.metadata[t]!=null}function Vce(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let jce;function Uce(){return jce}let KH=class extends _m{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const AS=[];function PM(t){AS.push(t),AS.length===1&&queueMicrotask(()=>{const e=AS.slice();AS.length=0;for(const i of e)i()})}let nb=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const OM=(t,e,i,r)=>{let s=e,n=e;const a=i>>>1,o=t[s-1];for(;n<=a;){n=s<<1,n<i&&r(t[n-1],t[n])<0&&++n;const u=t[n-1];if(r(u,o)<=0)break;t[s-1]=u,s=n}t[s-1]=o},eW=(t,e)=>t<e?-1:t>e?1:0;function Gce(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=eW);for(let n=i>>>1;n>e;n--)OM(t,n,i,r);const s=e+1;for(let n=i-1;n>e;n--){const a=t[e];t[e]=t[n],t[n]=a,OM(t,s,n,r)}}function*qce(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=eW);for(let n=i>>>1;n>e;n--)OM(t,n,i,r),yield;const s=e+1;for(let n=i-1;n>e;n--){const a=t[e];t[e]=t[n],t[n]=a,OM(t,s,n,r),yield}}const Bce=1.5,Hce=1.1;let tW=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new qB,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>RV(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,RV(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=KA(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(KA(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Hle(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){Gce(this.data,0,this.length,e)}iterableSort(e){return qce(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(e.call(i,r[n]))return r[n]}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];e.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)e.call(i,r[n],n,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function RV(t){t.data.length>Bce*t.length&&(t.data.length=Math.floor(t.length*Hce))}function Z9e(t){return t}function Wce(t){return 1e3*t}function Y9e(t){return t}function J9e(t){return .001*t}let Zce=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Yce=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},fP=0;const M_={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},mP=["prepare","preRender","render","postRender","update","finish"],yP=[],om=new tW;let Jce=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,iW()}};function Xce(){Uf!=null&&(cancelAnimationFrame(Uf),Uf=requestAnimationFrame(h4))}function iW(){Uf==null&&(fP=performance.now(),Uf=requestAnimationFrame(h4))}const kM={frameTasks:om,willDispatch:!1,clearFrameTasks:Qce,dispatch:sW,executeFrameTasks:Kce,reschedule:Xce};function hv(t){const e=new Yce(t);return yP.push(e),kM.willDispatch||(kM.willDispatch=!0,PM(sW)),e}function P0(t){const e=new Zce(t);return om.push(e),iW(),new Jce(e)}let Uf=null;function Qce(t=!1){om.forAll(e=>{e.removed=!0}),t&&rW()}function h4(){const t=performance.now();Uf=null,Uf=om.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(h4):null,kM.executeFrameTasks(t)}function Kce(t){const e=t-fP;fP=t;const i=1e3/60,r=Math.max(0,e-i);M_.time=t,M_.frameDuration=i-r;for(let s=0;s<mP.length;s++){const n=performance.now(),a=mP[s];om.forAll(o=>{o.paused||o.removed||(s===0&&o.ticks++,o.phases[a]&&(M_.elapsedFrameTime=performance.now()-t,M_.deltaTime=o.ticks===0?0:e,o.phases[a]?.call(o,M_)))}),rhe[s].push(performance.now()-n)}rW(),she.push(performance.now()-t)}const PS=new tW;function rW(){om.forAll(t=>{t.removed&&PS.push(t)}),om.removeUnorderedMany(PS.data,PS.length),PS.clear()}function sW(){for(;yP.length;){const t=yP.shift();t.isActive&&t.callback()}kM.willDispatch=!1}function ehe(t=1,e){const i=va(),r=()=>{Ns(e)?i.reject(Ht()):t===0?i():(--t,PM(()=>r()))};return r(),i.promise}function the(t){return ehe(1,t)}async function ihe(t){await the(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const rhe=mP.map(t=>new nb(t)),she=new nb("total");function nW(t,e){for(const i of t.values())if(e(i))return!0;return!1}function DV(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function eUe(t,e){return e!=null&&t.add(e),t}function d4(t,e){const i=new Set;return DV(i,t),DV(i,e),i}function nhe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function tUe(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function iUe(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function ahe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function ohe(t,e){return ahe(d4(t,e),nhe(t,e))}let lhe=0;function e$(){return++lhe}let a3=class extends n3{constructor(e){super(new uhe(e)),this._observer&&NV.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&NV.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},uhe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=che}};const NV=new FinalizationRegistry(t=>{t.deref()?.destroy()});function che(){}let Ng=!1;const RM=[];function aW(t,e){let i=new a3(n),r=null,s=!1;function n(){if(!i||s)return;if(Ng)return void uW(n);const o=r;i.clear(),Ng=!0,s=!0,r=jc(i,t),s=!1,Ng=!1,e(r,o),cW()}function a(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=jc(i,t),s=!1,vt(a)}function oW(t,e){let i=new a3(s),r=null;function s(){e(r,a)}function n(){i&&(i.destroy(),i=null),r=null}function a(){return i?(i.clear(),r=jc(i,t),r):null}return a(),vt(n)}function lW(t,e){let i=!1,r=!1;const s=!!e?.sync;let n=new a3(()=>{i||r||(r=!0,s?a():queueMicrotask(a))});function a(){r=!1,n&&!i&&(Ng?uW(a):(n.clear(),Ng=!0,i=!0,jc(n,t),i=!1,Ng=!1,cW()))}function o(){n&&(n.destroy(),n=null)}return i=!0,jc(n,t),i=!1,vt(o)}function uW(t){RM.includes(t)||RM.unshift(t)}function cW(){for(;RM.length;)RM.pop()()}var Jf;let p4=(Jf=class{constructor(){this.uid=e$(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,n){return this.pool.acquire(0,e,i,r,s,n,W5)}static acquireTracked(e,i,r,s){return this.pool.acquire(1,e,i,r,null,null,s)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,s,n,a,o){this.uid=e$(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=a,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=e$(),this.removed=!0}},Jf.pool=new KH(()=>new Jf),Jf);const t$=new nn,Rc=new Set;let DM;function NM(t){Rc.delete(t),Rc.add(t),hW()}function hW(){DM||(DM=hv(phe))}function hhe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function dhe(t){for(const e of Rc.values())e.target===t&&(e.removed=!0)}function phe(){let t=10;for(;DM&&t--;){DM=null;const e=fhe(),i=t$.acquire();for(const r of e){const s=r.uid;hhe(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Rc)r.removed&&(i.push(r),Rc.delete(r));for(const r of i)p4.pool.release(r);t$.release(i),t$.release(e),gP.forEach(r=>r())}}function fhe(){const t=t$.acquire();t.length=Rc.size;let e=0;for(const i of Rc)t[e]=i,++e;return Rc.clear(),t}const gP=new Set;function mhe(t){return gP.add(t),vt(()=>gP.delete(t))}function yhe(t,e,i){let r=qH(t,e,i,(s,n,a)=>{let o,u,h=oW(()=>Ow(s,n),(p,y)=>{s.__accessor__?.lifecycle===pa.DESTROYED||o&&o.uid!==u?r.remove():(o||(o=p4.acquireUntracked(p,a,y,s,n),u=o.uid),NM(o))});return vt(()=>{h.remove(),o&&(o.uid!==u||o.removed||(o.removed=!0,NM(o)),o=null),r=h=null})});return r}function ghe(t,e,i){const r=qH(t,e,i,(s,n,a)=>{let o=!1;return aW(()=>Ow(s,n),(u,h)=>{s.__accessor__.lifecycle!==pa.DESTROYED?o||(o=!0,W5(h,u)||a.call(s,u,h,n,s),o=!1):r.remove()})});return r}function vhe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==pa.DESTROYED?r?ghe(t,e,i):yhe(t,e,i):vt()}function _he(t,e,i){let r,s,n=oW(t,(a,o)=>{r&&r.uid!==s?n.remove():(r||(r=p4.acquireTracked(a,e,o,i),s=r.uid),NM(r))});return vt(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,NM(r)),r=null),n=null})}function bhe(t,e,i){let r=!1;return aW(t,(s,n)=>{r||(r=!0,i(n,s)||e(s,n),r=!1)})}function whe(t,e,i=!1,r=iH){return i?bhe(t,e,r):_he(t,e,r)}function zV(t){return nW(Rc,e=>e.oldValue===t)}const Gf=()=>le.getLogger("esri.core.accessorSupport.ensureTypes");function She(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Gf().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function xhe(t){return t==null?t:!!t}function Rw(t){return t==null?t:t.toString()}function an(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function f4(t){return t==null?t:Math.round(parseFloat(t))}function $he(t){return null}function Mhe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function dW(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function zM(t,e){return e!=null&&t&&!(e instanceof t)}function pW(t){return t&&"isCollection"in t}function FV(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function The(t,e){if(!e?.constructor||!pW(e.constructor))return vP(t,e)?e:new t(e);const i=FV(t.prototype.itemType),r=FV(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(vP(t,e),e):new t(e):e}function vP(t,e){return!!dW(e)&&(Gf().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+o3(t)+"'"),!0)}function dv(t,e){return e==null?e:pW(t)?The(t,e):zM(t,e)?vP(t,e)?e:new t(e):e}function o3(t){return t?.prototype?.declaredClass||"unknown"}const Ehe=new WeakMap;function Che(t){switch(t){case Number:return e=>an(e);case bt:return f4;case Boolean:return xhe;case String:return Rw;case Date:return She;case l3:return $he;default:return av(Ehe,t,()=>dv.bind(null,t))}}function Ur(t,e){const i=Che(t);return arguments.length===1?i:i(e)}function jb(t,e,i){return arguments.length===1?jb.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Ihe(t,e){return arguments.length===1?jb(i=>Ur(t,i)):jb(i=>Ur(t,i),e)}function fW(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>fW(t,e-1,r)):t(i)}function FM(t,e,i){if(arguments.length===2)return n=>FM(t,e,n);if(!i)return i;i=fW(t,e,i);let r=e,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function Lhe(t,e,i){return arguments.length===2?FM(r=>Ur(t,r),e):FM(r=>Ur(t,r),e,i)}function mW(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function _P(t,e){if(arguments.length===2)return _P(t).call(null,e);const i=new Set,r=t.filter(o=>typeof o!="function"),s=t.filter(o=>typeof o=="function");for(const o of t)typeof o!="string"&&typeof o!="number"||i.add(o);let n=null,a=null;return(o,u)=>{if(o==null)return o;const h=typeof o,p=h==="string"||h==="number";return p&&(i.has(o)||s.some(y=>h==="string"&&y===String||h==="number"&&y===Number))||h==="object"&&s.some(y=>!zM(y,o))?o:(p&&r.length?(n||(n=r.map(y=>typeof y=="string"?`'${y}'`:`${y}`).join(", ")),Gf().error("Accessor#set",`'${o}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof o=="object"&&s.length?(a||(a=s.map(y=>o3(y)).join(", ")),Gf().error("Accessor#set",`'${o}' is not a valid value for this property, value must be one of ${a}`)):Gf().error("Accessor#set",`'${o}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function Dd(t,e){if(arguments.length===2)return Dd(t).call(null,e);const i={},r=[],s=[];for(const u in t.typeMap){const h=t.typeMap[u];i[u]=Ur(h),r.push(o3(h)),s.push(u)}const n=()=>`'${r.join("', '")}'`,a=()=>`'${s.join("', '")}'`,o=typeof t.key=="string"?u=>u[t.key]:t.key;return u=>{if(t.base&&!zM(t.base,u)||u==null)return u;const h=o(u)||t.defaultKeyValue,p=i[h];if(!p)return Gf().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!zM(t.typeMap[h],u))return u;if(typeof t.key=="string"&&!dW(u)){const y={};for(const v in u)v!==t.key&&(y[v]=u[v]);return p(y)}return p(u)}}let bt=class{},l3=class{};const oUe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Ahe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function yW(t){switch(t.type){case"native":return Ur(t.value);case"array":return jb(yW(t.value));case"one-of":return Phe(t);default:return null}}function Phe(t){let e=null;return(i,r)=>wP(i,t)?i:(e==null&&(e=bP(t)),Gf().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function bP(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case bt:return"integer";case Date:return"date";case l3:return"null";default:return o3(t.value)}case"array":return`array of ${bP(t.value)}`;case"one-of":{const e=t.values.map(i=>bP(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function wP(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case bt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case l3:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!wP(i,e.value));case"one-of":return e.values.some(i=>wP(t,i))}}function m(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=kw(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&le.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const n=t.aliasOf;if(n){const u=typeof n=="string"?n:n.source,h=typeof n=="string"?null:n.overridable===!0;let p;s.dependsOn=[u],s.get=function(){let y=Rs(this,u);if(typeof y=="function"){p||(p=u.split(".").slice(0,-1).join("."));const v=Rs(this,p);v&&(y=y.bind(v))}return y},s.readOnly||(s.set=h?function(y){this._override(i,y)}:function(y){AM(this,u,y)})}const a=t.type,o=t.types;if(!s.cast){let u;a?u=Ohe(a):o&&(u=Array.isArray(o)?jb(Dd(o[0])):Dd(o)),t.cast=khe(t.cast,u)}Ece(s,t),t.range&&(s.cast=Mhe(s.cast,t.range))}}function m4(t,e,i){const r=kw(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function Ohe(t){let e=0,i=t;if(Ahe(t))return yW(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(mW(r))return e===0?_P(r):FM(_P(r),e);if(e===1)return Ihe(r);if(e>1)return Lhe(r,e);const s=t;return s.from?s.from:Ur(s)}function khe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}function Rhe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach(n=>{e[n]=s}),delete e[r]}}}let _a=class extends aH{constructor(e,i,r){super(e,i,r)}};_a.prototype.type="warning";function gW(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function Dhe(t,e){return y4(t,"any",e?.origin)}function VM(t,e){return y4(t,"read",e?.origin)}function vW(t,e){return y4(t,"write",e?.origin)}function y4(t,e,i){let r=t?.json;if(r?.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(e==="any"||e in s)&&(r=s)}return r}const SP=()=>le.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function VV(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||Fhe(t)&&pn("read.reader",pv(t),e))}function pv(t){const e=t.ndimArray??0;if(e>1)return zhe(t);if(e===1)return jV(t);if("type"in t&&bW(t.type)){const i=t.type.prototype?.itemType?.Type,r=jV(typeof i=="function"?{type:i}:{types:i});return(s,n,a)=>{const o=r(s,n,a);return o&&new t.type(o)}}return g4(t)}function g4(t){return"type"in t?Nhe(t.type):Vhe(t.types)}function Nhe(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void SP().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const n=new t;return n.read(e,r),n}:t.fromJSON}function _W(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(s=>_W(t,s,i,r-1)):t(e,void 0,i)}function zhe(t){const e=g4(t),i=_W.bind(null,e),r=t.ndimArray??0;return(s,n,a)=>{if(s==null)return s;s=i(s,a,r);let o=r,u=s;for(;o>0&&Array.isArray(u);)o--,u=u[0];if(u!==void 0)for(let h=0;h<o;h++)s=[s];return s}}function jV(t){const e=g4(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const a=[];for(const o of i){const u=e(o,void 0,s);u!==void 0&&a.push(u)}return a}const n=e(i,void 0,s);return n!==void 0?[n]:void 0}}function bW(t){if(!gW(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?v4(e.Type):wW(e.Type))}function Fhe(t){return"types"in t?wW(t.types):v4(t.type)}function v4(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||bW(t))}function wW(t){for(const e in t.typeMap)if(!v4(t.typeMap[e]))return!1;return!0}function Vhe(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(s,n,a)=>{if(s==null)return s;const o=typeof s;if(o!=="object")return void SP().error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=Uhe(t));const u=t.key;if(typeof u!="string")return;const h=s[jhe(u,e,a)],p=h?e[h]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!p){const v=`Type '${h||"unknown"}' is not supported`;return a?.messages&&s&&a.messages.push(new _a(`${i}:unsupported`,v,{definition:s,context:a})),void SP().error(v)}const y=new p;return y.read(s,a),r?r(y):y}}function jhe(t,e,i){const r=Object.values(e)[0],s=cv(r.prototype)[t],n=VM(s,i),a=n?.read?.source;return a&&typeof a=="string"?a:t}function Uhe(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],s=cv(r.prototype);if(typeof t.key=="function")continue;const n=s[t.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"){e[n.json.type[0]]=r;continue}const a=n.json?.write;if(!a?.writer){e[i]=r;continue}const o=a.target,u=typeof o=="string"?o:t.key,h={};a.writer(i,h,u),h[u]&&(e[h[u]]=r)}return e}function Ghe(t){if(t.json||(t.json={}),GV(t.json),qV(t.json),UV(t.json),t.json.origins)for(const e in t.json.origins)GV(t.json.origins[e]),qV(t.json.origins[e]),UV(t.json.origins[e]);return!0}function UV(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function GV(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function qV(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function BV(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&gW(t.type))?e.write.writer=Hhe:i>1?e.write.writer=Whe(i):e.types?Array.isArray(e.types)?e.write.writer=Bhe(e.types[0]):e.write.writer=qhe(e.types):e.write.writer=Ub}function qhe(t){return(e,i,r,s)=>e?SW(e,t,s)?Ub(e,i,r,s):void 0:Ub(e,i,r,s)}function SW(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new G(`${r}:unsupported`,s,{definition:t,context:i})),le.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Bhe(t){return(e,i,r,s)=>!e||!Array.isArray(e)?Ub(e,i,r,s):Ub(e.filter(n=>SW(n,t,s)),i,r,s)}function Ub(t,e,i,r){pn(i,jM(t,r),e)}function jM(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?UM(t):t}function UM(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Hhe(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(n=>jM(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[jM(t,r)],pn(i,s,e)}function xW(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>xW(r,e,i-1)):jM(t,e)}function Whe(t){return(e,i,r,s)=>{let n;if(e===null)n=null;else{n=xW(e,s,t);let a=t,o=n;for(;a>0&&Array.isArray(o);)a--,o=o[0];if(o!==void 0)for(let u=0;u<a;u++)n=[n]}pn(r,n,i)}}function Zhe(t){const e=Yhe(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],s=r.types?Jhe(r):e;VV(s,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),BV(s,r)}VV(e,t.json,!0),BV(e,t.json)}function Yhe(t){return t.json.types?xP(t.json):t.type?$W(t):xP(t)}function Jhe(t){return t.type?$W(t):xP(t)}function $W(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!mW(i);)i=i[0],e++;return{type:i,ndimArray:e}}function xP(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Xhe(t){Ghe(t)&&(Rhe(t),Zhe(t))}const eL=new Set,tL=new Set;function N(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,Khe(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!eL.has(s.initialize)&&(eL.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!tL.has(s.destroy)&&(tL.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);eL.clear(),tL.clear();const n=class extends e{constructor(...o){if(super(...o),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),r.length){let u=!1;const h=this[UH];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){this.__accessor__.lifecycle=pa.DESTROYING,u=!0,h.call(this);for(let p=0;p<r.length;p++)r[p].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=cv(e.prototype),n.prototype.declaredClass=t;const a=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:a,configurable:!0}),n}}function Qhe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&We(r);const s=i.store;return s.has(t)?s.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function Khe(t){const e=t.prototype,i=cv(e),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];Xhe(n),r[s]={enumerable:!0,configurable:!0,get:Qhe(s,n),set(a){const o=this.__accessor__;if(o!==void 0){if(o.mutable)return o.initialized&&n.readOnly?HV("read-only",s):o.lifecycle===pa.CONSTRUCTED&&n.constructOnly?HV("construct-only",s):void o.set(s,a)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(t.prototype,r)}const HV=(t,e)=>{le.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var WV,ZV;function ede(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Th=Symbol("Accessor-Handles"),iL=Symbol("Accessor-Initialized");var Od;let Ce=(Od=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class a extends n{constructor(...u){super(...u),this.inherited=null,s&&s.apply(this,u)}}cv(a.prototype);for(const o in e){const u=e[o];a.prototype[o]=typeof u=="function"?function(...h){const p=this.inherited;let y;this.inherited=function(...v){if(n.prototype[o])return n.prototype[o].apply(this,v)};try{y=u.apply(this,h)}catch(v){throw this.inherited=p,v}return this.inherited=p,y}:e[o]}for(const o in i){const u=ede(i[o]);m(u)(a.prototype,o)}return N(r)(a)}static freeze(e){return e instanceof Od?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Od?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[WV]=null,this[ZV]=!1,this.constructor===Od)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new Dce(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[iL]=!0}initialize(){}[UH](){this[Th]=xi(this[Th])}destroy(){this.destroyed||(dhe(this),this.__accessor__.destroy(),Uce()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[iL]}get destroyed(){return this.__accessor__?.lifecycle===pa.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===pa.DESTROYING||!1}commitProperty(e){Rs(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return AM(this,e,i),this}watch(e,i,r){return jH(le.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),vhe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}(this[Th]??=new uv).add(e,i)}removeHandles(e){this[Th]?.remove(e)}removeAllHandles(){this[Th]?.removeAll()}removeHandlesReference(e){this[Th]?.removeReference(e)}hasHandles(e){return this[Th]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},WV=Th,ZV=iL,Od);const u3=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(s,n){let a=this._listenersMap?.get(s);if(!a)return!1;let o=!1;for(const u of a.slice()){const h="deref"in u?u.deref():u;h?h?.call(this,n):o=!0}return o&&(a=a.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(s,a)),a.length>0}on(s,n){if(Array.isArray(s)){const o=s.map(u=>this.on(u,n));return gm(o)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const a=this._listenersMap.get(s)||[];return a.push(n),this._listenersMap.set(s,a),vt(()=>{const o=this._listenersMap?.get(s),u=o?.indexOf(n)??-1;u>=0&&o.splice(u,1)})}once(s,n){const a=this.on(s,o=>{a.remove(),("deref"in n?n.deref():n)?.call(null,o)});return a}hasEventListener(s){const n=this._listenersMap?.get(s);return n!=null&&n.length>0}}return i},MW=u3(class{}),tde=MW,fv=u3(Ce);function TW(t){return(e,i)=>{e[i]=t}}let Dw=class extends WH{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Yu;let ide=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},rde=class{constructor(e,i,r,s,n){this.target=e,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const Pa=new _m(()=>new ide,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function YV(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function rL(t){return t?t instanceof rd?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function sL(t){if(t?.length)return t[0]}function sde(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let n=0;for(;n<s&&t[i+n]===e[r+n];)n++;return n}function EW(t,e,i,r){e&&e.forEach((s,n,a)=>{t.push(s),EW(t,i.call(r,s,n,a),i,r)})}const Eh=new Set,Ch=new Set,Ih=new Set,nL=new Map;let nde=0,rd=Yu=class extends fv{static ofType(t){if(!t)return Yu;if(nL.has(t))return nL.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const s=t.typeMap[r].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends Yu{};return d([TW({Type:t,ensureType:typeof t=="function"?Ur(t):Dd(t)})],i.prototype,"itemType",void 0),i=d([N(`esri.core.Collection<${e}>`)],i),nL.set(t,i),i}static isCollection(t){return t!=null&&t instanceof Yu}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Dw,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:nde++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Yu?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return We(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,rL(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return vt();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),vt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,s=>{i()?.call(null,s),r.remove()});return r}add(t,e){if(We(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(We(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,rL(t)),this._emitAfterChanges(1),this}at(t){if(We(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(We(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return We(this._observable),this._createNewInstance({items:this._items.map(J)})}concat(...t){We(this._observable);const e=t.map(rL);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(We(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)t.call(e,i[s],s,i);this._emitAfterChanges(2)}destroyAll(){this.drain(YV)}destroyMany(t){const e=this.removeMany(t);return e.forEach(YV),e}every(t,e){return We(this._observable),this._items.every(t,e)}filter(t,e){We(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return We(this._observable),this._items.find(t,e)}findIndex(t,e){return We(this._observable),this._items.findIndex(t,e)}flatten(t,e){We(this._observable);const i=[];return EW(i,this,t,e),new Yu(i)}forEach(t,e){return We(this._observable),this._items.forEach(t,e)}getItemAt(t){return We(this._observable),this._items[t]}getNextIndex(t){We(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return We(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return We(this._observable),this._items.indexOf(t,e)}join(t=","){return We(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return We(this._observable),this._items.lastIndexOf(t,e)}map(t,e){We(this._observable);const i=this._items.map(t,e);return new Yu({items:i})}reorder(t,e=this.length-1){We(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(We(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=sL(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return We(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){We(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){We(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return We(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(We(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=sL(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(We(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof Yu?t.toArray():t,i=this._items,r=[],s=e.length;for(let n=0;n<s;n++){const a=e[n],o=i.indexOf(a);if(o>-1){const u=1+sde(e,i,n+1,o+1),h=this._splice(o,u);h&&h.length>0&&r.push.apply(r,h),n+=u-1}}return this._emitAfterChanges(2),r}reverse(){if(We(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(We(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=sL(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return We(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return We(this._observable),this._items.some(t,e)}sort(t){if(We(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){We(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(r),s}toArray(){return We(this._observable),this._items.slice()}toJSON(t){return We(this._observable),this.toArray().map(e=>Fb(e)?e.toJSON(t):e)}toLocaleString(){return We(this._observable),this._items.toLocaleString()}toString(){return We(this._observable),this._items.toString()}unshift(...t){return We(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,s=this.itemType;let n,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=hv(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(a=r.splice(t,e),this.hasEventListener("before-remove")){const o=Pa.acquire();o.target=this,o.cancellable=!0;for(let u=0,h=a.length;u<h;u++)n=a[u],o.reset(n),this.emit("before-remove",o),o.defaultPrevented&&(a.splice(u,1),r.splice(t,0,n),t+=1,u-=1,h-=1);Pa.release(o)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const o=Pa.acquire();o.target=this,o.cancellable=!1;const u=a.length;for(let h=0;h<u;h++)o.reset(a[h]),this.emit("after-remove",o);Pa.release(o)}}if(i?.length){if(s){const p=[];for(const y of i){const v=s.ensureType(y);v==null&&y!=null||p.push(v)}i=p}const o=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),h=t===this.length;if(o||u){const p=Pa.acquire();p.target=this,p.cancellable=!0;const y=Pa.acquire();y.target=this,y.cancellable=!1;for(const v of i)o?(p.reset(v),this.emit("before-add",p),p.defaultPrevented||(h?r.push(v):r.splice(t++,0,v),this._set("length",r.length),u&&(y.reset(v),this.emit("after-add",y)))):(h?r.push(v):r.splice(t++,0,v),this._set("length",r.length),y.reset(v),this.emit("after-add",y));Pa.release(y),Pa.release(p)}else{if(h)for(const p of i)r.push(p);else r.splice(t,0,...i);this._set("length",r.length)}}if((i?.length||a?.length)&&this._notifyChangeEvent(i,a),this.hasEventListener("after-splice")){const o=new rde(this,i,a,t,e);this.emit("after-splice",o)}return a}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Pa.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Pa.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Pa.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Pa.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Eh.clear(),Ch.clear(),Ih.clear();for(const{added:u,removed:h}of i){if(u)if(Ih.size===0&&Ch.size===0)for(const p of u)Eh.add(p);else for(const p of u)Ch.has(p)?(Ih.add(p),Ch.delete(p)):Ih.has(p)||Eh.add(p);if(h)if(Ih.size===0&&Eh.size===0)for(const p of h)Ch.add(p);else for(const p of h)Eh.has(p)?Eh.delete(p):(Ih.delete(p),Ch.add(p))}const r=nn.acquire();Eh.forEach(u=>{r.push(u)});const s=nn.acquire();Ch.forEach(u=>{s.push(u)});const n=this._items,a=e.items,o=nn.acquire();if(Ih.forEach(u=>{a.indexOf(u)!==n.indexOf(u)&&o.push(u)}),e.listeners&&(r.length||s.length||o.length)){const u={target:this,added:r,removed:s,moved:o},h=e.listeners.length;for(let p=0;p<h;p++){const y=e.listeners[p];y.removed||y.callback.call(this,u)}}nn.release(r),nn.release(s),nn.release(o)}Eh.clear(),Ch.clear(),Ih.clear()}};d([m()],rd.prototype,"_updating",void 0),d([m()],rd.prototype,"length",void 0),d([m()],rd.prototype,"items",null),d([m({readOnly:!0})],rd.prototype,"updating",null),rd=Yu=d([N("esri.core.Collection")],rd);const $e=rd;function lu(t,e,i=$e){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),ade(t)?e.addMany(t):t&&e.add(t)),e}function CW(t){return t}function ade(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let ode=class IW{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new IW;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,J(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const s=this._values.get(e);if(s?.origin!=null&&s.origin>r)return}this._values.set(e,new lde(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},lde=class{constructor(e,i){this.value=e,this.origin=i}};function LW(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),0)});const r=t.metadata;Object.keys(r).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),0)})}function ude(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&AV(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.startsWith(e)&&AV(s,i))return!0;return!1}function cde(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function hde(t,e,i,r,s){let n=VM(e[i],s);cde(n)&&(t[i]=!0);for(const a of Object.getOwnPropertyNames(e))n=VM(e[a],s),ude(n,i,r)&&(t[a]=!0)}function dde(t,e,i,r){const s=i.metadata,n=Dhe(s[e],r),a=n?.default;if(a===void 0)return;const o=typeof a=="function"?a.call(t,e,r):a;o!==void 0&&i.set(e,o)}const AW={origin:"service"};function PW(t,e,i=AW){if(!e||typeof e!="object")return;const r=Us(t),s=r.metadata,n={};for(const a of Object.getOwnPropertyNames(e))hde(n,s,a,e,i);r.setDefaultOrigin(i.origin);for(const a of Object.getOwnPropertyNames(n)){const o=VM(s[a],i).read,u=o?.source;let h;h=u&&typeof u=="string"?Ow(e,u):e[a],o?.reader&&(h=o.reader.call(t,h,e,i)),h!==void 0&&r.set(a,h)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(s))n[a]||dde(t,a,r,i)}r.setDefaultOrigin("user")}function pde(t,e,i,r=AW){const s={...r,messages:[]};i(s),s.messages?.forEach(n=>{n.type!=="warning"||t.loaded?r?.messages&&r.messages.push(n):t.loadWarnings.push(n)})}function fde(t,e,i,r,s){const n={};return e.write?.writer?.call(t,r,n,i,s),n}function OW(t,e,i,r,s,n){if(!r?.write)return!1;const a=Rs(t,i);if(!s&&r.write.overridePolicy){const o=r.write.overridePolicy.call(t,a,i,n??void 0);o!==void 0&&(s=o)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&n?.layerContainerType&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((a===null&&!s.allowNull&&!s.writerEnsuresNonNull||a===void 0)&&s.isRequired){const o=new G("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return o&&n?.messages?n.messages.push(o):o&&!n&&le.getLogger("esri.core.accessorSupport.write").error(o.name,o.message),!1}return!(a===void 0||a===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&mde(t,i,n,r,a)||!s.ignoreOrigin&&n?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Ic(n.origin))}function mde(t,e,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const a=n.call(t,e,i??void 0);return XT(a,s)}return!1}return n===s}function yde(t,e,i,r){const s=Us(t),n=s.metadata,a=vW(n[e],r);return!!a&&OW(t,s,e,a,i,r)}function kW(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return Xx(e,t.toJSON(i));const r=Us(t),s=r.metadata;for(const n in s){const a=vW(s[n],i);if(!OW(t,r,n,a,void 0,i))continue;const o=Rs(t,n),u=fde(t,a,a.write&&typeof a.write.target=="string"?a.write.target:n,o,i);Object.keys(u).length>0&&(e=Xx(e,u),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Xx(e,u,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:n,oldOrigin:kce(r.store.originOf(n)),newOrigin:i.origin}))}return e}const Wd=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const s=Us(this),n=s.store,a=new ode;s.store=a,LW(s,n,a)}read(r,s){PW(this,r,s)}write(r,s){return kW(this,r??{},s)}toJSON(r){return this.write({},r)}static fromJSON(r,s){return gde.call(this,r,s)}};return i=d([N("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function gde(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const ve=Wd(Ce);let vde=class{constructor(){this._resolver=va(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Ht())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=va(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||jr(s)||this._resolver.reject(s)}),e.resolve()}};const _4=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new vde,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,s){return this._promiseProps.promise.then(()=>this).then(r,s)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(zue(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=d([N("esri.core.Promise")],i),i},b4=_4(Ce),_de="not-loaded",bde="loading",wde="failed",JV="loaded",RW=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=a=>{const o=new Promise((u,h)=>{const p=n4(a,h);this.destroyed&&h(new G("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(u,h).finally(()=>{p&&p.remove()})});if(this.loadStatus===_de){this._set("loadStatus",bde);const u=this._loadController=new AbortController;n({signal:u.signal})}return s(),o}})),this.when(()=>{this._set("loadStatus",JV),this._loadController=null},s=>{this.destroyed||(this._set("loadStatus",wde),this._set("loadError",s),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=sm(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===JV}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new G("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return d([m({readOnly:!0})],i.prototype,"loaded",null),d([m({readOnly:!0})],i.prototype,"loadError",void 0),d([m({clonable:!1})],i.prototype,"loadStatus",void 0),d([m({type:[_a],readOnly:!0})],i.prototype,"loadWarnings",null),i=d([N("esri.core.Loadable")],i),i},bm=RW(b4);function GM(t){return!(!t||!t.load)}function Sde(t,e,i){return a4(t.map((r,s)=>e.apply(i,[r,s])))}async function xde(t,e,i){return(await a4(t.map((r,s)=>e.apply(i,[r,s])))).map(r=>r.value)}function w4(t){return{ok:!0,value:t}}function S4(t){return{ok:!1,error:t}}function $de(t){return t!=null&&t.ok===!0?t.value:null}function Mde(t){return t!=null&&t.ok===!1?t.error:null}async function c3(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return w4(await t)}catch(e){return S4(e)}}async function Tde(t){try{return w4(await t)}catch(e){return zn(e),S4(e)}}function h3(t,e){return new jh(t,e)}let jh=class extends Ce{get value(){return $de(this._result)}get error(){return Mde(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=sm(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(s=>{this._result=w4(s),this._cleanup()},s=>{this._result=S4(s),this._cleanup()}),this._abortHandle=so(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=fi(this._abortHandle),this._abortController=null}};d([m()],jh.prototype,"value",null),d([m()],jh.prototype,"error",null),d([m()],jh.prototype,"finished",null),d([m()],jh.prototype,"promise",void 0),d([m()],jh.prototype,"_result",void 0),jh=d([N("esri.core.asyncUtils.ReactiveTask")],jh);async function x4(t,e){return await t.load(),Ede(t,e)}async function Ede(t,e){const i=[],r=(...n)=>{for(const a of n)a!=null&&(Array.isArray(a)?r(...a):$e.isCollection(a)?a.forEach(o=>r(o)):GM(a)&&i.push(a))};e(r);let s=null;if(await xde(i,async n=>{const a=await c3(Cde(n)?n.loadAll():n.load());a.ok!==!1||s||(s=a)}),s)throw s.error;return t}function Cde(t){return"loadAll"in t&&typeof t.loadAll=="function"}function Le(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(n,a)=>{const o=n.constructor.prototype;for(const u of r){const h=m4(n,u,s);h.write&&typeof h.write=="object"||(h.write={}),i&&(h.write.target=i),h.write.writer=o[a]}}}let wt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Ide(e),this.apiValues=XV(this._apiToJSON),this.jsonValues=XV(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const a=this.toJSON(r);a!==void 0&&pn(n,a,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function Ide(t){const e={};for(const i in t)e[t[i]]=i;return e}function XV(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function es(){return function(t,e){return new wt(t,{ignoreUnknown:!0,...e})}}let $4=class{constructor(e,i,r,s,n,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Vi=new $4(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),uu=new $4(3396190,1/169.8944472236118,23e4,6e4,.111),Nd=new $4(1737400,0,0,0,0);function Si(t){if(!Tt.assetsPath)throw le.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new G("assets:path-not-set","config.assetsPath is not set");return Cw(Tt.assetsPath,t)}let aL,Z=null;function DW(){return!!Z}function Lde(){return!!X("esri-wasm")}function Ade(){return aL||(aL=K(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[],import.meta.url).then(({default:t})=>t({locateFile:e=>Si(`esri/geometry/support/${e}`)})).then(t=>{UW(t)}),aL)}const i$={geogToProj(t,e,i){Z.ensureCache.prepare();const r=lm(i),s=i===r,n=Z.ensureFloat64(r),a=Z._pe_geog_to_proj(Z.getPointer(t),e,n);return a&&zd(i,e,n,s),a},projGeog(t,e,i,r){switch(r){case Gi.PE_TRANSFORM_P_TO_G:return i$.projToGeog(t,e,i);case Gi.PE_TRANSFORM_G_TO_P:return i$.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>i$.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){Z.ensureCache.prepare();const s=lm(i),n=i===s,a=Z.ensureFloat64(s),o=Z._pe_proj_to_geog_center(Z.getPointer(t),e,a,r);return o&&zd(i,e,a,n),o}};let Gi=class kt{static init(){kt.PE_BUFFER_MAX=Z.PeDefs.prototype.PE_BUFFER_MAX,kt.PE_NAME_MAX=Z.PeDefs.prototype.PE_NAME_MAX,kt.PE_MGRS_MAX=Z.PeDefs.prototype.PE_MGRS_MAX,kt.PE_USNG_MAX=Z.PeDefs.prototype.PE_USNG_MAX,kt.PE_DD_MAX=Z.PeDefs.prototype.PE_DD_MAX,kt.PE_DDM_MAX=Z.PeDefs.prototype.PE_DDM_MAX,kt.PE_DMS_MAX=Z.PeDefs.prototype.PE_DMS_MAX,kt.PE_UTM_MAX=Z.PeDefs.prototype.PE_UTM_MAX,kt.PE_PARM_MAX=Z.PeDefs.prototype.PE_PARM_MAX,kt.PE_TYPE_NONE=Z.PeDefs.prototype.PE_TYPE_NONE,kt.PE_TYPE_GEOGCS=Z.PeDefs.prototype.PE_TYPE_GEOGCS,kt.PE_TYPE_PROJCS=Z.PeDefs.prototype.PE_TYPE_PROJCS,kt.PE_TYPE_GEOGTRAN=Z.PeDefs.prototype.PE_TYPE_GEOGTRAN,kt.PE_TYPE_COORDSYS=Z.PeDefs.prototype.PE_TYPE_COORDSYS,kt.PE_TYPE_UNIT=Z.PeDefs.prototype.PE_TYPE_UNIT,kt.PE_TYPE_LINUNIT=Z.PeDefs.prototype.PE_TYPE_LINUNIT,kt.PE_STR_OPTS_NONE=Z.PeDefs.prototype.PE_STR_OPTS_NONE,kt.PE_STR_AUTH_NONE=Z.PeDefs.prototype.PE_STR_AUTH_NONE,kt.PE_STR_AUTH_TOP=Z.PeDefs.prototype.PE_STR_AUTH_TOP,kt.PE_STR_NAME_CANON=Z.PeDefs.prototype.PE_STR_NAME_CANON,kt.PE_STR_FMT_WKT=Z.PeDefs.prototype.PE_STR_FMT_WKT,kt.PE_STR_FMT_WKT2=Z.PeDefs.prototype.PE_STR_FMT_WKT2,kt.PE_PARM_X0=Z.PeDefs.prototype.PE_PARM_X0,kt.PE_PARM_ND=Z.PeDefs.prototype.PE_PARM_ND,kt.PE_TRANSFORM_1_TO_2=Z.PeDefs.prototype.PE_TRANSFORM_1_TO_2,kt.PE_TRANSFORM_2_TO_1=Z.PeDefs.prototype.PE_TRANSFORM_2_TO_1,kt.PE_TRANSFORM_P_TO_G=Z.PeDefs.prototype.PE_TRANSFORM_P_TO_G,kt.PE_TRANSFORM_G_TO_P=Z.PeDefs.prototype.PE_TRANSFORM_G_TO_P,kt.PE_HORIZON_RECT=Z.PeDefs.prototype.PE_HORIZON_RECT,kt.PE_HORIZON_POLY=Z.PeDefs.prototype.PE_HORIZON_POLY,kt.PE_HORIZON_LINE=Z.PeDefs.prototype.PE_HORIZON_LINE,kt.PE_HORIZON_DELTA=Z.PeDefs.prototype.PE_HORIZON_DELTA}},NW=null;const QV={},KV={},ej=t=>{const e=t.getType();switch(e){case Gi.PE_TYPE_GEOGCS:t=Z.castObject(t,Z.PeGeogcs);break;case Gi.PE_TYPE_PROJCS:t=Z.castObject(t,Z.PeProjcs);break;case Gi.PE_TYPE_GEOGTRAN:t=Z.castObject(t,Z.PeGeogtran);break;default:e&Gi.PE_TYPE_UNIT&&(t=Z.castObject(t,Z.PeUnit))}return t},Gy={initialize(){Z.PeFactory.prototype.initialize(null)},coordsys:t=>Gy.factoryByType(Gi.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=QV[t];if(r||(r={},QV[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],Z.compare(i,Z.NULL)&&(i=null)),!i){const s=Z.PeFactory.prototype.factoryByType(t,e);Z.compare(s,Z.NULL)||(i=ej(s),r[e]=i)}return i},fromString(t,e){let i=null,r=KV[t];if(r||(r={},KV[t]=r),r.hasOwnProperty(e)&&(i=r[e],Z.compare(i,Z.NULL)&&(i=null)),!i){const s=Z.PeFactory.prototype.fromString(t,e);Z.compare(s,Z.NULL)||(i=ej(s),r[e]=i)}return i},geogcs:t=>Gy.factoryByType(Gi.PE_TYPE_GEOGCS,t),geogtran:t=>Gy.factoryByType(Gi.PE_TYPE_GEOGTRAN,t),getCode:t=>Z.PeFactory.prototype.getCode(t),projcs:t=>Gy.factoryByType(Gi.PE_TYPE_PROJCS,t),unit:t=>Gy.factoryByType(Gi.PE_TYPE_UNIT,t)};let tj,zW=null;const M4={PE_GTLIST_OPTS_COMMON:0,init(){M4.PE_GTLIST_OPTS_COMMON=Z.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,tj=Z._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,s,n){let a=null;const o=new Z.PeInteger(n);try{const u=Z.PeGTlistExtended.prototype.getGTlist(t,e,i,r,s,o);if((n=o.val)&&(a=[u],n>1)){const h=Z.getPointer(u);for(let p=1;p<n;p++)a.push(Z.wrapPointer(h+tj*p,Z.PeGTlistExtendedEntry))}}finally{Z.destroy(o)}return a}},Pde={destroy(t){if(t?.length){for(const e of t)ko(e),e.getEntries().forEach(i=>{ko(i);const r=i.getGeogtran();ko(r),r.getParameters().forEach(ko),[r.getGeogcs1(),r.getGeogcs2()].forEach(s=>{ko(s);const n=s.getDatum();ko(n),ko(n.getSpheroid()),ko(s.getPrimem()),ko(s.getUnit())})});Z.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},Ode={geogToGeog(t,e,i,r,s){Z.ensureCache.prepare();const n=lm(i),a=i===n,o=Z.ensureFloat64(n);let u=0;r&&(u=Z.ensureFloat64(r));const h=Z._pe_geog_to_geog(Z.getPointer(t),e,o,u,s);return h&&zd(i,e,o,a),h}},kde={geodesicCoordinate(t,e,i,r,s,n,a,o){Z.PeLineType.prototype.geodesic_coordinate(t,e,i,r,s,n,a,o)},geodeticCoordinate(t,e,i,r,s,n,a,o,u){Z.PeLineType.prototype.geodetic_coordinate(t,e,i,r,s,n,a,o,u)},geodeticDistance(t,e,i,r,s,n,a,o,u,h){Z.PeLineType.prototype.geodetic_distance(t,e,i,r,s,n,a,o,u,h)},greatEllipticDistance(t,e,i,r,s,n,a,o,u){Z.PeLineType.prototype.great_elliptic_distance(t,e,i,r,s,n,a,o,u)}},Rde={phiToEta:(t,e)=>Z.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>Z.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>Z.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>Z.PeMath.prototype.q(t,e,i),q90:(t,e)=>Z.PeMath.prototype.q90(t,e)},oL=(t,e,i,r,s,n)=>{let a,o;switch(Z.ensureCache.prepare(),t){case"dd":a=Z._pe_geog_to_dd,o=Gi.PE_DD_MAX;break;case"ddm":a=Z._pe_geog_to_ddm,o=Gi.PE_DDM_MAX;break;case"dms":a=Z._pe_geog_to_dms,o=Gi.PE_DMS_MAX}let u=0;e&&(u=Z.getPointer(e));const h=lm(r),p=Z.ensureFloat64(h),y=d3(i,o),v=a(u,i,p,s,Z.ensureInt32(y));if(v)for(let b=0;b<i;b++)n[b]=Z.UTF8ToString(y[b]);return v},lL=(t,e,i,r,s)=>{let n;switch(Z.ensureCache.prepare(),t){case"dd":n=Z._pe_dd_to_geog;break;case"ddm":n=Z._pe_ddm_to_geog;break;case"dms":n=Z._pe_dms_to_geog}let a=0;e&&(a=Z.getPointer(e));const o=r.map(y=>Z.ensureString(y)),u=Z.ensureInt32(o),h=Z.ensureFloat64(new Array(2*i)),p=n(a,i,u,h);return p&&zd(s,i,h),p},Dde={geogToDms:(t,e,i,r,s)=>oL("dms",t,e,i,r,s),dmsToGeog:(t,e,i,r)=>lL("dms",t,e,i,r),geogToDdm:(t,e,i,r,s)=>oL("ddm",t,e,i,r,s),ddmToGeog:(t,e,i,r)=>lL("ddm",t,e,i,r),geogToDd:(t,e,i,r,s)=>oL("dd",t,e,i,r,s),ddToGeog:(t,e,i,r)=>lL("dd",t,e,i,r)};let FW=class qy{static init(){qy.PE_MGRS_STYLE_NEW=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,qy.PE_MGRS_STYLE_OLD=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,qy.PE_MGRS_STYLE_AUTO=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,qy.PE_MGRS_180_ZONE_1_PLUS=Z.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,qy.PE_MGRS_ADD_SPACES=Z.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,s,n,a,o){Z.ensureCache.prepare();let u=0;e&&(u=Z.getPointer(e));const h=lm(r),p=Z.ensureFloat64(h),y=d3(i,Gi.PE_MGRS_MAX),v=Z.ensureInt32(y),b=Z._pe_geog_to_mgrs_extended(u,i,p,s,n,a,v);if(b)for(let w=0;w<i;w++)o[w]=Z.UTF8ToString(y[w]);return b}static mgrsToGeogExtended(e,i,r,s,n){Z.ensureCache.prepare();let a=0;e&&(a=Z.getPointer(e));const o=r.map(y=>Z.ensureString(y)),u=Z.ensureInt32(o),h=Z.ensureFloat64(new Array(2*i)),p=Z._pe_mgrs_to_geog_extended(a,i,u,s,h);return p&&zd(n,i,h),p}};const Nde={geogToUsng(t,e,i,r,s,n,a){Z.ensureCache.prepare();let o=0;t&&(o=Z.getPointer(t));const u=lm(i),h=Z.ensureFloat64(u),p=d3(e,Gi.PE_MGRS_MAX),y=Z.ensureInt32(p),v=Z._pe_geog_to_usng(o,e,h,r,s,n,y);if(v)for(let b=0;b<e;b++)a[b]=Z.UTF8ToString(p[b]);return v},usngToGeog(t,e,i,r){Z.ensureCache.prepare();let s=0;t&&(s=Z.getPointer(t));const n=i.map(h=>Z.ensureString(h)),a=Z.ensureInt32(n),o=Z.ensureFloat64(new Array(2*e)),u=Z._pe_usng_to_geog(s,e,a,o);return u&&zd(r,e,o),u}};let VW=class r${static init(){r$.PE_UTM_OPTS_NONE=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,r$.PE_UTM_OPTS_ADD_SPACES=Z.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,r$.PE_UTM_OPTS_NS=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,s,n){Z.ensureCache.prepare();let a=0;e&&(a=Z.getPointer(e));const o=lm(r),u=Z.ensureFloat64(o),h=d3(i,Gi.PE_UTM_MAX),p=Z.ensureInt32(h),y=Z._pe_geog_to_utm(a,i,u,s,p);if(y)for(let v=0;v<i;v++)n[v]=Z.UTF8ToString(h[v]);return y}static utmToGeog(e,i,r,s,n){Z.ensureCache.prepare();let a=0;e&&(a=Z.getPointer(e));const o=r.map(y=>Z.ensureString(y)),u=Z.ensureInt32(o),h=Z.ensureFloat64(new Array(2*i)),p=Z._pe_utm_to_geog(a,i,u,s,h);return p&&zd(n,i,h),p}};var Rn;let jW=(Rn=class{static init(){Rn.PE_PCSINFO_OPTION_NONE=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Rn.PE_PCSINFO_OPTION_DOMAIN=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Rn.PE_POLE_OUTSIDE_BOUNDARY=Z.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Rn.PE_POLE_POINT=Z.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=Rn.PE_PCSINFO_OPTION_DOMAIN){let r=null,s=null;return Rn.cache.has(e)&&(s=Rn.cache.get(e),s[i]&&(r=s[i])),r||(r=Z.PePCSInfo.prototype.generate(e,i),s||(s=[],Rn.cache.set(e,s)),s[i]=r),r}},Rn.cache=new Map,Rn);const zde={versionString:()=>Z.PeVersion.prototype.version_string()};function UW(t){function e(n,a,o){n[a]=o(n[a])}Z=t,Gi.init(),M4.init(),FW.init(),VW.init(),jW.init(),NW=class extends Z.PeDouble{constructor(n=NaN){super(n)}destroy(){Z.destroy(this)}[Symbol.dispose](){this.destroy()}},zW=class extends Z.PeGCSExtent{destroy(){Z.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[Z.PeAngunit,Z.PeDatum,Z.PeGeogcs,Z.PeGeogtran,Z.PeObject,Z.PeParameter,Z.PePrimem,Z.PeProjcs,Z.PeSpheroid,Z.PeUnit];for(const n of i)e(n.prototype,"getName",a=>function(){return a.call(this,new Array(Gi.PE_NAME_MAX))});for(const n of[Z.PeGeogtran,Z.PeProjcs])e(n.prototype,"getParameters",a=>function(){const o=new Array(Gi.PE_PARM_MAX);let u=a.call(this);for(let h=0;h<o.length;h++){const p=Z.getValue(u,"*");o[h]=p?Z.wrapPointer(p,Z.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return o});e(Z.PeHorizon.prototype,"getCoord",n=>function(a=!1){const o=this.getSize();if(!o)return null;const u=[];return zd(u,o,n.call(this),a),u}),e(Z.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const a=Z._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const u=n.call(this);if(!Z.compare(u,Z.NULL)){o=[u];const h=this.getSteps();if(h>1){const p=Z.getPointer(u);for(let y=1;y<h;y++)o.push(Z.wrapPointer(p+a*y,Z.PeGTlistExtendedGTs))}}return o}});const r=Z._pe_getPeHorizonSize(),s=n=>function(){let a=this._cache;if(a||(a=new Map,this._cache=a),a.has(n))return a.get(n);let o=null;const u=n.call(this);if(!Z.compare(u,Z.NULL)){o=[u];const h=u.getNump();if(h>1){const p=Z.getPointer(u);for(let y=1;y<h;y++)o.push(Z.wrapPointer(p+r*y,Z.PeHorizon))}}return a.set(n,o),o};e(Z.PeProjcs.prototype,"horizonGcsGenerate",s),e(Z.PeProjcs.prototype,"horizonPcsGenerate",s),Z.PeObject.prototype.toString=function(n=Gi.PE_STR_OPTS_NONE){Z.ensureCache.prepare();const a=Z.getPointer(this),o=Z.ensureInt8(new Array(Gi.PE_BUFFER_MAX));return Z.UTF8ToString(Z._pe_object_to_string_ext(a,n,o))},Z.PeGeogcs.prototype.destroy=function(){this.Delete(),ko(this),this.ptr=0},Z.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},Z.PeProjcs.prototype.destroy=function(){this.Delete(),ko(this),this.ptr=0},Z.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ko(t){if(!t)return;const e=Z.getClass(t);if(!e)return;const i=Z.getCache(e);if(!i)return;const r=Z.getPointer(t);r&&delete i[r]}function d3(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(Z.ensureInt8(r));return i}function lm(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function zd(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=Z.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=Z.getValue(i,"double"),t[n][1]=Z.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const gUe=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:i$,PeDefs:Gi,get PeDouble(){return NW},PeFactory:Gy,get PeGCSExtent(){return zW},PeGTTransformations:Ode,PeGTlistExtended:M4,PeGTlistExtendedEntry:Pde,PeLineType:kde,PeMath:Rde,PeNotationDms:Dde,PeNotationMgrs:FW,PeNotationUsng:Nde,PeNotationUtm:VW,PePCSInfo:jW,PeVersion:zde,_init:UW,get _pe(){return Z},isLoaded:DW,isSupported:Lde,load:Ade},Symbol.toStringTag,{value:"Module"}));let g;const k={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(g=2e3;g<=2045;g++)k[g]=0;for(g=2056;g<=2065;g++)k[g]=0;for(g=2067;g<=2135;g++)k[g]=0;for(g=2137;g<=2154;g++)k[g]=0;for(g=2161;g<=2170;g++)k[g]=0;for(g=2172;g<=2193;g++)k[g]=0;for(g=2195;g<=2198;g++)k[g]=0;for(g=2200;g<=2203;g++)k[g]=0;for(g=2205;g<=2217;g++)k[g]=0;for(g=2222;g<=2224;g++)k[g]=1;for(g=2225;g<=2250;g++)k[g]=2;for(g=2251;g<=2253;g++)k[g]=1;for(g=2257;g<=2264;g++)k[g]=2;for(g=2274;g<=2279;g++)k[g]=2;for(g=2280;g<=2282;g++)k[g]=1;for(g=2283;g<=2289;g++)k[g]=2;for(g=2290;g<=2292;g++)k[g]=0;for(g=2308;g<=2313;g++)k[g]=0;for(g=2315;g<=2491;g++)k[g]=0;for(g=2494;g<=2866;g++)k[g]=0;for(g=2867;g<=2869;g++)k[g]=1;for(g=2870;g<=2888;g++)k[g]=2;for(g=2891;g<=2895;g++)k[g]=2;for(g=2896;g<=2898;g++)k[g]=1;for(g=2902;g<=2908;g++)k[g]=2;for(g=2915;g<=2920;g++)k[g]=2;for(g=2921;g<=2923;g++)k[g]=1;for(g=2924;g<=2930;g++)k[g]=2;for(g=2931;g<=2962;g++)k[g]=0;for(g=2964;g<=2968;g++)k[g]=2;for(g=2969;g<=2973;g++)k[g]=0;for(g=2975;g<=2991;g++)k[g]=0;for(g=2995;g<=3051;g++)k[g]=0;for(g=3054;g<=3079;g++)k[g]=0;for(g=3081;g<=3088;g++)k[g]=0;for(g=3092;g<=3101;g++)k[g]=0;for(g=3106;g<=3138;g++)k[g]=0;for(g=3146;g<=3151;g++)k[g]=0;for(g=3153;g<=3166;g++)k[g]=0;for(g=3168;g<=3172;g++)k[g]=0;for(g=3174;g<=3203;g++)k[g]=0;for(g=3294;g<=3358;g++)k[g]=0;for(g=3367;g<=3403;g++)k[g]=0;for(g=3408;g<=3416;g++)k[g]=0;for(g=3417;g<=3438;g++)k[g]=2;for(g=3441;g<=3446;g++)k[g]=2;for(g=3447;g<=3450;g++)k[g]=0;for(g=3451;g<=3459;g++)k[g]=2;for(g=3460;g<=3478;g++)k[g]=0;for(g=3554;g<=3559;g++)k[g]=0;for(g=3560;g<=3570;g++)k[g]=2;for(g=3571;g<=3581;g++)k[g]=0;for(g=3594;g<=3597;g++)k[g]=0;for(g=3601;g<=3604;g++)k[g]=0;for(g=3637;g<=3639;g++)k[g]=0;for(g=3665;g<=3667;g++)k[g]=0;for(g=3693;g<=3695;g++)k[g]=0;for(g=3701;g<=3727;g++)k[g]=0;for(g=3728;g<=3739;g++)k[g]=2;for(g=3740;g<=3751;g++)k[g]=0;for(g=3753;g<=3760;g++)k[g]=2;for(g=3761;g<=3773;g++)k[g]=0;for(g=3775;g<=3777;g++)k[g]=0;for(g=3779;g<=3781;g++)k[g]=0;for(g=3783;g<=3785;g++)k[g]=0;for(g=3788;g<=3791;g++)k[g]=0;for(g=3797;g<=3802;g++)k[g]=0;for(g=3814;g<=3816;g++)k[g]=0;for(g=3825;g<=3829;g++)k[g]=0;for(g=3832;g<=3841;g++)k[g]=0;for(g=3844;g<=3852;g++)k[g]=0;for(g=3873;g<=3885;g++)k[g]=0;for(g=3890;g<=3893;g++)k[g]=0;for(g=3907;g<=3912;g++)k[g]=0;for(g=3942;g<=3950;g++)k[g]=0;for(g=3968;g<=3970;g++)k[g]=0;for(g=3973;g<=3976;g++)k[g]=0;for(g=3986;g<=3989;g++)k[g]=0;for(g=3994;g<=3997;g++)k[g]=0;for(g=4048;g<=4051;g++)k[g]=0;for(g=4056;g<=4063;g++)k[g]=0;for(g=4093;g<=4096;g++)k[g]=0;for(g=4390;g<=4398;g++)k[g]=0;for(g=4399;g<=4413;g++)k[g]=2;for(g=4418;g<=4433;g++)k[g]=2;for(g=4455;g<=4457;g++)k[g]=2;for(g=4484;g<=4489;g++)k[g]=0;for(g=4491;g<=4554;g++)k[g]=0;for(g=4568;g<=4589;g++)k[g]=0;for(g=4652;g<=4656;g++)k[g]=0;for(g=4766;g<=4800;g++)k[g]=0;for(g=5014;g<=5016;g++)k[g]=0;for(g=5069;g<=5072;g++)k[g]=0;for(g=5105;g<=5130;g++)k[g]=0;for(g=5167;g<=5188;g++)k[g]=0;for(g=5253;g<=5259;g++)k[g]=0;for(g=5269;g<=5275;g++)k[g]=0;for(g=5292;g<=5311;g++)k[g]=0;for(g=5329;g<=5331;g++)k[g]=0;for(g=5343;g<=5349;g++)k[g]=0;for(g=5355;g<=5357;g++)k[g]=0;for(g=5387;g<=5389;g++)k[g]=0;for(g=5459;g<=5463;g++)k[g]=0;for(g=5479;g<=5482;g++)k[g]=0;for(g=5518;g<=5520;g++)k[g]=0;for(g=5530;g<=5539;g++)k[g]=0;for(g=5550;g<=5552;g++)k[g]=0;for(g=5562;g<=5583;g++)k[g]=0;for(g=5623;g<=5625;g++)k[g]=2;for(g=5631;g<=5639;g++)k[g]=0;for(g=5649;g<=5653;g++)k[g]=0;for(g=5663;g<=5680;g++)k[g]=0;for(g=5682;g<=5685;g++)k[g]=0;for(g=5875;g<=5877;g++)k[g]=0;for(g=5896;g<=5899;g++)k[g]=0;for(g=5921;g<=5940;g++)k[g]=0;for(g=6050;g<=6125;g++)k[g]=0;for(g=6244;g<=6275;g++)k[g]=0;for(g=6328;g<=6348;g++)k[g]=0;for(g=6350;g<=6356;g++)k[g]=0;for(g=6366;g<=6372;g++)k[g]=0;for(g=6381;g<=6387;g++)k[g]=0;for(g=6393;g<=6404;g++)k[g]=0;for(g=6480;g<=6483;g++)k[g]=0;for(g=6511;g<=6514;g++)k[g]=0;for(g=6579;g<=6581;g++)k[g]=0;for(g=6619;g<=6624;g++)k[g]=0;for(g=6625;g<=6627;g++)k[g]=2;for(g=6628;g<=6632;g++)k[g]=0;for(g=6634;g<=6637;g++)k[g]=0;for(g=6669;g<=6692;g++)k[g]=0;for(g=6707;g<=6709;g++)k[g]=0;for(g=6720;g<=6723;g++)k[g]=0;for(g=6732;g<=6738;g++)k[g]=0;for(g=6931;g<=6933;g++)k[g]=0;for(g=6956;g<=6959;g++)k[g]=0;for(g=7005;g<=7007;g++)k[g]=0;for(g=7057;g<=7070;g++)k[g]=2;for(g=7074;g<=7082;g++)k[g]=0;for(g=7109;g<=7118;g++)k[g]=0;for(g=7119;g<=7127;g++)k[g]=1;for(g=7374;g<=7376;g++)k[g]=0;for(g=7528;g<=7586;g++)k[g]=0;for(g=7587;g<=7645;g++)k[g]=2;for(g=7692;g<=7696;g++)k[g]=0;for(g=7755;g<=7787;g++)k[g]=0;for(g=7791;g<=7795;g++)k[g]=0;for(g=7799;g<=7801;g++)k[g]=0;for(g=7803;g<=7805;g++)k[g]=0;for(g=7825;g<=7831;g++)k[g]=0;for(g=7845;g<=7859;g++)k[g]=0;for(g=8013;g<=8032;g++)k[g]=0;for(g=8065;g<=8068;g++)k[g]=1;for(g=8518;g<=8529;g++)k[g]=2;for(g=8533;g<=8536;g++)k[g]=2;for(g=8538;g<=8540;g++)k[g]=2;for(g=8677;g<=8679;g++)k[g]=0;for(g=8836;g<=8840;g++)k[g]=0;for(g=8857;g<=8859;g++)k[g]=0;for(g=8908;g<=8910;g++)k[g]=0;for(g=9154;g<=9159;g++)k[g]=0;for(g=9205;g<=9218;g++)k[g]=0;for(g=9271;g<=9273;g++)k[g]=0;for(g=9295;g<=9297;g++)k[g]=0;for(g=9356;g<=9360;g++)k[g]=0;for(g=9404;g<=9407;g++)k[g]=0;for(g=9476;g<=9482;g++)k[g]=0;for(g=9487;g<=9494;g++)k[g]=0;for(g=9697;g<=9699;g++)k[g]=0;for(g=9821;g<=9865;g++)k[g]=0;for(g=10285;g<=10291;g++)k[g]=0;for(g=10314;g<=10317;g++)k[g]=0;for(g=10448;g<=10465;g++)k[g]=0;for(g=10726;g<=10729;g++)k[g]=0;for(g=10731;g<=10733;g++)k[g]=0;for(g=11114;g<=11118;g++)k[g]=0;for(g=20004;g<=20032;g++)k[g]=0;for(g=20047;g<=20049;g++)k[g]=0;for(g=20062;g<=20092;g++)k[g]=0;for(g=20135;g<=20138;g++)k[g]=0;for(g=20248;g<=20258;g++)k[g]=0;for(g=20348;g<=20358;g++)k[g]=0;for(g=20436;g<=20440;g++)k[g]=0;for(g=20822;g<=20824;g++)k[g]=0;for(g=20904;g<=20932;g++)k[g]=0;for(g=20934;g<=20936;g++)k[g]=0;for(g=21004;g<=21032;g++)k[g]=0;for(g=21035;g<=21037;g++)k[g]=0;for(g=21095;g<=21097;g++)k[g]=0;for(g=21148;g<=21150;g++)k[g]=0;for(g=21207;g<=21264;g++)k[g]=0;for(g=21307;g<=21364;g++)k[g]=0;for(g=21413;g<=21423;g++)k[g]=0;for(g=21453;g<=21463;g++)k[g]=0;for(g=21473;g<=21483;g++)k[g]=0;for(g=21780;g<=21782;g++)k[g]=0;for(g=21891;g<=21894;g++)k[g]=0;for(g=21896;g<=21899;g++)k[g]=0;for(g=22171;g<=22177;g++)k[g]=0;for(g=22181;g<=22187;g++)k[g]=0;for(g=22191;g<=22197;g++)k[g]=0;for(g=22207;g<=22222;g++)k[g]=0;for(g=22229;g<=22232;g++)k[g]=0;for(g=22234;g<=22236;g++)k[g]=0;for(g=22243;g<=22250;g++)k[g]=0;for(g=22262;g<=22265;g++)k[g]=0;for(g=22307;g<=22322;g++)k[g]=0;for(g=22348;g<=22357;g++)k[g]=0;for(g=22407;g<=22422;g++)k[g]=0;for(g=22462;g<=22465;g++)k[g]=0;for(g=22521;g<=22525;g++)k[g]=0;for(g=22607;g<=22622;g++)k[g]=0;for(g=22641;g<=22646;g++)k[g]=0;for(g=22648;g<=22657;g++)k[g]=0;for(g=22707;g<=22722;g++)k[g]=0;for(g=22762;g<=22765;g++)k[g]=0;for(g=22807;g<=22822;g++)k[g]=0;for(g=22991;g<=22994;g++)k[g]=0;for(g=23028;g<=23038;g++)k[g]=0;for(g=23301;g<=23333;g++)k[g]=2;for(g=23830;g<=23853;g++)k[g]=0;for(g=23866;g<=23872;g++)k[g]=0;for(g=23877;g<=23884;g++)k[g]=0;for(g=23886;g<=23894;g++)k[g]=0;for(g=23946;g<=23948;g++)k[g]=0;for(g=24311;g<=24313;g++)k[g]=0;for(g=24342;g<=24347;g++)k[g]=0;for(g=24370;g<=24374;g++)k[g]=10;for(g=24375;g<=24381;g++)k[g]=0;for(g=24718;g<=24721;g++)k[g]=0;for(g=24817;g<=24821;g++)k[g]=0;for(g=24877;g<=24882;g++)k[g]=0;for(g=24891;g<=24893;g++)k[g]=0;for(g=25391;g<=25395;g++)k[g]=0;for(g=25828;g<=25838;g++)k[g]=0;for(g=26191;g<=26195;g++)k[g]=0;for(g=26391;g<=26393;g++)k[g]=0;for(g=26701;g<=26722;g++)k[g]=0;for(g=26729;g<=26799;g++)k[g]=2;for(g=26801;g<=26803;g++)k[g]=2;for(g=26811;g<=26813;g++)k[g]=2;for(g=26847;g<=26870;g++)k[g]=2;for(g=26891;g<=26899;g++)k[g]=0;for(g=26901;g<=26923;g++)k[g]=0;for(g=26929;g<=26946;g++)k[g]=0;for(g=26948;g<=26998;g++)k[g]=0;for(g=27037;g<=27040;g++)k[g]=0;for(g=27205;g<=27232;g++)k[g]=0;for(g=27258;g<=27260;g++)k[g]=0;for(g=27391;g<=27398;g++)k[g]=0;for(g=27561;g<=27564;g++)k[g]=0;for(g=27571;g<=27574;g++)k[g]=0;for(g=27581;g<=27584;g++)k[g]=0;for(g=27591;g<=27594;g++)k[g]=0;for(g=27700;g<=27707;g++)k[g]=0;for(g=28191;g<=28193;g++)k[g]=0;for(g=28348;g<=28358;g++)k[g]=0;for(g=28402;g<=28432;g++)k[g]=0;for(g=28462;g<=28492;g++)k[g]=0;for(g=29118;g<=29122;g++)k[g]=0;for(g=29168;g<=29172;g++)k[g]=0;for(g=29177;g<=29185;g++)k[g]=0;for(g=29187;g<=29195;g++)k[g]=0;for(g=29900;g<=29903;g++)k[g]=0;for(g=30161;g<=30179;g++)k[g]=0;for(g=30491;g<=30494;g++)k[g]=0;for(g=30729;g<=30732;g++)k[g]=0;for(g=31251;g<=31259;g++)k[g]=0;for(g=31265;g<=31268;g++)k[g]=0;for(g=31275;g<=31279;g++)k[g]=0;for(g=31281;g<=31297;g++)k[g]=0;for(g=31461;g<=31469;g++)k[g]=0;for(g=31491;g<=31495;g++)k[g]=0;for(g=31917;g<=31922;g++)k[g]=0;for(g=31965;g<=32e3;g++)k[g]=0;for(g=32001;g<=32003;g++)k[g]=2;for(g=32005;g<=32031;g++)k[g]=2;for(g=32033;g<=32060;g++)k[g]=2;for(g=32064;g<=32067;g++)k[g]=2;for(g=32074;g<=32077;g++)k[g]=2;for(g=32081;g<=32086;g++)k[g]=0;for(g=32107;g<=32130;g++)k[g]=0;for(g=32133;g<=32159;g++)k[g]=0;for(g=32164;g<=32167;g++)k[g]=2;for(g=32180;g<=32199;g++)k[g]=0;for(g=32201;g<=32260;g++)k[g]=0;for(g=32301;g<=32360;g++)k[g]=0;for(g=32401;g<=32460;g++)k[g]=0;for(g=32501;g<=32560;g++)k[g]=0;for(g=32601;g<=32662;g++)k[g]=0;for(g=32664;g<=32667;g++)k[g]=2;for(g=32701;g<=32761;g++)k[g]=0;for(g=53001;g<=53004;g++)k[g]=0;for(g=53008;g<=53019;g++)k[g]=0;for(g=53021;g<=53032;g++)k[g]=0;for(g=53034;g<=53037;g++)k[g]=0;for(g=53042;g<=53046;g++)k[g]=0;for(g=53074;g<=53080;g++)k[g]=0;for(g=54001;g<=54004;g++)k[g]=0;for(g=54008;g<=54019;g++)k[g]=0;for(g=54021;g<=54032;g++)k[g]=0;for(g=54034;g<=54037;g++)k[g]=0;for(g=54042;g<=54046;g++)k[g]=0;for(g=54048;g<=54053;g++)k[g]=0;for(g=54074;g<=54080;g++)k[g]=0;for(g=54090;g<=54096;g++)k[g]=0;for(g=54098;g<=54101;g++)k[g]=0;for(g=65161;g<=65163;g++)k[g]=0;for(g=102001;g<=102040;g++)k[g]=0;for(g=102042;g<=102063;g++)k[g]=0;for(g=102065;g<=102067;g++)k[g]=0;for(g=102070;g<=102117;g++)k[g]=0;for(g=102122;g<=102216;g++)k[g]=0;for(g=102221;g<=102377;g++)k[g]=0;for(g=102382;g<=102388;g++)k[g]=0;for(g=102389;g<=102398;g++)k[g]=2;for(g=102399;g<=102444;g++)k[g]=0;for(g=102445;g<=102447;g++)k[g]=2;for(g=102448;g<=102458;g++)k[g]=0;for(g=102459;g<=102468;g++)k[g]=2;for(g=102469;g<=102499;g++)k[g]=0;for(g=102500;g<=102519;g++)k[g]=1;for(g=102520;g<=102524;g++)k[g]=0;for(g=102525;g<=102529;g++)k[g]=2;for(g=102530;g<=102588;g++)k[g]=0;for(g=102590;g<=102598;g++)k[g]=0;for(g=102601;g<=102603;g++)k[g]=0;for(g=102605;g<=102628;g++)k[g]=0;for(g=102629;g<=102646;g++)k[g]=2;for(g=102648;g<=102700;g++)k[g]=2;for(g=102701;g<=102703;g++)k[g]=0;for(g=102707;g<=102730;g++)k[g]=2;for(g=102733;g<=102758;g++)k[g]=2;for(g=102767;g<=102900;g++)k[g]=0;for(g=102901;g<=102933;g++)k[g]=2;for(g=102934;g<=102950;g++)k[g]=13;for(g=102951;g<=102963;g++)k[g]=0;for(g=102965;g<=102969;g++)k[g]=0;for(g=102971;g<=102973;g++)k[g]=0;for(g=102975;g<=102989;g++)k[g]=0;for(g=102990;g<=102992;g++)k[g]=1;for(g=102997;g<=103002;g++)k[g]=0;for(g=103003;g<=103008;g++)k[g]=2;for(g=103009;g<=103011;g++)k[g]=0;for(g=103012;g<=103014;g++)k[g]=2;for(g=103019;g<=103021;g++)k[g]=0;for(g=103022;g<=103024;g++)k[g]=2;for(g=103029;g<=103031;g++)k[g]=0;for(g=103032;g<=103034;g++)k[g]=2;for(g=103065;g<=103068;g++)k[g]=0;for(g=103074;g<=103076;g++)k[g]=0;for(g=103077;g<=103079;g++)k[g]=1;for(g=103080;g<=103082;g++)k[g]=0;for(g=103083;g<=103085;g++)k[g]=2;for(g=103090;g<=103093;g++)k[g]=0;for(g=103097;g<=103099;g++)k[g]=0;for(g=103100;g<=103102;g++)k[g]=2;for(g=103107;g<=103109;g++)k[g]=0;for(g=103110;g<=103112;g++)k[g]=2;for(g=103113;g<=103116;g++)k[g]=0;for(g=103117;g<=103120;g++)k[g]=2;for(g=103153;g<=103157;g++)k[g]=0;for(g=103158;g<=103162;g++)k[g]=2;for(g=103163;g<=103165;g++)k[g]=0;for(g=103166;g<=103168;g++)k[g]=1;for(g=103169;g<=103171;g++)k[g]=2;for(g=103186;g<=103188;g++)k[g]=0;for(g=103189;g<=103191;g++)k[g]=2;for(g=103192;g<=103195;g++)k[g]=0;for(g=103196;g<=103199;g++)k[g]=2;for(g=103200;g<=103224;g++)k[g]=0;for(g=103225;g<=103227;g++)k[g]=1;for(g=103232;g<=103237;g++)k[g]=0;for(g=103238;g<=103243;g++)k[g]=2;for(g=103244;g<=103246;g++)k[g]=0;for(g=103247;g<=103249;g++)k[g]=2;for(g=103254;g<=103256;g++)k[g]=0;for(g=103257;g<=103259;g++)k[g]=2;for(g=103264;g<=103266;g++)k[g]=0;for(g=103267;g<=103269;g++)k[g]=2;for(g=103300;g<=103375;g++)k[g]=0;for(g=103381;g<=103383;g++)k[g]=0;for(g=103384;g<=103386;g++)k[g]=1;for(g=103387;g<=103389;g++)k[g]=0;for(g=103390;g<=103392;g++)k[g]=2;for(g=103397;g<=103399;g++)k[g]=0;for(g=103400;g<=103471;g++)k[g]=2;for(g=103476;g<=103478;g++)k[g]=0;for(g=103479;g<=103481;g++)k[g]=2;for(g=103486;g<=103488;g++)k[g]=0;for(g=103489;g<=103491;g++)k[g]=2;for(g=103492;g<=103495;g++)k[g]=0;for(g=103496;g<=103499;g++)k[g]=2;for(g=103528;g<=103543;g++)k[g]=0;for(g=103544;g<=103548;g++)k[g]=2;for(g=103549;g<=103551;g++)k[g]=0;for(g=103552;g<=103554;g++)k[g]=1;for(g=103555;g<=103557;g++)k[g]=2;for(g=103558;g<=103560;g++)k[g]=0;for(g=103571;g<=103573;g++)k[g]=0;for(g=103574;g<=103576;g++)k[g]=2;for(g=103577;g<=103580;g++)k[g]=0;for(g=103581;g<=103583;g++)k[g]=2;for(g=103595;g<=103694;g++)k[g]=0;for(g=103696;g<=103699;g++)k[g]=0;for(g=103700;g<=103793;g++)k[g]=2;for(g=103794;g<=103890;g++)k[g]=0;for(g=103891;g<=103896;g++)k[g]=2;for(g=103900;g<=103971;g++)k[g]=2;for(g=103972;g<=103977;g++)k[g]=0;for(g=112e3;g<=112101;g++)k[g]=0;const GW=[102100,102113,3857,3785,900913],Fde=[104905,104971],Vde=[104903],jde=[4326,...GW,...Fde,...Vde],Gb=[-20037508342788905e-9,20037508342788905e-9],$P=[-20037508342787e-6,20037508342787e-6],uL={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Gb,origin:$P,dx:1e-5},qW={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Gb,origin:$P,dx:1e-5},102100:uL,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Gb,origin:$P,dx:1e-5},3857:uL,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:uL,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ar(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Xo(t)&&Xo(e))return!0;const a=t.latestWkid;if(a!=null&&r===a)return!0;const o=e.latestWkid;return o!=null&&i===o}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Fs(t){const e=t?.wkid;return e!=null&&e>=2e3&&qW[e]||null}function BW(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function Zd(t){if(!Fn(t))return!1;const{wkid:e}=t;if(e)return k[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function Ude(t){return!(T4(t)||E4(t))}function Fd(t){return t?.wkid===4326}function vUe(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function MP(t){return t?.wkid===4490}function Xo(t){const e=t?.wkid;return e!=null&&e>=2e3&&GW.includes(e)}function Gde(t){return t?.wkid===32662}function p3(t){return t===104971||t===104905}function T4(t){return p3(t?.wkid)}function f3(t){return t===104903}function E4(t){return f3(t?.wkid)}function qde(t){const e=t?.wkid;return e!=null&&e>=2e3&&jde.includes(e)}function Fn(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const HW={wkid:4326,wkt:Hd(qW[4326].wkTemplate,{Central_Meridian:"0.0"})},WW={wkid:102100,latestWkid:3857},Bde={wkid:32662};function C4(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Hde=C4(Vi),I4=C4(uu),L4=C4(Nd),Wde={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Vi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Zde=I4.wkt.toUpperCase(),Yde=L4.wkt.toUpperCase();function Jde(t){if(t!=null&&Fn(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(p3(e))return uu;const r=i?.toUpperCase();if(i&&r===Zde)return uu;if(f3(e)||r&&r===Yde)return Nd}return Vi}function _Ue(t){return p3(t)?uu:f3(t)?Nd:Vi}function qM(t){return Ar(t,Hde)}function Vd(t){return qM(t)||Ar(t,I4)||Ar(t,L4)}const ZW=39.37,Xde=Vi.radius*Math.PI/200,YW=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,O0=k,JW=/UNIT\[([^\]]+)]/i,Qde=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Kde=es()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),go=t=>t*t,Lh=t=>t*t*t,qb={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:go(.001)},"square-centimeters":{inBaseUnits:go(.01)},"square-decimeters":{inBaseUnits:go(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:go(1e3)},"square-inches":{inBaseUnits:go(.0254)},"square-feet":{inBaseUnits:go(.3048)},"square-yards":{inBaseUnits:go(.9144)},"square-miles":{inBaseUnits:go(1609.344)},"square-nautical-miles":{inBaseUnits:go(1852)},"square-us-feet":{inBaseUnits:go(1200/3937)},acres:{inBaseUnits:.0015625*go(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Lh(.001)},"cubic-centimeters":{inBaseUnits:1e3*Lh(.01)},"cubic-decimeters":{inBaseUnits:1e3*Lh(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Lh(1e3)},"cubic-inches":{inBaseUnits:1e3*Lh(.0254)},"cubic-feet":{inBaseUnits:1e3*Lh(.3048)},"cubic-yards":{inBaseUnits:1e3*Lh(.9144)},"cubic-miles":{inBaseUnits:1e3*Lh(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},epe=(()=>{const t={};for(const e in qb)for(const i in qb[e].units)t[i]=e;return t})();function tpe(t,e,i){return t*qb[i].units[e].inBaseUnits}function ipe(t,e,i){return t/qb[i].units[e].inBaseUnits}const rpe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],spe=["metric","imperial"],XW=[...spe,...rpe],npe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function TP(t){const e=epe[t];if(!e)throw new Error("unknown type");return e}function ij(t,e=null){return e=e||TP(t),qb[e].baseUnit===t}function Qt(t,e,i){if(e===i)return t;const r=TP(e);if(r!==TP(i))throw new Error("incompatible units");const s=ij(e,r)?t:tpe(t,e,r);return ij(i,r)?s:ipe(s,i,r)}function bUe(t,e,i,r=!1){if(!r&&Zd(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=wm(e);return s!==i&&(t=s?Qt(t,s,i):Qt(t*=ba(e),"meters",i)),t}function wUe(t,e,i,r=!1){if(!r&&Zd(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=wm(i);return e!==s&&(t=s?Qt(t,e,s):Qt(t,e,"meters")/ba(i)),t}function ape(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function SUe(t){return ape(t)}function xUe(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function $Ue(t,e,i){switch(i){case"metric":return ope(t,e);case"imperial":return upe(t,e);default:return i}}function MUe(t,e,i){switch(i){case"metric":return lpe(t,e);case"imperial":return cpe(t,e);default:return i}}function ope(t,e){const i=Qt(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function lpe(t,e){const i=Qt(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function upe(t,e){const i=Qt(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function cpe(t,e){const i=Qt(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function TUe(t,e){const i=Qt(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function EUe(t,e){const i=Qt(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function hpe(t,e,i){return Qt(t,e,"meters")/(i*Math.PI/180)}function A4(t){return Kde.fromJSON(t.toLowerCase())||null}function rj(t){if(t!=null&&!Ude(t))return 1;const e=ba(t);return e>1e5?1:e}function QW(t){return ba(t)>=Jde(t).metersPerDegree?"meters":wm(t)}function ba(t,e=Vi.metersPerDegree){return KW(t,!0)??e}function KW(t,e=!1){const i=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let s=null;if(i){if(p3(i))return uu.metersPerDegree;if(f3(i))return Nd.metersPerDegree;s=O0.values[O0[i]],!s&&e&&Qde.has(i)&&(s=Xde)}else r&&(iZ(r)?s=sj(YW.exec(r),s):tZ(r)&&(s=sj(JW.exec(r),s)));return s}function CUe(t){return Zd(t)?1:ba(t)}function sj(t,e){return t?.[1]?eZ(t[1]):e}function eZ(t){return parseFloat(t.split(",")[1])}function wm(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let r=null;if(e)r=O0.units[O0[e]];else if(i){const s=iZ(i)?YW:tZ(i)?JW:null;if(s){const n=s.exec(i);n?.[1]&&(r=ppe(n[1]))}}return r!=null?A4(r):null}function IUe(t){const e=wm(t);return e!=null&&XW.includes(e)?e:null}function LUe(t){const e=QW(t);return e!=null&&XW.includes(e)?e:null}function AUe(t){const e=wm(t);return e==null?null:npe.get(e)}function tZ(t){return/^GEOCCS/i.test(t)}function iZ(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const dpe=1e-7;function ppe(t){let i=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!i||!A4(i)){const r=eZ(t);i=null;const s=O0.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<dpe){i=O0.units[n];break}}return i}function fpe(t){const e=wm(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const mpe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ype={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},gpe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},PUe=es()(mpe),OUe=es()(ype),kUe=es()(gpe);var pl,Ol;let Ee=(Ol=class extends ve{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return pl.WebMercator;if(e?.wkid===4326)return pl.WGS84;const i=new pl;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Fd(this)}get isWebMercator(){return Xo(this)}get isGeographic(){return Zd(this)}get isWrappable(){return qde(this)}get metersPerUnit(){return ba(this)}get unit(){return wm(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===pl.WGS84)return new pl(HW);if(this===pl.WebMercator)return new pl(WW);const e=new pl;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=J(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return i==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===i&&n.referenceServiceName===r:n.id===i}return Ar(this,e)}toJSON(e){return this.write(void 0,e)}},pl=Ol,Ol.GCS_NAD_1927=null,Ol.WGS84=null,Ol.WebMercator=null,Ol.PlateCarree=null,Ol);d([m({readOnly:!0})],Ee.prototype,"isWGS84",null),d([m({readOnly:!0})],Ee.prototype,"isWebMercator",null),d([m({readOnly:!0})],Ee.prototype,"isGeographic",null),d([m({readOnly:!0})],Ee.prototype,"isWrappable",null),d([m({type:bt,json:{write:!0}})],Ee.prototype,"latestWkid",void 0),d([m({readOnly:!0})],Ee.prototype,"metersPerUnit",null),d([m({readOnly:!0})],Ee.prototype,"unit",null),d([m({type:bt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ee.prototype,"wkid",void 0),d([m({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ee.prototype,"wkt",void 0),d([Le("wkt"),Le("web-scene","wkt")],Ee.prototype,"writeWkt",null),d([m({type:String,json:{write:!1}})],Ee.prototype,"wkt2",void 0),d([m({type:bt,json:{write:!0}})],Ee.prototype,"vcsWkid",void 0),d([m({type:bt,json:{write:!0}})],Ee.prototype,"latestVcsWkid",void 0),d([m()],Ee.prototype,"imageCoordinateSystem",void 0),Ee=pl=d([N("esri.geometry.SpatialReference")],Ee),Ee.prototype.toJSON.isDefaultToJSON=!0,Ee.GCS_NAD_1927=Ce.freeze(new Ee({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Ee.WGS84=Ce.freeze(new Ee(HW)),Ee.WebMercator=Ce.freeze(new Ee(WW)),Ee.PlateCarree=Ce.freeze(new Ee(Bde));function Ge(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(n,a)=>{const o=n.constructor.prototype;r.forEach(u=>{const h=m4(n,u,s);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=o[a],i&&(h.read.source=(h.read.source||[]).concat(i))})}}let Vr=class extends ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ee.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Ee)return e;if(e!=null){const r=new Ee;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};d([m()],Vr.prototype,"type",void 0),d([m({readOnly:!0})],Vr.prototype,"cache",null),d([m({readOnly:!0})],Vr.prototype,"extent",null),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Vr.prototype,"hasM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Vr.prototype,"hasZ",void 0),d([m({type:Ee,json:{write:!0},value:Ee.WGS84})],Vr.prototype,"spatialReference",void 0),d([Ge("spatialReference")],Vr.prototype,"readSpatialReference",null),Vr=d([N("esri.geometry.Geometry")],Vr);const vpe=Object.prototype.toString;function _pe(t){const e="__accessorMetadata__"in t?Ur(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return bpe.apply(this,i)}}function bpe(t,e,i,r){kw(t,e).cast=r}function wpe(t){return(e,i)=>{kw(e,t).cast=e[i]}}function Nt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&vpe.call(t[0])==="[object Function]"?_pe(t[0]):t.length===1&&typeof t[0]=="string"?wpe(t[0]):void 0}function k0(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new G("internal:mesh","Mesh geometries are not supported for this operation")}function Spe(t){t.forEach(k0)}const xpe=57.29577951308232,$pe=.017453292519943;function nj(t){return t*xpe}function aj(t){return t*$pe}function oj(t){return t/Vi.radius}function lj(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Vi.radius))}function EP(t){return t.wkid!=null||t.wkt!=null}const cL=[0,0];function BM(t,e,i,r,s){const n=t,a=s;if(a.spatialReference=i,"x"in n&&"x"in a)[a.x,a.y]=e(n.x,n.y,cL,r);else if("xmin"in n&&"xmin"in a)[a.xmin,a.ymin]=e(n.xmin,n.ymin,cL,r),[a.xmax,a.ymax]=e(n.xmax,n.ymax,cL,r);else if("paths"in n&&"paths"in a||"rings"in n&&"rings"in a){const o="paths"in n?n.paths:n.rings,u=[];let h;for(let p=0;p<o.length;p++){const y=o[p];h=[],u.push(h);for(let v=0;v<y.length;v++)h.push(e(y[v][0],y[v][1],[0,0],r)),y[v].length>2&&h[v].push(y[v][2]),y[v].length>3&&h[v].push(y[v][3])}"paths"in a?a.paths=u:a.rings=u}else if("points"in n&&"points"in a){const o=n.points,u=[];for(let h=0;h<o.length;h++)u[h]=e(o[h][0],o[h][1],[0,0],r),o[h].length>2&&u[h].push(o[h][2]),o[h].length>3&&u[h].push(o[h][3]);a.points=u}return s}function s$(t,e){const i=t&&(EP(t)?t:t.spatialReference),r=e&&(EP(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Ar(r,i)||Xo(r)&&Fd(i)||Xo(i)&&Fd(r))}function m3(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(EP(e)?e:e.spatialReference);return s$(i,r)?Ar(i,r)?J(t):Xo(r)?BM(t,Sg,Ee.WebMercator,!1,J(t)):Fd(r)?BM(t,y3,Ee.WGS84,!1,J(t)):null:null}function Sg(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=aj(e);return i[0]=aj(t)*Vi.radius,i[1]=Vi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function y3(t,e,i=[0,0],r=!1){if(t===Gb[0])i[0]=-180;else if(t===Gb[1])i[0]=180;else{const s=nj(t/Vi.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=nj(Math.PI/2-2*Math.atan(Math.exp(-e/Vi.radius))),i}function qf(t,e=!1,i=J(t)){return k0(t),k0(i),BM(t,Sg,Ee.WebMercator,e,i)}function If(t,e=!1,i=J(t)){return k0(t),k0(i),BM(t,y3,Ee.WGS84,e,i)}function rZ(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}function Mpe(t){return sZ(t,nZ)?.[0]??null}function Tpe(t){return sZ(t,nZ)?.[1]??null}function sZ({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Xo(i))return y3(t,e,r);if(Zd(i))return r[0]=t,r[1]=e,r}return null}const nZ=[0,0];var n$;const hL=[0,0];function uj(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ne=n$=class extends Vr{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ce.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],i=n[2],r=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Ee(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)le.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)le.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const o=Sg(n.longitude,n.latitude,hL);t=o[0],e=o[1]}}}else uj(i)?(s=i,i=null):uj(r)&&(s=r,r=null);const a={x:t,y:e};return a.x==null&&a.y!=null?le.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&le.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(a.spatialReference=s),i!=null&&(a.z=i),r!=null&&(a.m=r),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return Tpe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Sg(i,t,hL)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return Mpe(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Sg(t,e,hL)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new n$;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return n$.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:s,spatialReference:n}=this,{z:a,m:o}=t;let{x:u,y:h,spatialReference:p}=t;if(!n.equals(p))if(n.isWebMercator&&p.isWGS84)[u,h]=Sg(u,h),p=n;else{if(!n.isWGS84||!p.isWebMercator)return!1;[u,h]=y3(u,h),p=n}return e===u&&i===h&&r===a&&s===o&&n.wkid===p.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Fs(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let n;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s),this._set("x",e),this}distance(t){return rZ(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],Ne.prototype,"cache",null),d([m({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ne.prototype,"hasM",null),d([m({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ne.prototype,"hasZ",null),d([m({type:Number})],Ne.prototype,"latitude",null),d([m({type:Number})],Ne.prototype,"longitude",null),d([m({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Nt(t=>isNaN(t)?t:an(t))],Ne.prototype,"x",void 0),d([Le("x")],Ne.prototype,"writeX",null),d([Ge("x")],Ne.prototype,"readX",null),d([m({type:Number,json:{write:!0}})],Ne.prototype,"y",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ne.prototype,"z",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ne.prototype,"m",void 0),Ne=n$=d([N("esri.geometry.Point")],Ne),Ne.prototype.toJSON.isDefaultToJSON=!0;const dL=[0,0];function Nw(t,e){return e!=null&&Ks(t,e.x,e.y,e.z)}function DUe(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!R0(t,i))return!1;return!0}function Epe(t,e){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:a,zmax:o}=e;return t.hasZ&&e.hasZ?Ks(t,i,r,s)&&Ks(t,i,a,s)&&Ks(t,n,a,s)&&Ks(t,n,r,s)&&Ks(t,i,r,o)&&Ks(t,i,a,o)&&Ks(t,n,a,o)&&Ks(t,n,r,o):Ks(t,i,r)&&Ks(t,i,a)&&Ks(t,n,a)&&Ks(t,n,r)}function R0(t,e){return Ks(t,e[0],e[1])}function Cpe(t,e){return Ks(t,e[0],e[1],e[2])}function Ks(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function P4(t,e){return dL[1]=e.y,dL[0]=e.x,Ipe(t,dL)}function Ipe(t,e){return O4(t.rings,e)}function O4(t,e){if(!t||t.length<1)return!1;if(Lpe(t))return cj(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=cj(i,t[r],e);return i}function Lpe(t){return!Array.isArray(t[0][0])}function cj(t,e,i){const[r,s]=i;let n=t,a=0;for(let o=0,u=e.length;o<u;o++){a++,a===u&&(a=0);const[h,p]=e[o],[y,v]=e[a];(p<s&&v>=s||v<s&&p>=s)&&h+(s-p)/(v-p)*(y-h)<r&&(n=!n)}return n}function Ape(t,e){return Nw(t,e)}function Ppe(t,e){const i=t.hasZ&&e.hasZ;let r,s,n;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function Ope(t,e){const{points:i,hasZ:r}=e,s=r?Cpe:R0;for(const n of i)if(s(t,n))return!0;return!1}const um=[0,0],cm=[0,0],hm=[0,0],dm=[0,0],kpe=[um,cm,hm,dm],aZ=[[hm,um],[um,cm],[cm,dm],[dm,hm]];function Rpe(t,e){return Dpe(t,e.rings)}function Dpe(t,e){um[0]=t.xmin,um[1]=t.ymax,cm[0]=t.xmax,cm[1]=t.ymax,hm[0]=t.xmin,hm[1]=t.ymin,dm[0]=t.xmax,dm[1]=t.ymin;for(const i of kpe)if(O4(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(R0(t,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(R0(t,n)||oZ(r,n,aZ))return!0;r=n}}return!1}function Npe(t,e){um[0]=t.xmin,um[1]=t.ymax,cm[0]=t.xmax,cm[1]=t.ymax,hm[0]=t.xmin,hm[1]=t.ymin,dm[0]=t.xmax,dm[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(R0(t,s))return!0;for(let n=1;n<r.length;n++){const a=r[n];if(R0(t,a)||oZ(s,a,aZ))return!0;s=a}}return!1}const Hr=[0,0];function zpe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const n=i[s],a=i[s+1];for(let o=e+1;o<t.length;o++)for(let u=0;u<t[o].length-1;u++){const h=t[o][u],p=t[o][u+1];if(HM(n,a,h,p,Hr)&&!(Hr[0]===n[0]&&Hr[1]===n[1]||Hr[0]===h[0]&&Hr[1]===h[1]||Hr[0]===a[0]&&Hr[1]===a[1]||Hr[0]===p[0]&&Hr[1]===p[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const a=i[s],o=i[s+1];for(let u=s+2;u<n;u++){const h=i[u],p=i[u+1];if(HM(a,o,h,p,Hr)&&!(Hr[0]===a[0]&&Hr[1]===a[1]||Hr[0]===h[0]&&Hr[1]===h[1]||Hr[0]===o[0]&&Hr[1]===o[1]||Hr[0]===p[0]&&Hr[1]===p[1]))return!0}}}return!1}function oZ(t,e,i){for(let r=0;r<i.length;r++)if(HM(t,e,i[r][0],i[r][1]))return!0;return!1}function HM(t,e,i,r,s){const[n,a]=t,[o,u]=e,[h,p]=i,[y,v]=r,b=y-h,w=n-h,S=o-n,M=v-p,T=a-p,I=u-a,L=M*S-b*I;if(L===0)return!1;const O=(b*T-M*w)/L,R=(S*T-I*w)/L;return O>=0&&O<=1&&R>=0&&R<=1&&(s&&(s[0]=n+O*(o-n),s[1]=a+O*(u-a)),!0)}function Fpe(t){switch(t){case"esriGeometryEnvelope":case"extent":return Ppe;case"esriGeometryMultipoint":case"multipoint":return Ope;case"esriGeometryPoint":case"point":return Ape;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Rpe;case"esriGeometryPolyline":case"polyline":return Npe}}var Eo;function Vpe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Ah(t,e,i){return e==null?i:i==null?e:t(e,i)}let at=Eo=class extends Vr{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return Vpe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Ee.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??Ee.WGS84}}static fromPoint(t){return new Eo({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ne({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Eo;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&s$(e,i)&&(t=e.isWebMercator?qf(t):If(t,!0)),t.type==="point"?Nw(this,t):t.type==="extent"&&Epe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&s$(e,i)&&(t=e.isWebMercator?qf(t):If(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ar(e,i)&&s$(e,i)&&(t=e.isWebMercator?qf(t):If(t,!0)),Fpe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Ah(Math.min,this.zmin,t.zmin),this.zmax=Ah(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Ah(Math.min,this.mmin,t.mmin),this.mmax=Ah(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Ah(Math.max,this.zmin,t.zmin),this.zmax=Ah(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Ah(Math.max,this.mmin,t.mmin),this.mmax=Ah(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Fs(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?If(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=pL(r.x,t).x),this.spatialReference=new Ee(Hd((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??Fs(r);if(s==null)return this;const n=this._getParts(s).map(u=>u.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let a=!0,o=!0;return n.forEach(u=>{u.hasZ||(a=!1),u.hasM||(o=!1)}),{rings:n.map(u=>{const h=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(a){const p=(u.zmax-u.zmin)/2;for(let y=0;y<h.length;y++)h[y].push(p)}if(o){const p=(u.mmax-u.mmin)/2;for(let y=0;y<h.length;y++)h[y].push(p)}return h}),hasZ:a,hasM:o,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:a}=this,o=this.width,u=this.xmin,h=this.xmax;let p;t=t||Fs(a);const[y,v]=t.valid;p=pL(this.xmin,t);const b=p.x,w=p.frameId;p=pL(this.xmax,t);const S=p.x,M=p.frameId,T=b===S&&o>0;if(o>2*v){const I=new Eo(u<h?b:S,s,v,n,a),L=new Eo(y,s,u<h?S:b,n,a),O=new Eo(0,s,v,n,a),R=new Eo(y,s,0,n,a),z=[],j=[];I.contains(O)&&z.push(w),I.contains(R)&&j.push(w),L.contains(O)&&z.push(M),L.contains(R)&&j.push(M);for(let U=w+1;U<M;U++)z.push(U),j.push(U);e.push({extent:I,frameIds:[w]},{extent:L,frameIds:[M]},{extent:O,frameIds:z},{extent:R,frameIds:j})}else b>S||T?e.push({extent:new Eo(b,s,v,n,a),frameIds:[w]},{extent:new Eo(y,s,S,n,a),frameIds:[M]}):e.push({extent:new Eo(b,s,S,n,a),frameIds:[w]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function pL(t,e){const[i,r]=e.valid,s=2*r;let n,a=0;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s,a=n):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s,a=-n),{x:t,frameId:a}}d([m({readOnly:!0})],at.prototype,"cache",null),d([m({readOnly:!0})],at.prototype,"center",null),d([m({readOnly:!0})],at.prototype,"extent",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],at.prototype,"hasM",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],at.prototype,"hasZ",null),d([m({readOnly:!0})],at.prototype,"height",null),d([m({readOnly:!0})],at.prototype,"width",null),d([m({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],at.prototype,"xmin",void 0),d([m({type:Number,json:{write:!0}})],at.prototype,"ymin",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],at.prototype,"mmin",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],at.prototype,"zmin",void 0),d([m({type:Number,json:{write:!0}})],at.prototype,"xmax",void 0),d([m({type:Number,json:{write:!0}})],at.prototype,"ymax",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],at.prototype,"mmax",void 0),d([m({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],at.prototype,"zmax",void 0),at=Eo=d([N("esri.geometry.Extent")],at),at.prototype.toJSON.isDefaultToJSON=!0;let ab;const jpe=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,CP=globalThis.document?.documentElement;function lZ(){const t=CP?.getAttribute("lang"),e=globalThis.navigator?.language;return jpe??t??e??"en"}function Un(){return ab===void 0&&(ab=lZ()),ab}const Upe=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function k4(t=Un()){return cZ(t)?.language}function uZ(t=Un()){const e=cZ(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function cZ(t=Un()){return Upe.exec(t)?.groups}const a$=[];function R4(t){return a$.push(t),vt(()=>{a$.splice(a$.indexOf(t),1)})}const o$=[];function D4(t){return o$.push(t),vt(()=>o$.splice(o$.indexOf(t),1))}function hj(){const t=lZ();ab!==t&&([...o$].forEach(e=>e(t)),ab=t,[...a$].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",hj),CP&&new MutationObserver(()=>{hj()}).observe(CP,{attributeFilter:["lang"]});let OS;function Gpe(t){return OS&&!OS.destroyed||(OS=t()),OS}var IP;const qpe=new wt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let er=IP=class extends Ce{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new IP({categories:this.categories?J(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(a=>Array.isArray(a)?JSON.stringify(a):a));let r="";if(this.extent){const a=m3(this.extent,Ee.WGS84);a!=null&&(r=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(a=>qpe.toJSON(a.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};d([m()],er.prototype,"categories",void 0),d([m()],er.prototype,"disableExtraQuery",void 0),d([m({type:at})],er.prototype,"extent",void 0),d([m()],er.prototype,"filter",void 0),d([m()],er.prototype,"num",void 0),d([m()],er.prototype,"query",void 0),d([m()],er.prototype,"sortField",void 0),d([m()],er.prototype,"sortOrder",null),d([m()],er.prototype,"start",void 0),er=IP=d([N("esri.portal.PortalQueryParams")],er);var LP;let Xi=LP=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new G("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new LP({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Ur(er,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new er,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new er,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new er({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,e)}throw new G("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new er({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new G("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};d([m()],Xi.prototype,"access",void 0),d([m({type:Date})],Xi.prototype,"created",void 0),d([m()],Xi.prototype,"description",void 0),d([m()],Xi.prototype,"id",void 0),d([m()],Xi.prototype,"isInvitationOnly",void 0),d([m({type:Date})],Xi.prototype,"modified",void 0),d([m()],Xi.prototype,"owner",void 0),d([m()],Xi.prototype,"portal",void 0),d([m()],Xi.prototype,"snippet",void 0),d([m()],Xi.prototype,"sortField",void 0),d([m()],Xi.prototype,"sortOrder",void 0),d([m()],Xi.prototype,"sourceJSON",void 0),d([m()],Xi.prototype,"tags",void 0),d([m()],Xi.prototype,"thumbnail",void 0),d([m({readOnly:!0})],Xi.prototype,"thumbnailUrl",null),d([m()],Xi.prototype,"title",void 0),d([m({readOnly:!0})],Xi.prototype,"url",null),Xi=LP=d([N("esri.portal.PortalGroup")],Xi);let zp=class extends Ce{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};d([m()],zp.prototype,"nextQueryParams",void 0),d([m()],zp.prototype,"queryParams",void 0),d([m()],zp.prototype,"results",void 0),d([m()],zp.prototype,"total",void 0),zp=d([N("esri.portal.PortalQueryResult")],zp);let Ju=class extends ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new G("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};d([m({type:Date})],Ju.prototype,"created",void 0),d([m()],Ju.prototype,"id",void 0),d([m()],Ju.prototype,"portal",void 0),d([m()],Ju.prototype,"title",void 0),d([m({readOnly:!0})],Ju.prototype,"url",null),d([m()],Ju.prototype,"username",void 0),Ju=d([N("esri.portal.PortalFolder")],Ju);var AP;let Jt=AP=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,r=t?.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(a=>(e.id=a.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=t.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},a=await this.portal.request(i,n);for(const o of a.results){const u=t.find(y=>o.itemId===y.id),h=o.success;let p=null;h?(u.id=null,u.portal=null):o.error&&(p=new G("portal:delete-item-failed",o.error.message,o.error)),r.push({item:u,success:h,error:p})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const s=Ju.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Xi.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await K(()=>Promise.resolve().then(()=>hZ),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:r});let n;return s?.items?(n=s.items.map(a=>{const o=i.fromJSON(a);return o.portal=this.portal,o}),await Promise.all(n.map(a=>a.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Xi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new G("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new G("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new AP({sourceJSON:t});return e.read(t),e}};d([m()],Jt.prototype,"access",void 0),d([m({type:Date})],Jt.prototype,"created",void 0),d([m()],Jt.prototype,"culture",void 0),d([m()],Jt.prototype,"description",void 0),d([m()],Jt.prototype,"email",void 0),d([m()],Jt.prototype,"favGroupId",void 0),d([m()],Jt.prototype,"fullName",void 0),d([m()],Jt.prototype,"id",void 0),d([m({type:Date})],Jt.prototype,"modified",void 0),d([m()],Jt.prototype,"orgId",void 0),d([m()],Jt.prototype,"portal",void 0),d([m()],Jt.prototype,"preferredView",void 0),d([m()],Jt.prototype,"privileges",void 0),d([m()],Jt.prototype,"region",void 0),d([m()],Jt.prototype,"role",void 0),d([m()],Jt.prototype,"roleId",void 0),d([m()],Jt.prototype,"sourceJSON",void 0),d([m()],Jt.prototype,"thumbnail",void 0),d([m({readOnly:!0})],Jt.prototype,"thumbnailUrl",null),d([m()],Jt.prototype,"units",void 0),d([m({readOnly:!0})],Jt.prototype,"userContentUrl",null),d([m({readOnly:!0})],Jt.prototype,"url",null),d([m()],Jt.prototype,"username",void 0),d([m()],Jt.prototype,"userLicenseTypeId",void 0),d([m()],Jt.prototype,"userType",void 0),Jt=AP=d([N("esri.portal.PortalUser")],Jt);var ra;let T_;const dj={PortalGroup:()=>Promise.resolve({default:Xi}),PortalItem:()=>K(()=>Promise.resolve().then(()=>hZ),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:Jt})};var kl;let ge=(kl=class extends Wd(bm){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Tt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){pj.unregister(this),this.defaultBasemap=xi(this.defaultBasemap),this.defaultDevBasemap=xi(this.defaultDevBasemap),this.defaultVectorBasemap=xi(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=fi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)Tt.request.trustedServers.includes(i)||Tt.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return Kue(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Jt.fromJSON(e),i.portal=this),i}load(e){const i=K(async()=>{const{default:r}=await Promise.resolve().then(()=>Kye);return{default:r}},void 0,import.meta.url).then(({default:r})=>{Wt(e),T_=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&pt){const s=pt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==ra.AUTH_MODE_AUTO&&this.authMode!==ra.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Bpe(new WeakRef(this))),pj.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await K(async()=>{const{default:r}=await import("./ElevationLayer-B52fTs3M.js");return{default:r}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,i);r.unshift(...s)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new er;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(s=>s.type==="Web Scene");return r?new T_({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):Ns(e)?Promise.reject(Ht()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new er({num:100,sortField:"title"});if(i?.length){const s=[];for(const n of i)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Ns(e)?Promise.reject(Ht()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||Un();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||Un();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return Gpe(()=>new ra)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Un().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),i&&(n.query.default=!0),this.request(s,n)}queryPortal(e,i,r,s){const n=Ur(er,i),a=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(u=>{const h=n.clone();return h.start=u.nextStart,new zp({nextQueryParams:h,queryParams:n,total:u.total,results:ra._resultsToTypedArray(o,{portal:this},u,s)})}).then(u=>Promise.all(u.results.map(h=>typeof h.when=="function"?h.when():u)).then(()=>u,h=>(zn(h),u)));return r&&dj[r]?dj[r]().then(({default:o})=>(Wt(s),a(o))):a()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new G("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ra.AUTH_MODE_ANONYMOUS||this.authMode===ra.AUTH_MODE_NO_PROMPT&&!pt)return Promise.reject(new G("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return pt?pt.getCredential(this.restUrl,{prompt:this.authMode!==ra.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(s=>{const n=ra._resultsToTypedArray(r,{portal:this},s);return Promise.all(n.map(a=>typeof a.when=="function"?a.when():s)).then(()=>n,()=>n)})}request(e,i={}){const r={f:"json",...i.query},{authMode:s=this.authMode===ra.AUTH_MODE_ANONYMOUS||this.authMode===ra.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:a=!1,method:o="auto",responseType:u="json",signal:h}=i,p={authMode:s,body:n,cacheBust:a,method:o,query:r,responseType:u,timeout:0,signal:h};return i.withCredentials&&(p.withCredentials=!0),Ot(this._normalizeSSL(e),p).then(y=>y.data)}toJSON(){throw new G("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ra({sourceJSON:e})}_getHelperService(e){const i=this.helperServices?.[e];if(!i)throw new G("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new er;r.query=e||(lP()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const s=await this.queryGroups(r,i);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const a=await n.queryItems(r,i);return a.total?a.results.filter(o=>o.type==="Web Map").map(o=>new T_({portalItem:o})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(lP())return[];const s=new er({query:r,disableExtraQuery:!0}),n=await this.queryGroups(s,i);if(!n.total)return[];const a=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=a.sortField||"name",s.sortOrder=a.sortOrder||"desc";const o=await a.queryItems(s,i);return o.total?o.results.filter(u=>u.type==="Web Scene").map(u=>new T_({portalItem:u})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=T_.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,s){let n;if(r){const a=s!=null?s.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(n=n.map(o=>{const u=Object.assign(e?e.fromJSON(o):o,i);return typeof u.load=="function"&&u.load(a),u}))}else n=[];return n}},ra=kl,kl.AUTH_MODE_ANONYMOUS="anonymous",kl.AUTH_MODE_AUTO="auto",kl.AUTH_MODE_IMMEDIATE="immediate",kl.AUTH_MODE_NO_PROMPT="no-prompt",kl);d([m()],ge.prototype,"access",void 0),d([m()],ge.prototype,"allSSL",void 0),d([m()],ge.prototype,"authMode",void 0),d([m()],ge.prototype,"authorizedCrossOriginDomains",void 0),d([Ge("authorizedCrossOriginDomains")],ge.prototype,"readAuthorizedCrossOriginDomains",null),d([m()],ge.prototype,"basemapGalleryGroupQuery",void 0),d([m({json:{name:"3DBasemapGalleryGroupQuery"}})],ge.prototype,"basemapGalleryGroupQuery3D",void 0),d([m({json:{name:"g3DTilesGalleryGroupQuery"}})],ge.prototype,"g3DTilesGalleryGroupQuery",void 0),d([m({json:{name:"g3dTilesEnabled"}})],ge.prototype,"g3dTilesEnabled",void 0),d([m()],ge.prototype,"bingKey",void 0),d([m()],ge.prototype,"canListApps",void 0),d([m()],ge.prototype,"canListData",void 0),d([m()],ge.prototype,"canListPreProvisionedItems",void 0),d([m()],ge.prototype,"canProvisionDirectPurchase",void 0),d([m()],ge.prototype,"canSearchPublic",void 0),d([m()],ge.prototype,"canShareBingPublic",void 0),d([m()],ge.prototype,"canSharePublic",void 0),d([m()],ge.prototype,"canSignInArcGIS",void 0),d([m()],ge.prototype,"canSignInIDP",void 0),d([m()],ge.prototype,"colorSetsGroupQuery",void 0),d([m()],ge.prototype,"commentsEnabled",void 0),d([m({type:Date})],ge.prototype,"created",void 0),d([m()],ge.prototype,"credential",void 0),d([m()],ge.prototype,"culture",void 0),d([m()],ge.prototype,"currentVersion",void 0),d([m()],ge.prototype,"customBaseUrl",void 0),d([m()],ge.prototype,"default3DBasemapQuery",void 0),d([m()],ge.prototype,"defaultBasemap",void 0),d([Ge("defaultBasemap")],ge.prototype,"readDefaultBasemap",null),d([m()],ge.prototype,"defaultDevBasemap",void 0),d([Ge("defaultDevBasemap")],ge.prototype,"readDefaultDevBasemap",null),d([m({type:at})],ge.prototype,"defaultExtent",void 0),d([m()],ge.prototype,"defaultVectorBasemap",void 0),d([Ge("defaultVectorBasemap")],ge.prototype,"readDefaultVectorBasemap",null),d([m()],ge.prototype,"description",void 0),d([m()],ge.prototype,"devBasemapGalleryGroupQuery",void 0),d([m()],ge.prototype,"eueiEnabled",void 0),d([m({readOnly:!0})],ge.prototype,"extraQuery",null),d([m()],ge.prototype,"featuredGroups",void 0),d([m()],ge.prototype,"featuredItemsGroupQuery",void 0),d([m()],ge.prototype,"galleryTemplatesGroupQuery",void 0),d([m()],ge.prototype,"layoutGroupQuery",void 0),d([m()],ge.prototype,"livingAtlasGroupQuery",void 0),d([m({readOnly:!0})],ge.prototype,"hasAPIKey",null),d([m()],ge.prototype,"hasCategorySchema",void 0),d([m()],ge.prototype,"hasClassificationSchema",void 0),d([m()],ge.prototype,"helpBase",void 0),d([m()],ge.prototype,"helperServices",void 0),d([m()],ge.prototype,"helpMap",void 0),d([m()],ge.prototype,"homePageFeaturedContent",void 0),d([m()],ge.prototype,"homePageFeaturedContentCount",void 0),d([m()],ge.prototype,"httpPort",void 0),d([m()],ge.prototype,"httpsPort",void 0),d([m()],ge.prototype,"id",void 0),d([m()],ge.prototype,"ipCntryCode",void 0),d([m({readOnly:!0})],ge.prototype,"isOrganization",null),d([m()],ge.prototype,"isPortal",void 0),d([m()],ge.prototype,"isReadOnly",void 0),d([m({readOnly:!0})],ge.prototype,"itemPageUrl",null),d([m()],ge.prototype,"layerTemplatesGroupQuery",void 0),d([m()],ge.prototype,"maxTokenExpirationMinutes",void 0),d([m({type:Date})],ge.prototype,"modified",void 0),d([m()],ge.prototype,"name",void 0),d([m()],ge.prototype,"portalHostname",void 0),d([m()],ge.prototype,"portalMode",void 0),d([m()],ge.prototype,"portalProperties",void 0),d([m()],ge.prototype,"region",void 0),d([m()],ge.prototype,"recycleBinEnabled",void 0),d([m({readOnly:!0})],ge.prototype,"restUrl",null),d([m()],ge.prototype,"rotatorPanels",void 0),d([m()],ge.prototype,"showHomePageDescription",void 0),d([m()],ge.prototype,"sourceJSON",void 0),d([m()],ge.prototype,"staticImagesUrl",void 0),d([m({json:{name:"2DStylesGroupQuery"}})],ge.prototype,"stylesGroupQuery2d",void 0),d([m({json:{name:"stylesGroupQuery"}})],ge.prototype,"stylesGroupQuery3d",void 0),d([m()],ge.prototype,"supportsHostedServices",void 0),d([m()],ge.prototype,"symbolSetsGroupQuery",void 0),d([m()],ge.prototype,"templatesGroupQuery",void 0),d([m()],ge.prototype,"thumbnail",void 0),d([m({readOnly:!0})],ge.prototype,"thumbnailUrl",null),d([m()],ge.prototype,"units",void 0),d([m()],ge.prototype,"url",void 0),d([m()],ge.prototype,"urlKey",void 0),d([Ge("urlKey")],ge.prototype,"readUrlKey",null),d([m()],ge.prototype,"user",void 0),d([Ge("user")],ge.prototype,"readUser",null),d([m()],ge.prototype,"use3dBasemaps",void 0),d([m()],ge.prototype,"useDefault3dBasemap",void 0),d([m()],ge.prototype,"useStandardizedQuery",void 0),d([m()],ge.prototype,"useVectorBasemaps",void 0),d([m()],ge.prototype,"vectorBasemapGalleryGroupQuery",void 0),ge=ra=d([N("esri.portal.Portal")],ge);const pj=new FinalizationRegistry(t=>{t.remove()});function Bpe(t){const e=pt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Xu=class extends Ce{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:fj(e.path,e.portalItem)}:e}set path(e){e!=null&&jn(e)?le.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return fj(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new G("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:r}=await K(()=>import("./resourceUtils-lm35tY7b.js"),[],import.meta.url);return await r(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function fj(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&jn(t)&&(t=e4(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}d([m()],Xu.prototype,"portalItem",void 0),d([m({type:String,value:null})],Xu.prototype,"path",null),d([Nt("path")],Xu.prototype,"_castPath",null),d([m({type:String,readOnly:!0})],Xu.prototype,"url",null),d([m({type:String,readOnly:!0})],Xu.prototype,"cdnUrl",null),d([m({type:String,readOnly:!0})],Xu.prototype,"itemRelativeUrl",null),Xu=d([N("esri.portal.PortalItemResource")],Xu);let Lf=class extends Ce{constructor(e){super(e),this.created=null,this.rating=null}};d([m({type:Date})],Lf.prototype,"created",void 0),d([m()],Lf.prototype,"rating",void 0),Lf=d([N("esri.portal.PortalRating")],Lf);var Fp;const Hpe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),Wpe=new Set(["KML","GeoJson","CSV"]);let He=Fp=class extends Wd(bm){static from(t){return dv(Fp,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new at(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,a=!1,o=!1,u=!1,h=!1,p=!1,y=!1,v=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(a=e.includes("Table"),o=e.includes("Route Layer"),u=e.includes("Markup"),h=e.includes("Spatiotemporal"),p=e.includes("UtilityNetwork"),s=h&&a?"spatiotemporaltable":a?"table":o?"routelayer":u?"markup":h?"spatiotemporal":p?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(h=e.includes("Spatiotemporal"),y=e.includes("Relational"),s=h||y?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(v=e.includes("Map"),s=v?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",s?Si(i+s+r+".png"):null}get isLayer(){return this.type!=null&&Hpe.has(this.type)}get itemCdnUrl(){return o4(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ge.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof Lf?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Lf({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:J(this.applicationProxies),avgRating:this.avgRating,categories:J(this.categories),classification:J(this.classification),created:J(this.created),culture:this.culture,description:this.description,extent:J(this.extent),groupCategories:J(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:J(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:J(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:J(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:J(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Fp({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Lf(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Fp)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new G("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new G("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:s,tags:n,title:a}=t||{},o={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!r,tags:n?.join(","),title:a}},{itemId:u}=await e.request(`${i}/copy`,o);return new Fp({id:u,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")ym(e)?r.query={data:e}:r.query={url:Xa(e)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new G("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await K(()=>import("./resourceUtils-lm35tY7b.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await K(()=>import("./resourceUtils-lm35tY7b.js"),[],import.meta.url);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await K(()=>import("./resourceUtils-lm35tY7b.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new G("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await K(()=>import("./resourceUtils-lm35tY7b.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new Xu({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:J(this.categories),classification:J(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:J(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:J(this.typeKeywords),url:this.url};return Yle(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Fp({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};d([m({type:["private","shared","org","public"]})],He.prototype,"access",void 0),d([m()],He.prototype,"accessInformation",void 0),d([m({type:String})],He.prototype,"apiKey",void 0),d([m({json:{read:{source:"appProxies"}}})],He.prototype,"applicationProxies",void 0),d([m()],He.prototype,"avgRating",void 0),d([m()],He.prototype,"categories",void 0),d([m()],He.prototype,"classification",void 0),d([m({type:Date})],He.prototype,"created",void 0),d([m()],He.prototype,"culture",void 0),d([m()],He.prototype,"description",void 0),d([m({readOnly:!0})],He.prototype,"displayName",null),d([m({type:at})],He.prototype,"extent",void 0),d([Ge("extent")],He.prototype,"readExtent",null),d([m()],He.prototype,"groupCategories",void 0),d([m({readOnly:!0})],He.prototype,"iconUrl",null),d([m()],He.prototype,"id",void 0),d([m({readOnly:!0})],He.prototype,"isLayer",null),d([m({type:Boolean,readOnly:!0})],He.prototype,"isOrgItem",void 0),d([m()],He.prototype,"itemControl",void 0),d([m({readOnly:!0})],He.prototype,"itemPageUrl",null),d([m({readOnly:!0})],He.prototype,"itemUrl",null),d([m()],He.prototype,"licenseInfo",void 0),d([m({type:Date})],He.prototype,"modified",void 0),d([m()],He.prototype,"name",void 0),d([m()],He.prototype,"numComments",void 0),d([m()],He.prototype,"numRatings",void 0),d([m()],He.prototype,"numViews",void 0),d([m()],He.prototype,"owner",void 0),d([m()],He.prototype,"ownerFolder",void 0),d([m({type:ge})],He.prototype,"portal",void 0),d([m()],He.prototype,"screenshots",void 0),d([m()],He.prototype,"size",void 0),d([m()],He.prototype,"snippet",void 0),d([m()],He.prototype,"sourceJSON",void 0),d([m({type:String})],He.prototype,"sourceUrl",void 0),d([m({type:String})],He.prototype,"spatialReference",void 0),d([m()],He.prototype,"tags",void 0),d([m()],He.prototype,"thumbnail",void 0),d([m({readOnly:!0})],He.prototype,"thumbnailUrl",null),d([m()],He.prototype,"title",void 0),d([m()],He.prototype,"type",void 0),d([m()],He.prototype,"typeKeywords",void 0),d([m({type:String,json:{read(t,e){if(Wpe.has(e.type)){const i=this.portal?.restUrl;t||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return t}}})],He.prototype,"url",void 0),d([m({readOnly:!0})],He.prototype,"userItemUrl",null),He=Fp=d([N("esri.portal.PortalItem")],He);const hZ=Object.freeze(Object.defineProperty({__proto__:null,get default(){return He}},Symbol.toStringTag,{value:"Module"})),dZ={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Zpe(t){return t in dZ}function mj(t){if(Zpe(t)){const e=dZ[t];return e===!0?t:e}return null}const o1=[],zg=new Map;function yj(t){for(const e of zg.keys())mZ(t.pattern,e)&&zg.delete(e)}function Ype(t){return o1.includes(t)||(yj(t),o1.unshift(t)),vt(()=>{const e=o1.indexOf(t);e>-1&&(o1.splice(e,1),yj(t))})}async function pZ(t){const e=Un();zg.has(t)||zg.set(t,Jpe(t,e));const i=zg.get(t);return i&&await Xpe.add(i),i}function fZ(t){const e=k4(t);return e?mj(t)??mj(e):null}async function Jpe(t,e){const i=[];for(const r of o1)if(mZ(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new G("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new G("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function mZ(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}D4(()=>{zg.clear()});const Xpe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=va())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Qpe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await pZ("esri/t9n/basemaps");return i[t]||i[e]}const D0={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Si("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Si("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Si("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Si("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Si("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Si("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Qo="system",jd="unknown",mu="UTC",Kpe=Intl.DateTimeFormat().resolvedOptions().timeZone,gj=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Sm extends Error{}class efe extends Sm{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class tfe extends Sm{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class ife extends Sm{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class xg extends Sm{}class yZ extends Sm{constructor(e){super(`Invalid unit ${e}`)}}class Es extends Sm{}class Ph extends Sm{constructor(){super("Zone is an abstract class")}}const Ie="numeric",Ko="short",ga="long",WM={year:Ie,month:Ie,day:Ie},gZ={year:Ie,month:Ko,day:Ie},rfe={year:Ie,month:Ko,day:Ie,weekday:Ko},vZ={year:Ie,month:ga,day:Ie},_Z={year:Ie,month:ga,day:Ie,weekday:ga},bZ={hour:Ie,minute:Ie},wZ={hour:Ie,minute:Ie,second:Ie},SZ={hour:Ie,minute:Ie,second:Ie,timeZoneName:Ko},xZ={hour:Ie,minute:Ie,second:Ie,timeZoneName:ga},$Z={hour:Ie,minute:Ie,hourCycle:"h23"},MZ={hour:Ie,minute:Ie,second:Ie,hourCycle:"h23"},TZ={hour:Ie,minute:Ie,second:Ie,hourCycle:"h23",timeZoneName:Ko},EZ={hour:Ie,minute:Ie,second:Ie,hourCycle:"h23",timeZoneName:ga},CZ={year:Ie,month:Ie,day:Ie,hour:Ie,minute:Ie},IZ={year:Ie,month:Ie,day:Ie,hour:Ie,minute:Ie,second:Ie},LZ={year:Ie,month:Ko,day:Ie,hour:Ie,minute:Ie},AZ={year:Ie,month:Ko,day:Ie,hour:Ie,minute:Ie,second:Ie},sfe={year:Ie,month:Ko,day:Ie,weekday:Ko,hour:Ie,minute:Ie},PZ={year:Ie,month:ga,day:Ie,hour:Ie,minute:Ie,timeZoneName:Ko},OZ={year:Ie,month:ga,day:Ie,hour:Ie,minute:Ie,second:Ie,timeZoneName:Ko},kZ={year:Ie,month:ga,day:Ie,weekday:ga,hour:Ie,minute:Ie,timeZoneName:ga},RZ={year:Ie,month:ga,day:Ie,weekday:ga,hour:Ie,minute:Ie,second:Ie,timeZoneName:ga};class xm{get type(){throw new Ph}get name(){throw new Ph}get ianaName(){return this.name}get isUniversal(){throw new Ph}offsetName(e,i){throw new Ph}formatOffset(e,i){throw new Ph}offset(e){throw new Ph}equals(e){throw new Ph}get isValid(){throw new Ph}}let fL=null;class g3 extends xm{static get instance(){return fL===null&&(fL=new g3),fL}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return HZ(e,i,r)}formatOffset(e,i){return ob(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const PP=new Map;function nfe(t){let e=PP.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),PP.set(t,e)),e}const afe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ofe(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,a,o,u,h,p]=r;return[a,s,n,o,u,h,p]}function lfe(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:n,value:a}=i[s],o=afe[n];n==="era"?r[o]=a:nt(o)||(r[o]=parseInt(a,10))}return r}const mL=new Map;class Bn extends xm{static create(e){let i=mL.get(e);return i===void 0&&mL.set(e,i=new Bn(e)),i}static resetCache(){mL.clear(),PP.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Bn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return HZ(e,i,r,this.name)}formatOffset(e,i){return ob(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=nfe(this.name);let[s,n,a,o,u,h,p]=r.formatToParts?lfe(r,i):ofe(r,i);o==="BC"&&(s=-Math.abs(s)+1);const v=_3({year:s,month:n,day:a,hour:u===24?0:u,minute:h,second:p,millisecond:0});let b=+i;const w=b%1e3;return b-=w>=0?w:1e3+w,(v-b)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let vj={};function ufe(t,e={}){const i=JSON.stringify([t,e]);let r=vj[i];return r||(r=new Intl.ListFormat(t,e),vj[i]=r),r}const OP=new Map;function kP(t,e={}){const i=JSON.stringify([t,e]);let r=OP.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),OP.set(i,r)),r}const RP=new Map;function cfe(t,e={}){const i=JSON.stringify([t,e]);let r=RP.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),RP.set(i,r)),r}const DP=new Map;function hfe(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let n=DP.get(s);return n===void 0&&(n=new Intl.RelativeTimeFormat(t,e),DP.set(s,n)),n}let l1=null;function dfe(){return l1||(l1=new Intl.DateTimeFormat().resolvedOptions().locale,l1)}const NP=new Map;function DZ(t){let e=NP.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),NP.set(t,e)),e}const zP=new Map;function pfe(t){let e=zP.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...NZ,...e}),zP.set(t,e)}return e}function ffe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=kP(t).resolvedOptions(),s=t}catch{const u=t.substring(0,i);r=kP(u).resolvedOptions(),s=u}const{numberingSystem:n,calendar:a}=r;return[s,n,a]}}function mfe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function yfe(t){const e=[];for(let i=1;i<=12;i++){const r=Ae.utc(2009,i,1);e.push(t(r))}return e}function gfe(t){const e=[];for(let i=1;i<=7;i++){const r=Ae.utc(2016,11,13+i);e.push(t(r))}return e}function kS(t,e,i,r){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):r(e)}function vfe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||DZ(t.locale).numberingSystem==="latn"}class _fe{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...a}=r;if(!i||Object.keys(a).length>0){const o={useGrouping:!1,...r};r.padTo>0&&(o.minimumIntegerDigits=r.padTo),this.inf=cfe(e,o)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):j4(e,3);return Cr(i,this.padTo)}}}class bfe{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&Bn.create(o).valid?(s=o,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=kP(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class wfe{constructor(e,i,r){this.opts={style:"long",...r},!i&&qZ()&&(this.rtf=hfe(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):Gfe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const NZ={firstDay:1,minimalDays:4,weekend:[6,7]};class Kt{static fromOpts(e){return Kt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,s,n=!1){const a=e||tr.defaultLocale,o=a||(n?"en-US":dfe()),u=i||tr.defaultNumberingSystem,h=r||tr.defaultOutputCalendar,p=VP(s)||tr.defaultWeekSettings;return new Kt(o,u,h,p,a)}static resetCache(){l1=null,OP.clear(),RP.clear(),DP.clear(),NP.clear(),zP.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return Kt.create(e,i,r,s)}constructor(e,i,r,s,n){const[a,o,u]=ffe(e);this.locale=a,this.numberingSystem=i||o||null,this.outputCalendar=r||u||null,this.weekSettings=s,this.intl=mfe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=vfe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Kt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,VP(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return kS(this,e,YZ,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const s=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";if(!this.monthsCache[n][e]){const a=r?o=>this.dtFormatter(o,s).format():o=>this.extract(o,s,"month");this.monthsCache[n][e]=yfe(a)}return this.monthsCache[n][e]})}weekdays(e,i=!1){return kS(this,e,QZ,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=gfe(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return kS(this,void 0,()=>KZ,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ae.utc(2016,11,13,9),Ae.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return kS(this,e,eY,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ae.utc(-40,1,1),Ae.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),n=s.formatToParts(),a=n.find(o=>o.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new _fe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new bfe(e,this.intl,i)}relFormatter(e={}){return new wfe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return ufe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||DZ(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:BZ()?pfe(this.locale):NZ}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let yL=null;class Ir extends xm{static get utcInstance(){return yL===null&&(yL=new Ir(0)),yL}static instance(e){return e===0?Ir.utcInstance:new Ir(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Ir(b3(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ob(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ob(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return ob(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Sfe extends xm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function hd(t,e){if(nt(t)||t===null)return e;if(t instanceof xm)return t;if(Cfe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?g3.instance:i==="utc"||i==="gmt"?Ir.utcInstance:Ir.parseSpecifier(i)||Bn.create(t)}else return $d(t)?Ir.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Sfe(t)}const N4={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},_j={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},xfe=N4.hanidec.replace(/[\[|\]]/g,"").split("");function $fe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(N4.hanidec)!==-1)e+=xfe.indexOf(t[i]);else for(const s in _j){const[n,a]=_j[s];r>=n&&r<=a&&(e+=r-n)}}return parseInt(e,10)}else return e}const FP=new Map;function Mfe(){FP.clear()}function vo({numberingSystem:t},e=""){const i=t||"latn";let r=FP.get(i);r===void 0&&(r=new Map,FP.set(i,r));let s=r.get(e);return s===void 0&&(s=new RegExp(`${N4[i]}${e}`),r.set(e,s)),s}let bj=()=>Date.now(),wj="system",Sj=null,xj=null,$j=null,Mj=60,Tj,Ej=null;class tr{static get now(){return bj}static set now(e){bj=e}static set defaultZone(e){wj=e}static get defaultZone(){return hd(wj,g3.instance)}static get defaultLocale(){return Sj}static set defaultLocale(e){Sj=e}static get defaultNumberingSystem(){return xj}static set defaultNumberingSystem(e){xj=e}static get defaultOutputCalendar(){return $j}static set defaultOutputCalendar(e){$j=e}static get defaultWeekSettings(){return Ej}static set defaultWeekSettings(e){Ej=VP(e)}static get twoDigitCutoffYear(){return Mj}static set twoDigitCutoffYear(e){Mj=e%100}static get throwOnInvalid(){return Tj}static set throwOnInvalid(e){Tj=e}static resetCaches(){Kt.resetCache(),Bn.resetCache(),Ae.resetCache(),Mfe()}}class Ho{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const zZ=[0,31,59,90,120,151,181,212,243,273,304,334],FZ=[0,31,60,91,121,152,182,213,244,274,305,335];function Ka(t,e){return new Ho("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function z4(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function VZ(t,e,i){return i+(zw(t)?FZ:zZ)[e-1]}function jZ(t,e){const i=zw(t)?FZ:zZ,r=i.findIndex(n=>n<e),s=e-i[r];return{month:r+1,day:s}}function F4(t,e){return(t-e+7)%7+1}function ZM(t,e=4,i=1){const{year:r,month:s,day:n}=t,a=VZ(r,s,n),o=F4(z4(r,s,n),i);let u=Math.floor((a-o+14-e)/7),h;return u<1?(h=r-1,u=Bb(h,e,i)):u>Bb(r,e,i)?(h=r+1,u=1):h=r,{weekYear:h,weekNumber:u,weekday:o,...w3(t)}}function Cj(t,e=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=t,a=F4(z4(r,1,e),i),o=Fg(r);let u=s*7+n-a-7+e,h;u<1?(h=r-1,u+=Fg(h)):u>o?(h=r+1,u-=Fg(r)):h=r;const{month:p,day:y}=jZ(h,u);return{year:h,month:p,day:y,...w3(t)}}function gL(t){const{year:e,month:i,day:r}=t,s=VZ(e,i,r);return{year:e,ordinal:s,...w3(t)}}function Ij(t){const{year:e,ordinal:i}=t,{month:r,day:s}=jZ(e,i);return{year:e,month:r,day:s,...w3(t)}}function Lj(t,e){if(!nt(t.localWeekday)||!nt(t.localWeekNumber)||!nt(t.localWeekYear)){if(!nt(t.weekday)||!nt(t.weekNumber)||!nt(t.weekYear))throw new xg("Cannot mix locale-based week fields with ISO-based week fields");return nt(t.localWeekday)||(t.weekday=t.localWeekday),nt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),nt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Tfe(t,e=4,i=1){const r=v3(t.weekYear),s=eo(t.weekNumber,1,Bb(t.weekYear,e,i)),n=eo(t.weekday,1,7);return r?s?n?!1:Ka("weekday",t.weekday):Ka("week",t.weekNumber):Ka("weekYear",t.weekYear)}function Efe(t){const e=v3(t.year),i=eo(t.ordinal,1,Fg(t.year));return e?i?!1:Ka("ordinal",t.ordinal):Ka("year",t.year)}function UZ(t){const e=v3(t.year),i=eo(t.month,1,12),r=eo(t.day,1,YM(t.year,t.month));return e?i?r?!1:Ka("day",t.day):Ka("month",t.month):Ka("year",t.year)}function GZ(t){const{hour:e,minute:i,second:r,millisecond:s}=t,n=eo(e,0,23)||e===24&&i===0&&r===0&&s===0,a=eo(i,0,59),o=eo(r,0,59),u=eo(s,0,999);return n?a?o?u?!1:Ka("millisecond",s):Ka("second",r):Ka("minute",i):Ka("hour",e)}function nt(t){return typeof t>"u"}function $d(t){return typeof t=="number"}function v3(t){return typeof t=="number"&&t%1===0}function Cfe(t){return typeof t=="string"}function Ife(t){return Object.prototype.toString.call(t)==="[object Date]"}function qZ(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function BZ(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Lfe(t){return Array.isArray(t)?t:[t]}function Aj(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const n=[e(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function Afe(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function N0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function VP(t){if(t==null)return null;if(typeof t!="object")throw new Es("Week settings must be an object");if(!eo(t.firstDay,1,7)||!eo(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!eo(e,1,7)))throw new Es("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function eo(t,e,i){return v3(t)&&t>=e&&t<=i}function Pfe(t,e){return t-e*Math.floor(t/e)}function Cr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function sd(t){if(!(nt(t)||t===null||t===""))return parseInt(t,10)}function $p(t){if(!(nt(t)||t===null||t===""))return parseFloat(t)}function V4(t){if(!(nt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function j4(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function zw(t){return t%4===0&&(t%100!==0||t%400===0)}function Fg(t){return zw(t)?366:365}function YM(t,e){const i=Pfe(e-1,12)+1,r=t+(e-i)/12;return i===2?zw(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function _3(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Pj(t,e,i){return-F4(z4(t,1,e),i)+e-1}function Bb(t,e=4,i=1){const r=Pj(t,e,i),s=Pj(t+1,e,i);return(Fg(t)-r+s)/7}function jP(t){return t>99?t:t>tr.twoDigitCutoffYear?1900+t:2e3+t}function HZ(t,e,i,r=null){const s=new Date(t),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const a={timeZoneName:e,...n},o=new Intl.DateTimeFormat(i,a).formatToParts(s).find(u=>u.type.toLowerCase()==="timezonename");return o?o.value:null}function b3(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function WZ(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new Es(`Invalid unit value ${t}`);return e}function JM(t,e){const i={};for(const r in t)if(N0(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=WZ(s)}return i}function ob(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Cr(i,2)}:${Cr(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Cr(i,2)}${Cr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function w3(t){return Afe(t,["hour","minute","second","millisecond"])}const Ofe=["January","February","March","April","May","June","July","August","September","October","November","December"],ZZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kfe=["J","F","M","A","M","J","J","A","S","O","N","D"];function YZ(t){switch(t){case"narrow":return[...kfe];case"short":return[...ZZ];case"long":return[...Ofe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const JZ=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],XZ=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Rfe=["M","T","W","T","F","S","S"];function QZ(t){switch(t){case"narrow":return[...Rfe];case"short":return[...XZ];case"long":return[...JZ];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const KZ=["AM","PM"],Dfe=["Before Christ","Anno Domini"],Nfe=["BC","AD"],zfe=["B","A"];function eY(t){switch(t){case"narrow":return[...zfe];case"short":return[...Nfe];case"long":return[...Dfe];default:return null}}function Ffe(t){return KZ[t.hour<12?0:1]}function Vfe(t,e){return QZ(e)[t.weekday-1]}function jfe(t,e){return YZ(e)[t.month-1]}function Ufe(t,e){return eY(e)[t.year<0?0:1]}function Gfe(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&n){const y=t==="days";switch(e){case 1:return y?"tomorrow":`next ${s[t][0]}`;case-1:return y?"yesterday":`last ${s[t][0]}`;case 0:return y?"today":`this ${s[t][0]}`}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),u=o===1,h=s[t],p=r?u?h[1]:h[2]||h[1]:u?s[t][0]:t;return a?`${o} ${p} ago`:`in ${o} ${p}`}function Oj(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const qfe={D:WM,DD:gZ,DDD:vZ,DDDD:_Z,t:bZ,tt:wZ,ttt:SZ,tttt:xZ,T:$Z,TT:MZ,TTT:TZ,TTTT:EZ,f:CZ,ff:LZ,fff:PZ,ffff:kZ,F:IZ,FF:AZ,FFF:OZ,FFFF:RZ};class ks{static create(e,i={}){return new ks(e,i)}static parseFormat(e){let i=null,r="",s=!1;const n=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?((r.length>0||s)&&n.push({literal:s||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",s=!s):s||o===i?r+=o:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=o,i=o)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return qfe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return Cr(e,i);const s={...this.opts};return i>0&&(s.padTo=i),r&&(s.signDisplay=r),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(b,w)=>this.loc.extract(e,b,w),a=b=>e.isOffsetFixed&&e.offset===0&&b.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,b.format):"",o=()=>r?Ffe(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(b,w)=>r?jfe(e,b):n(w?{month:b}:{month:b,day:"numeric"},"month"),h=(b,w)=>r?Vfe(e,b):n(w?{weekday:b}:{weekday:b,month:"long",day:"numeric"},"weekday"),p=b=>{const w=ks.macroTokenToFormatOpts(b);return w?this.formatWithSystemDefault(e,w):b},y=b=>r?Ufe(e,b):n({era:b},"era"),v=b=>{switch(b){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(b)}};return Oj(ks.parseFormat(i),v)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,s=p=>{switch(p[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},n=(p,y)=>v=>{const b=s(v);if(b){const w=y.isNegativeDuration&&b!==y.largestUnit?r:1;let S;return this.opts.signMode==="negativeLargestOnly"&&b!==y.largestUnit?S="never":this.opts.signMode==="all"?S="always":S="auto",this.num(p.get(b)*w,v.length,S)}else return v},a=ks.parseFormat(i),o=a.reduce((p,{literal:y,val:v})=>y?p:p.concat(v),[]),u=e.shiftTo(...o.map(s).filter(p=>p)),h={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return Oj(a,n(u,h))}}const tY=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function mv(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function yv(...t){return e=>t.reduce(([i,r,s],n)=>{const[a,o,u]=n(e,s);return[{...i,...a},o||r,u]},[{},null,1]).slice(0,2)}function gv(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function iY(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=sd(e[i+s]);return[r,null,i+s]}}const rY=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Bfe=`(?:${rY.source}?(?:\\[(${tY.source})\\])?)?`,U4=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,sY=RegExp(`${U4.source}${Bfe}`),G4=RegExp(`(?:[Tt]${sY.source})?`),Hfe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wfe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Zfe=/(\d{4})-?(\d{3})/,Yfe=iY("weekYear","weekNumber","weekDay"),Jfe=iY("year","ordinal"),Xfe=/(\d{4})-(\d\d)-(\d\d)/,nY=RegExp(`${U4.source} ?(?:${rY.source}|(${tY.source}))?`),Qfe=RegExp(`(?: ${nY.source})?`);function Vg(t,e,i){const r=t[e];return nt(r)?i:sd(r)}function Kfe(t,e){return[{year:Vg(t,e),month:Vg(t,e+1,1),day:Vg(t,e+2,1)},null,e+3]}function vv(t,e){return[{hours:Vg(t,e,0),minutes:Vg(t,e+1,0),seconds:Vg(t,e+2,0),milliseconds:V4(t[e+3])},null,e+4]}function Fw(t,e){const i=!t[e]&&!t[e+1],r=b3(t[e+1],t[e+2]),s=i?null:Ir.instance(r);return[{},s,e+3]}function Vw(t,e){const i=t[e]?Bn.create(t[e]):null;return[{},i,e+1]}const eme=RegExp(`^T?${U4.source}$`),tme=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function ime(t){const[e,i,r,s,n,a,o,u,h]=t,p=e[0]==="-",y=u&&u[0]==="-",v=(b,w=!1)=>b!==void 0&&(w||b&&p)?-b:b;return[{years:v($p(i)),months:v($p(r)),weeks:v($p(s)),days:v($p(n)),hours:v($p(a)),minutes:v($p(o)),seconds:v($p(u),u==="-0"),milliseconds:v(V4(h),y)}]}const rme={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function q4(t,e,i,r,s,n,a){const o={year:e.length===2?jP(sd(e)):sd(e),month:ZZ.indexOf(i)+1,day:sd(r),hour:sd(s),minute:sd(n)};return a&&(o.second=sd(a)),t&&(o.weekday=t.length>3?JZ.indexOf(t)+1:XZ.indexOf(t)+1),o}const sme=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function nme(t){const[,e,i,r,s,n,a,o,u,h,p,y]=t,v=q4(e,s,r,i,n,a,o);let b;return u?b=rme[u]:h?b=0:b=b3(p,y),[v,new Ir(b)]}function ame(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ome=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,lme=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ume=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function kj(t){const[,e,i,r,s,n,a,o]=t;return[q4(e,s,r,i,n,a,o),Ir.utcInstance]}function cme(t){const[,e,i,r,s,n,a,o]=t;return[q4(e,o,i,r,s,n,a),Ir.utcInstance]}const hme=mv(Hfe,G4),dme=mv(Wfe,G4),pme=mv(Zfe,G4),fme=mv(sY),aY=yv(Kfe,vv,Fw,Vw),mme=yv(Yfe,vv,Fw,Vw),yme=yv(Jfe,vv,Fw,Vw),gme=yv(vv,Fw,Vw);function vme(t){return gv(t,[hme,aY],[dme,mme],[pme,yme],[fme,gme])}function _me(t){return gv(ame(t),[sme,nme])}function bme(t){return gv(t,[ome,kj],[lme,kj],[ume,cme])}function wme(t){return gv(t,[tme,ime])}const Sme=yv(vv);function xme(t){return gv(t,[eme,Sme])}const $me=mv(Xfe,Qfe),Mme=mv(nY),Tme=yv(vv,Fw,Vw);function Eme(t){return gv(t,[$me,aY],[Mme,Tme])}const Rj="Invalid Duration",oY={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Cme={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...oY},Oa=146097/400,_y=146097/4800,Ime={years:{quarters:4,months:12,weeks:Oa/7,days:Oa,hours:Oa*24,minutes:Oa*24*60,seconds:Oa*24*60*60,milliseconds:Oa*24*60*60*1e3},quarters:{months:3,weeks:Oa/28,days:Oa/4,hours:Oa*24/4,minutes:Oa*24*60/4,seconds:Oa*24*60*60/4,milliseconds:Oa*24*60*60*1e3/4},months:{weeks:_y/7,days:_y,hours:_y*24,minutes:_y*24*60,seconds:_y*24*60*60,milliseconds:_y*24*60*60*1e3},...oY},Af=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Lme=Af.slice(0).reverse();function Fu(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Dt(r)}function lY(t,e){let i=e.milliseconds??0;for(const r of Lme.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function Dj(t,e){const i=lY(t,e)<0?-1:1;Af.reduceRight((r,s)=>{if(nt(e[s]))return r;if(r){const n=e[r]*i,a=t[s][r],o=Math.floor(n/a);e[s]+=o*i,e[r]-=o*a*i}return s},null),Af.reduce((r,s)=>{if(nt(e[s]))return r;if(r){const n=e[r]%1;e[r]-=n,e[s]+=n*t[r][s]}return s},null)}function Nj(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Dt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?Ime:Cme;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Kt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Dt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Es(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Dt({values:JM(e,Dt.normalizeUnit),loc:Kt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if($d(e))return Dt.fromMillis(e);if(Dt.isDuration(e))return e;if(typeof e=="object")return Dt.fromObject(e);throw new Es(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=wme(e);return r?Dt.fromObject(r,i):Dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=xme(e);return r?Dt.fromObject(r,i):Dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Es("need to specify a reason the Duration is invalid");const r=e instanceof Ho?e:new Ho(e,i);if(tr.throwOnInvalid)throw new ife(r);return new Dt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new yZ(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ks.create(this.loc,r).formatDurationFromString(this,e):Rj}toHuman(e={}){if(!this.isValid)return Rj;const i=e.showZeros!==!1,r=Af.map(s=>{const n=this.values[s];return nt(n)||n===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=j4(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Ae.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?lY(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Dt.fromDurationLike(e),r={};for(const s of Af)(N0(i.values,s)||N0(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Fu(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Dt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=WZ(e(this.values[r],r));return Fu(this,{values:i},!0)}get(e){return this[Dt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...JM(e,Dt.normalizeUnit)};return Fu(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Fu(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Dj(this.matrix,e),Fu(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Nj(this.normalize().shiftToAll().toObject());return Fu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>Dt.normalizeUnit(a));const i={},r={},s=this.toObject();let n;for(const a of Af)if(e.indexOf(a)>=0){n=a;let o=0;for(const h in r)o+=this.matrix[h][a]*r[h],r[h]=0;$d(s[a])&&(o+=s[a]);const u=Math.trunc(o);i[a]=u,r[a]=(o*1e3-u*1e3)/1e3}else $d(s[a])&&(r[a]=s[a]);for(const a in r)r[a]!==0&&(i[n]+=a===n?r[a]:r[a]/this.matrix[n][a]);return Dj(this.matrix,i),Fu(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Fu(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Nj(this.values);return Fu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Af)if(!i(this.values[r],e.values[r]))return!1;return!0}}const by="Invalid Interval";function Ame(t,e){return!t||!t.isValid?Qi.invalid("missing or invalid start"):!e||!e.isValid?Qi.invalid("missing or invalid end"):e<t?Qi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Qi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Es("need to specify a reason the Interval is invalid");const r=e instanceof Ho?e:new Ho(e,i);if(tr.throwOnInvalid)throw new tfe(r);return new Qi({invalid:r})}static fromDateTimes(e,i){const r=E_(e),s=E_(i),n=Ame(r,s);return n??new Qi({start:r,end:s})}static after(e,i){const r=Dt.fromDurationLike(i),s=E_(e);return Qi.fromDateTimes(s,s.plus(r))}static before(e,i){const r=Dt.fromDurationLike(i),s=E_(e);return Qi.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let n,a;try{n=Ae.fromISO(r,i),a=n.isValid}catch{a=!1}let o,u;try{o=Ae.fromISO(s,i),u=o.isValid}catch{u=!1}if(a&&u)return Qi.fromDateTimes(n,o);if(a){const h=Dt.fromISO(s,i);if(h.isValid)return Qi.after(n,h)}else if(u){const h=Dt.fromISO(r,i);if(h.isValid)return Qi.before(o,h)}}return Qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let s;return i?.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(r,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Qi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(E_).filter(a=>this.contains(a)).sort((a,o)=>a.toMillis()-o.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const a=i[n]||this.e,o=+a>+this.e?this.e:a;r.push(Qi.fromDateTimes(s,o)),s=o,n+=1}return r}splitBy(e){const i=Dt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const a=[];for(;r<this.e;){const o=this.start.plus(i.mapUnits(u=>u*s));n=+o>+this.e?this.e:o,a.push(Qi.fromDateTimes(r,n)),r=n,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Qi.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Qi.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],a)=>n?n.overlaps(a)||n.abutsStart(a)?[s,n.union(a)]:[s.concat([n]),a]:[s,a],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],n=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),a=Array.prototype.concat(...n),o=a.sort((u,h)=>u.time-h.time);for(const u of o)r+=u.type==="s"?1:-1,r===1?i=u.time:(i&&+i!=+u.time&&s.push(Qi.fromDateTimes(i,u.time)),i=null);return Qi.merge(s)}difference(...e){return Qi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:by}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=WM,i={}){return this.isValid?ks.create(this.s.loc.clone(i),e).formatInterval(this):by}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:by}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:by}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:by}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:by}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Dt.invalid(this.invalidReason)}mapEndpoints(e){return Qi.fromDateTimes(e(this.s),e(this.e))}}class RS{static hasDST(e=tr.defaultZone){const i=Ae.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Bn.isValidZone(e)}static normalizeZone(e){return hd(e,tr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Kt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Kt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Kt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Kt.create(i,r,n)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Kt.create(i,r,n)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Kt.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Kt.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Kt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Kt.create(i,null,"gregory").eras(e)}static features(){return{relative:qZ(),localeWeek:BZ()}}}function zj(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Dt.fromMillis(r).as("days"))}function Pme(t,e,i){const r=[["years",(u,h)=>h.year-u.year],["quarters",(u,h)=>h.quarter-u.quarter+(h.year-u.year)*4],["months",(u,h)=>h.month-u.month+(h.year-u.year)*12],["weeks",(u,h)=>{const p=zj(u,h);return(p-p%7)/7}],["days",zj]],s={},n=t;let a,o;for(const[u,h]of r)i.indexOf(u)>=0&&(a=u,s[u]=h(t,e),o=n.plus(s),o>e?(s[u]--,t=n.plus(s),t>e&&(o=t,s[u]--,t=n.plus(s))):t=o);return[t,s,o,a]}function Ome(t,e,i,r){let[s,n,a,o]=Pme(t,e,i);const u=e-s,h=i.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);h.length===0&&(a<e&&(a=s.plus({[o]:1})),a!==s&&(n[o]=(n[o]||0)+u/(a-s)));const p=Dt.fromObject(n,r);return h.length>0?Dt.fromMillis(u,r).shiftTo(...h).plus(p):p}const kme="missing Intl.DateTimeFormat.formatToParts support";function Bt(t,e=i=>i){return{regex:t,deser:([i])=>e($fe(i))}}const Rme="",uY=`[ ${Rme}]`,cY=new RegExp(uY,"g");function Dme(t){return t.replace(/\./g,"\\.?").replace(cY,uY)}function Fj(t){return t.replace(/\./g,"").replace(cY," ").toLowerCase()}function _o(t,e){return t===null?null:{regex:RegExp(t.map(Dme).join("|")),deser:([i])=>t.findIndex(r=>Fj(i)===Fj(r))+e}}function Vj(t,e){return{regex:t,deser:([,i,r])=>b3(i,r),groups:e}}function DS(t){return{regex:t,deser:([e])=>e}}function Nme(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function zme(t,e){const i=vo(e),r=vo(e,"{2}"),s=vo(e,"{3}"),n=vo(e,"{4}"),a=vo(e,"{6}"),o=vo(e,"{1,2}"),u=vo(e,"{1,3}"),h=vo(e,"{1,6}"),p=vo(e,"{1,9}"),y=vo(e,"{2,4}"),v=vo(e,"{4,6}"),b=M=>({regex:RegExp(Nme(M.val)),deser:([T])=>T,literal:!0}),S=(M=>{if(t.literal)return b(M);switch(M.val){case"G":return _o(e.eras("short"),0);case"GG":return _o(e.eras("long"),0);case"y":return Bt(h);case"yy":return Bt(y,jP);case"yyyy":return Bt(n);case"yyyyy":return Bt(v);case"yyyyyy":return Bt(a);case"M":return Bt(o);case"MM":return Bt(r);case"MMM":return _o(e.months("short",!0),1);case"MMMM":return _o(e.months("long",!0),1);case"L":return Bt(o);case"LL":return Bt(r);case"LLL":return _o(e.months("short",!1),1);case"LLLL":return _o(e.months("long",!1),1);case"d":return Bt(o);case"dd":return Bt(r);case"o":return Bt(u);case"ooo":return Bt(s);case"HH":return Bt(r);case"H":return Bt(o);case"hh":return Bt(r);case"h":return Bt(o);case"mm":return Bt(r);case"m":return Bt(o);case"q":return Bt(o);case"qq":return Bt(r);case"s":return Bt(o);case"ss":return Bt(r);case"S":return Bt(u);case"SSS":return Bt(s);case"u":return DS(p);case"uu":return DS(o);case"uuu":return Bt(i);case"a":return _o(e.meridiems(),0);case"kkkk":return Bt(n);case"kk":return Bt(y,jP);case"W":return Bt(o);case"WW":return Bt(r);case"E":case"c":return Bt(i);case"EEE":return _o(e.weekdays("short",!1),1);case"EEEE":return _o(e.weekdays("long",!1),1);case"ccc":return _o(e.weekdays("short",!0),1);case"cccc":return _o(e.weekdays("long",!0),1);case"Z":case"ZZ":return Vj(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return Vj(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return DS(/[a-z_+-/]{1,256}?/i);case" ":return DS(/[^\S\n\r]/);default:return b(M)}})(t)||{invalidReason:kme};return S.token=t,S}const Fme={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Vme(t,e,i){const{type:r,value:s}=t;if(r==="literal"){const u=/^\s+$/.test(s);return{literal:!u,val:u?" ":s}}const n=e[r];let a=r;r==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=i.hour12?"hour12":"hour24");let o=Fme[a];if(typeof o=="object"&&(o=o[n]),o)return{literal:!1,val:o}}function jme(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function Ume(t,e,i){const r=t.match(e);if(r){const s={};let n=1;for(const a in i)if(N0(i,a)){const o=i[a],u=o.groups?o.groups+1:1;!o.literal&&o.token&&(s[o.token.val[0]]=o.deser(r.slice(n,n+u))),n+=u}return[r,s]}else return[r,{}]}function Gme(t){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return nt(t.z)||(i=Bn.create(t.z)),nt(t.Z)||(i||(i=new Ir(t.Z)),r=t.Z),nt(t.q)||(t.M=(t.q-1)*3+1),nt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),nt(t.u)||(t.S=V4(t.u)),[Object.keys(t).reduce((n,a)=>{const o=e(a);return o&&(n[o]=t[a]),n},{}),i,r]}let vL=null;function qme(){return vL||(vL=Ae.fromMillis(1555555555555)),vL}function Bme(t,e){if(t.literal)return t;const i=ks.macroTokenToFormatOpts(t.val),r=fY(i,e);return r==null||r.includes(void 0)?t:r}function hY(t,e){return Array.prototype.concat(...t.map(i=>Bme(i,e)))}class dY{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=hY(ks.parseFormat(i),e),this.units=this.tokens.map(r=>zme(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=jme(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,r]=Ume(e,this.regex,this.handlers),[s,n,a]=r?Gme(r):[null,null,void 0];if(N0(r,"a")&&N0(r,"H"))throw new xg("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function pY(t,e,i){return new dY(t,i).explainFromTokens(e)}function Hme(t,e,i){const{result:r,zone:s,specificOffset:n,invalidReason:a}=pY(t,e,i);return[r,s,n,a]}function fY(t,e){if(!t)return null;const r=ks.create(e,t).dtFormatter(qme()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(a=>Vme(a,t,n))}const _L="Invalid DateTime",jj=864e13;function u1(t){return new Ho("unsupported zone",`the zone "${t.name}" is not supported`)}function bL(t){return t.weekData===null&&(t.weekData=ZM(t.c)),t.weekData}function wL(t){return t.localWeekData===null&&(t.localWeekData=ZM(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Mp(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Ae({...i,...e,old:i})}function mY(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[t-Math.min(s,n)*60*1e3,Math.max(s,n)]}function NS(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function l$(t,e,i){return mY(_3(t),e,i)}function Uj(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...t.c,year:r,month:s,day:Math.min(t.c.day,YM(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Dt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=_3(n);let[u,h]=mY(o,i,t.zone);return a!==0&&(u+=a,h=t.zone.offset(u)),{ts:u,o:h}}function wy(t,e,i,r,s,n){const{setZone:a,zone:o}=i;if(t&&Object.keys(t).length!==0||e){const u=e||o,h=Ae.fromObject(t,{...i,zone:u,specificOffset:n});return a?h:h.setZone(o)}else return Ae.invalid(new Ho("unparsable",`the input "${s}" can't be parsed as ${r}`))}function zS(t,e,i=!0){return t.isValid?ks.create(Kt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function SL(t,e,i){const r=t.c.year>9999||t.c.year<0;let s="";if(r&&t.c.year>=0&&(s+="+"),s+=Cr(t.c.year,r?6:4),i==="year")return s;if(e){if(s+="-",s+=Cr(t.c.month),i==="month")return s;s+="-"}else if(s+=Cr(t.c.month),i==="month")return s;return s+=Cr(t.c.day),s}function Gj(t,e,i,r,s,n,a){let o=!i||t.c.millisecond!==0||t.c.second!==0,u="";switch(a){case"day":case"month":case"year":break;default:if(u+=Cr(t.c.hour),a==="hour")break;if(e){if(u+=":",u+=Cr(t.c.minute),a==="minute")break;o&&(u+=":",u+=Cr(t.c.second))}else{if(u+=Cr(t.c.minute),a==="minute")break;o&&(u+=Cr(t.c.second))}if(a==="second")break;o&&(!r||t.c.millisecond!==0)&&(u+=".",u+=Cr(t.c.millisecond,3))}return s&&(t.isOffsetFixed&&t.offset===0&&!n?u+="Z":t.o<0?(u+="-",u+=Cr(Math.trunc(-t.o/60)),u+=":",u+=Cr(Math.trunc(-t.o%60))):(u+="+",u+=Cr(Math.trunc(t.o/60)),u+=":",u+=Cr(Math.trunc(t.o%60)))),n&&(u+="["+t.zone.ianaName+"]"),u}const yY={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Wme={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Zme={ordinal:1,hour:0,minute:0,second:0,millisecond:0},u$=["year","month","day","hour","minute","second","millisecond"],Yme=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Jme=["year","ordinal","hour","minute","second","millisecond"];function c$(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new yZ(t);return e}function qj(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return c$(t)}}function Xme(t){if(c1===void 0&&(c1=tr.now()),t.type!=="iana")return t.offset(c1);const e=t.name;let i=UP.get(e);return i===void 0&&(i=t.offset(c1),UP.set(e,i)),i}function Bj(t,e){const i=hd(e.zone,tr.defaultZone);if(!i.isValid)return Ae.invalid(u1(i));const r=Kt.fromObject(e);let s,n;if(nt(t.year))s=tr.now();else{for(const u of u$)nt(t[u])&&(t[u]=yY[u]);const a=UZ(t)||GZ(t);if(a)return Ae.invalid(a);const o=Xme(i);[s,n]=l$(t,o,i)}return new Ae({ts:s,zone:i,loc:r,o:n})}function Hj(t,e,i){const r=nt(i.round)?!0:i.round,s=nt(i.rounding)?"trunc":i.rounding,n=(o,u)=>(o=j4(o,r||i.calendary?0:2,i.calendary?"round":s),e.loc.clone(i).relFormatter(i).format(o,u)),a=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(a(i.unit),i.unit);for(const o of i.units){const u=a(o);if(Math.abs(u)>=1)return n(u,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function Wj(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let c1;const UP=new Map;class Ae{constructor(e){const i=e.zone||tr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ho("invalid input"):null)||(i.isValid?null:u1(i));this.ts=nt(e.ts)?tr.now():e.ts;let s=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,n]=[e.old.c,e.old.o];else{const o=$d(e.o)&&!e.old?e.o:i.offset(this.ts);s=NS(this.ts,o),r=Number.isNaN(s.year)?new Ho("invalid input"):null,s=r?null:s,n=r?null:o}this._zone=i,this.loc=e.loc||Kt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new Ae({})}static local(){const[e,i]=Wj(arguments),[r,s,n,a,o,u,h]=i;return Bj({year:r,month:s,day:n,hour:a,minute:o,second:u,millisecond:h},e)}static utc(){const[e,i]=Wj(arguments),[r,s,n,a,o,u,h]=i;return e.zone=Ir.utcInstance,Bj({year:r,month:s,day:n,hour:a,minute:o,second:u,millisecond:h},e)}static fromJSDate(e,i={}){const r=Ife(e)?e.valueOf():NaN;if(Number.isNaN(r))return Ae.invalid("invalid input");const s=hd(i.zone,tr.defaultZone);return s.isValid?new Ae({ts:r,zone:s,loc:Kt.fromObject(i)}):Ae.invalid(u1(s))}static fromMillis(e,i={}){if($d(e))return e<-jj||e>jj?Ae.invalid("Timestamp out of range"):new Ae({ts:e,zone:hd(i.zone,tr.defaultZone),loc:Kt.fromObject(i)});throw new Es(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if($d(e))return new Ae({ts:e*1e3,zone:hd(i.zone,tr.defaultZone),loc:Kt.fromObject(i)});throw new Es("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=hd(i.zone,tr.defaultZone);if(!r.isValid)return Ae.invalid(u1(r));const s=Kt.fromObject(i),n=JM(e,qj),{minDaysInFirstWeek:a,startOfWeek:o}=Lj(n,s),u=tr.now(),h=nt(i.specificOffset)?r.offset(u):i.specificOffset,p=!nt(n.ordinal),y=!nt(n.year),v=!nt(n.month)||!nt(n.day),b=y||v,w=n.weekYear||n.weekNumber;if((b||p)&&w)throw new xg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&p)throw new xg("Can't mix ordinal dates with month/day");const S=w||n.weekday&&!b;let M,T,I=NS(u,h);S?(M=Yme,T=Wme,I=ZM(I,a,o)):p?(M=Jme,T=Zme,I=gL(I)):(M=u$,T=yY);let L=!1;for(const Q of M){const oe=n[Q];nt(oe)?L?n[Q]=T[Q]:n[Q]=I[Q]:L=!0}const O=S?Tfe(n,a,o):p?Efe(n):UZ(n),R=O||GZ(n);if(R)return Ae.invalid(R);const z=S?Cj(n,a,o):p?Ij(n):n,[j,U]=l$(z,h,r),B=new Ae({ts:j,zone:r,o:U,loc:s});return n.weekday&&b&&e.weekday!==B.weekday?Ae.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${B.toISO()}`):B.isValid?B:Ae.invalid(B.invalid)}static fromISO(e,i={}){const[r,s]=vme(e);return wy(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=_me(e);return wy(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=bme(e);return wy(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(nt(e)||nt(i))throw new Es("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,a=Kt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[o,u,h,p]=Hme(a,e,i);return p?Ae.invalid(p):wy(o,u,r,`format ${i}`,e,h)}static fromString(e,i,r={}){return Ae.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=Eme(e);return wy(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Es("need to specify a reason the DateTime is invalid");const r=e instanceof Ho?e:new Ho(e,i);if(tr.throwOnInvalid)throw new efe(r);return new Ae({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=fY(e,Kt.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return hY(ks.parseFormat(e),Kt.fromObject(i)).map(s=>s.val).join("")}static resetCache(){c1=void 0,UP.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?bL(this).weekYear:NaN}get weekNumber(){return this.isValid?bL(this).weekNumber:NaN}get weekday(){return this.isValid?bL(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?wL(this).weekday:NaN}get localWeekNumber(){return this.isValid?wL(this).weekNumber:NaN}get localWeekYear(){return this.isValid?wL(this).weekYear:NaN}get ordinal(){return this.isValid?gL(this.c).ordinal:NaN}get monthShort(){return this.isValid?RS.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?RS.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?RS.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?RS.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=_3(this.c),s=this.zone.offset(r-e),n=this.zone.offset(r+e),a=this.zone.offset(r-s*i),o=this.zone.offset(r-n*i);if(a===o)return[this];const u=r-a*i,h=r-o*i,p=NS(u,a),y=NS(h,o);return p.hour===y.hour&&p.minute===y.minute&&p.second===y.second&&p.millisecond===y.millisecond?[Mp(this,{ts:u}),Mp(this,{ts:h})]:[this]}get isInLeapYear(){return zw(this.year)}get daysInMonth(){return YM(this.year,this.month)}get daysInYear(){return this.isValid?Fg(this.year):NaN}get weeksInWeekYear(){return this.isValid?Bb(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Bb(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=ks.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(Ir.instance(e),i)}toLocal(){return this.setZone(tr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=hd(e,tr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const n=e.offset(this.ts),a=this.toObject();[s]=l$(a,n,e)}return Mp(this,{ts:s,zone:e})}else return Ae.invalid(u1(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Mp(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=JM(e,qj),{minDaysInFirstWeek:r,startOfWeek:s}=Lj(i,this.loc),n=!nt(i.weekYear)||!nt(i.weekNumber)||!nt(i.weekday),a=!nt(i.ordinal),o=!nt(i.year),u=!nt(i.month)||!nt(i.day),h=o||u,p=i.weekYear||i.weekNumber;if((h||a)&&p)throw new xg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new xg("Can't mix ordinal dates with month/day");let y;n?y=Cj({...ZM(this.c,r,s),...i},r,s):nt(i.ordinal)?(y={...this.toObject(),...i},nt(i.day)&&(y.day=Math.min(YM(y.year,y.month),y.day))):y=Ij({...gL(this.c),...i});const[v,b]=l$(y,this.o,this.zone);return Mp(this,{ts:v,o:b})}plus(e){if(!this.isValid)return this;const i=Dt.fromDurationLike(e);return Mp(this,Uj(this,i))}minus(e){if(!this.isValid)return this;const i=Dt.fromDurationLike(e).negate();return Mp(this,Uj(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=Dt.normalizeUnit(e);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:a}=this;a<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?ks.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):_L}toLocaleString(e=WM,i={}){return this.isValid?ks.create(this.loc.clone(i),e).formatDateTime(this):_L}toLocaleParts(e={}){return this.isValid?ks.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1,precision:a="milliseconds"}={}){if(!this.isValid)return null;a=c$(a);const o=e==="extended";let u=SL(this,o,a);return u$.indexOf(a)>=3&&(u+="T"),u+=Gj(this,o,i,r,s,n,a),u}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?SL(this,e==="extended",c$(i)):null}toISOWeekDate(){return zS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:a="extended",precision:o="milliseconds"}={}){return this.isValid?(o=c$(o),(s&&u$.indexOf(o)>=3?"T":"")+Gj(this,a==="extended",i,e,r,n,o)):null}toRFC2822(){return zS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return zS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?SL(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),zS(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():_L}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Dt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=Lfe(i).map(Dt.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,u=a?e:this,h=Ome(o,u,n,s);return a?h.negate():h}diffNow(e="milliseconds",i={}){return this.diff(Ae.now(),e,i)}until(e){return this.isValid?Qi.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const s=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Ae.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),Hj(i,this.plus(r),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?Hj(e.base||Ae.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Ae.isDateTime))throw new Es("min requires all arguments be DateTimes");return Aj(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Ae.isDateTime))throw new Es("max requires all arguments be DateTimes");return Aj(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,a=Kt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return pY(a,e,i)}static fromStringExplain(e,i,r={}){return Ae.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=Kt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new dY(n,e)}static fromFormatParser(e,i,r={}){if(nt(e)||nt(i))throw new Es("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,a=Kt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!a.equals(i.locale))throw new Es(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${i.locale}`);const{result:o,zone:u,specificOffset:h,invalidReason:p}=i.explainFromTokens(e);return p?Ae.invalid(p):wy(o,u,r,`format ${i.format}`,e,h)}static get DATE_SHORT(){return WM}static get DATE_MED(){return gZ}static get DATE_MED_WITH_WEEKDAY(){return rfe}static get DATE_FULL(){return vZ}static get DATE_HUGE(){return _Z}static get TIME_SIMPLE(){return bZ}static get TIME_WITH_SECONDS(){return wZ}static get TIME_WITH_SHORT_OFFSET(){return SZ}static get TIME_WITH_LONG_OFFSET(){return xZ}static get TIME_24_SIMPLE(){return $Z}static get TIME_24_WITH_SECONDS(){return MZ}static get TIME_24_WITH_SHORT_OFFSET(){return TZ}static get TIME_24_WITH_LONG_OFFSET(){return EZ}static get DATETIME_SHORT(){return CZ}static get DATETIME_SHORT_WITH_SECONDS(){return IZ}static get DATETIME_MED(){return LZ}static get DATETIME_MED_WITH_SECONDS(){return AZ}static get DATETIME_MED_WITH_WEEKDAY(){return sfe}static get DATETIME_FULL(){return PZ}static get DATETIME_FULL_WITH_SECONDS(){return OZ}static get DATETIME_HUGE(){return kZ}static get DATETIME_HUGE_WITH_SECONDS(){return RZ}}function E_(t){if(Ae.isDateTime(t))return t;if(t&&t.valueOf&&$d(t.valueOf()))return Ae.fromJSDate(t);if(t&&typeof t=="object")return Ae.fromObject(t);throw new Es(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Qme="shortOffset";function Kme(t){return"timeZoneIANA"in t}function eye(t){return t.startsWith("UTC")}function gY(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?h$(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?tye(i):null}}}}}function h$(t,e=Qo){return t?Kme(t)?t.timeZoneIANA:iye(t,e):e}function tye(t){return{timeZoneIANA:t}}function iye(t,e=Qo){if(!t||!gj.has(t.timeZone))return e;const i=gj.get(t.timeZone);return eye(t.timeZone)||t.respectsDaylightSaving?i:rye(i)}function rye(t){const e=Ae.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Ir.instance(-i).formatOffset(0,"narrow")}`}function sye(t,e,i,r,s){if(e&&s==="date")return{timeZone:mu,timeZoneName:void 0};const n=r.hour,a=i===jd;return{timeZone:a?s==="timestamp-offset"?void 0:t??mu:i,timeZoneName:a&&n?Qme:void 0}}function nye(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Qo||t===jd||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const aye={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},oye={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},vY={timeZone:mu},ll={year:"numeric",month:"numeric",day:"numeric"},C_={year:"numeric",month:"long",day:"numeric"},I_={year:"numeric",month:"short",day:"numeric"},L_={year:"numeric",month:"long",weekday:"long",day:"numeric"},nd={hour:"numeric",minute:"numeric"},Vp={...nd,second:"numeric"},_Y={hourCycle:"h23"},A_={...nd,..._Y},P_={...Vp,..._Y},bY={"short-date":ll,"short-date-short-time":{...ll,...nd},"short-date-short-time-24":{...ll,...A_},"short-date-long-time":{...ll,...Vp},"short-date-long-time-24":{...ll,...P_},"short-date-le":ll,"short-date-le-short-time":{...ll,...nd},"short-date-le-short-time-24":{...ll,...A_},"short-date-le-long-time":{...ll,...Vp},"short-date-le-long-time-24":{...ll,...P_},"long-month-day-year":C_,"long-month-day-year-short-time":{...C_,...nd},"long-month-day-year-short-time-24":{...C_,...A_},"long-month-day-year-long-time":{...C_,...Vp},"long-month-day-year-long-time-24":{...C_,...P_},"day-short-month-year":I_,"day-short-month-year-short-time":{...I_,...nd},"day-short-month-year-short-time-24":{...I_,...A_},"day-short-month-year-long-time":{...I_,...Vp},"day-short-month-year-long-time-24":{...I_,...P_},"long-date":L_,"long-date-short-time":{...L_,...nd},"long-date-short-time-24":{...L_,...A_},"long-date-long-time":{...L_,...Vp},"long-date-long-time-24":{...L_,...P_},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":nd,"long-time":Vp},lye=es()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),wY={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},uye=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),cye=uye.find(({type:t})=>t==="month")?.value.toLowerCase();function SY(){const t=k4();return(t&&wY[t])??uZ()}cye!=="mart"&&(wY.bs="sr-Latn-CS");let GP=new WeakMap;const S3=bY["short-date-short-time"];function hye(t){let e=GP.get(t);if(!e){const i=SY(),r=B4(t.timeZone??Qo),s={...t,timeZone:r};e=new Intl.DateTimeFormat(i,s),GP.set(t,e)}return e}function O_(t){return bY[t]}function dye(t){const{dateStyle:e,timeStyle:i,hour12:r,year:s,month:n}=t,a={};return e?a.dateStyle=e:s&&(a.year=s,a.month=n||void 0),i&&!a.year&&(a.timeStyle=i,a.hour12=r==="auto"?void 0:r==="always"),a}function Wo(t,e=S3){return hye(e).format(t)}function pye(t,e=S3){return Wo(new Date(t),{...e,...vY,...oye})}function fye(t,e=S3){return Wo(new Date(`1970-01-01T${t}Z`),{...e,...vY,...aye})}function mye(t,e=S3){if(e.timeZone)return Wo(new Date(t),e);const i=Ae.fromISO(t,{setZone:!0}),r=i.offset===0?mu:e.timeZone,s={...e,timeZone:r};return i.toLocaleString(s,{locale:SY()})}function B4(t){switch(t){case Qo:return Kpe;case jd:return mu;default:return t}}D4(()=>{GP=new WeakMap});const yye={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let d$=new WeakMap,xY={};function qP(t){const e=t||xY;if(!d$.has(e)){const i=k4(),r=i&&yye[i]||uZ();d$.set(e,new Intl.NumberFormat(r,t))}return d$.get(e)}function gye(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function vye(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function Uc(t,e){return Object.is(t,-0)&&(t=0),qP(e).format(t)}function jUe(t,e=Un()){if(!t)return null;let i=Zj.get(e);if(!i){const r=qP().formatToParts(12345.6),s=[...qP({useGrouping:!1}).format(9876543210)].reverse(),n=new Map(s.map((y,v)=>[y,v])),a=new RegExp(`[${r.find(y=>y.type==="group")?.value}]`,"g"),o=new RegExp(`[${r.find(y=>y.type==="decimal")?.value}]`),u=new RegExp(`[${s.join("")}]`,"g"),h=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,p=/[-\u2212\u2013\u2014\u2015]/g;i=y=>{if((y=y.trim().replaceAll(a,"").replace(o,".").replace(u,b=>String(n.get(b))).replaceAll(h,"").replaceAll(p,"-"))==="")return null;const v=Number(y);return isNaN(v)?null:v},Zj.set(e,i)}return i(t)}D4(()=>{d$=new WeakMap,xY={}});const Zj=new Map,$Y=()=>le.getLogger("esri.intl.substitute");function Gc(t,e,i={}){const{format:r={}}=i;return Hd(t,s=>_ye(s,e,r))}function _ye(t,e,i){let r,s;const n=t.indexOf(":");if(n===-1?r=t.trim():(r=t.slice(0,n).trim(),s=t.slice(n+1).trim()),!r)return"";const a=Ew(r,e);if(a==null)return"";const o=(s?i?.[s]:null)??i?.[r];return o?bye(a,o):s?wye(a,s):H4(a)}function bye(t,e){switch(e.type){case"date":return Wo(t,e.intlOptions);case"number":return Uc(t,e.intlOptions);default:return $Y().warn("missing format descriptor for key {key}"),H4(t)}}function wye(t,e){switch(e.toLowerCase()){case"dateformat":return Wo(t);case"numberformat":return Uc(t);default:return $Y().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Wo(t):/^numberformat/i.test(e)?Uc(t):H4(t)}}function H4(t){switch(typeof t){case"string":return t;case"number":return Uc(t);case"boolean":return""+t;default:return t instanceof Date?Wo(t):""}}async function Sye(t,e,i,r){const s=e.exec(i);if(!s)throw new G("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const n=s[1]?`${s[1]}/`:"",a=s[2],o=fZ(r),u=`${n}${a}.json`,h=o?`${n}${a}_${o}.json`:u;let p;try{p=await Yj(t(h))}catch(y){if(h===u)throw new G("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y});try{p=await Yj(t(u))}catch(v){throw new G("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:v})}}return p}async function Yj(t){if(Jj.fetchBundleAsset!=null)return Jj.fetchBundleAsset(t);const e=await Ot(t,{responseType:"text"});return JSON.parse(e.data)}let xye=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return Sye(this.getAssetUrl,this.matcher,e,i)}};function $ye(t){return new xye(t)}const Jj={};Ype($ye({pattern:"esri/",location:Si}));let Qu=class extends Ce{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:fZ(e??Un())??"global";return i=i==="no"?"nb":i,i}};d([m()],Qu.prototype,"apiKey",void 0),d([m()],Qu.prototype,"id",void 0),d([m()],Qu.prototype,"language",void 0),d([m()],Qu.prototype,"places",void 0),d([m()],Qu.prototype,"serviceUrl",void 0),d([m()],Qu.prototype,"worldview",void 0),Qu=d([N("esri.support.BasemapStyle")],Qu);const Mye=Qu,MY=Symbol("BasemapInstance");function qUe(t){return t!=null&&typeof t=="object"&&MY in t}function _e(t,e,i={}){return W4(t,e,i,TY)}function Kr(t,e,i={}){return W4(t,e,i,EY)}function W4(t,e,i={},r){let s=null;const n=i.once?(a,o)=>{r(a)&&(fi(s),e(a,o))}:(a,o)=>{r(a)&&e(a,o)};if(s=whe(t,n,i.sync,i.equals),i.initial){const a=t();n(a,a)}return s}function Vs(t,e,i,r={}){let s=null,n=null,a=null;function o(){s&&n&&(n.remove(),r.onListenerRemove?.(s),s=null,n=null)}function u(p){r.once&&r.once&&fi(a),i(p)}const h=_e(t,(p,y)=>{o(),i3(p)&&(s=p,n=lv(p,e,u),r.onListenerAdd?.(p))},{sync:r.sync,initial:!0});return a=vt(()=>{h.remove(),o()}),a}function jw(t,e){return Tye(t,EY,e)}function Tye(t,e,i){if(Ns(i))return Promise.reject(Ht());const r=t();if(e?.(r))return Promise.resolve(r);let s=null;function n(){s=fi(s)}return new Promise((a,o)=>{s=gm([so(i,()=>{n(),o(Ht())}),W4(t,u=>{n(),a(u)},{sync:!1,once:!0},e??TY)])})}function TY(t){return!0}function EY(t){return!!t}function Eye(t,e,i={}){let r=!1;const s=_e(t,(n,a)=>{r||e(n,a)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const no={sync:!0},Lt={initial:!0},ps={sync:!0,initial:!0};let CY=0;const $m=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+CY++})}};return i=d([N("esri.core.Identifiable")],i),i},Z4=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:CY++})}};return i=d([N("esri.core.Identifiable.NumericIdentifiable")],i),i};$m(class{});async function Cye(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await K(async()=>{const{fromItem:r}=await Promise.resolve().then(()=>AVe);return{fromItem:r}},void 0,import.meta.url);try{return await i(e)}catch(r){const s=e?.portalItem,n=s?.id||"unset",a=s?.portal?.url||Tt.portalUrl;throw le.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+n+"')",r),r}}const BP={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function xL(t,e,i,r=Qo){const s=new Bn(B4(r)),n=Ae.fromJSDate(t,{zone:s}),a=i==="decades"||i==="centuries"?"year":LY(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),n.plus({[a]:e}).toJSDate()}function BUe(t,e,i="milliseconds"){const r=t.getTime(),s=IY(e,i,"milliseconds");return new Date(r+s)}function Xj(t,e,i=Qo){const r=new Bn(B4(i)),s=Ae.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const a=s.startOf("year"),{year:o}=a,u=o-o%(e==="decades"?10:100);return a.set({year:u}).toJSDate()}const n=LY(e);return s.startOf(n).toJSDate()}function IY(t,e,i){return t===0?0:t*BP[e]/BP[i]}function HUe(t,e){return t&&e?t.intersection(e):t||e}function LY(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var ka,i0;let vr=(i0=class extends ve{static get allTime(){return Qj}static get empty(){return Iye}static fromArray(e){return new ka({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(ka.allTime)}get isEmpty(){return this.equals(ka.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new ka({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return i===s&&r===n}expandTo(e,i=Qo){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=Xj(r,e,i));let s=this.end;if(s){const n=Xj(s,e,i);s=s.getTime()===n.getTime()?n:xL(n,1,e,i)}return new ka({start:r,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return ka.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let a,o;return s>=i&&s<=r?a=s:i>=s&&i<=n&&(a=i),r>=s&&r<=n?o=r:n>=i&&n<=r&&(o=n),a==null||o==null||isNaN(a)||isNaN(o)?ka.empty:new ka({start:a===-1/0?null:new Date(a),end:o===1/0?null:new Date(o)})}offset(e,i,r=Qo){if(this.isEmpty||this.isAllTime)return this.clone();const s=new ka,{start:n,end:a}=this;return n!=null&&(s.start=xL(n,e,i,r)),a!=null&&(s.end=xL(a,e,i,r)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Qj.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new ka({start:i,end:r})}},ka=i0,i0);d([m({type:Date,json:{write:{allowNull:!0}}})],vr.prototype,"end",void 0),d([Ge("end")],vr.prototype,"readEnd",null),d([Le("end")],vr.prototype,"writeEnd",null),d([m({readOnly:!0,json:{read:!1}})],vr.prototype,"isAllTime",null),d([m({readOnly:!0,json:{read:!1}})],vr.prototype,"isEmpty",null),d([m({type:Date,json:{write:{allowNull:!0}}})],vr.prototype,"start",void 0),d([Ge("start")],vr.prototype,"readStart",null),d([Le("start")],vr.prototype,"writeStart",null),vr=ka=d([N("esri.time.TimeExtent")],vr);const Qj=new vr,Iye=new vr({start:void 0,end:void 0});let Lye=0,bi=class extends u3($m(bm)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new at(-180,-90,180,90,Ee.WGS84),this.id=Date.now().toString(16)+"-layer-"+Lye++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ee.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await K(async()=>{const{fromUrl:r}=await import("./arcgisLayers-wT09UdKH.js");return{fromUrl:r}},[],import.meta.url)).fromUrl(i)}static fromPortalItem(e){return Cye(e)}initialize(){this.when().catch(e=>{jr(e)||le.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Lr(this.url)}createLayerView(e,i){return Promise.reject(new G("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ot(e,{query:{f:"json"},responseType:"json"})).data;throw new G("layer:no-attribution-data","Layer does not have attribution data")}};d([m({type:String})],bi.prototype,"attributionDataUrl",void 0),d([m({readOnly:!0})],bi.prototype,"effectiveVisible",null),d([m({type:at})],bi.prototype,"fullExtent",void 0),d([m({readOnly:!0})],bi.prototype,"hasAttributionData",null),d([m({type:String,clonable:!1})],bi.prototype,"id",void 0),d([m({type:Boolean,nonNullable:!0})],bi.prototype,"legendEnabled",void 0),d([m({type:["show","hide","hide-children"]})],bi.prototype,"listMode",void 0),d([m({type:Number,range:{min:0,max:1},nonNullable:!0})],bi.prototype,"opacity",void 0),d([m({clonable:!1})],bi.prototype,"parent",void 0),d([m({readOnly:!0})],bi.prototype,"parsedUrl",null),d([m({type:Boolean,readOnly:!0})],bi.prototype,"persistenceEnabled",void 0),d([m({type:Boolean})],bi.prototype,"popupEnabled",void 0),d([m({type:Boolean})],bi.prototype,"attributionVisible",void 0),d([m({type:Ee})],bi.prototype,"spatialReference",void 0),d([m({type:String})],bi.prototype,"title",void 0),d([m({readOnly:!0,json:{read:!1}})],bi.prototype,"type",void 0),d([m()],bi.prototype,"url",void 0),d([m({type:vr})],bi.prototype,"visibilityTimeExtent",void 0),d([m({type:Boolean,nonNullable:!0})],bi.prototype,"visible",void 0),bi=d([N("esri.layers.Layer")],bi);const FS=new WeakMap;function Y4(t){return!t.destroyed&&(FS.has(t)||t.addHandles([_e(()=>{const{parent:e}=t;return!!(e&&e instanceof bi)&&(e.type==="catalog-dynamic-group"||Y4(e))},e=>FS.set(t,e),ps),vt(()=>FS.delete(t))]),FS.get(t))}function Kj(t,e){const i=t.parent,{layer:r}=t;if(r?.type!=="map-image"||!r.sourceJSON||!i)return!1;const s=r.sourceJSON.layers;if(!s)return!1;const n=s.find(o=>t.id===o.id),a=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return n?.type===a&&s.find(o=>o.id===i.id)?.type==="Catalog Layer"}function Aye(t){return PY(t)||kye(t)}function AY(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function ZUe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function Pye(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Oye(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function YUe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function kye(t){return t?.type==="scene"}function e9(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function By(t){return t?.type==="subtype-sublayer"}function PY(t){const e=t?.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function Rye(t){const e=t?.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const $L={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function HP(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function JUe(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function Dye(t){return t.type==="integrated-mesh-3dtiles"}function x3(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function XUe(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function Nye(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function OY(t){return AY(t)&&Nye(t)}function zye(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function J4(t,e){const i=pt?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.slice(0,r)}/rest/info`,n=e!=null?e.signal:null,{data:a}=await Ot(s,{query:{f:"json"},responseType:"json",signal:n});return a?.owningSystemUrl||null}function kY(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Fye(t){return kY(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Vye(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function jye(t){return!!Vye(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Uye(t,e){return null}function X4(t){return null}function Gye(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function t9(t,e){!e||!Gye(t)||Uye(t.url)}const qye=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Bye=new Set(["integrated-mesh-3dtiles"]),RY=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Hye=new Set([...RY,"link-chart"]);function Wye(t){switch(t.layerContainerType){case"basemap-base-layers":return qye;case"basemap-ground-layers":return Bye;case"operational-layers":return t.origin==="link-chart"?Hye:RY;default:return null}}function Zye(t,e){if(e.restrictedWebMapWriting){const i=Wye(e);return i==null||i.has(t.type)&&!x3(t)}return!0}function Yye(t,e){if(e)if(x3(t)){const i=Ew("featureCollection.layers",e),r=i?.[0]?.layerDefinition;r&&i9(t,r)}else t.type!=="group"&&i9(t,e)}function i9(t,e){"maxScale"in t&&(e.maxScale=UM(t.maxScale)??void 0),"minScale"in t&&(e.minScale=UM(t.minScale)??void 0)}function Jye(t,e){if(Yye(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=UM(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(x3(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function p$(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new G("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(x3(t)&&!t.isTable)e=t.resourceInfo;else if(Zye(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&Jye(t,e=J(e)),e}var r9,Hy,Xf;let Sn=(Xf=class extends Wd(bm){constructor(e){super(e),this[r9]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Hy.idCounter++,this.baseLayers=new $e,this.referenceLayers=new $e,this.groundLayers=new $e;const i=o=>{const{parent:u}=o;u&&u!==this&&"remove"in u&&u.remove?.(o),o.parent=this,o.type!=="elevation"&&o.type!=="integrated-mesh-3dtiles"||le.getLogger(this).error(`Layer '${o.title}, id:${o.id}' of type '${o.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=o=>{const{parent:u}=o;u&&u!==this&&"remove"in u&&u.remove?.(o),o.parent=this},s=o=>{const u=o.item;return u.parent===this?(le.getLogger(this).error(`Layer '${u.title}, id:${u.id}' of type '${u.type}' already a ground layer, second add will be ignored.`),void o.preventDefault()):u.type!=="integrated-mesh-3dtiles"&&u.type!=="integrated-mesh"?(le.getLogger(this).error(`Layer '${u.title}, id:${u.id}' of type '${u.type}' is not supported as a ground layer and will therefore be ignored.`),void o.preventDefault()):void 0},n=o=>{o.parent=null},a=o=>{o.parent===this&&(o.parent=null)};this.addHandles([this.baseLayers.on("after-add",o=>i(o.item)),this.baseLayers.on("after-remove",o=>n(o.item)),this.referenceLayers.on("after-add",o=>i(o.item)),this.referenceLayers.on("after-remove",o=>n(o.item)),this.groundLayers.on("before-add",s),this.groundLayers.on("after-add",o=>r(o.item)),this.groundLayers.on("after-remove",o=>a(o.item))])}initialize(){this.when().catch(e=>{le.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const s of e)s.destroyed||s.destroy();const i=this.groundLayers.toArray();for(const s of i)s.destroyed||s.destroy();const r=this.referenceLayers.toArray();for(const s of r)s.destroyed||s.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=xi(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",lu(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const s=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(n=>{const a=p$(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);a!=null&&s.push(a)}),this.referenceLayers.forEach(n=>{const a=p$(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);a!=null&&(n.type!=="scene"&&(a.isReference=!0),s.push(a))})),i.baseMapLayers=s}set groundLayers(e){this._set("groundLayers",lu(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const s=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(n=>{const a=p$(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);a!=null&&s.push(a)}),s.length>0&&(i.groundLayers=s))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",lu(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return x4(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>rb(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>rb(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>rb(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new Hy({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){return e=e||{},i?.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const s=J(r);return s.url&&fu(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&fu(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:s}=this;Wt(e);const n=[];if(i){const a=i.context?i.context.url:null;if(n.push(this._loadLayersFromJSON(i.data,a,e)),i.data.id&&!i.data.title){const o=i.data.id;n.push(Qpe(o).then(u=>{u&&this.read({title:u},i.context)}))}}else r?n.push(this._loadFromItem(r,e)):s&&n.push(this._loadFromStylesService(s,e));await Promise.all(n)}async _loadLayersFromJSON(e,i,r){const s=this.resourceInfo?.context,n=this.portalItem?.portal||s?.portal||null,a=Qye[s?.origin||""]??"web-map",{populateOperationalLayers:o}=await K(async()=>{const{populateOperationalLayers:h}=await Promise.resolve().then(()=>hae);return{populateOperationalLayers:h}},void 0,import.meta.url),u=[];if(Wt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...s,origin:a,url:i,portal:n,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},p=b=>a==="web-scene"&&b.layerType==="ArcGISSceneServiceLayer"||b.isReference,y=o(this.baseLayers,e.baseMapLayers.filter(b=>!p(b)),h);u.push(y);const v=o(this.referenceLayers,e.baseMapLayers.filter(p),h);u.push(v)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const h={context:{...s,origin:a,url:i,portal:n,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},p=o(this.groundLayers,e.groundLayers,h);u.push(p)}await Promise.allSettled(u)}async _loadFromItem(e,i){const r=await e.load(i),s=await r.fetchData("json",i),n=Lr(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:Xye[e.type||""]??"web-map",portal:e.portal||ge.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ge.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,s=`${r}/styles/${e.id}/self`,n=`${r}/webmaps/${e.id}`,a=e.apiKey??Tt.apiKeys.basemapStyles,[o,u]=await Promise.all([(await Ot(s,{query:{token:a},signal:i?.signal})).data,(await Ot(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:a},signal:i?.signal})).data]);this.thumbnailUrl??=o.thumbnailUrl;const h=Lr(n);if(this._set("resourceInfo",{data:u.baseMap??{},context:{origin:"web-map",url:h}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:u.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,h,i),a)for(const p of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in p&&(p.apiKey=a)}static fromId(e){const i=D0[e];return i?i.itemId?new Hy({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):Hy.fromJSON(i,i.is3d?{origin:"web-scene",portal:new ge({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},r9=MY,Hy=Xf,Xf.idCounter=0,Xf);d([m({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:$e}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Sn.prototype,"baseLayers",null),d([m({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:$e}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],Sn.prototype,"groundLayers",null),d([m({type:String,json:{origins:{"web-scene":{write:!0}}}})],Sn.prototype,"id",void 0),d([m({type:He})],Sn.prototype,"portalItem",void 0),d([m()],Sn.prototype,"referenceLayers",null),d([m({readOnly:!0})],Sn.prototype,"resourceInfo",void 0),d([m({type:Ee})],Sn.prototype,"spatialReference",void 0),d([m({type:Mye})],Sn.prototype,"style",void 0),d([m()],Sn.prototype,"thumbnailUrl",void 0),d([m({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Sn.prototype,"title",void 0),d([Le("title")],Sn.prototype,"writeTitle",null),Sn=Hy=d([N("esri.Basemap")],Sn);const Xye={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Qye={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Md=Sn,Kye=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),XM={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function DY(t){return!!XM[t]||!!XM[t.toLowerCase()]}function Q4(t){return XM[t]??XM[t.toLowerCase()]}function ege(t){return[...Q4(t)]}function ML(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function NY(t,e,i,r=1){const s=(t%360+360)%360/360,n=i<=.5?i*(e+1):i+e-i*e,a=2*i-n;return[Math.round(255*ML(a,n,s+1/3)),Math.round(255*ML(a,n,s)),Math.round(255*ML(a,n,s-1/3)),r]}function tge(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,n=e?t.length===9:t.length===5;let a=+("0x"+t.slice(1));if(isNaN(a))return null;const o=[0,0,0,1];let u;return n&&(u=a&r,a>>=i,o[3]=s*u/255),u=a&r,a>>=i,o[2]=s*u,u=a&r,a>>=i,o[1]=s*u,u=a&r,a>>=i,o[0]=s*u,o}function zY(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function FY(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const s=i.map(n=>2.56*parseFloat(n));return i.length===4&&(s[3]=parseFloat(i[3])),s9(s)}return s9(i.map(s=>parseFloat(s)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return NY(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function s9(t){return t[0]=jg(t[0]),t[1]=jg(t[1]),t[2]=jg(t[2]),t[3]=t.length===4?jY(t[3]):1,t}function VY(t){let e=DY(t)?Q4(t):null;return e??=FY(t),e??=zY(t),e}function QUe(t){const e=VY(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function jY(t){return UY(t,0,1)}function jg(t){return Math.round(UY(t,0,255))}function UY(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const GY=2.2,ige=1/GY;function KUe(t){return t**GY}function e7e(t){return t**ige}const n9=new Float32Array(1);function t7e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function ys(t,e,i){return Math.min(Math.max(t,e),i)}function i7e(t){return!(t&t-1)}function rge(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function h1(t,e,i){return t+(e-t)*i}function r7e(t,e,i,r,s){return h1(r,s,(t-e)/(i-e))}function au(t){return t*Math.PI/180}function qY(t){return 180*t/Math.PI}function s7e(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function n7e(t){return Math.acos(ys(t,-1,1))}function sge(t){return Math.asin(ys(t,-1,1))}function js(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function BY(t,e,i=1e-6){return!js(t,e,i)&&t>e}function WP(t,e,i=1e-6){return!js(t,e,i)&&t<e}function nge(t,e,i=1e-6){return js(t,e,i)||t>e}const QM=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function ZP(t){return QM.setFloat64(0,t),QM.getBigInt64(0)}function age(t){return QM.setBigInt64(0,t),QM.getFloat64(0)}const f$=1000000n,oge=HY(1);function HY(t){const e=ZP(t=Math.abs(t)),i=age(e<=f$?f$:e-f$);return Math.abs(t-i)}function a7e(t,e,i=oge){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&HY(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=ZP(t),s=ZP(e);return r<0!=s<0?!1:!((r<s?s-r:r-s)>f$)}function K4(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(r>.01*i)return!1}else if(r/(s+n)>i)return!1;return!0}function lge(t){return WY(Math.max(-YP,Math.min(t,YP)))}function WY(t){return n9[0]=t,n9[0]}function o7e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(js(e,1)&&js(i,1)&&js(r,1))}function l7e(t,e){return(t%e+e)%e}const YP=WY(34028234663852886e22);function u7e(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function VS(t){return ys(f4(t),0,255)}function jS(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let we=class Ra{static blendColors(e,i,r,s=new Ra){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=FY(e);return r?Ra.fromArray(r,i):null}static fromHex(e,i=new Ra){const r=zY(e);return r?Ra.fromArray(r,i):null}static fromArray(e,i=new Ra){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=VY(e);return r?Ra.fromArray(r,i):null}static fromJSON(e){return e!=null?new Ra([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??=[0,0,0,0],i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Ra.fromString(e,this):Array.isArray(e)?Ra.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Ra||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,r=e?.digits??6,s=r===3||r===4,n=r===4||r===8,a=`#${jS(this.r,s)}${jS(this.g,s)}${jS(this.b,s)}${n?jS(Math.round(255*this.a),s):""}`;return i?a.toUpperCase():a}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=VS(this.r),r=VS(this.g),s=VS(this.b);return e===0||this.a!==1?[i,r,s,VS(255*this.a)]:[i,r,s]}clone(){return new Ra(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=jg(this.r),this.g=jg(this.g),this.b=jg(this.b),this.a=jY(this.a),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};we.prototype.declaredClass="esri.Color";let Qa=class extends $e{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(lW(()=>this._refresh(),no))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new $e(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const a of n)e=this._processCollection(e,a);else e=this._processCollection(e,n)}}return e}};d([m()],Qa.prototype,"getCollections",void 0),d([m()],Qa.prototype,"getChildrenFunction",void 0),d([m()],Qa.prototype,"itemFilterFunction",void 0),Qa=d([N("esri.core.CollectionFlattener")],Qa);function je(t,e={}){const i=t instanceof wt?t:new wt(t,e),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:a,nonNullable:o,readOnly:u=!1}=e;return m({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:a,read:!u&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:o,readOnly:u})}var JP;let m$=JP=class extends ve{constructor(t){super(t),this.type="none"}clone(){return new JP({type:this.type})}};d([je({none:"none",stayAbove:"stay-above"}),m({json:{write:{isRequired:!0}}})],m$.prototype,"type",void 0),m$=JP=d([N("esri.ground.NavigationConstraint")],m$);const ZY=Symbol("GroundInstance");function h7e(t){return t!=null&&typeof t=="object"&&ZY in t}function eD(t){const e=f4(100*(1-t));return Math.max(0,Math.min(e,100))}function Hb(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var a9,XP,UB;let Da=XP=(UB=class extends Wd(bm){constructor(t){super(t),this[a9]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new $e;const e=r=>{const{parent:s}=r;s&&s!==this&&"remove"in s&&s.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&le.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new Qa({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{jr(t)||le.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)xi(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",lu(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const a={};Ule(n)().write(a,r)&&s.push(a)}else r?.messages&&r.messages.push(new G("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return x4(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:i}=await K(()=>import("./ElevationQuery-D96JKoyK.js"),__vite__mapDeps([6,7]),import.meta.url);return Wt(e),i(this.layers.filter(o9).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:i}=await K(()=>import("./ElevationQuery-D96JKoyK.js"),__vite__mapDeps([6,7]),import.meta.url);return Wt(e),i(this.layers.filter(o9).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:J(this.surfaceColor),navigationConstraint:J(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new XP({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=e?.origin||"web-scene",s=e?.portal||null,n=e?.url||null,{populateOperationalLayers:a}=await K(async()=>{const{populateOperationalLayers:u}=await Promise.resolve().then(()=>hae);return{populateOperationalLayers:u}},void 0,import.meta.url);Wt(i);const o=[];if(t.layers&&Array.isArray(t.layers)){const u={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};o.push(a(this.layers,t.layers,u))}await Promise.allSettled(o)}},a9=ZY,UB);function o9(t){return t&&"createElevationSampler"in t}d([m()],Da.prototype,"parent",void 0),d([m()],Da.prototype,"integratedMeshGround",null),d([m({json:{read:!1,write:{isRequired:!0}}})],Da.prototype,"layers",null),d([m()],Da.prototype,"allLayers",void 0),d([Le("layers")],Da.prototype,"writeLayers",null),d([m({readOnly:!0})],Da.prototype,"resourceInfo",void 0),d([m({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:bt,read:{reader:Hb,source:"transparency"},write:{writer:(t,e)=>{e.transparency=eD(t)},target:"transparency"}}})],Da.prototype,"opacity",void 0),d([m({type:we,json:{type:[bt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Da.prototype,"surfaceColor",void 0),d([m({type:m$,json:{write:!0}})],Da.prototype,"navigationConstraint",void 0),Da=XP=d([N("esri.Ground")],Da);const KM=Da,uge=Symbol("ClonableMixin"),yt=t=>{var s;var e;const i=t;let r=(s=class extends i{constructor(){super(...arguments),this[e]=!0}clone(n){const a=Us(this);Iw(a,"unable to clone instance of non-accessor class");const o=a.metadata,u=a.store,h={},p=new Map;for(const v in o){const b=o[v],w=u?.originOf(v),S=b.clonable;if(b.readOnly||S===!1||w!==7&&w!==0&&w!==5&&w!==4)continue;const M=this[v];let T=null;if(typeof S=="function")T=S(M,n);else if(S==="reference")T=M;else if(T=tP(M,n),M!=null&&T==null)continue;w===0?p.set(v,T):h[v]=T}const y=new(Object.getPrototypeOf(this)).constructor(h);if(p.size){const v=Us(y)?.store;if(v)for(const[b,w]of p)v.set(b,w,0)}return y}},e=uge,s);return r=d([N("esri.core.Clonable")],r),r},tD=yt(Ce),cge="randomUUID"in crypto;function _v(){if(cge)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function d7e(){return`{${_v().toUpperCase()}}`}function p7e(){return`{${_v()}}`}function hge(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const Sy={Base64:0,Hex:1,String:2,Raw:3},Ug=8,YY=(1<<Ug)-1;function yd(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function dge(t){const e=[];for(let i=0,r=t.length*Ug;i<r;i+=Ug)e[i>>5]|=(t.charCodeAt(i/Ug)&YY)<<i%32;return e}function pge(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Ug)e.push(String.fromCharCode(t[i>>5]>>>i%32&YY));return e.join("")}function fge(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function mge(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*t.length;s<n;s+=3){const a=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let o=0;o<4;o++)8*s+6*o>32*t.length?r.push("="):r.push(i.charAt(a>>6*(3-o)&63))}return r.join("")}function yge(t,e){return t<<e|t>>>32-e}function $3(t,e,i,r,s,n){return yd(yge(yd(yd(e,t),yd(r,n)),s),i)}function vs(t,e,i,r,s,n,a){return $3(e&i|~e&r,t,e,s,n,a)}function _s(t,e,i,r,s,n,a){return $3(e&r|i&~r,t,e,s,n,a)}function bs(t,e,i,r,s,n,a){return $3(e^i^r,t,e,s,n,a)}function ws(t,e,i,r,s,n,a){return $3(i^(e|~r),t,e,s,n,a)}function gge(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let a=0;a<t.length;a+=16){const o=i,u=r,h=s,p=n;i=vs(i,r,s,n,t[a],7,-680876936),n=vs(n,i,r,s,t[a+1],12,-389564586),s=vs(s,n,i,r,t[a+2],17,606105819),r=vs(r,s,n,i,t[a+3],22,-1044525330),i=vs(i,r,s,n,t[a+4],7,-176418897),n=vs(n,i,r,s,t[a+5],12,1200080426),s=vs(s,n,i,r,t[a+6],17,-1473231341),r=vs(r,s,n,i,t[a+7],22,-45705983),i=vs(i,r,s,n,t[a+8],7,1770035416),n=vs(n,i,r,s,t[a+9],12,-1958414417),s=vs(s,n,i,r,t[a+10],17,-42063),r=vs(r,s,n,i,t[a+11],22,-1990404162),i=vs(i,r,s,n,t[a+12],7,1804603682),n=vs(n,i,r,s,t[a+13],12,-40341101),s=vs(s,n,i,r,t[a+14],17,-1502002290),r=vs(r,s,n,i,t[a+15],22,1236535329),i=_s(i,r,s,n,t[a+1],5,-165796510),n=_s(n,i,r,s,t[a+6],9,-1069501632),s=_s(s,n,i,r,t[a+11],14,643717713),r=_s(r,s,n,i,t[a],20,-373897302),i=_s(i,r,s,n,t[a+5],5,-701558691),n=_s(n,i,r,s,t[a+10],9,38016083),s=_s(s,n,i,r,t[a+15],14,-660478335),r=_s(r,s,n,i,t[a+4],20,-405537848),i=_s(i,r,s,n,t[a+9],5,568446438),n=_s(n,i,r,s,t[a+14],9,-1019803690),s=_s(s,n,i,r,t[a+3],14,-187363961),r=_s(r,s,n,i,t[a+8],20,1163531501),i=_s(i,r,s,n,t[a+13],5,-1444681467),n=_s(n,i,r,s,t[a+2],9,-51403784),s=_s(s,n,i,r,t[a+7],14,1735328473),r=_s(r,s,n,i,t[a+12],20,-1926607734),i=bs(i,r,s,n,t[a+5],4,-378558),n=bs(n,i,r,s,t[a+8],11,-2022574463),s=bs(s,n,i,r,t[a+11],16,1839030562),r=bs(r,s,n,i,t[a+14],23,-35309556),i=bs(i,r,s,n,t[a+1],4,-1530992060),n=bs(n,i,r,s,t[a+4],11,1272893353),s=bs(s,n,i,r,t[a+7],16,-155497632),r=bs(r,s,n,i,t[a+10],23,-1094730640),i=bs(i,r,s,n,t[a+13],4,681279174),n=bs(n,i,r,s,t[a],11,-358537222),s=bs(s,n,i,r,t[a+3],16,-722521979),r=bs(r,s,n,i,t[a+6],23,76029189),i=bs(i,r,s,n,t[a+9],4,-640364487),n=bs(n,i,r,s,t[a+12],11,-421815835),s=bs(s,n,i,r,t[a+15],16,530742520),r=bs(r,s,n,i,t[a+2],23,-995338651),i=ws(i,r,s,n,t[a],6,-198630844),n=ws(n,i,r,s,t[a+7],10,1126891415),s=ws(s,n,i,r,t[a+14],15,-1416354905),r=ws(r,s,n,i,t[a+5],21,-57434055),i=ws(i,r,s,n,t[a+12],6,1700485571),n=ws(n,i,r,s,t[a+3],10,-1894986606),s=ws(s,n,i,r,t[a+10],15,-1051523),r=ws(r,s,n,i,t[a+1],21,-2054922799),i=ws(i,r,s,n,t[a+8],6,1873313359),n=ws(n,i,r,s,t[a+15],10,-30611744),s=ws(s,n,i,r,t[a+6],15,-1560198380),r=ws(r,s,n,i,t[a+13],21,1309151649),i=ws(i,r,s,n,t[a+4],6,-145523070),n=ws(n,i,r,s,t[a+11],10,-1120210379),s=ws(s,n,i,r,t[a+2],15,718787259),r=ws(r,s,n,i,t[a+9],21,-343485551),i=yd(i,o),r=yd(r,u),s=yd(s,h),n=yd(n,p)}return[i,r,s,n]}function iD(t,e=Sy.Hex){const i=e||Sy.Base64,r=gge(dge(t),t.length*Ug);switch(i){case Sy.Raw:return r;case Sy.Hex:return fge(r);case Sy.String:return pge(r);case Sy.Base64:return mge(r)}}function vge(t){return t&&"getAtOrigin"in t&&"originOf"in t}function QP(t){return rD[_ge(t)]||wge}function _ge(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:bge(t.url)}function bge(t){const e=bH(t);return KP[e]||JY}const rD={},JY="text/plain",wge=rD[JY],KP={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in KP)rD[KP[t]]=t;function Sge(t){const e=t?.origins??[void 0];return(i,r)=>{const s=xge(t,i,r);for(const n of e){const a=m4(i,n,r);for(const o in s)a[o]=s[o]}}}function xge(t,e,i){if(t?.type==="resource")return $ge(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:s}=Zue;return{read:r,write:s}}}}function $ge(t,e,i){const r=kw(e,i);return{type:String,read:(s,n,a)=>{const o=r3(s,n,a);return r.type===String?o:typeof r.type=="function"?new r.type({url:o}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(s,n,a,o){if(!o?.resources)return typeof s=="string"?void(n[a]=nm(s,o)):void(n[a]=s.write({},o));const u=Ege(s),h=nm(u,{...o,verifyItemRelativeUrls:o?.verifyItemRelativeUrls?{writtenUrls:o.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),p=r.type!==String&&(!vge(this)||o?.origin&&this.originIdOf(i)>Ic(o.origin)),y={object:this,propertyName:i,value:s,targetUrl:h,dest:n,targetPropertyName:a,context:o,params:t};o?.portalItem&&h&&!jn(h)?p&&t?.contentAddressed?eO(y):p?Mge(y):Tge(y):o?.portalItem&&(h==null||IH(h)!=null||nv(h)||p)?eO(y):n[a]=h}}}}function eO(t){const{targetUrl:e,params:i,value:r,context:s,dest:n,targetPropertyName:a}=t;if(!s.portalItem)return;const o=LH(e),u=QY(r,e,s);if(i?.contentAddressed&&u.type!=="json")return void s.messages?.push(new G("persistable:contentAddressingUnsupported",`Property "${a}" is trying to serializing a resource with content of type ${u.type} with content addressing. Content addressing is only supported for json resources.`,{content:u}));const h=i?.contentAddressed&&u.type==="json"?iD(u.jsonString):o?.filename??_v(),p=Cw(i?.prefix??o?.prefix,h),y=`${p}.${QP(u)}`;if(i?.contentAddressed&&s.resources&&u.type==="json"){const w=s.resources.toKeep.find(({resource:S})=>S.path===y)??s.resources.toAdd.find(({resource:S})=>S.path===y);if(w)return void(n[a]=w.resource.itemRelativeUrl)}const v=s.portalItem.resourceFromPath(y);nv(e)&&s.resources&&s.resources.pendingOperations.push(wue(e).then(w=>{v.path=`${p}.${QP({type:"blob",blob:w})}`,n[a]=v.itemRelativeUrl}).catch(()=>{}));const b=i?.compress??!1;s.resources&&XY({...t,resource:v,content:u,compress:b,updates:s.resources.toAdd}),n[a]=v.itemRelativeUrl}function Mge(t){const{context:e,targetUrl:i,params:r,value:s,dest:n,targetPropertyName:a}=t;if(!e.portalItem)return;const o=e.portalItem.resourceFromPath(i),u=QY(s,i,e),h=QP(u),p=bH(o.path),y=r?.compress??!1;h===p?(e.resources&&XY({...t,resource:o,content:u,compress:y,updates:e.resources.toUpdate}),n[a]=i):eO(t)}function Tge({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function XY({object:t,propertyName:e,updates:i,resource:r,content:s,compress:n}){const a=o=>{Cge(t,e,o)};i.push({resource:r,content:s,compress:n,finish:a})}function QY(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function Ege(t){return t==null?null:typeof t=="string"?t:t.url}function Cge(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let y$=class extends yt(ve){constructor(e){super(e),this.color=null}};d([m({type:we,json:{type:[bt],write:!0}})],y$.prototype,"color",void 0),y$=d([N("esri.effects.FocusAreaOutline")],y$);const Ige=y$;function M3(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function Td(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function m7e(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach(a=>{a.hasZ&&(s=!0),a.hasM&&(n=!0)}),r.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s&&a.hasZ){const u=.5*(a.zmax-a.zmin);for(let h=0;h<o.length;h++)o[h].push(u)}if(n&&a.hasM){const u=.5*(a.mmax-a.mmin);for(let h=0;h<o.length;h++)o[h].push(u)}return o})}return null}function T3(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function KY(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function Lge(t,e,i,r){return eJ(t,e,i[r],i[r+1])}function eJ(t,e,i,r){const[s,n]=e,[a,o]=i,[u,h]=r,p=u-a,y=h-o,v=p*p+y*y,b=(s-a)*p+(n-o)*y,w=Math.min(1,Math.max(0,b/v));return t[0]=a+p*w,t[1]=o+y*w,t}function Age(t,e,i,r,s,n){let a=i,o=r,u=s-a,h=n-o;if(u!==0||h!==0){const p=((t-a)*u+(e-o)*h)/(u*u+h*h);p>1?(a=s,o=n):p>0&&(a+=u*p,o+=h*p)}return u=t-a,h=e-o,u*u+h*h}function tJ(t,e){return KY(t,e,.5)}function Pge(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=T3(t[r],t[r+1]);return i}function y7e(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let s=0;s<i-1;++s){const n=T3(t[s],t[s+1]);if(e-r<n){const a=(e-r)/n;return KY(t[s],t[s+1],a)}r+=n}return t[i-1]}function iJ(t,e=0,i=1){let r=0;const s=t.length;let n=t[0];for(let a=1;a<s;a++){const o=t[a];r+=(o[e]-n[e])*(o[i]+n[i]),n=o}if(rJ(t)){const a=t[0];r+=(a[e]-n[e])*(a[i]+n[i])}return r>=0}function rJ(t){const e=t.length;return e>0&&!XT(t[0],t[e-1])}function g7e(t){"rings"in t&&(Oge(t),kge(t))}function Oge(t){if("rings"in t)for(const e of t.rings)rJ(e)&&e.push(e[0].slice())}function kge(t){if(!("rings"in t)||t.rings.length===0||iJ(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function v7e(t){return t.type!=="polygon"&&t.type!=="polyline"||Rge(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Rge(t,e){const i=Fs(e);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const a of t){let o=1/0,u=-1/0;for(const p of a){const y=Dge(p[0],r,s);o=Math.min(o,y),u=Math.max(u,y),p[0]=y}const h=u-o;n-h<h&&a.forEach(p=>{p[0]<0&&(p[0]+=n)})}}function Dge(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function _7e(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function b7e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function sJ(t){return zge(t.rings,t.hasZ??!1)}function Nge(t){const e=sJ(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[s,n,a]=e;return isNaN(s)||isNaN(n)||i&&isNaN(a)?null:{x:s,y:n,z:i?a:void 0,spatialReference:r}}function zge(t,e){if(!t?.length)return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,a=t.length;n<a;n++){const o=nJ(t[n],e,s);o&&r.push(o)}if(r.sort((n,a)=>{let o=n[2]-a[2];return o===0&&e&&(o=n[4]-a[4]),o}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=t[0]&&t[0].length?Vge(t[0],e):null;if(!n)return null;i[0]=n[0],i[1]=n[1],e&&n.length>2&&(i[2]=n[2])}return i}function nJ(t,e,i){let r=0,s=0,n=0,a=0,o=0;const u=t.length?t[0][0]:0,h=t.length?t[0][1]:0,p=t.length&&e?t[0][2]:0;for(let v=0;v<t.length;v++){const b=t[v],w=t[(v+1)%t.length],[S,M,T]=b,I=S-u,L=M-h,[O,R,z]=w,j=O-u,U=R-h,B=I*U-j*L;if(a+=B,r+=(I+j)*B,s+=(L+U)*B,e&&b.length>2&&w.length>2){const Q=T-p,oe=z-p,ue=I*oe-j*Q;n+=(Q+oe)*ue,o+=ue}S<i[0]&&(i[0]=S),S>i[1]&&(i[1]=S),M<i[2]&&(i[2]=M),M>i[3]&&(i[3]=M),e&&(T<i[4]&&(i[4]=T),T>i[5]&&(i[5]=T))}if(a>0&&(a*=-1),o>0&&(o*=-1),!a)return null;a*=.5,o*=.5;const y=[r/(6*a)+u,s/(6*a)+h,a];return e&&(i[4]===i[5]||o===0?(y[3]=(i[4]+i[5])/2,y[4]=0):(y[3]=n/(6*o)+p,y[4]=o)),y}function Fge(t,e){let i=0,r=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,a=t.pathSize?t.y:0;for(let o=0;o<t.pathSize;o++){t.seekInPath(o);const u=[t.x,t.y];t.seekInPath((o+1)%t.pathSize);const h=[t.x,t.y],[p,y]=u,v=p-n,b=y-a,[w,S]=h,M=w-n,T=S-a,I=v*T-M*b;s+=I,i+=(v+M)*I,r+=(b+T)*I,p<e[0]&&(e[0]=p),p>e[1]&&(e[1]=p),y<e[2]&&(e[2]=y),y>e[3]&&(e[3]=y)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+a,s]):null}function Vge(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,a=0,o=0;for(let u=0,h=t.length;u<h-1;u++){const p=t[u],y=t[u+1];if(p&&y){i[0]=p[0],i[1]=p[1],r[0]=y[0],r[1]=y[1],e&&p.length>2&&y.length>2&&(i[2]=p[2],r[2]=y[2]);const v=T3(i,r);if(v){s+=v;const b=tJ(p,y);n+=v*b[0],a+=v*b[1],e&&b.length>2&&(o+=v*b[2])}}}return s>0?e?[n/s,a/s,o/s]:[n/s,a/s]:t.length?t[0]:null}function aJ(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const a=nJ(Td(t),t.hasZ,n);a&&s.push(a)}if(s.sort((a,o)=>{let u=a[2]-o[2];return u===0&&e&&(u=a[4]-o[4]),u}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],e&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||e&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const a=t.pathSize?jge(t):null;if(!a)return null;r[0]=a[0],r[1]=a[1],e&&a.length>2&&(r[2]=a[2])}return r}function jge(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,a=0,o=0;if(t.nextPoint()){let u=t.x,h=t.y,p=t.z;for(;t.nextPoint();){const y=t.x,v=t.y,b=t.z;i[0]=u,i[1]=h,r[0]=y,r[1]=v,e&&(i[2]=p,r[2]=b);const w=T3(i,r);if(w){s+=w;const S=tJ(i,r);n+=w*S[0],a+=w*S[1],e&&S.length>2&&(o+=w*S[2])}u=y,h=v,p=b}}return s>0?e?[n/s,a/s,o/s]:[n/s,a/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Uge=1e-6;function Gge(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Uge){const s=aJ(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)Bge(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const qge=1/3;function Bge(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,a=i.x-r,o=i.y-s,u=0,h=0;for(;i.nextPoint();)u=i.x-r,h=i.y-s,n=.5*qge*(u*o-h*a),t[0]+=n*(a+u),t[1]+=n*(o+h),a=u,o=h;const p=i.getCurrentRingArea(),y=[r,s];return y[0]-=e[0],y[1]-=e[1],y[0]*=p,y[1]*=p,t[0]+=y[0],t[1]+=y[1],t}function Oi(t=Kge){return[t[0],t[1],t[2],t[3]]}function oJ(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function lJ(t,e,i,r,s=Oi()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function Hge(t,e=Oi()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Wge(t,e,i=new at){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function ms(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Zge(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function Yge(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function w7e(t,e,i){if(e!=null)if("length"in e)iO(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else oJ(i,t)}function S7e(t,e,i=t){const r=e.length;let s=t[0],n=t[1],a=t[2],o=t[3];for(let u=0;u<r;u++){const h=e[u];s=Math.min(s,h[0]),n=Math.min(n,h[1]),a=Math.max(a,h[0]),o=Math.max(o,h[1])}return i[0]=s,i[1]=n,i[2]=a,i[3]=o,i}function x7e(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function E3(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function C3(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function $7e(t){return E3(t)*C3(t)}function l9(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Jge(t){const e=E3(t),i=C3(t);return Math.sqrt(e*e+i*i)}function M7e(t,e){return!!t&&tO(t,e.x,e.y)}function tO(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function T7e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function E7e(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function Xge(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function C7e(t,e,i,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function Qge(t){return t?oJ(t,u9):Oi(u9)}function iO(t){return t!=null&&t.length===4}function I7e(t,e){return iO(t)&&iO(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const u9=[1/0,1/0,-1/0,-1/0],Kge=[0,0,0,0];let sD=1e-6;function dn(){return sD}function e0e(t){sD=t}const I3=Math.random,t0e=Math.PI/180,i0e=180/Math.PI;function nD(t){return t*t0e}function r0e(t){return t*i0e}function s0e(t,e){return Math.abs(t-e)<=sD*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:I3,equals:s0e,getEpsilon:dn,setEpsilon:e0e,toDegree:r0e,toRadian:nD},Symbol.toStringTag,{value:"Module"}));function Gg(t,e){return t[0]=e[0],t[1]=e[1],t}function ir(t,e,i){return t[0]=e,t[1]=i,t}function uJ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Wb(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function cJ(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function hJ(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function n0e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function a0e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function o0e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function l0e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function u0e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Uw(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function c0e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function L3(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function Zb(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function eT(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function dJ(t){const e=t[0],i=t[1];return e*e+i*i}function pJ(t,e){return t[0]=-e[0],t[1]=-e[1],t}function h0e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function rO(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function fJ(t,e){return t[0]*e[0]+t[1]*e[1]}function mJ(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function d0e(t,e,i,r){const s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t}function p0e(t,e=1){const i=2*I3()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function f0e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function As(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function g$(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function m0e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function y0e(t,e,i,r){const s=e[0]-i[0],n=e[1]-i[1],a=Math.sin(r),o=Math.cos(r);return t[0]=s*o-n*a+i[0],t[1]=s*a+n*o+i[1],t}function g0e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1];let a=i*i+r*r;a>0&&(a=1/Math.sqrt(a));let o=s*s+n*n;o>0&&(o=1/Math.sqrt(o));const u=(i*s+r*n)*a*o;return u>1?0:u<-1?Math.PI:Math.acos(u)}function v0e(t){return"vec2("+t[0]+", "+t[1]+")"}function _0e(t,e){return t[0]===e[0]&&t[1]===e[1]}function b0e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1],a=dn();return Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=a*Math.max(1,Math.abs(r),Math.abs(n))}function w0e(t,e,i,r,s){let n=e[0]-i[0],a=e[1]-i[1];const o=(r[0]*n+r[1]*a)*(s-1);return n=r[0]*o,a=r[1]*o,t[0]=e[0]+n,t[1]=e[1]+a,t}const S0e=eT,aD=Wb,x0e=cJ,$0e=hJ,M0e=L3,T0e=Zb,E0e=dJ;Object.freeze(Object.defineProperty({__proto__:null,add:uJ,angle:g0e,ceil:n0e,copy:Gg,cross:mJ,dist:M0e,distance:L3,div:$0e,divide:hJ,dot:fJ,equals:b0e,exactEquals:_0e,floor:a0e,inverse:h0e,len:S0e,length:eT,lerp:d0e,max:l0e,min:o0e,mul:x0e,multiply:cJ,negate:pJ,normalize:rO,projectAndScale:w0e,random:p0e,rotate:y0e,round:u0e,scale:Uw,scaleAndAdd:c0e,set:ir,sqrDist:T0e,sqrLen:E0e,squaredDistance:Zb,squaredLength:dJ,str:v0e,sub:aD,subtract:Wb,transformMat2:f0e,transformMat2d:As,transformMat3:g$,transformMat4:m0e},Symbol.toStringTag,{value:"Module"}));function Sc(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function hn(t,e){return Zb(t,e)}function L7e(t,e,i){const r=hn(e,i);if(r===0)return hn(e,t);const s=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return s*s/r}function C0e(t,e,i,r,s){const[n,a]=e,[o,u]=i,[h,p]=r,[y,v]=s,b=(n-o)*(p-v)-(a-u)*(h-y);if(b===0)return null;const w=(n*u-a*o)*(h-y)-(n-o)*(h*v-p*y),S=(n*u-a*o)*(p-v)-(a-u)*(h*v-p*y);return t[0]=w/b,t[1]=S/b,t}const Zo=2*Math.PI;function Bf(t,e){const i=Math.atan2(t,e);return i<0?i+Zo:i}function yJ(t){return Math.abs(t)%Zo}function c9(t){const e=yJ(t);return e<Math.PI?e:Zo-e}function A3(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function gJ(t,e,i,r){if(js(yJ(t-e),0))return i?[t,t]:[t,r?t-Zo:t+Zo];const[s,n]=r?[t-Zo,t]:[t,t+Zo];return[t,Gw({min:s,max:n},e)]}function Gw({min:t,max:e},i){let r;return r=e-i,r>=Zo?(r-=r%Zo,i+r):(r=i-t,r>=Zo?(r-=r%Zo,i-r):i)}function I0e(t,e){const i=Gw(t,e);return i>t.min&&i<t.max?i:c9(i-t.min)<c9(i-t.max)?t.min:t.max}function vJ(t,e,i,r=10){return e.map(s=>{let n=s;for(let a=0;a<r;a++){const[o,u,h,p,y,v]=i(n),b=t[0]-o,w=t[1]-u,S=-h,M=-p;n+=-(2*b*S+2*w*M)/(2*S*S+2*b*-y+2*M*M+2*w*-v||1e-6)}return n})}const L0e=[0,0];function _J(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function sO(t,e,i,r,s){const[n,a,o,u]=_J(s);return[t[0]*n+e[0]*a+i[0]*o+r[0]*u,t[1]*n+e[1]*a+i[1]*o+r[1]*u]}function h9(t,e,i,r,s){const[n,a,o,u]=_J(s);return t*n+e*a+i*o+r*u}function A7e(t,e,i){const r=t,[s,n,a]=e.b;return sO(r,n,a,s,i)}function A0e(t,e,i){const r=t,[s,n,a]=e.b,o=Sc([0,0],r,n,i),u=Sc(L0e,n,a,i),h=Sc([0,0],a,s,i),p=Sc([0,0],o,u,i),y=Sc([0,0],u,h,i);return[{b:[Sc([],p,y,i),o,p]},{b:[[...s],y,h]}]}function P7e(t,e,i){const r=t,[s,n,a]=e.b,o=vJ(i,[.1,.5,.9],y=>{const v=1-y,[b,w]=sO(r,n,a,s,y);return[b,w,3*v*v*(n[0]-r[0])+6*v*y*(a[0]-n[0])+3*y*y*(s[0]-a[0]),3*v*v*(n[1]-r[1])+6*v*y*(a[1]-n[1])+3*y*y*(s[1]-a[1]),6*v*(a[0]-2*n[0]+r[0])+6*y*(s[0]-2*a[0]+n[0]),6*v*(a[1]-2*n[1]+r[1])+6*y*(s[1]-2*a[1]+n[1])]}).map(y=>Math.min(1,Math.max(0,y)));o.push(0,1);let u=1/0;const h=o.map(y=>{const v=sO(r,n,a,s,y),[b,w]=v,S=i[0]-b,M=i[1]-w,T=Math.sqrt(S*S+M*M);return u=Math.min(T,u),{t:y,curvePoint:v,distance:T}}),p=[];for(const y of h){const{t:v,distance:b}=y;K4(b,u)&&!p.some(({t:w})=>js(w,v))&&p.push(y)}return p}function P0e(t,e,i){const r=e,[s,n,a]=i.b;if(ms(t,r),ms(t,s),tO(t,n[0],n[1])&&tO(t,a[0],a[1]))return t;for(const o of d9(r[0],n[0],a[0],s[0]))o>0&&o<1&&Zge(t,h9(r[0],n[0],a[0],s[0],o));for(const o of d9(r[1],n[1],a[1],s[1]))o>0&&o<1&&Yge(t,h9(r[1],n[1],a[1],s[1],o));return t}function d9(t,e,i,r){const s=3*(3*(e-i)-t+r),n=6*(t-2*e+i),a=3*(e-t);if(s===0)return n!==0?[-a/n]:[];const o=Math.sqrt(n*n-4*s*a);return[(-n+o)/(2*s),(-n-o)/(2*s)]}function O7e(t,e,i){let s=0,n=[e];for(let a=0;a<16;a++){let o=t;const u=[];for(const p of n)u.push(...A0e(o,p,.5)),o=p.b[0];n=u,o=t,s=0;let h=0;for(const p of n){const[y,v,b]=p.b,w=Math.sqrt(hn(o,y));s+=(w+(Math.sqrt(hn(o,v))+Math.sqrt(hn(v,b))+Math.sqrt(hn(b,y))))/2,h+=w,o=y}if(s-h<i)return s}return s}function O0e(t,e,i){const[r,s]=t,[n,a]=e,[o,u]=i,[h,p]=[n-r,a-s];let y=h*(o-r)+p*(u-s);y/=h**2+p**2,y=ys(y,0,1);const v=Sc([0,0],t,e,y);return{t:y,curvePoint:v,distance:Math.sqrt(hn(v,i))}}let bJ=class{constructor(e,i,r,s,n,a){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=s,this.thetaEnd=n,this.isInvalid=a}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:s}=this;return[e+r*Math.cos(s),i+r*Math.sin(s)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:s}=this;return[e+r*Math.cos(s),i+r*Math.sin(s)]}};function tT(t,e){const{cx:i,cy:r,radius:s}=t;return[i+s*Math.cos(e),r+s*Math.sin(e)]}function v$(t,e){if(t.isInvalid)return Sc([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return tT(t,i*(1-e)+r*e)}function R7e(t,e){if(t.isInvalid)return O0e(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:s,thetaEnd:n}=t,[a,o]=e,u=I0e(A3(s,n),Math.atan2(o-r,a-i)),h=tT(t,u);return{t:(u-s)/(n-s),curvePoint:h,distance:Math.sqrt(hn(e,h))}}function p9(t,e){if(e.isInvalid)return ms(t,e.startPoint),ms(t,e.endPoint),t;const{cx:i,cy:r,radius:s,thetaStart:n,thetaEnd:a}=e;ms(t,tT(e,n)),ms(t,tT(e,a));const o=A3(n,a),u=Math.PI/2;let h=0;for(const p of[[i+s,r],[i,r+s],[i-s,r],[i,r-s]])h=Gw(o,h),h>o.min&&h<o.max&&ms(t,p),h+=u;return t}function D7e(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function k0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function R0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function qg(t,e,i,r,s,n,a,o,u,h){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=a,t[6]=o,t[7]=u,t[8]=h,t}function wJ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function SJ(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function xJ(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5],u=e[6],h=e[7],p=e[8],y=p*a-o*h,v=-p*n+o*u,b=h*n-a*u;let w=i*y+r*v+s*b;return w?(w=1/w,t[0]=y*w,t[1]=(-p*r+s*h)*w,t[2]=(o*r-s*a)*w,t[3]=v*w,t[4]=(p*i-s*u)*w,t[5]=(-o*i+s*n)*w,t[6]=b*w,t[7]=(-h*i+r*u)*w,t[8]=(a*i-r*n)*w,t):null}function D0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5],u=e[6],h=e[7],p=e[8];return t[0]=a*p-o*h,t[1]=s*h-r*p,t[2]=r*o-s*a,t[3]=o*u-n*p,t[4]=i*p-s*u,t[5]=s*n-i*o,t[6]=n*h-a*u,t[7]=r*u-i*h,t[8]=i*a-r*n,t}function _$(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],u=t[7],h=t[8];return e*(h*n-a*u)+i*(-h*s+a*o)+r*(u*s-n*o)}function Yb(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=e[6],p=e[7],y=e[8],v=i[0],b=i[1],w=i[2],S=i[3],M=i[4],T=i[5],I=i[6],L=i[7],O=i[8];return t[0]=v*r+b*a+w*h,t[1]=v*s+b*o+w*p,t[2]=v*n+b*u+w*y,t[3]=S*r+M*a+T*h,t[4]=S*s+M*o+T*p,t[5]=S*n+M*u+T*y,t[6]=I*r+L*a+O*h,t[7]=I*s+L*o+O*p,t[8]=I*n+L*u+O*y,t}function nO(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=e[6],p=e[7],y=e[8],v=i[0],b=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=a,t[4]=o,t[5]=u,t[6]=v*r+b*a+h,t[7]=v*s+b*o+p,t[8]=v*n+b*u+y,t}function $J(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=e[6],p=e[7],y=e[8],v=Math.sin(i),b=Math.cos(i);return t[0]=b*r+v*a,t[1]=b*s+v*o,t[2]=b*n+v*u,t[3]=b*a-v*r,t[4]=b*o-v*s,t[5]=b*u-v*n,t[6]=h,t[7]=p,t[8]=y,t}function N0e(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function z0e(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function F0e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function V0e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function j0e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function U0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function G0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=i+i,o=r+r,u=s+s,h=i*a,p=r*a,y=r*o,v=s*a,b=s*o,w=s*u,S=n*a,M=n*o,T=n*u;return t[0]=1-y-w,t[3]=p-T,t[6]=v+M,t[1]=p+T,t[4]=1-h-w,t[7]=b-S,t[2]=v-M,t[5]=b+S,t[8]=1-h-y,t}function q0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],a=e[5],o=e[6],u=e[8],h=e[9],p=e[10],y=p*a-o*h,v=-p*n+o*u,b=h*n-a*u,w=i*y+r*v+s*b;if(!w)return null;const S=1/w;return t[0]=y*S,t[1]=(-p*r+s*h)*S,t[2]=(o*r-s*a)*S,t[3]=v*S,t[4]=(p*i-s*u)*S,t[5]=(-o*i+s*n)*S,t[6]=b*S,t[7]=(-h*i+r*u)*S,t[8]=(a*i-r*n)*S,t}function B0e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5],u=e[6],h=e[7],p=e[8],y=e[9],v=e[10],b=e[11],w=e[12],S=e[13],M=e[14],T=e[15],I=i*o-r*a,L=i*u-s*a,O=i*h-n*a,R=r*u-s*o,z=r*h-n*o,j=s*h-n*u,U=p*S-y*w,B=p*M-v*w,Q=p*T-b*w,oe=y*M-v*S,ue=y*T-b*S,Se=v*T-b*M;let me=I*Se-L*ue+O*oe+R*Q-z*B+j*U;return me?(me=1/me,t[0]=(o*Se-u*ue+h*oe)*me,t[1]=(u*Q-a*Se-h*B)*me,t[2]=(a*ue-o*Q+h*U)*me,t[3]=(s*ue-r*Se-n*oe)*me,t[4]=(i*Se-s*Q+n*B)*me,t[5]=(r*Q-i*ue-n*U)*me,t[6]=(S*j-M*z+T*R)*me,t[7]=(M*O-w*j-T*L)*me,t[8]=(w*z-S*O+T*I)*me,t):null}function H0e(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function W0e(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Z0e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Y0e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function MJ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function J0e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function X0e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Q0e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function K0e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],u=t[6],h=t[7],p=t[8],y=e[0],v=e[1],b=e[2],w=e[3],S=e[4],M=e[5],T=e[6],I=e[7],L=e[8],O=dn();return Math.abs(i-y)<=O*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-v)<=O*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(s-b)<=O*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(n-w)<=O*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-S)<=O*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(o-M)<=O*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(u-T)<=O*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-I)<=O*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-L)<=O*Math.max(1,Math.abs(p),Math.abs(L))}function eve(t){const e=dn(),i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],u=t[6],h=t[7],p=t[8];return Math.abs(1-(i*i+n*n+u*u))<=e&&Math.abs(1-(r*r+a*a+h*h))<=e&&Math.abs(1-(s*s+o*o+p*p))<=e}const tve=Yb,ive=MJ;Object.freeze(Object.defineProperty({__proto__:null,add:Y0e,adjoint:D0e,copy:R0e,determinant:_$,equals:K0e,exactEquals:Q0e,frob:Z0e,fromMat2d:U0e,fromMat4:k0e,fromQuat:G0e,fromRotation:V0e,fromScaling:j0e,fromTranslation:F0e,identity:wJ,invert:xJ,isOrthoNormal:eve,mul:tve,multiply:Yb,multiplyScalar:J0e,multiplyScalarAndAdd:X0e,normalFromMat4:B0e,normalFromMat4Legacy:q0e,projection:H0e,rotate:$J,scale:N0e,scaleByVec2:z0e,set:qg,str:W0e,sub:ive,subtract:MJ,translate:nO,transpose:SJ},Symbol.toStringTag,{value:"Module"}));function Mm(){return[1,0,0,0,1,0,0,0,1]}function rve(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function sve(t,e,i,r,s,n,a,o,u){return[t,e,i,r,s,n,a,o,u]}const nve=Mm();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:nve,clone:rve,create:Mm,fromValues:sve},Symbol.toStringTag,{value:"Module"}));const xy=Mm();function ave(t,e,i){const[r,s]=t,[n,a]=e,[o,u]=i;qg(xy,r,n,o,s,a,u,1,1,1);const h=_$(xy),p=4*h/(hn(t,e)+hn(e,i)+hn(i,t));if(!isFinite(p)||Math.abs(p)<1e-8)return null;const y=r**2+s**2,v=n**2+a**2,b=o**2+u**2;qg(xy,y,v,b,s,a,u,1,1,1);const w=_$(xy);return qg(xy,y,v,b,r,n,o,1,1,1),[w/h*.5,_$(xy)/h*-.5]}function TJ(t,e){const[i,r]=e.c,s=ave(t,r,i),n=s==null,a=s??Sc([],t,i,.5),[o,u]=t,[h,p]=r,[y,v]=i,[b,w]=a,S=o-b,M=u-w,T=Math.sqrt(S*S+M*M),I=Bf(u-w,o-b),L=Bf(p-w,h-b);let O=Bf(v-w,y-b);return(L-I)*(O-L)<0&&(O+=2*Math.sign(I-O)*Math.PI),new bJ(b,w,T,I,O,n)}function N7e(t,e,i){const r=v$(t,i/2),s=v$(t,i),n=v$(t,(i+1)/2);return[{c:[s,r]},{c:[[...e.c[0]],n]}]}function z7e(t,e){const[i]=e.c,{cx:r,cy:s,thetaStart:n,thetaEnd:a,radius:o,isInvalid:u}=TJ(t,e);return{a:[i,[r,s],Math.abs(a-n)<Math.PI?1:0,n>a?1:0,u?n:0,o,u?0:1]}}function F7e(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function V7e(t){return"curveRings"in t?t.curveRings:t.curvePaths}function oD(t){return"b"in t}function lD(t){return"c"in t}function P3(t){return Array.isArray(t)}function j7e(t){return"a"in t}function EJ(t){return"a"in t&&t.a.length===4}function ove(t){return"a"in t&&t.a.length===7}function TL(t){return P3(t)?t:oD(t)?t.b[0]:lD(t)?t.c[0]:t.a[0]}function lve(t){if(oD(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(lD(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(P3(t))return[...t];if(EJ(t)){const[e,i,r,s]=t.a;return{a:[[...e],[...i],r,s]}}if(ove(t)){const[e,i,r,s,n,a,o]=t.a;return{a:[[...e],[...i],r,s,n,a,o]}}return t}function uve(t,e){const[i,r,s,n]=e.a,[a,o]=t,[u,h]=i,[p,y]=r,v=a-p,b=o-y,w=Math.sqrt(v*v+b*b),S=u-p,M=h-y,T=Math.sqrt(S*S+M*M),I=w===0||T===0||!K4(w,T),L=w,[O,R]=gJ(Bf(o-y,a-p),Math.atan2(h-y,u-p),s,n);return new bJ(p,y,L,O,R,I)}function U7e(t,e,i){const{cx:r,cy:s,thetaStart:n,thetaEnd:a}=t,[o,u,h,p]=e.a,y=n*(1-i)+a*i;return[{a:[v$(t,i),[r,s],Math.abs(y-n)<Math.PI?1:0,p]},{a:[[...o],[r,s],Math.abs(a-y)<Math.PI?1:0,p]}]}let cve=class{constructor(e,i,r,s,n,a,o,u,h){this.cx=e,this.cy=i,this.a=r,this.b=s,this.cosR=n,this.sinR=a,this.u1=o,this.u2=u,this.isInvalid=h}};function uD(t,e){const[i,r,s,n,a,o,u]=e.a,[h,p]=t,[y,v]=i,[b,w]=r,S=o*u,M=Math.cos(a),T=Math.sin(a),[I,L]=gJ(Bf(1/S*(p-w)*M-1/S*(h-b)*T,1/o*(p-w)*T+1/o*(h-b)*M),Math.atan2(1/S*(v-w)*M-1/S*(y-b)*T,1/o*(v-w)*T+1/o*(y-b)*M),s,n);return new cve(b,w,o,S,M,T,I,L,o===0||S===0)}function Jb(t,e){const{a:i,b:r,cosR:s,sinR:n,cx:a,cy:o}=t,u=Math.cos(e),h=Math.sin(e);return[i*u*s-r*h*n+a,i*u*n+r*h*s+o]}function Wy(t,e){const{u1:i,u2:r}=t;return Jb(t,i*(1-e)+r*e)}function q7e(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[lve(e)];const[r,[s,n],a,o,u,h,p]=e.a,{u1:y,u2:v}=t,b=y*(1-i)+v*i;return[{a:[[...Wy(t,i)],[s,n],Math.abs(b-y)<Math.PI?1:0,o,u,h,p]},{a:[[...r],[s,n],Math.abs(v-b)<Math.PI?1:0,o,u,h,p]}]}function B7e(t,e){const{a:i,b:r,cosR:s,sinR:n,u1:a,u2:o}=t,u=Math.PI/6,h=vJ(e,[1*u,2*u,4*u,5*u,7*u,8*u,10*u,11*u],S=>{const M=Math.cos(S),T=Math.sin(S),[I,L]=Jb(t,S);return[I,L,-i*s*T-r*n*M,-i*n*T+r*s*M,-i*s*M+r*n*T,-i*n*M-r*s*T]}),p=A3(a,o),y=new Set(h.map(S=>Gw(p,S)).filter(S=>S>p.min&&S<p.max));y.add(a),y.add(o);let v,b,w=1/0;for(const S of y){const M=Jb(t,S),[T,I]=M,L=e[0]-T,O=e[1]-I,R=L*L+O*O;R<w&&(v=(S-a)/(o-a),b=M,w=R)}return{t:v,curvePoint:b,distance:Math.sqrt(w)}}function hve(t,e,i){const r=uD(e,i),{a:s,b:n,u1:a,u2:o,cosR:u,sinR:h,isInvalid:p}=r,y=i.a[0];if(ms(t,e),ms(t,y),p)return t;const v=Math.atan2(-n*h,s*u),b=v+Math.PI,w=Math.atan2(n*u,s*h),S=w+Math.PI,M=A3(a,o);for(const T of[v,b,w,S].map(I=>Gw(M,I)))T>M.min&&T<M.max&&ms(t,Jb(r,T));return t}function H7e(t,e,i){const[r,s,n,a,o,u,h]=e.a,p=uD(t,e),{u1:y,u2:v,isInvalid:b}=p,w=v-y;if(b)return Math.sqrt(hn(t,r));const S=14,M=[0,0];let T=0,I=[Wy(p,0),Wy(p,.25),Wy(p,.5),Wy(p,.75),Wy(p,1)];for(let L=0;L<S;L++){const O=I.length-1,R=w/(2*O),z=[];for(let U=0;U<O;U++)z.push(I[U]),z.push(Jb(p,y+(2*U+1)*R));z.push(I[I.length-1]),I=z,T=0;let j=0;for(let U=1;U<I.length;U++){const B=I[U-1],Q=I[U];if(T+=Math.sqrt(hn(B,Q)),U>1){const oe=I[U-2],ue=C0e(M,oe,B,s,Q);j+=ue?Math.sqrt(hn(B,ue)):Math.abs(Q[0]-B[0])+Math.abs(Q[1]-B[1])}else j+=T}if(j-T<i)return T}return T}const f9=Mm(),US=Mm(),m9=Mm(),Oh=Mm();function W7e(t,e,i){const[r,s,n,a,o,u,h]=e.a,p=uD(t,e),{cosR:y,sinR:v,a:b,b:w,cx:S,cy:M}=p,T=g$([0,0],r,i),I=g$([0,0],s,i),L=i[0]*i[4]<0?1-a:a;{const O=b*b*v*v+w*w*y*y,R=2*(w*w-b*b)*v*y,z=b*b*y*y+w*w*v*v,j=-2*O*S-R*M,U=-R*S-2*z*M;qg(f9,O,R/2,j/2,R/2,z,U/2,j/2,U/2,O*S*S+R*S*M+z*M*M-b*b*w*w)}if(xJ(US,i),US==null){const O=g$([0,0],t,i);return{a:[T,I,n,a,Bf(T[1],T[0]),Math.sqrt(hn(T,O))/2,0]}}SJ(m9,US),Yb(Oh,Yb(Oh,m9,f9),US);{const O=Oh[0],R=2*Oh[1],z=Oh[4],j=2*Oh[2],U=2*Oh[5],B=R*R-4*O*z,Q=2*(O*U*U+z*j*j-R*j*U+B*Oh[8]),oe=Math.sqrt((O-z)**2+R*R),ue=-Math.sqrt(Q*(O+z+oe))/B,Se=-Math.sqrt(Q*(O+z-oe))/B;return{a:[T,I,n,L,.5*Bf(-R,z-O),ue,Se/ue]}}}function dve(t,e,i){if(P3(i))return ms(t,e),ms(t,i),t;if(oD(i))return P0e(t,e,i);if(lD(i)){const r=TJ(e,i);return p9(t,r)}if(EJ(i)){const r=uve(e,i);return p9(t,r)}return hve(t,e,i)}function CJ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function IJ(t){return t.points!==void 0}function LJ(t){return t.x!==void 0&&t.y!==void 0}function AJ(t){return t.paths!==void 0}function PJ(t){return t.rings!==void 0}function OJ(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const gd=OJ(Math.min),vd=OJ(Math.max);function cD(t,e){return AJ(e)?z0(t,e.curvePaths??e.paths,!1,!1)??t:PJ(e)?z0(t,e.curveRings??e.rings,!1,!1)??t:IJ(e)?hD(t,e.points,!1,!1,!1,!1):CJ(e)?RJ(t,e):(LJ(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function qw(t){let e,i,r,s;for(t.reset(),e=r=1/0,i=s=-1/0;t.nextPath();){const n=kJ(t);e=Math.min(n[0],e),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return Oi([e,r,i,s])}function kJ(t){let e,i,r,s;for(e=r=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),s=Math.max(t.y,s);return Oi([e,r,i,s])}function Z7e(t,e){return AJ(e)?z0(t,e.curvePaths??e.paths,!0,!1)??t:PJ(e)?z0(t,e.curveRings??e.rings,!0,!1)??t:IJ(e)?hD(t,e.points,!0,!1,!0,!1):CJ(e)?RJ(t,e,!0,!1,!0,!1):(LJ(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function z0(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let n,a,o,u,[h,p]=TL(e[0][0]),y=h,v=p;for(let b=0;b<e.length;b++){const w=e[b];for(let S=0;S<w.length;S++){const M=TL(w[S]),[T,I]=M;if(h=gd(h,T),p=gd(p,I),y=vd(y,T),v=vd(v,I),i&&M.length>2){const z=M[2];n=gd(n,z),a=vd(a,z)}if(r&&M.length>s){const z=M[s];o=gd(n,z),u=vd(a,z)}const L=w[S];if(P3(L)||S<1)continue;const O=TL(w[S-1]),R=lJ(h,p,y,v);[h,p,y,v]=dve(R,O,L)}}return i?r?(t[0]=h,t[1]=p,t[2]=n,t[3]=o,t[4]=y,t[5]=v,t[6]=a,t[7]=u,t.length=8,t):(t[0]=h,t[1]=p,t[2]=n,t[3]=y,t[4]=v,t[5]=a,t.length=6,t):r?(t[0]=h,t[1]=p,t[2]=o,t[3]=y,t[4]=v,t[5]=u,t.length=6,t):(t[0]=h,t[1]=p,t[2]=y,t[3]=v,t.length=4,t)}function RJ(t,e,i,r,s,n){const a=e.xmin,o=e.xmax,u=e.ymin,h=e.ymax;let p=e.zmin,y=e.zmax,v=e.mmin,b=e.mmax;return s?(p=p||0,y=y||0,n?(v=v||0,b=b||0,t[0]=a,t[1]=u,t[2]=p,t[3]=v,t[4]=o,t[5]=h,t[6]=y,t[7]=b,t):(t[0]=a,t[1]=u,t[2]=p,t[3]=o,t[4]=h,t[5]=y,t)):n?(v=v||0,b=b||0,t[0]=a,t[1]=u,t[2]=v,t[3]=o,t[4]=h,t[5]=b,t):(t[0]=a,t[1]=u,t[2]=o,t[3]=h,t)}function hD(t,e,i,r,s,n){const a=i?3:2,o=r&&n,u=i&&s;if(!e.length||!e[0].length)return null;let h,p,y,v,[b,w]=e[0],[S,M]=e[0];for(let T=0;T<e.length;T++){const I=e[T],[L,O]=I;if(b=gd(b,L),w=gd(w,O),S=vd(S,L),M=vd(M,O),u&&I.length>2){const R=I[2];h=gd(h,R),p=vd(p,R)}if(o&&I.length>a){const R=I[a];y=gd(h,R),v=vd(p,R)}}return s?(h=h||0,p=p||0,n?(y=y||0,v=v||0,t[0]=b,t[1]=w,t[2]=h,t[3]=y,t[4]=S,t[5]=M,t[6]=p,t[7]=v,t):(t[0]=b,t[1]=w,t[2]=h,t[3]=S,t[4]=M,t[5]=p,t)):n?(y=y||0,v=v||0,t[0]=b,t[1]=w,t[2]=y,t[3]=S,t[4]=M,t[5]=v,t):(t[0]=b,t[1]=w,t[2]=S,t[3]=M,t)}function pve(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function fve(t){return t.points!==void 0}function mve(t){return t.x!==void 0&&t.y!==void 0}function yve(t){return t.paths!==void 0}function gve(t){return t.rings!==void 0}const dD=[];function DJ(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function NJ(t,e,i,r,s,n){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:n}}function zJ(t,e,i,r,s,n){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:n}}function FJ(t,e,i,r,s,n,a,o){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:n,zmax:a,mmax:o}}function pD(t,e=!1,i=!1){return e?i?FJ(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):NJ(t[0],t[1],t[2],t[3],t[4],t[5]):i?zJ(t[0],t[1],t[2],t[3],t[4],t[5]):DJ(t[0],t[1],t[2],t[3])}function Y7e(t){return t?pve(t)?t:mve(t)?vve(t):gve(t)?jJ(t):yve(t)?UJ(t):fve(t)?VJ(t):null:null}function VJ(t){const{hasZ:e,hasM:i,points:r}=t,s=hD(dD,r,e??!1,i??!1,e??!1,i??!1);return s?pD(s,e,i):null}function vve(t){const{x:e,y:i,z:r,m:s}=t,n=s!=null;return r!=null?n?FJ(e,i,r,s,e,i,r,s):NJ(e,i,r,e,i,r):n?zJ(e,i,s,e,i,s):DJ(e,i,e,i)}function jJ(t){const{hasZ:e,hasM:i,rings:r,curveRings:s}=t,n=z0(dD,s??r,e??!1,i??!1);return n?pD(n,e,i):null}function UJ(t){const{hasZ:e,hasM:i,paths:r,curvePaths:s}=t,n=z0(dD,s??r,e??!1,i??!1);return n?pD(n,e,i):null}function F0(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var b$;function y9(t){return!Array.isArray(t[0])}function _ve(t){return typeof t[0]?.[0]=="number"}function bve(t){if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??=[],_ve(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=Ee.WGS84,{...t,hasM:i,hasZ:r,rings:e,spatialReference:s}}let pi=b$=class extends Vr{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,s=!1;for(const a of e)a.hasZ&&(r=!0),a.hasM&&(s=!0);const n={rings:e.map(a=>{const o=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(r&&a.hasZ){const u=a.zmin+.5*(a.zmax-a.zmin);for(let h=0;h<o.length;h++)o[h].push(u)}if(s&&a.hasM){const u=a.mmin+.5*(a.mmax-a.mmin);for(let h=0;h<o.length;h++)o[h].push(u)}return o}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new b$(n)}constructor(t){super(bve(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){dP(le.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=Nge(this);return t?Ne.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=J(t)}get extent(){const t=jJ(this),{spatialReference:e}=this;return t?new at({...t,spatialReference:e}):null}get isSelfIntersecting(){return dP(le.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),zpe(this.rings)}writeRings(t,e){e.rings=J(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(y9(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new b$;return t.spatialReference=this.spatialReference,t.rings=J(this.rings),t.curveRings=J(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,n,a,o],[u,h,p,y])=>s===u&&n===h&&(a==null&&p==null||a===p)&&(o==null&&y==null||o===y);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],a=t.rings[s];if(!XT(n,a,r))return!1}return!0}contains(t){if(!t)return!1;const e=m3(t,this.spatialReference);return P4(this,e??t)}isClockwise(t){const e=y9(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return iJ(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Ne(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ne(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ne(i[0],i[1],i[2],i[3],this.spatialReference):new Ne(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(F0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ne(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Ne(s,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(F0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],pi.prototype,"cache",null),d([m({readOnly:!0})],pi.prototype,"centroid",null),d([m({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],pi.prototype,"curveRings",void 0),d([Le("curveRings")],pi.prototype,"writeCurveRings",null),d([m({readOnly:!0})],pi.prototype,"extent",null),d([m({readOnly:!0})],pi.prototype,"isSelfIntersecting",null),d([m({type:[[[Number]]],json:{write:{isRequired:!0}}})],pi.prototype,"rings",void 0),d([Le("rings")],pi.prototype,"writeRings",null),pi=b$=d([N("esri.geometry.Polygon")],pi),pi.prototype.toJSON.isDefaultToJSON=!0;function Yd(){return[0,0,0]}function wve(t){return[t[0],t[1],t[2]]}function bv(t,e,i){return[t,e,i]}function Sve(t,e,i){return[t,e,i]}function xve(t,e=Yd()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function GJ(){return Yd()}function qJ(){return bv(1,1,1)}function BJ(){return bv(1,0,0)}function HJ(){return bv(0,1,0)}function WJ(){return bv(0,0,1)}const $ve=GJ(),ZJ=qJ(),Mve=BJ(),Tve=HJ(),Eve=WJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:ZJ,UNIT_X:Mve,UNIT_Y:Tve,UNIT_Z:Eve,ZEROS:$ve,clone:wve,create:Yd,freeze:Sve,fromArray:xve,fromValues:bv,ones:qJ,unitX:BJ,unitY:HJ,unitZ:WJ,zeros:GJ},Symbol.toStringTag,{value:"Module"}));var aO;function Cve(t){if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=Ee.WGS84,{...t,hasM:i,hasZ:r,points:e,spatialReference:s}}let zo=aO=class extends Vr{constructor(t){super(Cve(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=VJ(this);return t?new at({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=J(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new aO({points:J(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return F0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Ne(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ne(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(F0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};d([m({readOnly:!0})],zo.prototype,"cache",null),d([m({readOnly:!0})],zo.prototype,"extent",null),d([m({type:[[Number]],json:{write:{isRequired:!0}}})],zo.prototype,"points",void 0),d([Le("points")],zo.prototype,"writePoints",null),zo=aO=d([N("esri.geometry.Multipoint")],zo),zo.prototype.toJSON.isDefaultToJSON=!0;var oO;function Ive(t){return!Array.isArray(t[0])}function Lve(t){return typeof t[0]?.[0]=="number"}function Ave(t){if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??=[],Lve(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=Ee.WGS84,{...t,hasM:i,hasZ:r,paths:e,spatialReference:s}}let rr=oO=class extends Vr{constructor(t){super(Ave(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=J(t)}get extent(){const t=UJ(this),{spatialReference:e}=this;return t?new at({...t,spatialReference:e}):null}writePaths(t,e){e.paths=J(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(Ive(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new oO;return t.spatialReference=this.spatialReference,t.paths=J(this.paths),t.curvePaths=J(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Ne(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ne(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ne(i[0],i[1],i[2],i[3],this.spatialReference):new Ne(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(F0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Ne(s,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ne(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(F0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([m({readOnly:!0})],rr.prototype,"cache",null),d([m({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],rr.prototype,"curvePaths",void 0),d([Le("curvePaths")],rr.prototype,"writeCurvePaths",null),d([m({readOnly:!0})],rr.prototype,"extent",null),d([m({type:[[[Number]]],json:{write:{isRequired:!0}}})],rr.prototype,"paths",void 0),d([Le("paths")],rr.prototype,"writePaths",null),rr=oO=d([N("esri.geometry.Polyline")],rr),rr.prototype.toJSON.isDefaultToJSON=!0;var lO;let Zy=lO=class extends Ce{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new lO({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};d([m()],Zy.prototype,"isInverse",void 0),d([m()],Zy.prototype,"wkt",void 0),d([m()],Zy.prototype,"wkid",void 0),Zy=lO=d([N("esri.geometry.operators.support.GeographicTransformationStep")],Zy);var uO;let lb=uO=class extends Ce{constructor(t){super(t),this.steps=[]}getInverse(){const t=new uO;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};d([m({type:[Zy],nonNullable:!0})],lb.prototype,"steps",void 0),lb=uO=d([N("esri.geometry.operators.support.GeographicTransformation")],lb);const Dn=Math.PI/180,Pve=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,kh=Vi.radius,bo=Vi.eccentricitySquared,Ove={a1:kh*bo,a2:kh*bo*kh*bo,a3:kh*bo*bo/2,a4:kh*bo*kh*bo*2.5,a5:kh*bo+kh*bo*bo/2,a6:1-bo},kve={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Vi.radius,f:Vi.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Nd.radius,f:Nd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:uu.radius,f:uu.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:uu.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},Rve={2:{5:Ii,7:null,9:null,10:Ii,1:cb,6:null,8:null,0:null,3:Bg,11:Hg,2:Ii,4:Yg},5:{5:Ii,7:null,9:null,10:Ii,1:cb,6:null,8:null,0:null,3:Bg,11:Hg,2:Ii,4:Yg},7:{5:null,7:Ii,9:null,10:Ii,1:null,6:_9,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Ii,10:Ii,1:null,6:null,8:v9,0:null,3:null,11:null,2:null,4:null},3:{5:ub,7:null,9:null,10:ub,1:Nve,6:null,8:null,0:null,3:Ii,11:Vve,2:ub,4:zve},4:{5:Jg,7:null,9:null,10:Jg,1:Yve,6:null,8:null,0:null,3:Jve,11:jve,2:Jg,4:Ii},1:{5:Zg,7:null,9:null,10:Zg,1:Ii,6:null,8:null,0:null,3:Hve,11:Uve,2:Zg,4:Wve},6:{5:null,7:w9,9:null,10:w9,1:null,6:Ii,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:b9,10:b9,1:null,6:null,8:Ii,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Ii,3:null,11:null,2:null,4:null},10:{5:Ii,7:Ii,9:Ii,10:Ii,1:cb,6:_9,8:v9,0:null,3:Bg,11:Hg,2:Ii,4:Yg},11:{5:Wg,7:null,9:null,10:Wg,1:Gve,6:null,8:null,0:null,3:qve,11:Ii,2:Wg,4:Bve}};function YJ(t,e){return Dve(t,e)?.projector}function Dve(t,e){if(t==null||e==null)return null;if(Vu.source.spatialReference===t&&Vu.dest.spatialReference===e)return Vu;const i=g9(t,Vu.source),r=g9(e,Vu.dest);return i===0&&r===0?Ar(t,e)?Vu.projector=Ii:Vu.projector=null:Vu.projector=Rve[i][r],Vu}function g9(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=ba(t,1)),qM(t)?e.spatialReferenceId=1:Fd(t)?e.spatialReferenceId=2:Xo(t)?e.spatialReferenceId=3:Gde(t)?e.spatialReferenceId=11:t.wkt===Wde.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===I4.wkt?e.spatialReferenceId=6:t.wkt===L4.wkt?e.spatialReferenceId=8:T4(t)?e.spatialReferenceId=7:E4(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Ii(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function ub(t,e,i,r){i[r]=j0*(t[e]/Hf),i[r+1]=j0*(JJ-2*Math.atan(Math.exp(-t[e+1]/Hf))),i[r+2]=t[e+2]}function Nve(t,e,i,r){const s=t[e]/Hf,n=JJ-2*Math.atan(Math.exp(-t[e+1]/Hf)),a=Hf+t[e+2],o=Math.cos(n)*a;i[r]=Math.cos(s)*o,i[r+1]=Math.sin(s)*o,i[r+2]=Math.sin(n)*a}function zve(t,e,i,r){ub(t,e,i,r),Yg(i,r,i,r)}function Fve(t,e,i,r,s){const n=.4999999*Math.PI,a=ys(V0*t[e+1],-n,n),o=Math.sin(a);i[r++]=V0*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+o)/(1-o)),i[r]=t[e+2]}function Bg(t,e,i,r){Fve(t,e,i,r,Vi)}function Hg(t,e,i,r){i[r]=t[e]*S9,i[r+1]=t[e+1]*S9,i[r+2]=t[e+2]}function Wg(t,e,i,r){i[r]=t[e]*x9,i[r+1]=t[e+1]*x9,i[r+2]=t[e+2]}function Vve(t,e,i,r){ub(t,e,i,r),Hg(i,r,i,r)}function jve(t,e,i,r){Jg(t,e,i,r),Hg(i,r,i,r)}function Uve(t,e,i,r){Zg(t,e,i,r),Hg(i,r,i,r)}function Gve(t,e,i,r){Wg(t,e,i,r),cb(i,r,i,r)}function qve(t,e,i,r){Wg(t,e,i,r),Bg(i,r,i,r)}function Bve(t,e,i,r){Wg(t,e,i,r),Yg(i,r,i,r)}function fD(t,e,i,r,s){const n=s+t[e+2],a=V0*t[e+1],o=V0*t[e],u=Math.cos(a)*n;i[r]=Math.cos(o)*u,i[r+1]=Math.sin(o)*u,i[r+2]=Math.sin(a)*n}function v9(t,e,i,r){fD(t,e,i,r,Nd.radius)}function _9(t,e,i,r){fD(t,e,i,r,uu.radius)}function cb(t,e,i,r){fD(t,e,i,r,Vi.radius)}function mD(t,e,i,r,s){const n=t[e],a=t[e+1],o=t[e+2],u=Math.sqrt(n*n+a*a+o*o),h=sge(o/(u===0?1:u)),p=Math.atan2(a,n);i[r++]=j0*p,i[r++]=j0*h,i[r]=u-s}function b9(t,e,i,r){mD(t,e,i,r,Nd.radius)}function w9(t,e,i,r){mD(t,e,i,r,uu.radius)}function Zg(t,e,i,r){mD(t,e,i,r,Vi.radius)}function Hve(t,e,i,r){Zg(t,e,i,r),Bg(i,r,i,r)}function Wve(t,e,i,r){Zg(t,e,i,r),Yg(i,r,i,r)}function Zve(t,e,i,r,s){const n=V0*t[e],a=V0*t[e+1],o=t[e+2],u=Math.sin(a),h=Math.cos(a),p=s.radius/Math.sqrt(1-s.eccentricitySquared*u*u);i[r++]=(p+o)*h*Math.cos(n),i[r++]=(p+o)*h*Math.sin(n),i[r++]=(p*(1-s.eccentricitySquared)+o)*u}function Yg(t,e,i,r){Zve(t,e,i,r,Vi)}function Jg(t,e,i,r){const s=Ove,n=t[e],a=t[e+1],o=t[e+2];let u,h,p,y,v,b,w,S,M,T,I,L,O,R,z,j,U,B,Q,oe,ue;u=Math.abs(o),h=n*n+a*a,p=Math.sqrt(h),y=h+o*o,v=Math.sqrt(y),oe=Math.atan2(a,n),b=o*o/y,w=h/y,R=s.a2/v,z=s.a3-s.a4/v,w>.3?(S=u/v*(1+w*(s.a1+R+b*z)/v),Q=Math.asin(S),T=S*S,M=Math.sqrt(1-T)):(M=p/v*(1-b*(s.a5-R-w*z)/v),Q=Math.acos(M),T=1-M*M,S=Math.sqrt(T)),I=1-Vi.eccentricitySquared*T,L=Vi.radius/Math.sqrt(I),O=s.a6*L,R=p-L*M,z=u-O*S,U=M*R+S*z,j=M*z-S*R,B=j/(O/I+U),Q+=B,ue=U+j*B/2,o<0&&(Q=-Q),i[r++]=j0*oe,i[r++]=j0*Q,i[r]=ue}function Yve(t,e,i,r){Jg(t,e,i,r),cb(i,r,i,r)}function Jve(t,e,i,r){Jg(t,e,i,r),Bg(i,r,i,r)}const Vu={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ii},V0=au(1),j0=qY(1),JJ=.5*Math.PI,Hf=Vi.radius,S9=Hf*Math.PI/180,x9=180/(Hf*Math.PI);function Bw(t,e,i,r,s,n,a=Math.floor(t.length/3)){const o=YJ(e,s);if(o==null)return!1;if(o===Ii){if(t===r&&i===n)return!0;const h=i+3*a;for(let p=i,y=n;p<h;p++,y++)r[y]=t[p];return!0}const u=i+3*a;for(let h=i,p=n;h<u;h+=3,p+=3)o(t,h,r,p);return!0}const J7e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Bw},Symbol.toStringTag,{value:"Module"}));function $9(t,e,i,r,s,n){return GS[0]=t,GS[1]=e,GS[2]=i,Bw(GS,r,0,s,n,0)}const GS=Yd();function Xve(t,e,i){if(e==null||i==null||i.vcsWkid||Ar(e,i)||Vd(e)||Vd(i))return null;const r=rj(e)/rj(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>Qve(s,r);case"polyline":case"esriGeometryPolyline":return s=>e_e(s,r);case"polygon":case"esriGeometryPolygon":return s=>Kve(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>t_e(s,r);case"extent":case"esriGeometryEnvelope":return s=>i_e(s,r);default:return null}}function Qve(t,e){t?.z!=null&&(t.z*=e)}function Kve(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function e_e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function t_e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function i_e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let hb=null,Xb=null,Qb=null,U0=null,cO={};const yD=new Dw;function gu(){return!!(Xb?.isLoaded()&&Qb?.isLoaded()&&U0?.isLoaded())}function XJ(){return!!gu()||(We(yD),qc(),!1)}function QJ(t,e){return!t||!e||ao(t,e)||XJ()}function r_e(t,e){return!ao(t,e)&&!gu()}async function qc(t){hb==null&&(hb=Promise.all([K(()=>import("./projectOperator-DZMbRw9d.js"),__vite__mapDeps([8,9,10]),import.meta.url).then(e=>(Xb=e,Xb.load())),K(()=>import("./projectOperator-COZchowl.js"),__vite__mapDeps([11,9,10]),import.meta.url).then(e=>(Qb=e,Qb.load())),K(()=>import("./geographicTransformationUtils-Iooc8Vqx.js"),[],import.meta.url).then(e=>(U0=e,U0.load()))])),await hb,Wt(t),yD.notify()}function Jd(t,e,i){return Array.isArray(t)?t.length===0?[]:(Spe(t),hO(t,t[0].spatialReference,e,i)):(k0(t),hO([t],t.spatialReference,e,i)[0])}function hO(t,e,i,r){if(e==null||i==null)return t;if(ao(e,i,r))return t.map(s=>w$(s,e,i));if(r?.geographicTransformation==null&&qM(e))return t.map(s=>w$(s,e,Ee.WGS84)).map(s=>Kb(s,i));if(r?.geographicTransformation==null&&qM(i))return t.map(s=>Kb(s,Ee.WGS84)).map(s=>w$(s,Ee.WGS84,i));if(!gu())throw new eX;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:U0.getTransformation(e,i,r.areaOfInterestExtent)||new lb};else if(!r?.areaOfInterestExtent){const s=s_e(e,i);let n=cO[s];n||(n=U0.getTransformation(e,i)||new lb,cO[s]=n),r={geographicTransformation:n}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Vr?Xb.executeMany(t,i,r):Qb.executeMany(t,i,r)}function s_e(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function n_e(t,e){const i=KJ([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function KJ(t,e){if(!gu()){for(const i of t)if(i!=null&&!Ar(i.spatialReference,e)&&Fn(i.spatialReference)&&Fn(e)&&!ao(i.spatialReference,e))return We(yD),{pending:qc(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ar(i.spatialReference,e)?i:Fn(i.spatialReference)&&Fn(e)?Kb(i,e):null)}}let eX=class extends G{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function a_e(){hb=null,Xb=null,Qb=null,U0=null,cO={}}const o_e={get loadPromise(){return hb}};function Kb(t,e){try{const i=Jd(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=Xve(i.type,t.spatialReference,e);return r?.(i),i}catch(i){if(!(i instanceof eX))throw i;return null}}async function tX(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await gD(r,e,null,i),Kb(t,e)}function ao(t,e,i){return!(i?.areaOfInterestExtent||i?.extendedParams||i?.geographicTransformation)&&(!!Ar(t,e)||Fn(t)&&Fn(e)&&!!YJ(t,e))}function l_e(t,e){if(Ar(t,e))return!0;if(!Fn(t)||!Fn(e))return!1;const i=Fd(t)||Xo(t)||MP(t),r=Fd(e)||Xo(e)||MP(e);return i&&r}async function gD(t,e,i,r){if(gu())return _V(r);if(Array.isArray(t)){for(const{source:s,dest:n,options:a}of t)if(s&&n&&!ao(s,n,a))return qc(r)}else if(t&&e&&!ao(t,e,i))return qc(r);return _V(r)}function w$(t,e,i){return t?"x"in t?iX(t,e,new Ne,i,0):"xmin"in t?oX(t,e,new at,i,0):"rings"in t?aX(t,e,new pi,i,0):"paths"in t?sX(t,e,new rr,i,0):"points"in t?rX(t,e,new zo,i,0):null:null}function u_e(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&iX(t,t.spatialReference,e,i,r)!=null}function iX(t,e,i,r,s){Cs[0]=t.x,Cs[1]=t.y;const n=t.z;return Cs[2]=n!==void 0?n:s,Bw(Cs,e,0,Cs,r,0)?(i.x=Cs[0],i.y=Cs[1],i.spatialReference=r,n!==void 0||Vd(r)?(i.z=Cs[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function c_e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&rX(t,t.spatialReference,e,i,r)!=null}function rX(t,e,i,r,s){const{points:n,hasZ:a,hasM:o}=t,u=[],h=n.length,p=[];for(const v of n)p.push(v[0],v[1],a?v[2]:s);if(!Bw(p,e,0,p,r,0,h))return null;const y=a||Vd(r);for(let v=0;v<h;++v){const b=3*v,w=p[b],S=p[b+1];y&&o?u.push([w,S,p[b+2],n[v][3]]):y?u.push([w,S,p[b+2]]):o?u.push([w,S,n[v][2]]):u.push([w,S])}return i.points=u,i.spatialReference=r,i.hasZ=a,i.hasM=o,i}function h_e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&sX(t,t.spatialReference,e,i,r)!=null}function sX(t,e,i,r,s){const{paths:n,hasZ:a,hasM:o}=t,u=[];if(!lX(n,a??!1,o??!1,e,u,r,s))return null;const h=a||Vd(r);return i.paths=u,i.spatialReference=r,i.hasZ=h,i.hasM=o,i}function nX(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&aX(t,t.spatialReference,e,i,r)!=null}function aX(t,e,i,r,s){const{rings:n,hasZ:a,hasM:o}=t,u=[];if(!lX(n,a??!1,o??!1,e,u,r,s))return null;const h=a||Vd(r);return i.rings=u,i.spatialReference=r,i.hasZ=h,i.hasM=o,i}function d_e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&oX(t,t.spatialReference,e,i,r)!=null}function oX(t,e,i,r,s){const{xmin:n,ymin:a,xmax:o,ymax:u,hasZ:h,hasM:p}=t,y=h?t.zmin:s;if(!$9(n,a,y,e,Cs,r))return null;const v=h||Vd(r);i.xmin=Cs[0],i.ymin=Cs[1],v&&(i.zmin=Cs[2]);const b=h?t.zmax:s;return $9(o,u,b,e,Cs,r)?(i.xmax=Cs[0],i.ymax=Cs[1],v&&(i.zmax=Cs[2]),p&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function lX(t,e,i,r,s,n,a=0){const o=new Array;for(const p of t)for(const y of p)o.push(y[0],y[1],e?y[2]:a);if(!Bw(o,r,0,o,n,0))return!1;let u=0;s.length=0;const h=e||Vd(n);for(const p of t){const y=new Array;for(const v of p)h&&i?y.push([o[u++],o[u++],o[u++],v[3]]):h?y.push([o[u++],o[u++],o[u++]]):i?(y.push([o[u++],o[u++],v[2]]),u++):(y.push([o[u++],o[u++]]),u++);s.push(y)}return!0}const Cs=Yd(),Q7e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ao,initializeProjection:gD,isEqualBaseGCS:l_e,isLoaded:gu,isLoadedOrLoad:XJ,isLoadedOrLoadFor:QJ,load:qc,project:Jd,projectExtent:d_e,projectMany:hO,projectMultipoint:c_e,projectOrLoad:n_e,projectOrLoadMany:KJ,projectPoint:u_e,projectPolygon:nX,projectPolyline:h_e,projectWithZConversion:tX,projectWithoutEngine:w$,requiresLoad:r_e,test:o_e,tryProjectWithZConversion:Kb,unload:a_e},Symbol.toStringTag,{value:"Module"}));var S$;let dO=S$=class extends Wd($e.ofType(pi)){constructor(t){super(t)}clone(){return new S$(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(i=>{if(!e.equals(i.spatialReference)){if(!ao(i.spatialReference,e))return t?.messages?.push(new _a("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const s=new pi;nX(i,s,e),i=s}const r=i.toJSON(t);return delete r.spatialReference,r}).filter(i=>i!=null):this.toArray().map(i=>i.toJSON(t))}static fromJSON(t,e){const i=new S$;return t.forEach(r=>i.add(pi.fromJSON(r,e))),i}};dO=S$=d([N("esri.layers.support.PolygonCollection")],dO);const db=dO;let Ku=class extends Wd(tD){constructor(e){super(e),this.id=`focusarea-${_v()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new db}readGeometries(e,i,r){Array.isArray(e)?this.geometries=db.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(Vc(e,r),r))}async _loadGeometries(e,i){const r=await Ot(e,{responseType:"json"});this.geometries=db.fromJSON(r.data,i)}};d([m({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),m()],Ku.prototype,"id",void 0),d([m({type:String,json:{write:!0}})],Ku.prototype,"title",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Ku.prototype,"enabled",void 0),d([m({type:Ige,json:{write:!0}})],Ku.prototype,"outline",void 0),d([m({type:db,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new db(t.items.map(e=>e.clone()))}),Sge({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Ku.prototype,"geometries",void 0),d([Ge(["web-scene","portal-item","service"],"geometries")],Ku.prototype,"readGeometries",null),Ku=d([N("esri.effects.FocusArea")],Ku);const p_e=Ku;let d1=class extends Wd(tD){constructor(e){super(e),this.areas=new $e,this.style="bright"}};d([m({type:$e.ofType(p_e),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new $e(t.items.map(e=>e.clone()))})],d1.prototype,"areas",void 0),d([m({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],d1.prototype,"style",void 0),d1=d([N("esri.effects.FocusAreas")],d1);const uX=d1;function f_e(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function m_e(t){return!(!f_e(t)||!Fye(t)?.operations?.supportsEditing||"editingEnabled"in t&&!jye(t)||Y4(t))}const y_e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,g_e="screenUtils.toPt: input not recognized!",cX=96;function lt(t){return t?t/72*cX:0}function Ut(t){return t?72*t/cX:0}function gt(t){if(typeof t=="string"){const e=t.match(y_e);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.startsWith("-"),n=r==="px"?Ut(i):i;return s?-n:n}return console.warn(g_e),null}return t}function qi(t=0,e=0){return{x:t,y:e}}function tGe(t){return t?qi(t.x,t.y):null}function iGe(t=0,e=0){return[t,e]}function rGe(t=0,e=0,i=0){return[t,e,i]}function sGe(t){return t}function nGe(t){return t}function aGe(t){return t}function oGe(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function O3(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function v_e(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function __e(t,e,i,r,s,n,a,o,u,h,p,y,v,b,w,S){const M=new Float32Array(16);return M[0]=t,M[1]=e,M[2]=i,M[3]=r,M[4]=s,M[5]=n,M[6]=a,M[7]=o,M[8]=u,M[9]=h,M[10]=p,M[11]=y,M[12]=v,M[13]=b,M[14]=w,M[15]=S,M}const b_e=O3();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:b_e,clone:v_e,create:O3,fromValues:__e},Symbol.toStringTag,{value:"Module"}));function hX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Xd(t,e,i,r,s,n,a,o,u,h,p,y,v,b,w,S,M){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=a,t[6]=o,t[7]=u,t[8]=h,t[9]=p,t[10]=y,t[11]=v,t[12]=b,t[13]=w,t[14]=S,t[15]=M,t}function k3(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qd(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],n=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function w_e(t,e){return dX(t,e)||k3(t),t}function dX(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5],u=e[6],h=e[7],p=e[8],y=e[9],v=e[10],b=e[11],w=e[12],S=e[13],M=e[14],T=e[15],I=i*o-r*a,L=i*u-s*a,O=i*h-n*a,R=r*u-s*o,z=r*h-n*o,j=s*h-n*u,U=p*S-y*w,B=p*M-v*w,Q=p*T-b*w,oe=y*M-v*S,ue=y*T-b*S,Se=v*T-b*M;let me=I*Se-L*ue+O*oe+R*Q-z*B+j*U;return me?(me=1/me,t[0]=(o*Se-u*ue+h*oe)*me,t[1]=(s*ue-r*Se-n*oe)*me,t[2]=(S*j-M*z+T*R)*me,t[3]=(v*z-y*j-b*R)*me,t[4]=(u*Q-a*Se-h*B)*me,t[5]=(i*Se-s*Q+n*B)*me,t[6]=(M*O-w*j-T*L)*me,t[7]=(p*j-v*O+b*L)*me,t[8]=(a*ue-o*Q+h*U)*me,t[9]=(r*Q-i*ue-n*U)*me,t[10]=(w*z-S*O+T*I)*me,t[11]=(y*O-p*z-b*I)*me,t[12]=(o*B-a*oe-u*U)*me,t[13]=(i*oe-r*B+s*U)*me,t[14]=(S*L-w*R-M*I)*me,t[15]=(p*R-y*L+v*I)*me,t):null}function S_e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5],u=e[6],h=e[7],p=e[8],y=e[9],v=e[10],b=e[11],w=e[12],S=e[13],M=e[14],T=e[15];return t[0]=o*(v*T-b*M)-y*(u*T-h*M)+S*(u*b-h*v),t[1]=-(r*(v*T-b*M)-y*(s*T-n*M)+S*(s*b-n*v)),t[2]=r*(u*T-h*M)-o*(s*T-n*M)+S*(s*h-n*u),t[3]=-(r*(u*b-h*v)-o*(s*b-n*v)+y*(s*h-n*u)),t[4]=-(a*(v*T-b*M)-p*(u*T-h*M)+w*(u*b-h*v)),t[5]=i*(v*T-b*M)-p*(s*T-n*M)+w*(s*b-n*v),t[6]=-(i*(u*T-h*M)-a*(s*T-n*M)+w*(s*h-n*u)),t[7]=i*(u*b-h*v)-a*(s*b-n*v)+p*(s*h-n*u),t[8]=a*(y*T-b*S)-p*(o*T-h*S)+w*(o*b-h*y),t[9]=-(i*(y*T-b*S)-p*(r*T-n*S)+w*(r*b-n*y)),t[10]=i*(o*T-h*S)-a*(r*T-n*S)+w*(r*h-n*o),t[11]=-(i*(o*b-h*y)-a*(r*b-n*y)+p*(r*h-n*o)),t[12]=-(a*(y*M-v*S)-p*(o*M-u*S)+w*(o*v-u*y)),t[13]=i*(y*M-v*S)-p*(r*M-s*S)+w*(r*v-s*y),t[14]=-(i*(o*M-u*S)-a*(r*M-s*S)+w*(r*u-s*o)),t[15]=i*(o*v-u*y)-a*(r*v-s*y)+p*(r*u-s*o),t}function x_e(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],u=t[7],h=t[8],p=t[9],y=t[10],v=t[11],b=t[12],w=t[13],S=t[14],M=t[15];return(e*a-i*n)*(y*M-v*S)-(e*o-r*n)*(p*M-v*w)+(e*u-s*n)*(p*S-y*w)+(i*o-r*a)*(h*M-v*b)-(i*u-s*a)*(h*S-y*b)+(r*u-s*o)*(h*w-p*b)}function pX(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=e[6],p=e[7],y=e[8],v=e[9],b=e[10],w=e[11],S=e[12],M=e[13],T=e[14],I=e[15];let L=i[0],O=i[1],R=i[2],z=i[3];return t[0]=L*r+O*o+R*y+z*S,t[1]=L*s+O*u+R*v+z*M,t[2]=L*n+O*h+R*b+z*T,t[3]=L*a+O*p+R*w+z*I,L=i[4],O=i[5],R=i[6],z=i[7],t[4]=L*r+O*o+R*y+z*S,t[5]=L*s+O*u+R*v+z*M,t[6]=L*n+O*h+R*b+z*T,t[7]=L*a+O*p+R*w+z*I,L=i[8],O=i[9],R=i[10],z=i[11],t[8]=L*r+O*o+R*y+z*S,t[9]=L*s+O*u+R*v+z*M,t[10]=L*n+O*h+R*b+z*T,t[11]=L*a+O*p+R*w+z*I,L=i[12],O=i[13],R=i[14],z=i[15],t[12]=L*r+O*o+R*y+z*S,t[13]=L*s+O*u+R*v+z*M,t[14]=L*n+O*h+R*b+z*T,t[15]=L*a+O*p+R*w+z*I,t}function $_e(t,e,i){const r=i[0],s=i[1],n=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*n+e[12],t[13]=e[1]*r+e[5]*s+e[9]*n+e[13],t[14]=e[2]*r+e[6]*s+e[10]*n+e[14],t[15]=e[3]*r+e[7]*s+e[11]*n+e[15];else{const a=e[0],o=e[1],u=e[2],h=e[3],p=e[4],y=e[5],v=e[6],b=e[7],w=e[8],S=e[9],M=e[10],T=e[11];t[0]=a,t[1]=o,t[2]=u,t[3]=h,t[4]=p,t[5]=y,t[6]=v,t[7]=b,t[8]=w,t[9]=S,t[10]=M,t[11]=T,t[12]=a*r+p*s+w*n+e[12],t[13]=o*r+y*s+S*n+e[13],t[14]=u*r+v*s+M*n+e[14],t[15]=h*r+b*s+T*n+e[15]}return t}function M_e(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function T_e(t,e,i,r){let s=r[0],n=r[1],a=r[2],o=Math.sqrt(s*s+n*n+a*a);if(o<=dn())return void hX(t,e);o=1/o,s*=o,n*=o,a*=o;const u=Math.sin(i),h=Math.cos(i),p=1-h,y=e[0],v=e[1],b=e[2],w=e[3],S=e[4],M=e[5],T=e[6],I=e[7],L=e[8],O=e[9],R=e[10],z=e[11],j=s*s*p+h,U=n*s*p+a*u,B=a*s*p-n*u,Q=s*n*p-a*u,oe=n*n*p+h,ue=a*n*p+s*u,Se=s*a*p+n*u,me=n*a*p-s*u,ke=a*a*p+h;t[0]=y*j+S*U+L*B,t[1]=v*j+M*U+O*B,t[2]=b*j+T*U+R*B,t[3]=w*j+I*U+z*B,t[4]=y*Q+S*oe+L*ue,t[5]=v*Q+M*oe+O*ue,t[6]=b*Q+T*oe+R*ue,t[7]=w*Q+I*oe+z*ue,t[8]=y*Se+S*me+L*ke,t[9]=v*Se+M*me+O*ke,t[10]=b*Se+T*me+R*ke,t[11]=w*Se+I*me+z*ke,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function E_e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[4],a=e[5],o=e[6],u=e[7],h=e[8],p=e[9],y=e[10],v=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+h*r,t[5]=a*s+p*r,t[6]=o*s+y*r,t[7]=u*s+v*r,t[8]=h*s-n*r,t[9]=p*s-a*r,t[10]=y*s-o*r,t[11]=v*s-u*r,t}function C_e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],a=e[1],o=e[2],u=e[3],h=e[8],p=e[9],y=e[10],v=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-h*r,t[1]=a*s-p*r,t[2]=o*s-y*r,t[3]=u*s-v*r,t[8]=n*r+h*s,t[9]=a*r+p*s,t[10]=o*r+y*s,t[11]=u*r+v*s,t}function I_e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],a=e[1],o=e[2],u=e[3],h=e[4],p=e[5],y=e[6],v=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+h*r,t[1]=a*s+p*r,t[2]=o*s+y*r,t[3]=u*s+v*r,t[4]=h*s-n*r,t[5]=p*s-a*r,t[6]=y*s-o*r,t[7]=v*s-u*r,t}function L_e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function A_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P_e(t,e,i){if(e===0)return k3(t);let r=i[0],s=i[1],n=i[2],a=Math.sqrt(r*r+s*s+n*n);if(a<=dn())return null;a=1/a,r*=a,s*=a,n*=a;const o=Math.sin(e),u=Math.cos(e),h=1-u;return t[0]=r*r*h+u,t[1]=s*r*h+n*o,t[2]=n*r*h-s*o,t[3]=0,t[4]=r*s*h-n*o,t[5]=s*s*h+u,t[6]=n*s*h+r*o,t[7]=0,t[8]=r*n*h+s*o,t[9]=s*n*h-r*o,t[10]=n*n*h+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fX(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=r+r,u=s+s,h=n+n,p=r*o,y=r*u,v=r*h,b=s*u,w=s*h,S=n*h,M=a*o,T=a*u,I=a*h;return t[0]=1-(b+S),t[1]=y+I,t[2]=v-T,t[3]=0,t[4]=y-I,t[5]=1-(p+S),t[6]=w+M,t[7]=0,t[8]=v+T,t[9]=w-M,t[10]=1-(p+b),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function D_e(t,e){const i=N_e,r=-e[0],s=-e[1],n=-e[2],a=e[3],o=e[4],u=e[5],h=e[6],p=e[7],y=r*r+s*s+n*n+a*a;return y>0?(i[0]=2*(o*a+p*r+u*n-h*s)/y,i[1]=2*(u*a+p*s+h*r-o*n)/y,i[2]=2*(h*a+p*n+o*s-u*r)/y):(i[0]=2*(o*a+p*r+u*n-h*s),i[1]=2*(u*a+p*s+h*r-o*n),i[2]=2*(h*a+p*n+o*s-u*r)),fX(t,e,i),t}const N_e=Yd();function z_e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function F_e(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],a=e[5],o=e[6],u=e[8],h=e[9],p=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(n*n+a*a+o*o),t[2]=Math.sqrt(u*u+h*h+p*p),t}function V_e(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function j_e(t,e,i,r){const s=e[0],n=e[1],a=e[2],o=e[3],u=s+s,h=n+n,p=a+a,y=s*u,v=s*h,b=s*p,w=n*h,S=n*p,M=a*p,T=o*u,I=o*h,L=o*p,O=r[0],R=r[1],z=r[2];return t[0]=(1-(w+M))*O,t[1]=(v+L)*O,t[2]=(b-I)*O,t[3]=0,t[4]=(v-L)*R,t[5]=(1-(y+M))*R,t[6]=(S+T)*R,t[7]=0,t[8]=(b+I)*z,t[9]=(S-T)*z,t[10]=(1-(y+w))*z,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function U_e(t,e,i,r,s){const n=e[0],a=e[1],o=e[2],u=e[3],h=n+n,p=a+a,y=o+o,v=n*h,b=n*p,w=n*y,S=a*p,M=a*y,T=o*y,I=u*h,L=u*p,O=u*y,R=r[0],z=r[1],j=r[2],U=s[0],B=s[1],Q=s[2],oe=(1-(S+T))*R,ue=(b+O)*R,Se=(w-L)*R,me=(b-O)*z,ke=(1-(v+T))*z,te=(M+I)*z,be=(w+L)*j,Me=(M-I)*j,et=(1-(v+S))*j;return t[0]=oe,t[1]=ue,t[2]=Se,t[3]=0,t[4]=me,t[5]=ke,t[6]=te,t[7]=0,t[8]=be,t[9]=Me,t[10]=et,t[11]=0,t[12]=i[0]+U-(oe*U+me*B+be*Q),t[13]=i[1]+B-(ue*U+ke*B+Me*Q),t[14]=i[2]+Q-(Se*U+te*B+et*Q),t[15]=1,t}function G_e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=i+i,o=r+r,u=s+s,h=i*a,p=r*a,y=r*o,v=s*a,b=s*o,w=s*u,S=n*a,M=n*o,T=n*u;return t[0]=1-y-w,t[1]=p+T,t[2]=v-M,t[3]=0,t[4]=p-T,t[5]=1-h-w,t[6]=b+S,t[7]=0,t[8]=v+M,t[9]=b-S,t[10]=1-h-y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q_e(t,e,i,r,s,n,a){const o=1/(i-e),u=1/(s-r),h=1/(n-a);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*u,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(s+r)*u,t[10]=(a+n)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*n*2*h,t[15]=0,t}function B_e(t,e,i,r,s){const n=1/Math.tan(e/2);let a;return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(a=1/(r-s),t[10]=(s+r)*a,t[14]=2*s*r*a):(t[10]=-1,t[14]=-2*r),t}function H_e(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+o),h=2/(s+n);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(a-o)*u*.5,t[9]=(s-n)*h*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function W_e(t,e,i,r,s,n,a){const o=1/(e-i),u=1/(r-s),h=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(s+r)*u,t[14]=(a+n)*h,t[15]=1,t}function Z_e(t,e,i,r){const s=e[0],n=e[1],a=e[2];let o=s-i[0],u=n-i[1],h=a-i[2];const p=dn();if(Math.abs(o)<p&&Math.abs(u)<p&&Math.abs(h)<p)return void k3(t);let y=1/Math.sqrt(o*o+u*u+h*h);o*=y,u*=y,h*=y;const v=r[0],b=r[1],w=r[2];let S=b*h-w*u,M=w*o-v*h,T=v*u-b*o;y=Math.sqrt(S*S+M*M+T*T),y?(y=1/y,S*=y,M*=y,T*=y):(S=0,M=0,T=0);let I=u*T-h*M,L=h*S-o*T,O=o*M-u*S;y=Math.sqrt(I*I+L*L+O*O),y?(y=1/y,I*=y,L*=y,O*=y):(I=0,L=0,O=0),t[0]=S,t[1]=I,t[2]=o,t[3]=0,t[4]=M,t[5]=L,t[6]=u,t[7]=0,t[8]=T,t[9]=O,t[10]=h,t[11]=0,t[12]=-(S*s+M*n+T*a),t[13]=-(I*s+L*n+O*a),t[14]=-(o*s+u*n+h*a),t[15]=1}function Y_e(t,e,i,r){const s=e[0],n=e[1],a=e[2],o=r[0],u=r[1],h=r[2];let p=s-i[0],y=n-i[1],v=a-i[2],b=p*p+y*y+v*v;b>0&&(b=1/Math.sqrt(b),p*=b,y*=b,v*=b);let w=u*v-h*y,S=h*p-o*v,M=o*y-u*p;return b=w*w+S*S+M*M,b>0&&(b=1/Math.sqrt(b),w*=b,S*=b,M*=b),t[0]=w,t[1]=S,t[2]=M,t[3]=0,t[4]=y*M-v*S,t[5]=v*w-p*M,t[6]=p*S-y*w,t[7]=0,t[8]=p,t[9]=y,t[10]=v,t[11]=0,t[12]=s,t[13]=n,t[14]=a,t[15]=1,t}function J_e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X_e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Q_e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function mX(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function K_e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function e1e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function t1e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function i1e(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],u=t[6],h=t[7],p=t[8],y=t[9],v=t[10],b=t[11],w=t[12],S=t[13],M=t[14],T=t[15],I=e[0],L=e[1],O=e[2],R=e[3],z=e[4],j=e[5],U=e[6],B=e[7],Q=e[8],oe=e[9],ue=e[10],Se=e[11],me=e[12],ke=e[13],te=e[14],be=e[15],Me=dn();return Math.abs(i-I)<=Me*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(r-L)<=Me*Math.max(1,Math.abs(r),Math.abs(L))&&Math.abs(s-O)<=Me*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(n-R)<=Me*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(a-z)<=Me*Math.max(1,Math.abs(a),Math.abs(z))&&Math.abs(o-j)<=Me*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(u-U)<=Me*Math.max(1,Math.abs(u),Math.abs(U))&&Math.abs(h-B)<=Me*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(p-Q)<=Me*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(y-oe)<=Me*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(v-ue)<=Me*Math.max(1,Math.abs(v),Math.abs(ue))&&Math.abs(b-Se)<=Me*Math.max(1,Math.abs(b),Math.abs(Se))&&Math.abs(w-me)<=Me*Math.max(1,Math.abs(w),Math.abs(me))&&Math.abs(S-ke)<=Me*Math.max(1,Math.abs(S),Math.abs(ke))&&Math.abs(M-te)<=Me*Math.max(1,Math.abs(M),Math.abs(te))&&Math.abs(T-be)<=Me*Math.max(1,Math.abs(T),Math.abs(be))}function r1e(t){const e=dn(),i=t[0],r=t[1],s=t[2],n=t[4],a=t[5],o=t[6],u=t[8],h=t[9],p=t[10];return Math.abs(1-(i*i+n*n+u*u))<=e&&Math.abs(1-(r*r+a*a+h*h))<=e&&Math.abs(1-(s*s+o*o+p*p))<=e}function s1e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const n1e=pX,a1e=mX;Object.freeze(Object.defineProperty({__proto__:null,add:Q_e,adjoint:S_e,copy:hX,determinant:x_e,equals:i1e,exactEquals:t1e,frob:X_e,fromQuat:G_e,fromQuat2:D_e,fromRotation:P_e,fromRotationTranslation:fX,fromRotationTranslationScale:j_e,fromRotationTranslationScaleOrigin:U_e,fromScaling:A_e,fromTranslation:L_e,fromXRotation:O_e,fromYRotation:k_e,fromZRotation:R_e,frustum:q_e,getRotation:V_e,getScale:F_e,getTranslation:z_e,hasIdentityRotation:s1e,identity:k3,invert:dX,invertOrIdentity:w_e,isOrthoNormal:r1e,lookAt:Z_e,mul:n1e,multiply:pX,multiplyScalar:K_e,multiplyScalarAndAdd:e1e,ortho:W_e,perspective:B_e,perspectiveFromFieldOfView:H_e,rotate:T_e,rotateX:E_e,rotateY:C_e,rotateZ:I_e,scale:M_e,set:Xd,str:J_e,sub:a1e,subtract:mX,targetTo:Y_e,translate:$_e,transpose:Qd},Symbol.toStringTag,{value:"Module"}));const o1e=(t,e)=>{const i=Xd(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Qd(i,i)},l1e=(t,e)=>{const i=Xd(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Qd(i,i)},u1e=(t,e)=>{const i=1-e,r=Xd(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Qd(r,r)},c1e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=Xd(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Qd(s,s)},h1e=(t,e)=>{const i=1-2*e,r=Xd(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Qd(r,r)},d1e=(t,e)=>{const i=Xd(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Qd(i,i)},p1e=(t,e)=>{const i=1-e,r=Xd(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Qd(r,r)};let yX=class gX{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Nn(e.strength,i.strength,r),this.radius=Nn(e.radius,i.radius,r),this.threshold=Nn(e.threshold,i.threshold,r)}clone(){return new gX(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:pb(this.radius),strength:this.strength,threshold:this.threshold}}},vX=class _X{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Nn(e.radius,i.radius,r))}clone(){return new _X(this.radius)}toJSON(){return{type:"blur",radius:pb(this.radius)}}},pO=class bX{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Nn(e.amount,i.amount,r),this._updateMatrix()}clone(){return new bX(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||O3();switch(this.type){case"brightness":this._colorMatrix=o1e(e,this.amount);break;case"contrast":this._colorMatrix=l1e(e,this.amount);break;case"grayscale":this._colorMatrix=u1e(e,this.amount);break;case"invert":this._colorMatrix=h1e(e,this.amount);break;case"saturate":this._colorMatrix=d1e(e,this.amount);break;case"sepia":this._colorMatrix=p1e(e,this.amount)}}},wX=class SX{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Nn(e.offsetX,i.offsetX,r),this.offsetY=Nn(e.offsetY,i.offsetY,r),this.blurRadius=Nn(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Nn(e.color[0],i.color[0],r)),this.color[1]=Math.round(Nn(e.color[1],i.color[1],r)),this.color[2]=Math.round(Nn(e.color[2],i.color[2],r)),this.color[3]=Nn(e.color[3],i.color[3],r)}clone(){return new SX(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:pb(this.offsetX),yoffset:pb(this.offsetY),blurRadius:pb(this.blurRadius),color:e}}},xX=class $X{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Nn(e.angle,i.angle,r),this._updateMatrix()}clone(){return new $X(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||O3();this._colorMatrix=c1e(e,this.angle)}},MX=class TX{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Nn(e.amount,i.amount,r)}clone(){return new TX(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Nn(t,e,i){return t+(e-t)*i}function pb(t){return Math.round(1e3*Ut(t))/1e3}function f1e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new pO(t.type,0);case"saturate":case"brightness":case"contrast":return new pO(t.type,1);case"opacity":return new MX(1);case"hue-rotate":return new xX(0);case"blur":return new vX(0);case"drop-shadow":return new wX(0,0,0,[...Q4("transparent")]);case"bloom":return new yX(0,0,1)}}function EX(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,s)=>r.type===i[s].type)}function CX(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(f1e(i[s]))}function m1e(t){const e=t[0];return!!e&&"type"in e}function y1e(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function g1e(t){return t.portalItem?.type==="Web Scene"||t.referenceLayers.some(e=>e.type==="scene")}function v1e(t){return!!t?.portalItem?.tags?.some(e=>e.toLowerCase()==="beta")}function lGe(t,e){return t.allLayerViews.find(r=>r.uid===e)?.layer.parent===t.map?.basemap}function _1e(t){let e=null;const i=fO(t),r=!i?.baseLayers.length;for(const s in D0){const n=LX(i,IX(D0[s]),{mustMatchReferences:r});if(n==="equal"){e=s;break}n==="base-layers-equal"&&(e=s)}return e}function b1e(t,e){return t===e||t?.portalItem?.id!=null&&t.portalItem.id===e?.portalItem?.id?!0:LX(fO(t),fO(e),{mustMatchReferences:!0})==="equal"}function w1e(t,e){if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),s=t.spatialReference;return s?{spatialReference:r.find(n=>s.equals(n))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}function fO(t){return t?!t.loaded&&t.resourceInfo?IX(t.resourceInfo.data):{baseLayers:EL(t.baseLayers),referenceLayers:EL(t.referenceLayers),groundLayers:EL(t.groundLayers)}:null}function EL(t){return($e.isCollection(t)?t.toArray():t).map(S1e)}function S1e(t){return{type:t.type,effect:"effect"in t?t.effect:void 0,url:AX("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null?void 0:t.sublayers?.map(e=>({id:e.id,visible:e.visible})),activeLayerId:t.type==="wmts"?t.activeLayer?.id:void 0}}function M9(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function IX(t){return t?{baseLayers:CL((t.baseMapLayers??[]).filter(e=>!M9(e))),referenceLayers:CL((t.baseMapLayers??[]).filter(e=>M9(e))),groundLayers:CL(t.groundLayers??[])}:null}function CL(t){return t.map(e=>x1e(e))}function x1e(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;case"IntegratedMesh3DTilesLayer":e="IntegratedMesh3DTilesLayer";break;default:e="unknown"}return{type:e,effect:t.effect,url:AX(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function LX(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":T9(t.baseLayers,e.baseLayers)?T9(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function T9(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!$1e(t[i],e[i]))return!1;return!0}function $1e(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!y1e(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const r=t.sublayers.at(i),s=e.sublayers.at(i);if(r?.id!==s?.id||r?.visible!==s?.visible)return!1}}return!0}function AX(t){return t?io(t).replace(/^\s*https?:/i,"").toLowerCase():""}function M1e(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=_1e(t);return i?D0[i].thumbnailUrl:EH(t.baseLayers,T1e)}function T1e(t){return"portalItem"in t?t.portalItem?.thumbnailUrl:void 0}const IL=()=>le.getLogger("esri.support.basemapUtils");function E1e(){return{}}function C1e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function PX(t,e){let i;if(typeof t=="string"){const r=t in D0,s=!r&&t.includes("/");if(!r&&!s){if(lP())IL().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(D0).filter(([a,o])=>o.classic||o.is3d).map(([a])=>`"${a}"`).sort().join(", ");IL().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(i=e[t]),i||(i=r?Md.fromId(t):new Md({style:{id:t}}),e&&(e[t]=i))}else i=Ur(Md,t);return i?.destroyed&&(IL().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function OX(t){return new Qa({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function qS(t){for(const e of t.values())e?.destroy();t.clear()}const E9={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function I1e(t){let e=null;if(typeof t=="string")if(t in E9){const i=E9[t];e=new KM({resourceInfo:{data:{layers:[i]}}})}else le.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Ur(KM,t);return e}function mO(t,e,i){let r,s;if(t)for(let n=0,a=t.length;n<a;n++){if(r=t.at(n),r?.[e]===i)return r;if(r?.type==="group"&&(s=mO(r.layers,e,i),s))return s}}const kX=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new $e;const s=o=>{o.parent&&o.removeFromParent()},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||le.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},a=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void le.getLogger(this).error("#add()","Cannot add layer to itself.");s(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>a(o.item))])}destroy(){const r=this.layers.toArray();for(const s of r)s.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",lu(r,this._get("layers")))}add(r,s){const n=this.layers;if(s=n.getNextIndex(s),r instanceof bi){const a=r;a.parent===this?this.reorder(a,s):n.add(a,s)}else zs(r)?r.then(a=>{this.destroyed||this.add(a,s)}):le.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,s){const n=this.layers;let a=n.getNextIndex(s);r.slice().forEach(o=>{o.parent!==this?(n.add(o,a),a+=1):this.reorder(o,a)})}findLayerById(r){return mO(this.layers,"id",r)}findLayerByUid(r){return mO(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,s){return this.layers.reorder(r,s)}layerAdded(r){}layerRemoved(r){}};return d([m()],i.prototype,"layers",null),i=d([N("esri.support.LayersMixin")],i),i},L1e=new Set(["feature","subtype-group"]);function yO(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const n=t.at(r);if(n[e]===i)return n;if(n?.type==="group"){const a=yO(n.tables,e,i);if(a)return a}}}const RX=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new $e,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&n.removeFromParent(),n.parent=this,L1e.has(n.type)||le.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const s of r)s.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",lu(r,this._get("tables")))}findTableById(r){return yO(this.tables,"id",r)}findTableByUid(r){return yO(this.tables,"uid",r)}};return d([m()],i.prototype,"tables",null),i=d([N("esri.support.TablesMixin")],i),i};let Na=class extends RX(kX(fv)){constructor(e){super(e),this.allLayers=new Qa({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new uX,this.allTables=OX(this),this.basemap=null,this.editableLayers=new Qa({getCollections:()=>[this.allLayers],itemFilterFunction:m_e}),this.ground=new KM,this._basemapCache=E1e(),this.addHandles(Kr(()=>this.ground,(i,r)=>{r?.parent===this&&(r.parent=null),i.parent=this},{sync:!0}))}destroy(){C1e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=xi(this.basemap),xi(this.ground),this._set("ground",null)}castBasemap(e){return PX(e,this._basemapCache)}castGround(e){return I1e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};d([m({readOnly:!0,dependsOn:[]})],Na.prototype,"allLayers",void 0),d([m({type:uX,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Na.prototype,"focusAreas",void 0),d([m({readOnly:!0})],Na.prototype,"allTables",void 0),d([m({type:Md,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Na.prototype,"basemap",void 0),d([Nt("basemap")],Na.prototype,"castBasemap",null),d([m({readOnly:!0})],Na.prototype,"editableLayers",void 0),d([m({type:KM,nonNullable:!0})],Na.prototype,"ground",void 0),d([Nt("ground")],Na.prototype,"castGround",null),d([m()],Na.prototype,"undoRedo",void 0),Na=d([N("esri.Map")],Na);const DX=Na;let jp=class extends tD{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jp.prototype,"row",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jp.prototype,"column",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jp.prototype,"rows",void 0),d([m({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jp.prototype,"columns",void 0),jp=d([N("esri.CameraLayout")],jp);const NX=jp;let R3=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return C9(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return ys(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+gO(this.range,e-i,r)}minimalMonotonic(e,i,r){return C9(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function C9(t,e,i,r,s=0,n=!1){return(r-=s)<e?r+=gO(t,e-r):r>i&&(r-=gO(t,r-i)),n&&r===i&&(r=e),r+s}function gO(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const dGe=new R3(0,2*Math.PI),pGe=new R3(-Math.PI,Math.PI),A1e=new R3(0,360);let fl=class extends yt(ve){constructor(...e){super(...e),this.position=new Ne([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new NX}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return e}writePosition(e,i,r,s){const n=e.clone();n.x=an(e.x||0),n.y=an(e.y||0),n.z=e.hasZ?an(e.z||0):e.z,i[r]=n.write({},s)}readPosition(e,i){const r=new Ne;return r.read(e,i),r.x=an(r.x||0),r.y=an(r.y||0),r.z=r.hasZ?an(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};d([m({type:Ne,json:{write:{isRequired:!0}}})],fl.prototype,"position",void 0),d([Le("position")],fl.prototype,"writePosition",null),d([Ge("position")],fl.prototype,"readPosition",null),d([m({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Nt(t=>A1e.normalize(an(t)))],fl.prototype,"heading",void 0),d([m({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Nt(t=>ys(an(t),-180,180))],fl.prototype,"tilt",void 0),d([m({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Nt(t=>ys(an(t,55),1,170))],fl.prototype,"fov",void 0),d([m({type:NX,nonNullable:!0,json:{read:!1,write:!1}})],fl.prototype,"layout",void 0),fl=d([N("esri.Camera")],fl);const P1e=fl;function sn(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Xg(t){return t.points!==void 0}function ew(t){return t.x!==void 0&&t.y!==void 0}function fs(t){return t.paths!==void 0||t.curvePaths!==void 0}function sr(t){return t.rings!==void 0||t.curveRings!==void 0}function Ud(t){return t==null?null:t instanceof Vr?t:ew(t)?Ne.fromJSON(t):fs(t)?rr.fromJSON(t):sr(t)?pi.fromJSON(t):Xg(t)?zo.fromJSON(t):sn(t)?at.fromJSON(t):null}function D3(t){return t?ew(t)?"esriGeometryPoint":fs(t)?"esriGeometryPolyline":sr(t)?"esriGeometryPolygon":sn(t)?"esriGeometryEnvelope":Xg(t)?"esriGeometryMultipoint":null:null}const O1e={esriGeometryPoint:Ne,esriGeometryPolyline:rr,esriGeometryPolygon:pi,esriGeometryEnvelope:at,esriGeometryMultipoint:zo,esriGeometryMultiPatch:pi};function k1e(t){return t&&O1e[t]||null}const vD=es()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),mGe=es()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Hw={base:Vr,key:"type",typeMap:{extent:at,multipoint:zo,point:Ne,polyline:rr,polygon:pi}};function yGe(t){return t.type==="point"}function gGe(t){return t.type==="multipoint"}function vGe(t){return t.type==="polygon"}function _Ge(t){return t.type==="polyline"}var vO;let Uh=vO=class extends ve{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new vO({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};d([m({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:LL}}}}})],Uh.prototype,"rotation",void 0),d([Nt("rotation")],Uh.prototype,"castRotation",null),d([m({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:LL}}}}})],Uh.prototype,"scale",void 0),d([m({types:Hw,json:{read:Ud,write:!0,origins:{"web-scene":{read:Ud,write:{overridePolicy:LL}}}}})],Uh.prototype,"targetGeometry",void 0),d([m({type:P1e,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Uh.prototype,"camera",void 0),Uh=vO=d([N("esri.Viewpoint")],Uh);const ro=Uh;function LL(){return{enabled:!this.camera}}let tw=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new Dw,this._items=new Set}get length(){return We(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return We(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){We(this._observable),yield*this._items}};const zX=new FinalizationRegistry(t=>{t.close()});function R1e(t,e){zX.register(t,e,e)}function D1e(t){zX.unregister(t)}function FX(t,e){return new Proxy({},{get:(i,r,s)=>(...n)=>{let a,o;const u=n[n.length-1];return N1e(u)&&(a=u.signal,o=u.transferList,n.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),n,{transferList:o,signal:a})}})}function N1e(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const z1e={statsWorker:()=>K(()=>import("./statsWorker-CJxkKKsV.js"),__vite__mapDeps([12,13,14,15]),import.meta.url),geometryEngineWorker:()=>K(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([16,17,18,19]),import.meta.url),arcadeGeometryOperatorsWorker:()=>K(()=>import("./operatorsWorker-DQslixLd.js"),[],import.meta.url),CSVSourceWorker:()=>K(()=>import("./CSVSourceWorker-B33JlpN-.js"),__vite__mapDeps([20,21,22,23,24,25,26,27,28,29,30,31,32,33,13,14,15,34,35,36,37]),import.meta.url),EdgeProcessingWorker:()=>K(()=>import("./EdgeProcessingWorker-D1WbLWZB.js"),__vite__mapDeps([38,39,40,41,42,43,44,45,46,47,48]),import.meta.url),ElevationSamplerWorker:()=>K(()=>import("./ElevationSamplerWorker-DfN8Yjqy.js"),__vite__mapDeps([49,27,50,51,52,53,54,55,56,41,57]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>K(()=>import("./FeatureServiceSnappingSourceWorker-DZn8xYdO.js"),__vite__mapDeps([58,23,24,22,25,26,27,28,29,30,31,32,33,13,14,15,34,35,59,60,61,62,63]),import.meta.url),GaussianSplatSortWorker:()=>K(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[],import.meta.url),GeoJSONSourceWorker:()=>K(()=>import("./GeoJSONSourceWorker-Bsq9LyDB.js"),__vite__mapDeps([64,24,22,25,23,26,27,28,29,30,31,32,33,13,14,15,34,35,65,21,66]),import.meta.url),LercWorker:()=>K(()=>import("./LercWorker-BoCto-8p.js"),[],import.meta.url),MemorySourceWorker:()=>K(()=>import("./MemorySourceWorker-CboZRAJp.js"),__vite__mapDeps([67,24,22,25,68,23,26,27,28,29,30,31,32,33,13,14,15,34,35,66,21]),import.meta.url),PBFDecoderWorker:()=>K(()=>import("./PBFDecoderWorker-CIHarv1P.js"),__vite__mapDeps([69,70,24,22,25,60,61]),import.meta.url),FeaturePipelineWorker:()=>K(()=>import("./FeaturePipelineWorker-B1g1tulw.js"),__vite__mapDeps([71,72,73,43,74,75,22,24,25,76,29,28,77,78,79,80,81,82,30,31,32,33,13,14,15,34,35,83,84,85,86,10,87,88,89,90,65,21,66,62,60,61,63,91,92]),import.meta.url),PointCloudWorker:()=>K(()=>import("./PointCloudWorker-DgAf9PiY.js"),__vite__mapDeps([93,94,95,96,97,98,99,52,53,100,101]),import.meta.url),RasterWorker:()=>K(()=>import("./RasterWorker-sE6hwKP8.js"),__vite__mapDeps([102,103,104,19,105,106,107,108,109,110]),import.meta.url),SceneLayerSnappingSourceWorker:()=>K(()=>import("./SceneLayerSnappingSourceWorker-g0N80xlp.js"),__vite__mapDeps([111,112,113,101,95,114,115,100,41,45,46,47,40,42,43,44,48]),import.meta.url),SceneLayerWorker:()=>K(()=>import("./SceneLayerWorker-JmZQKDWe.js"),__vite__mapDeps([116,50,56,117,54]),import.meta.url),WFSSourceWorker:()=>K(()=>import("./WFSSourceWorker-nOdtgFoE.js"),__vite__mapDeps([118,24,22,25,23,26,27,28,29,30,31,32,33,13,14,15,34,35,65,21,66,119,120]),import.meta.url),WorkerTileHandler:()=>K(()=>import("./WorkerTileHandler-BUgLMhuX.js"),__vite__mapDeps([121,122,123,61,80,124,125,44,43,126]),import.meta.url),Lyr3DWorker:()=>K(()=>import("./Lyr3DWorker-ClXE7utg.js"),[],import.meta.url),Feature3DPipelineWorker:()=>K(()=>import("./Feature3DPipelineWorker-BTL2VNVn.js"),__vite__mapDeps([127,31,24,22,25,32,33,28,29,13,14,15,34,35,128,55,50,117,54,129,96,130,47,41,131,113,101,95,112,132,133,115,100,99,94,52,53,44,43,40,42,134,135,136,137,138,139,140,141,142,143,27,62,60,61,63,144]),import.meta.url),TextureCompressionWorker:()=>K(()=>import("./TextureCompressionWorker-CrYn4Jp7.js"),[],import.meta.url),FlowWorker:()=>K(()=>import("./FlowWorker-DO7OZSb5.js"),__vite__mapDeps([145,110]),import.meta.url),ParquetSourceWorker:()=>K(()=>import("./ParquetSourceWorker-DUDHJSI4.js"),__vite__mapDeps([146,82,31,24,22,25,32,33,28,29,13,14,15,34,35,147,37,85,75,84,83]),import.meta.url),PanoramicMeshWorker:()=>K(()=>import("./PanoramicMeshWorker-HH0PSgtY.js"),__vite__mapDeps([148,103]),import.meta.url)},VX="worker:port-closed",Dc={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let F1e=0;function jX(){return F1e++}function V1e(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function iT(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function UX(t,e,i,r){if(e.type===Dc.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Dc.INVOKE&&e.type!==Dc.RESPONSE)return void t.postMessage(e);let s;V1e(i)?(s=I9(i.transferList),e.data=i.result):(s=I9(r),e.data=i),s?t.postMessage(e,s):t.postMessage(e)}function iw(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function I9(t){if(!t?.length)return null;if(X("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!j1e(i));return e.length?e:null}function j1e(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function wGe(t){try{return await t}catch(e){const i=e?.name===VX;if(!(jr(e)||i))throw e;return}}const{CLOSE:BS,ABORT:_O,INVOKE:L9,RESPONSE:k_,OPEN_PORT:A9,ON:P9}=Dc,U1e=2;let G1e=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===_O?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Za;let G0=(Za=class{static connect(e,i){const r=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Za(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Za.clients.set(n,s),r.port2}static loadWorker(e){const i=z1e[e];return i?i():Promise.resolve(null)}constructor(e,i,r,s){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new G1e(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:BS}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=r?.signal,n=r?.transferList;if(!this._port)return Promise.reject(new G(VX,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const a=jX();return new Promise((o,u)=>{if(Ns(s))return this._processWork(),void u(Ht());const h=so(s,()=>{const y=this._outJobs.get(a);y&&(this._outJobs.delete(a),this._processWork(),fi(y.abortHandle),this._post({type:_O,jobId:a}),u(Ht()))}),p={resolve:o,reject:u,abortHandle:h,debugInfo:e};this._outJobs.set(a,p),this._post({type:L9,jobId:a,methodName:e,abortable:s!=null},i,n)})}createInvokeProxy(e){return FX(this,e)}on(e,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:P9,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),vt(()=>{r.port1.postMessage({type:BS}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:A9,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=U1e)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=e;this.apply(i,r,s).then(a=>n.resolve(a)).catch(a=>n.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{fi(e.abortHandle),e.reject(Ht(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=iw(e);if(r)switch(r.type){case k_:this._onResponseMessage(r);break;case L9:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case _O:this._onAbortMessage(r);break;case BS:this._onCloseMessage();break;case A9:this._onOpenPortMessage(r);break;case P9:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Za.clients.get(this)===e&&e.destroy(),Za.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s=[],abortable:n}=e,a=n?new AbortController:null,o=this._inJobs;let u,h=this._client,p=h[i];try{if(!p&&i&&i.includes(".")){const y=i.split(".");for(let v=0;v<y.length-1;v++)h=h[y[v]],p=h[y[v+1]]}if(typeof p!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:a?a.signal:null}),u=p.apply(h,s)}catch(y){return void this._post({type:k_,jobId:r,error:iT(y)})}zs(u)?(o.set(r,{controller:a,promise:u}),u.then(y=>{o.has(r)&&(o.delete(r),this._post({type:k_,jobId:r},y))},y=>{o.has(r)&&(o.delete(r),jr(y)||this._post({type:k_,jobId:r,error:iT(y||{message:`Error encountered at method ${i}`})}))})):this._post({type:k_,jobId:r},u)}_onOpenPortMessage(e){new Za(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,n=>{i.postMessage(n)}),s=lv(e.port,"message",n=>{iw(n)?.type===BS&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs;if(!n.has(i))return;const a=n.get(i);n.delete(i),this._processWork(),fi(a.abortHandle),r?a.reject(G.fromJSON(JSON.parse(r))):a.resolve(s)}_post(e,i,r){return UX(this._port,e,i,r)}},Za.kernelInfo={buildDate:SH,fullVersion:s4,revision:xH},Za.clients=new Map,Za),q1e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new tw,this._ongoingLowPriorityJobsQueue=new tw}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise((r,s)=>{let n=!0;const a=o=>{Wt(i.signal),n&&(n=!1,o())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const u=e[o];zs(u)?this._clientPromises[o]=u.then(h=>(this._clients[o]=new G0(h,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(r),this._clients[o]),()=>(a(s),null)):(this._clients[o]=new G0(u,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),a(r))}})}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const a=this._clientPromises[n];s[n]=a.then(o=>o?.invoke(e,i,r))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Ht(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Ht(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,D1e(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=va();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const a=this._clients[n];a?a.jobAdded():this._clientPromises[n].then(o=>o?.jobAdded())}return s.promise}createInvokeProxy(e){return FX(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>gm(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r===0&&e(i)})})}get test(){}};const B1e={async request(t,e){const i=t.options,r=i.responseType;i.signal=e?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&iP(t.url)?.after?r:"array-buffer";const s=await Ot(t.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},O9={};function H1e(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...O9.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=O9.baseUrl),e}let W1e=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},x$=class{constructor(){this._dispatcher=new W1e,this._workerPostMessage({type:Dc.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){PM(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){PM(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=iw(e);if(i&&i.type===Dc.OPEN){const{modulePath:r,jobId:s}=i;let n=await G0.loadWorker(r);n||(n=await import(r));const a=G0.connect(n);this._workerPostMessage({type:Dc.OPENED,jobId:s,data:a})}}};const bO=()=>le.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Z1e}=Dc,Y1e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let HS,WS;const k9="Failed to create Worker. Fallback to execute module in main thread";async function J1e(){if(!X("esri-workers"))return R9(new x$);if(!HS&&!WS)try{const e=Y1e.split("{CONFIGURATION}").join(X1e());HS=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){WS=e||{}}let t;if(HS)try{t=new Worker(HS,{name:"esri-worker-"+Q1e++})}catch{bO().warn(k9,WS),t=new x$}else bO().warn(k9,WS),t=new x$;return R9(t)}async function R9(t){return new Promise(e=>{function i(s){const n=iw(s);n&&n.type===Z1e&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),bO().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new x$).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function X1e(){let t;if(Tt.default!=null){const s={...Tt};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(Tt));t.assetsPath=Xa(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Xa(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Un(),t.has={"esri-csp-restrictions":X("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":X("esri-2d-update-debug"),"esri-2d-log-updating":X("esri-2d-log-updating"),"featurelayer-pbf":X("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":X("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":X("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":X("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":X("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":X("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":X("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":X("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":X("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":X("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":X("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":X("parquetlayer-full-query-feature-count"),"esri-atomics":X("esri-atomics"),"esri-shared-array-buffer":X("esri-shared-array-buffer"),"esri-tiles-debug":X("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":X("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":X("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Xa(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Xa(t.workers.workerPath):t.workers.workerPath=Xa(Si("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Tt.workers.loaderConfig,i=H1e({baseUrl:e?.baseUrl,locale:Un(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:SH,fullVersion:s4,revision:xH}})}let Q1e=0;const{ABORT:D9,INVOKE:K1e,OPEN:ebe,OPENED:tbe,RESPONSE:R_}=Dc;let ibe=class GX{static async create(e){const i=await J1e();return new GX(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),le.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=jX();return new Promise((n,a)=>{const o={resolve:n,reject:a,abortHandle:n4(r,()=>{this._outJobs.delete(s),this._post({type:D9,jobId:s})})};this._outJobs.set(s,o),this._post({type:ebe,jobId:s,modulePath:e})})}_onMessage(e){const i=iw(e);if(i)switch(i.type){case tbe:this._onOpenedMessage(i);break;case R_:this._onResponseMessage(i);break;case D9:this._onAbortMessage(i);break;case K1e:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,a=n?new AbortController:null,o=this._inJobs,u=B1e[i];let h;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);h=u.call(null,s,{signal:a?a.signal:null})}catch(p){return void this._post({type:R_,jobId:r,error:iT(p)})}zs(h)?(o.set(r,{controller:a,promise:h}),h.then(p=>{o.has(r)&&(o.delete(r),this._post({type:R_,jobId:r},p))},p=>{o.has(r)&&(o.delete(r),p||(p={message:"Error encountered at method"+i}),jr(p)||this._post({type:R_,jobId:r,error:iT(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:R_,jobId:r},h)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),fi(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),fi(n.abortHandle),r?n.reject(G.fromJSON(JSON.parse(r))):n.resolve(s))}_post(e,i,r){return UX(this.worker,e,i,r)}};const N9=X("host-browser")?Math.min(navigator.hardwareConcurrency-1,X("workers-pool-size")??8):0;let Pf=X("esri-mobile")?Math.min(N9,3):N9;Pf||(Pf=X("safari")&&X("mac")?7:2);let z9=0;const $$=[];function rbe(){qX()}async function ZS(t,e){const i=new q1e,{registryTarget:r,...s}=e;return await i.open(t,s),r&&R1e(r,i),i}async function sbe(t,e={}){if(typeof t!="string")throw new G("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(X("host-webworker")&&!X("esri-workers")&&(i="local"),i==="local"){let r=await G0.loadWorker(t);r||(r=await import(t)),Wt(e.signal);const s=e.client||r;return ZS([G0.connect(r,e.schedule)],{...e,client:s})}if(await qX(),Wt(e.signal),i==="dedicated"){const r=z9++%Pf;return ZS([await $$[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Pf);if(r<Pf){const s=new Array(r);for(let n=0;n<r;++n){const a=z9++%Pf;s[n]=$$[a].open(t,e)}return ZS(s,e)}}return ZS($$.map(r=>r.open(t,e)),e)}let YS=null;async function qX(){if(YS)return YS;new AbortController;const t=[];for(let e=0;e<Pf;e++){const i=ibe.create(e).then(r=>($$[e]=r,r));t.push(i)}return YS=Promise.all(t),YS}let fb=class extends $e{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new($e.ofType(this.itemType.Type))(e):new $e(e)}};function wO(t,e){return{type:t,cast:CW,set(i){const r=lu(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}d([m()],fb.prototype,"owner",null),fb=d([N("esri.core.support.OwningCollection")],fb);var SO,r0;let _r=(r0=class extends ve{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new SO({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},SO=r0,r0);d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_r.prototype,"cols",void 0),d([m({type:bt,json:{write:!0}})],_r.prototype,"level",void 0),d([m({type:String,json:{write:!0}})],_r.prototype,"levelValue",void 0),d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_r.prototype,"origin",void 0),d([m({type:Number,json:{write:!0}})],_r.prototype,"resolution",void 0),d([m({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_r.prototype,"rows",void 0),d([m({type:Number,json:{write:!0}})],_r.prototype,"scale",void 0),_r=SO=d([N("esri.layers.support.LOD")],_r);let nbe=class BX{constructor(e,i,r,s=Oi()){this._level=e,this._row=i,this._col=r,this.extent=s}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new BX(e.level,e.row,e.col,e.extent)}};var Yy;const F9=new wt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var s0;let zr=(s0=class extends ve{static create(e={}){const{resolutionFactor:i=1,scales:r,size:s=256,spatialReference:n=Ee.WebMercator,numLODs:a=24}=e;if(!Fn(n)){const v=[];if(r)for(let b=0;b<r.length;b++){const w=r[b];v.push(new _r({level:b,scale:w,resolution:w}))}else{let b=5e-4;for(let w=a-1;w>=0;w--)v.unshift(new _r({level:w,scale:b,resolution:b})),b*=2}return new Yy({dpi:96,lods:v,origin:new Ne(0,0,n),size:[s,s],spatialReference:n})}const o=Fs(n),u=e.origin?new Ne({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Ne(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),h=96,p=1/(ba(n)*39.37*h),y=[];if(r)for(let v=0;v<r.length;v++){const b=r[v],w=b*p;y.push(new _r({level:v,scale:b,resolution:w}))}else{let v=Zd(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const b=Math.ceil(a/i);y.push(new _r({level:0,scale:v,resolution:v*p}));for(let w=1;w<b;w++){const S=v/2**i,M=S*p;y.push(new _r({level:w,scale:S,resolution:M})),v=S}}return new Yy({dpi:h,lods:y,origin:u,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=Fs(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return Ne.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const s=[],n=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(a=>{s.push(a.scale),i=a.scale>i?a.scale:i,r=a.scale<r?a.scale:r,n[a.level]=a})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),s=r+1;return i[r]/(i[r]/i[s])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let s=0;for(;s<r;s++){const n=i[s],a=i[s+1];if(n<=e)return s;if(a===e)return s+1;if(n>e&&a<e)return s+Math.log(n/e)/Math.log(n/a)}return s}tileAt(e,i,r,s){const n=this.lodAt(e);if(!n)return null;let a,o;if(typeof i=="number")a=i,o=r;else if(Ar(i.spatialReference,this.spatialReference))a=i.x,o=i.y,s=r;else{const p=m3(i,this.spatialReference);if(p==null)return null;a=p.x,o=p.y,s=r}const u=n.resolution*this.size[0],h=n.resolution*this.size[1];return s??=new nbe(0,0,0),s.level=e,s.row=Math.floor((this.origin.y-o)/h+.001),s.col=Math.floor((a-this.origin.x)/u+.001),this.updateTileInfo(s),s}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return!1;const s=e.level-r.level,n=r.resolution*this.size[0]/2**s,a=r.resolution*this.size[1]/2**s;return e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*a,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+a,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:s}=r,n=s*this.size[0],a=s*this.size[1];return e[0]=this.origin.x+i.col*n,e[1]=this.origin.y-(i.row+1)*a,e[2]=e[0]+n,e[3]=e[1]+a,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Yy.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],s=this.lods.length-i;for(let n=0;n<s;n++){const a=n+i,{scale:o,resolution:u}=a>=0?this.lods[a]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new _r({level:n,scale:o,resolution:u}))}return new Yy({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const s=e[r];this._upsampleLevels[s.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/s.resolution:0},i=s}}},Yy=s0,s0);d([m({type:Number,json:{write:!0}})],zr.prototype,"compressionQuality",void 0),d([m({type:Number,json:{write:!0}})],zr.prototype,"dpi",void 0),d([m({type:String,json:{read:F9.read,write:F9.write,origins:{"web-scene":{read:!1,write:!1}}}})],zr.prototype,"format",void 0),d([m({readOnly:!0})],zr.prototype,"isWrappable",null),d([m({type:Ne,json:{write:!0}})],zr.prototype,"origin",void 0),d([Ge("origin")],zr.prototype,"readOrigin",null),d([m({type:[_r],value:null,json:{write:!0}})],zr.prototype,"lods",null),d([m({readOnly:!0})],zr.prototype,"scales",void 0),d([m({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],zr.prototype,"size",void 0),d([Ge("size",["rows","cols"])],zr.prototype,"readSize",null),d([Le("size",{cols:{type:bt},rows:{type:bt}})],zr.prototype,"writeSize",null),d([m({type:Ee,json:{write:!0}})],zr.prototype,"spatialReference",void 0),zr=Yy=d([N("esri.layers.support.TileInfo")],zr);let q0=class extends fb{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(le.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};q0=d([N("esri.support.AnalysesCollection")],q0);const M$={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},AL={xsmall:544,small:768,medium:992,large:1200};function abe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function PL(t,e){return e?M$[t].valueToClassName[e].split(" "):[]}const obe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=AL}initialize(){this.addHandles(_e(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Lt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!abe(r)){const s=JSON.stringify(AL,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),r=AL}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=nn.acquire(),s=nn.acquire();let n,a=!1;for(n in M$){const o=this[n],u=M$[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==u&&(a=!0,this[n]=u,PL(n,o).forEach(h=>s.push(h)),PL(n,u).forEach(h=>r.push(h)))}a&&(this._applyClassNameChanges(r,s),nn.release(r),nn.release(s))}_applyClassNameChanges(r,s){const n=this.container;n&&(s.forEach(a=>n.classList.remove(a)),r.forEach(a=>n.classList.add(a)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let s;for(s in M$)PL(s,this[s]).forEach(n=>r.classList.remove(n))}};return d([m()],i.prototype,"breakpoints",null),d([m()],i.prototype,"orientation",void 0),d([m()],i.prototype,"widthBreakpoint",void 0),d([m()],i.prototype,"heightBreakpoint",void 0),i=d([N("esri.views.BreakpointsOwner")],i),i};function _D(t){return typeof t=="string"?document.getElementById(t):t??null}function V9(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Wf=class extends Ce{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,_e)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Kr)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Vs(e,"after-changes",this._createSyncUpdatingCallback(),no),Vs(e,"change",i,{onListenerAdd:r?a=>i({added:a.toArray(),removed:[]}):void 0,onListenerRemove:s?a=>i({added:[],removed:a.toArray()}):void 0})],n),vt(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(vt(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(JS)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,n);const a=s(e,i,r);return this.addHandles(a,n),vt(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=_e(e,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(JS),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(hv(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(JS))}),JS)}}};d([m({readOnly:!0})],Wf.prototype,"updating",void 0),Wf=d([N("esri.core.support.UpdatingHandles")],Wf);const JS=-42;var rT=function(){return rT=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},rT.apply(this,arguments)},xO={exports:{}},Hi={},$O={exports:{}},Tm={};function HX(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function lbe(t,e,i){}function ube(t,e,i){}var cbe=/javascript\s*\:/img;function hbe(t,e){return cbe.test(e)?"":e}Tm.whiteList=HX();Tm.getDefaultWhiteList=HX;Tm.onAttr=lbe;Tm.onIgnoreAttr=ube;Tm.safeAttrValue=hbe;var dbe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},D_=dbe;function pbe(t,e){t=D_.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,n=0,a="";function o(){if(!r){var p=D_.trim(t.slice(s,n)),y=p.indexOf(":");if(y!==-1){var v=D_.trim(p.slice(0,y)),b=D_.trim(p.slice(y+1));if(v){var w=e(s,a.length,v,b,p);w&&(a+=w+"; ")}}}s=n+1}for(;n<i;n++){var u=t[n];if(u==="/"&&t[n+1]==="*"){var h=t.indexOf("*/",n+2);if(h===-1)break;n=h+1,s=n+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||o():u===`
`&&o()}return D_.trim(a)}var fbe=pbe,XS=Tm,mbe=fbe;function j9(t){return t==null}function ybe(t){var e={};for(var i in t)e[i]=t[i];return e}function WX(t){t=ybe(t||{}),t.whiteList=t.whiteList||XS.whiteList,t.onAttr=t.onAttr||XS.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||XS.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||XS.safeAttrValue,this.options=t}WX.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,a=i.safeAttrValue,o=mbe(t,function(u,h,p,y,v){var b=r[p],w=!1;if(b===!0?w=b:typeof b=="function"?w=b(y):b instanceof RegExp&&(w=b.test(y)),w!==!0&&(w=!1),y=a(p,y),!!y){var S={position:h,sourcePosition:u,source:v,isWhite:w};if(w){var M=s(p,y,S);return j9(M)?p+":"+y:M}else{var M=n(p,y,S);if(!j9(M))return M}}});return o};var gbe=WX;(function(t,e){var i=Tm,r=gbe;function s(a,o){var u=new r(o);return u.process(a)}e=t.exports=s,e.FilterCSS=r;for(var n in i)e[n]=i[n]})($O,$O.exports);var bD=$O.exports,wD={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},vbe=bD.FilterCSS,_be=bD.getDefaultWhiteList,sT=wD;function ZX(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var YX=new vbe;function bbe(t,e,i){}function wbe(t,e,i){}function Sbe(t,e,i){}function xbe(t,e,i){}function JX(t){return t.replace(Mbe,"&lt;").replace(Tbe,"&gt;")}function $be(t,e,i,r){if(i=iQ(i),e==="href"||e==="src"){if(i=sT.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(QS.lastIndex=0,QS.test(i))return""}else if(e==="style"){if(U9.lastIndex=0,U9.test(i)||(G9.lastIndex=0,G9.test(i)&&(QS.lastIndex=0,QS.test(i))))return"";r!==!1&&(r=r||YX,i=r.process(i))}return i=rQ(i),i}var Mbe=/</g,Tbe=/>/g,Ebe=/"/g,Cbe=/&quot;/g,Ibe=/&#([a-zA-Z0-9]*);?/gim,Lbe=/&colon;?/gim,Abe=/&newline;?/gim,QS=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,U9=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,G9=/u\s*r\s*l\s*\(.*/gi;function XX(t){return t.replace(Ebe,"&quot;")}function QX(t){return t.replace(Cbe,'"')}function KX(t){return t.replace(Ibe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function eQ(t){return t.replace(Lbe,":").replace(Abe," ")}function tQ(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return sT.trim(e)}function iQ(t){return t=QX(t),t=KX(t),t=eQ(t),t=tQ(t),t}function rQ(t){return t=XX(t),t=JX(t),t}function Pbe(){return""}function Obe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(a){return i?!0:sT.indexOf(t,a)!==-1}var s=[],n=!1;return{onIgnoreTag:function(a,o,u){if(r(a))if(u.isClosing){var h="[/removed]",p=u.position+h.length;return s.push([n!==!1?n:u.position,p]),n=!1,h}else return n||(n=u.position),"[removed]";else return e(a,o,u)},remove:function(a){var o="",u=0;return sT.forEach(s,function(h){o+=a.slice(u,h[0]),u=h[1]}),o+=a.slice(u),o}}}function kbe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function Rbe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Hi.whiteList=ZX();Hi.getDefaultWhiteList=ZX;Hi.onTag=bbe;Hi.onIgnoreTag=wbe;Hi.onTagAttr=Sbe;Hi.onIgnoreTagAttr=xbe;Hi.safeAttrValue=$be;Hi.escapeHtml=JX;Hi.escapeQuote=XX;Hi.unescapeQuote=QX;Hi.escapeHtmlEntities=KX;Hi.escapeDangerHtml5Entities=eQ;Hi.clearNonPrintableCharacter=tQ;Hi.friendlyAttrValue=iQ;Hi.escapeAttrValue=rQ;Hi.onIgnoreTagStripAll=Pbe;Hi.StripTagBody=Obe;Hi.stripCommentTag=kbe;Hi.stripBlankChar=Rbe;Hi.cssFilter=YX;Hi.getDefaultCSSWhiteList=_be;var N3={},ad=wD;function Dbe(t){var e=ad.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=ad.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Nbe(t){return t.slice(0,2)==="</"}function zbe(t,e,i){var r="",s=0,n=!1,a=!1,o=0,u=t.length,h="",p="";e:for(o=0;o<u;o++){var y=t.charAt(o);if(n===!1){if(y==="<"){n=o;continue}}else if(a===!1){if(y==="<"){r+=i(t.slice(s,o)),n=o,s=o;continue}if(y===">"){r+=i(t.slice(s,n)),p=t.slice(n,o+1),h=Dbe(p),r+=e(n,r.length,h,p,Nbe(p)),s=o+1,n=!1;continue}if(y==='"'||y==="'")for(var v=1,b=t.charAt(o-v);b.trim()===""||b==="=";){if(b==="="){a=y;continue e}b=t.charAt(o-++v)}}else if(y===a){a=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var Fbe=/[^a-zA-Z0-9\\_:.-]/gim;function Vbe(t,e){var i=0,r=0,s=[],n=!1,a=t.length;function o(v,b){if(v=ad.trim(v),v=v.replace(Fbe,"").toLowerCase(),!(v.length<1)){var w=e(v,b||"");w&&s.push(w)}}for(var u=0;u<a;u++){var h=t.charAt(u),p,y;if(n===!1&&h==="="){n=t.slice(i,u),i=u+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Ube(t,u+1);continue}if(n!==!1&&u===r){if(y=t.indexOf(h,u+1),y===-1)break;p=ad.trim(t.slice(r+1,y)),o(n,p),n=!1,u=y,i=u+1;continue}if(/\s|\n|\t/.test(h))if(t=t.replace(/\s|\n|\t/g," "),n===!1)if(y=jbe(t,u),y===-1){p=ad.trim(t.slice(i,u)),o(p),n=!1,i=u+1;continue}else{u=y-1;continue}else if(y=Gbe(t,u-1),y===-1){p=ad.trim(t.slice(i,u)),p=q9(p),o(n,p),n=!1,i=u+1;continue}else continue}return i<t.length&&(n===!1?o(t.slice(i)):o(n,q9(ad.trim(t.slice(i))))),ad.trim(s.join(" "))}function jbe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Ube(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function Gbe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function qbe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function q9(t){return qbe(t)?t.substr(1,t.length-2):t}N3.parseTag=zbe;N3.parseAttr=Vbe;var Bbe=bD.FilterCSS,Do=Hi,sQ=N3,Hbe=sQ.parseTag,Wbe=sQ.parseAttr,T$=wD;function KS(t){return t==null}function Zbe(t){var e=T$.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=T$.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=T$.trim(t.slice(0,-1))),{html:t,closing:i}}function Ybe(t){var e={};for(var i in t)e[i]=t[i];return e}function Jbe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function nQ(t){t=Ybe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Do.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Jbe(t.whiteList||t.allowList):t.whiteList=Do.whiteList,t.onTag=t.onTag||Do.onTag,t.onTagAttr=t.onTagAttr||Do.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Do.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Do.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Do.safeAttrValue,t.escapeHtml=t.escapeHtml||Do.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new Bbe(t.css))}nQ.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,a=i.onTagAttr,o=i.onIgnoreTagAttr,u=i.safeAttrValue,h=i.escapeHtml,p=e.cssFilter;i.stripBlankChar&&(t=Do.stripBlankChar(t)),i.allowCommentTag||(t=Do.stripCommentTag(t));var y=!1;i.stripIgnoreTagBody&&(y=Do.StripTagBody(i.stripIgnoreTagBody,n),n=y.onIgnoreTag);var v=Hbe(t,function(b,w,S,M,T){var I={sourcePosition:b,position:w,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,S)},L=s(S,M,I);if(!KS(L))return L;if(I.isWhite){if(I.isClosing)return"</"+S+">";var O=Zbe(M),R=r[S],z=Wbe(O.html,function(j,U){var B=T$.indexOf(R,j)!==-1,Q=a(S,j,U,B);return KS(Q)?B?(U=u(S,j,U,p),U?j+'="'+U+'"':j):(Q=o(S,j,U,B),KS(Q)?void 0:Q):Q});return M="<"+S,z&&(M+=" "+z),O.closing&&(M+=" /"),M+=">",M}else return L=n(S,M,I),KS(L)?h(M):L},h);return y&&(v=y.remove(v)),v};var Xbe=nQ;(function(t,e){var i=Hi,r=N3,s=Xbe;function n(o,u){var h=new s(u);return h.process(o)}e=t.exports=n,e.filterXSS=n,e.FilterXSS=s,(function(){for(var o in i)e[o]=i[o];for(var u in r)e[u]=r[u]})();function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=t.exports)})(xO,xO.exports);var $y=xO.exports,Qbe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},aQ=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=rT(rT({},$y.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,a,o,u){return n==="a"&&a==="href"||(n==="img"||n==="source")&&a==="src"?r.sanitizeUrl(o):$y.safeAttrValue(n,a,o,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(n==="css"){var a=e.css.whiteList;a!=null&&e.css instanceof Object&&Object.keys(a).forEach(function(o){return s.css.whiteList[o]=a[o]})}else s[n]=e[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new $y.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(e.substring(0,e.indexOf(":"))),a=e==="/",o=/^#/.test(e),u=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return a||o||u?$y.escapeAttrValue(e):!n&&!s?$y.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):$y.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(e))n=e.reduce(function(o,u){var h=r.validate(u,i);return h.isValid?o.concat([u]):(s=!0,o.concat([h.sanitized]))},[]);else if(Qbe(e)){var a=Object.keys(e);n=a.reduce(function(o,u){var h=e[u],p=r.validate(h,i);return p.isValid?o[u]=h:(s=!0,o[u]=p.sanitized),o},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?n:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const Kbe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],ewe=Kbe.reduce((t,e)=>(t[e]=[],t),{}),twe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],oQ=new aQ({whiteList:ewe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(twe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),IGe=new aQ({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),lQ="http://www.w3.org/",z3=`${lQ}2000/svg`,uQ=`${lQ}1999/xlink`;let B9=[],SD=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},xD=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),cQ=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},iwe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(xD(t[r],e))return r}return-1},OL=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let a=0;a<t.length;a++)if(a!==e){let o=t[a];if(xD(o,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},rwe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},MO=[],TO=!1,hQ=t=>{(t.children||[]).forEach(hQ),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},H9=()=>{TO=!1,MO.forEach(hQ),MO.length=0},W9=t=>{MO.push(t),TO||(TO=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(H9,{timeout:16}):setTimeout(H9,16))},Z9=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),W9(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),W9(t))},swe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),n=s.length;for(let a=0;a<n;a++){let o=s[a],u=e[o];if(o==="className")throw new Error('Property "className" is not supported, use "class".');if(o==="class")CO(t,u,!0);else if(o==="classes"){let h=Object.keys(u),p=h.length;for(let y=0;y<p;y++){let v=h[y];u[v]&&t.classList.add(v)}}else if(o==="styles"){let h=Object.keys(u),p=h.length;for(let y=0;y<p;y++){let v=h[y],b=u[v];b&&(cQ(b),i.styleApplyer(t,v,b))}}else if(o!=="key"&&u!=null){let h=typeof u;h==="function"?(o.lastIndexOf("on",0)===0&&(r&&(u=r(o,u,t,e)),o==="oninput"&&(function(){let p=u;u=function(y){p.apply(this,[y]),y.target["oninput-value"]=y.target.value}})()),t[o]=u):i.namespace===z3?o==="href"?t.setAttributeNS(uQ,o,u):t.setAttribute(o,u):h==="string"&&o!=="value"?o==="innerHTML"?t[o]=oQ.sanitize(u):EO(t)&&o in t?t[o]=u:t.setAttribute(o,u):t[o]=u}}};function EO(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let nT,nwe=(t,e,i)=>{if(e)for(let r of e)mb(r,t,void 0,i)},dQ=(t,e,i)=>{nwe(t,e.children,i),e.text&&(t.textContent=e.text),swe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},mb=(t,e,i,r)=>{let s,n=0,a=t.vnodeSelector,o=e.ownerDocument;if(a==="")s=t.domNode=o.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let u=0;u<=a.length;++u){let h=a.charAt(u);if(u===a.length||h==="."||h==="#"){let p=a.charAt(n-1),y=a.slice(n,u);p==="."?s.classList.add(y):p==="#"?s.id=y:(y==="svg"&&(r=SD(r,{namespace:z3})),r.namespace!==void 0?s=t.domNode=o.createElementNS(r.namespace,y):(s=t.domNode=t.domNode||o.createElement(y),y==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),n=u+1}}dQ(s,t,r)}},CO=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},awe=(t,e,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),a=n.length;for(let o=0;o<a;o++){let u=n[o],h=i[u],p=e[u];if(u==="class")p!==h&&(CO(t,p,!1),CO(t,h,!0));else if(u==="classes"){let y=t.classList,v=Object.keys(h),b=v.length;for(let w=0;w<b;w++){let S=v[w],M=!!h[S];M!==!!p[S]&&(s=!0,M?y.add(S):y.remove(S))}}else if(u==="styles"){let y=Object.keys(h),v=y.length;for(let b=0;b<v;b++){let w=y[b],S=h[w];S!==p[w]&&(s=!0,S?(cQ(S),r.styleApplyer(t,w,S)):r.styleApplyer(t,w,""))}}else if(h||typeof p!="string"||(h=""),u!=="value"||EO(t)){if(h!==p){let y=typeof h;y==="function"&&r.eventHandlerInterceptor||(r.namespace===z3?u==="href"?t.setAttributeNS(uQ,u,h):t.setAttribute(u,h):y==="string"?u==="innerHTML"?t[u]=oQ.sanitize(h):u==="role"&&h===""?t.removeAttribute(u):EO(t)&&u in t?t[u]=h:t.setAttribute(u,h):t[u]!==h&&(t[u]=h),s=!0)}}else{let y=t[u];y!==h&&(t["oninput-value"]?y===t["oninput-value"]:h!==p)&&(t[u]=h,t["oninput-value"]=void 0),h!==p&&(s=!0)}}return s},owe=(t,e,i,r,s)=>{if(i===r)return!1;r=r||B9;let n,a=(i=i||B9).length,o=r.length,u=0,h=0,p=!1;for(;h<o;){let y=u<a?i[u]:void 0,v=r[h];if(y!==void 0&&xD(y,v))p=nT(y,v,s)||p,u++;else{let b=iwe(i,v,u+1);if(b>=0){for(n=u;n<b;n++)Z9(i[n]),OL(i,n,t,"removed");p=nT(i[b],v,s)||p,u=b+1}else mb(v,e,u<a?i[u].domNode:void 0,s),rwe(v),OL(r,h,t,"added")}h++}if(a>u)for(n=u;n<a;n++)Z9(i[n]),OL(i,n,t,"removed");return p};nT=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let n=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let a=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(a,r),e.domNode=a,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=SD(i,{namespace:z3})),t.text!==e.text&&(n=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,n=owe(e,r,t.children,e.children,i)||n,n=awe(r,t.properties,e.properties,i)||n,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return n&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let ex=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,nT(r,i,e)},domNode:t.domNode});const lwe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let p1=t=>SD(lwe,t),_d={append:(t,e,i)=>(i=p1(i),mb(e,t,void 0,i),ex(e,i)),insertBefore:(t,e,i)=>(i=p1(i),mb(e,t.parentNode,t,i),ex(e,i)),merge:(t,e,i)=>(i=p1(i),e.domNode=t,dQ(t,e,i),ex(e,i)),replace:(t,e,i)=>(i=p1(i),mb(e,t.parentNode,t,i),t.parentNode.removeChild(t),ex(e,i))},pQ,uwe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};pQ=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let cwe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?pQ(i.children,s=>s.domNode===r):void 0}),i},hwe=(t,e,i)=>{let r=function(s){i("domEvent",s);let n=e(),a=uwe(s.currentTarget,n.domNode);a.reverse();let o,u=cwe(n.getLastRender(),a);return t.scheduleRender(),u&&(o=u.properties[`on${s.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",s),o};return(s,n,a,o)=>r},aT=t=>{let e,i,r=p1(t),s=r.performanceLogger,n=!0,a=!1,o=[],u=[],h=(y,v,b)=>{let w,S=()=>w;r.eventHandlerInterceptor=hwe(e,S,s),w=y(v,b(),r),o.push(w),u.push(b)},p=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let y=0;y<o.length;y++){let v=u[y]();s("rendered",void 0),o[y].update(v),s("patched",void 0)}s("renderDone",void 0),n=!0}};return e={renderNow:p,scheduleRender:()=>{i||a||(i=requestAnimationFrame(p))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),a=!0},resume:()=>{a=!1,n=!0,e.scheduleRender()},append:(y,v)=>{h(_d.append,y,v)},insertBefore:(y,v)=>{h(_d.insertBefore,y,v)},merge:(y,v)=>{h(_d.merge,y,v)},replace:(y,v)=>{h(_d.replace,y,v)},detach:y=>{for(let v=0;v<u.length;v++)if(u[v]===y)return u.splice(v,1),o.splice(v,1)[0];throw new Error("renderFunction was not found")}},e},Gh=class extends Ce{constructor(){super(...arguments),this.items=new $e,this._watchUpdatingTracking=new Wf,this._callbacks=new Map,this._projector=aT(),this._hiddenProjector=aT()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);r.append(i,n),r.renderNow();const a={left:0,top:0,right:0,bottom:0};if(s?.domNode){const o=s.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return a}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!i?.disableDecorations;if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};d([m({readOnly:!0})],Gh.prototype,"surface",void 0),d([m({readOnly:!0})],Gh.prototype,"items",void 0),d([m({readOnly:!0})],Gh.prototype,"needsRender",null),d([m({readOnly:!0})],Gh.prototype,"_watchUpdatingTracking",void 0),d([m({readOnly:!0})],Gh.prototype,"updating",null),Gh=d([N("esri.views.overlay.ViewOverlay")],Gh);const Y9=Gh,kL=[0,0];function dwe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return kL[0]=i.left+(e?.pageXOffset??0),kL[1]=i.top+(e?.pageYOffset??0),kL}function J9(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function pwe(t){const e=document.createElement("div");return t.appendChild(e),e}const My=16,N_=750,fwe=512,mwe=2,ywe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:My,time:N_},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([_e(()=>this.cursor,s=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",s)}),_e(()=>this.navigating,s=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",s.toString())}),_e(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([_e(()=>this.ui,(s,n)=>this._handleUIChange(s,n),Lt),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const s=this._get("container"),n=_D(r);if(n||typeof r!="string"||le.getLogger(this).error("#container",`element with id '${r}' not found`),s===n)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(J9(this.root),this._set("root",null)),this.userContent&&(V9(this.userContent,s),J9(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",V9(n,a),n.appendChild(a),this._set("userContent",a);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const u=document.createElement("div");u.className="esri-view-surface",u.setAttribute("role","application"),u.tabIndex=0,o.appendChild(u),this._set("surface",u);const h=new Y9;o.appendChild(h.surface),this._set("overlay",h),this.addHandles(_e(()=>h.needsRender,p=>{p&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=P0({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=fi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const s=this._get("ui");s!==r&&s?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,s,n){const a=this.position;return r-=a?a[0]:0,s-=a?a[1]:0,n?(n[0]=r,n[1]=s):n=[r,s],n}containerToPage(r,s,n){const a=this.position;return r+=a?a[0]:0,s+=a?a[1]:0,n?(n[0]=r,n[1]=s):n=[r,s],n}_updateAria(){const{surface:r,aria:s}=this;r&&(r.ariaLabelledByElements=s?.labelledByElements??null,r.ariaDescribedByElements=s?.describedByElements??null,r.ariaLabel=s?.label??null,r.ariaDescription=s?.description??null)}_handleUIChange(r,s){this.removeHandles("ui"),s&&s!==r&&s.destroy(),r&&(r.view=this,this.addHandles(_e(()=>this.root,n=>{r.container=n?pwe(n):null},Lt),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=My,r.time=N_;const s=P0({prepare:o=>{const u=this._measure(),h=this._freqInfo;if(h.time+=o.deltaTime,u&&(h.freq=My,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const p=this._position();h.freq=p||u?My:Math.min(N_,h.freq*mwe),!u&&h.freq>=fwe&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(o=>{r.freq=My,r.time=N_,s.resume()});this.container!=null&&n.observe(this.container);const a=vt(()=>n.disconnect());this.addHandles([lv(window,"resize",()=>{r.freq=My,r.time=N_,s.resume()}),a,s],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,s=r?r.clientWidth:0,n=r?r.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const a=this.width,o=this.height;return s===a&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:a,oldHeight:o,width:s,height:n}),!0)}_position(){const r=this.container,s=this.position,n=r&&dwe(r);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return d([m()],i.prototype,"aria",void 0),d([m()],i.prototype,"container",null),d([m({readOnly:!0})],i.prototype,"focused",null),d([m({readOnly:!0})],i.prototype,"height",void 0),d([m()],i.prototype,"messagesCommon",void 0),d([m({type:Y9})],i.prototype,"overlay",void 0),d([m({readOnly:!0})],i.prototype,"position",void 0),d([m({readOnly:!0})],i.prototype,"resizing",void 0),d([m({readOnly:!0})],i.prototype,"root",void 0),d([m({value:null,readOnly:!0})],i.prototype,"size",null),d([m({readOnly:!0})],i.prototype,"surface",void 0),d([m({readOnly:!0})],i.prototype,"suspended",void 0),d([m({nonNullable:!0})],i.prototype,"ui",null),d([m({readOnly:!0})],i.prototype,"userContent",void 0),d([m({readOnly:!0})],i.prototype,"width",void 0),d([m()],i.prototype,"widthBreakpoint",void 0),i=d([N("esri.views.DOMContainer")],i),i},tx="popup",X9="manual";function cu(t){return t!=null&&"open"in t&&"declaredClass"in t}function Bc(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function gwe(t,e,i){const[r,s,n]=e;if(i){const[a,o,u]=i;a&&cu(o)&&(o.view=null,a.remove(o,tx),o!==s&&s&&o.destroy()),a&&u&&Bc(u)&&(u.view=null,a.remove(u,tx),u!==n&&n&&u.remove())}r&&cu(s)&&(s.view=t,r.add(s,{key:tx,position:X9,internal:!0})),r&&n&&Bc(n)&&(n.view=t,r.add(n,{key:tx,position:X9,internal:!0}))}async function vwe(t,e){const{popup:i,popupElement:r}=t;cu(i)?await ix(i,null,e):r&&Bc(r)?await ix(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:s,popupElement:n}=t;cu(s)&&!t.destroyed&&t.ready&&t.popupEnabled?await ix(s,null,e):n&&Bc(n)&&await ix(null,n,e)})}function _we(t,e){const{popup:i,popupElement:r}=t;if(cu(i))return i.open(e);r&&Bc(r)&&r.open(e)}function bwe(t,e){cu(t)&&t.close(),e&&Bc(e)&&(e.visible=!1)}async function ix(t,e,i){if(cu(t)){const r=await t.viewModel.handleViewClick(i);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&Bc(e)){const r=await e.handleViewClick(i);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const fQ=X("mac")?"Meta":"Control",wwe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Swe=t=>wwe.has(t);let xwe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Gr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof e=="string"?new xwe(e,s):e,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},o=p=>{const y=this._incoming[p.match.eventType];if(y){const v=y.indexOf(p);y.splice(v,1),a(),this._manager&&this._manager.updateDependencies()}},u=new $we(n,r,{onPause:o,onRemove:o,onResume:p=>{const y=this._incoming[p.match.eventType];y&&!y.includes(p)&&(y.push(p),a(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[n.eventType];return h||(h=[],this._incoming[n.eventType]=h),h.push(u),a(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Mwe(e,{onEmit:(r,s,n,a)=>{this._manager?.emit(r.eventType,s,n,a)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},$we=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Mwe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},Twe=class extends Gr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s,native:{pointerId:n}}=e;i===this._value&&this._x===r&&this._y===s&&this._id===n||(this._value=i,this._x=r,this._y=s,this._id=n,this._onChange(n,i,r,s))}},Ewe=class{constructor(e,i){this._observable=new Dw,this._value=e,this._equalityFunction=i}get value(){return We(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function B0(t,e=iH){return new Ewe(t,e)}let Cwe=class extends Gr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=B0(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Iwe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],n=new KH(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=mhe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)zV(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)s=r.pool.acquire(),r.acquired.push(s);return hW(),s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)zV(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},Lwe=class{constructor(){this.id=0,this.type="mouse",this.location=qi()}},Co=class extends Ce{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=fQ,this._propertiesPool=new Iwe({latestPointerInfo:()=>new Lwe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Nc.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const a=s.handlers[n];this._handlers.push(a),a.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,u,h,p,y)=>{this._emitInputEvent(a.priorityIndex+1,o,u,h,y,p)},setPointerCapture:(o,u)=>{this._setPointerCapture(s,a,o,u)},setEventCallback:o=>{a.eventCallback=o},setUninstallCallback:o=>{a.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):le.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const a of s.handler.outgoingEventTypes)if(e.has(a)){n=!0;break}}if(n)for(const a of s.handler.incomingEventMatches){e.add(a.eventType);for(const o of a.keyModifiers)Swe(o)||i.add(o)}s.active=n}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,s){const n=this._latestPointerInfo;if(n==null||n.id!==e||n.type!==i||n.location.x!==r||n.location.y!==s){const a=this._propertiesPool.get("latestPointerInfo");a.id=e,a.type=i,a.location.x=r,a.location.y=s,this._latestPointerInfo=a}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??i.native?.timestamp,s=i.native?.cancelable;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(o,u)=>{u&&!this._activeKeyModifiers.has(o)?(s(),this._activeKeyModifiers.add(o)):!u&&this._activeKeyModifiers.has(o)&&(s(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=i.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const a=i.native;n("Alt",!!a?.altKey),n("Control",!!a?.ctrlKey),n("Ctrl",!!a?.ctrlKey),n("Shift",!!a?.shiftKey),n("Meta",!!a?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Twe((e,i,r,s)=>this._setLatestPointer(e,i,r,s)),this._multiTouchHandler=new Cwe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Nc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Nc.INTERNAL)}_setPointerCapture(e,i,r,s){const n=e.name+"-"+i.priorityIndex,a=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,a),s?(a.add(n),a.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):a.has(n)&&(a.delete(n),a.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,n,a){const o=s??this._currentPropagation?.timestamp??performance.now(),u=n??!1,h={event:new Awe(i,r,o,a||this._activeKeyModifiers,u),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(e){this._currentPropagation={events:new tw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),s=i.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new tw;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(a=>s.keyModifiers.includes(a));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get test(){}};d([m({readOnly:!0})],Co.prototype,"hasPendingInputs",null),d([m({constructOnly:!0})],Co.prototype,"eventSource",void 0),d([m({constructOnly:!0})],Co.prototype,"recognizers",void 0),d([m()],Co.prototype,"multiTouchActive",null),d([m()],Co.prototype,"_latestPointerInfo",void 0),d([m()],Co.prototype,"latestPointerInfo",null),d([m()],Co.prototype,"_paused",void 0),d([m({readOnly:!0})],Co.prototype,"updating",null),Co=d([N("esri.views.input.InputManager")],Co);let Awe=class{constructor(e,i,r,s,n){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,s)=>{this._propagationState&=-3;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Nc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Pwe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([_e(()=>[this.ui,this.popup,this.popupElement],([r,s,n],a)=>{const[o,u,h]=a??[];gwe(this,[r,s,n],[o,u,h])},ps),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&vwe(this,r)},Nc.WIDGET)]),jw(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>K(()=>import("./Popup-BUrYoR-M.js").then(r=>r.P),__vite__mapDeps([149,150,151,152,153,154,155,62,60,61,22,25,63,156,157,158,159,160,161,162,4,163,164,165,166,167,168,169,170,171,172,77,173,174,175]),import.meta.url))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(cu(this.popup))return this.popup.open(r);if(this.popupElement&&Bc(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void le.getLogger(this).error(new G("view:null-popup","Popup is null and can't be opened"));_we(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),bwe(this.popup,this.popupElement)}async fetchPopupFeatures(r,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!cu(this.popup))return this._popupSetupTask=h3(async r=>{if(!this.popupEnabled||!Bc(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Wt(r),customElements.get("arcgis-popup")||le.getLogger(this).error(new G("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await K(()=>import("./Popup-BUrYoR-M.js").then(a=>a.P),__vite__mapDeps([149,150,151,152,153,154,155,62,60,61,22,25,63,156,157,158,159,160,161,162,4,163,164,165,166,167,168,169,170,171,172,77,173,174,175]),import.meta.url);if(Wt(r),!this.popup||cu(this.popup))return;const n=this.popup;if("open"in n||"close"in n){const{open:a,close:o,...u}=n;this.popup=new s({...u})}else this.popup=new s(n)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:s},n){const a=[],o=[];let u=!1;const h=Hue(n,X("popup-view-fetch-timeout")??kwe),p=b=>{const w=new Owe(b);return o.push(w),a.push(w.promise),w},y=b=>{const w=o.at(-1);return w&&w.layerView===b&&!u?w:p(b)};for(const b of s)"graphic"in b?(y(b.layerView).graphics.push(b.graphic),u=!1):(a.push(b.layerView.fetchPopupFeaturesAtLocation(b.mapPoint,h)),u=!0);o.forEach(b=>b.resolve(h));const v=Bue(a).then(b=>b.filter(w=>!!w).flat());return{pendingFeatures:a,allGraphicsPromise:v,location:r}}async _getPopupHits(r,s){const{hits:n,location:a}=await this.popupHitTest(r);Wt(s);const o=[];for(const u of n)if("graphic"in u){if(this._isValidPopupGraphic(u.graphic,s)){const h=this._isValidPopupGraphicsLayerView(u.layerView)?u.layerView:void 0;o.push({graphic:u.graphic,layerView:h})}}else this._isValidPopupLocationLayerView(u.layerView)&&o.push({mapPoint:u.mapPoint,layerView:u.layerView});return{hits:o,location:a}}_isValidPopupGraphic(r,s){return r&&!!r.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return d([m()],i.prototype,"popup",void 0),d([m()],i.prototype,"popupElement",void 0),d([m()],i.prototype,"popupEnabled",void 0),i=d([N("esri.views.PopupView")],i),i};let Owe=class{constructor(e){this.layerView=e,this._resolver=va(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,e).catch(a=>(n=a,null)).then(a=>{a?s.resolve(a):s.reject(n)}),s.promise}};const kwe=5e3;var f1;const oT=es()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),mQ=oT.jsonValues.slice();eP(mQ,"orthometric");const yb=es()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Pn=f1=class extends ve{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return oT.write(t,e,i)}readHeightModel(t,e,i){return oT.read(t)||(i?.messages&&i.messages.push(Rwe(t,{context:i})),null)}readHeightUnit(t,e,i){return yb.read(t)||(i?.messages&&i.messages.push(Q9(t,{context:i})),null)}readHeightUnitService(t,e,i){return A4(t)||yb.read(t)||(i?.messages&&i.messages.push(Q9(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new f1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=QW(e);return new f1({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new f1;return e.read(t,{origin:"web-scene"}),e}};function Q9(t,e){return new _a("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Rwe(t,e){return new _a("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}d([m({type:oT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:mQ,default:"ellipsoidal",write:{isRequired:!0}}}}})],Pn.prototype,"heightModel",void 0),d([Le("web-scene","heightModel")],Pn.prototype,"writeHeightModel",null),d([Ge(["web-scene","service"],"heightModel")],Pn.prototype,"readHeightModel",null),d([m({type:yb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:yb.jsonValues,write:{writer:yb.write,isRequired:!0}}}}})],Pn.prototype,"heightUnit",void 0),d([Ge("web-scene","heightUnit")],Pn.prototype,"readHeightUnit",null),d([Ge("service","heightUnit")],Pn.prototype,"readHeightUnitService",null),d([m({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Pn.prototype,"vertCRS",void 0),d([Ge("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Pn.prototype,"readVertCRS",null),Pn=f1=d([N("esri.geometry.HeightModelInfo")],Pn);let RL;async function Dwe(){return RL==null&&(RL=K(()=>import("./WhereClauseCache-CQ06TB9_.js"),__vite__mapDeps([32,33]),import.meta.url).then(t=>new t.WhereClauseCache(500,500))),RL}async function $D(t,e){const i=await Dwe(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function Nwe(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function zwe(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function GGe(t,e){return e.length===0?null:`${t} IN (${Fwe(e)})`}function Fwe(t){return t.map(e=>typeof e=="string"?Vwe(e):e).join(",")}function Vwe(t){return`'${t.replaceAll("'","''")}'`}function H0(t){return typeof t=="number"}function qGe(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function BGe(t){return typeof t=="boolean"}function Ww(t){return typeof t=="string"||t instanceof String}function jwe(t){return t==null||Ww(t)}function HGe(t){return Array.isArray(t)}function WGe(t){return t?.declaredClass==="esri.Graphic"}function ZGe(t){return t instanceof Date}const Uwe="HH:mm",Gwe="HH:mm:ss",qwe="HH:mm:ss.SSS",Bwe=[qwe,Gwe,Uwe,"TT"],Hwe="yyyy-MM-dd";function K9(t){if(!t||!Ww(t))return null;const e=Ae.fromFormat(t,Hwe);return e.isValid?e:null}function eU(t){return t&&Ww(t)?EH(Bwe,e=>{const i=Ae.fromFormat(t,e);return i.isValid?i:null})??null:null}function tU(t){if(!t||!Ww(t))return null;const e=Ae.fromISO(t);return e.isValid?e:null}const yQ=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function Wwe(t){return t!=null&&yQ.has(t.type)}function gQ(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function vQ(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function _Q(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const Zwe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);d4(yQ,Zwe);function YGe(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=Wwe(t);return gQ(t)||_Q(t)||vQ(t)?{...Ywe(t,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function Ywe(t,e,i){return gQ(t)?{min:K9(i)?.toMillis(),max:K9(e)?.toMillis(),rawMin:i,rawMax:e}:_Q(t)?{min:eU(i)?.toMillis(),max:eU(e)?.toMillis(),rawMin:i,rawMax:e}:vQ(t)?{min:tU(i)?.toMillis(),max:tU(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function Jwe(t){if(!t)return;const e=t.match(Xwe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const Xwe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function Qwe(t){return t.match(Kwe)?.[1]?.replaceAll("\\'","'")??null}const Kwe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let DL;function Gd(){return DL||(DL=(async()=>{const[t,e,i]=await Promise.all([K(()=>import("./arcadeUtils-Df-hhVu7.js"),__vite__mapDeps([176,177,178,179,180,156,36,181,24,22,25,182,183,33,77,184,157,158,185]),import.meta.url),K(()=>import("./batchExec-D3rH3msY.js"),__vite__mapDeps([186,82]),import.meta.url),K(()=>import("./aiServices-mcU-WylD.js").then(r=>r.a),__vite__mapDeps([182,179,180,156,36,183,178]),import.meta.url)]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),DL}const e2e=/^([0-9_])/,t2e=/[^a-z0-9_\u0080-\uffff]+/gi;function i2e(t){return t==null?null:t.trim().replaceAll(t2e,"_").replace(e2e,"F$1")||null}const r2e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],s2e=["field","normalizationField"];function iU(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(rU(r2e,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)rU(s2e,r,e)}}function rU(t,e,i){if(t)for(const r of t){const s=Ew(r,e),n=s&&typeof s!="function"&&i.get(s);n&&pn(r,n.name,e)}}function bQ(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const NL=new Set;function F3(t,e){return t&&e?(NL.clear(),W0(NL,t,e),Array.from(NL).sort()):[]}function W0(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)Gn(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function Gn(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function JGe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function XGe(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=F3(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Gs(t,e,i,r){if(!r)return;const s=Jwe(r);if(s)Gn(t,e,s);else{const{arcadeUtils:n}=await Gd(),a=n.extractFieldNames(r,i?.partitions??e?.fields?.map(o=>o.name));for(const o of a)Gn(t,i?.index??e,o)}}async function MD(t,e,i){if(i&&i!=="1=1"){const r=await $D(i,e);if(!r.isStandardized)throw new G("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});W0(t,e,r.fieldNames)}}function n2e({displayField:t,fields:e}){return t||(e?.length?a2e(e):null)}function a2e(t){return zL(t,"name-or-title")||zL(t,"unique-identifier")||zL(t,"type-or-category")||o2e(t)}function o2e(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function zL(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function QGe(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function l2e(t,e,i){i.onStatisticExpression?Gs(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function KGe(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(wQ(t,e,s)),i.fields&&r.push(...i.fields.map(async n=>l2e(t,e.fieldsIndex,n))),await Promise.all(r)}async function eqe(t,e){const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const s=[r.latestObservations.renderer?.collectRequiredFields(t,i),r.previousObservations.renderer?.collectRequiredFields(t,i),r.trackLines.renderer?.collectRequiredFields(t,i)];r.popupTemplate&&s.push(wQ(t,e,r.popupTemplate));for(const n of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(n)for(const a of n)s.push($Q(t,i,a));await Promise.all(s)}async function wQ(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(n=>Gs(t,e.fieldsIndex,null,n.expression)));const s=i?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(Gs(t,e.fieldsIndex,null,n.expressionInfo.expression));await Promise.all(r)}async function tqe(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&W0(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&W0(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await MD(t,e.fieldsIndex,i.where))}async function iqe(t,e,i){e&&i&&await Promise.all(i.map(r=>u2e(t,e,r)))}async function u2e(t,e,i){e&&i&&(i.valueExpression?await Gs(t,e.fieldsIndex,null,i.valueExpression):i.field&&Gn(t,e.fieldsIndex,i.field))}function rqe(t){return t?F3(t.fieldsIndex,SQ(t)):[]}function c2e(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?F3(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function sqe(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(s=>MD(t,r,s.where)))}const h2e=new Set(["oid","global-id","guid"]),d2e=new Set(["oid","global-id"]),p2e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function f2e(t){const e=new Set;xQ(t).forEach(r=>e.add(r)),c2e(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function SQ(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=e;return[i,r,s,n].filter(Boolean)}function xQ(t){return SQ(t).map(e=>e.toLowerCase())}function m2e(t,e){return t.editable&&!h2e.has(t.type)&&!xQ(e).includes(t.name?.toLowerCase()??"")}function y2e(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||f2e(e).includes(i)||d2e.has(t.type)||p2e.some(r=>r.test(i)))}async function nqe(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i?.length&&await Promise.all(i.map(s=>$Q(t,r,s)))}async function $Q(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Gs(t,e,null,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(a=>{Gn(t,e,a.slice(1,-1))})}await MD(t,e,s)}function g2e(t){const e=t.defaultValue;return e!==void 0&&TQ(t,e)?e:t.nullable?null:void 0}function aqe(t){const e=typeof t=="string"?{type:t}:t;return CQ(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function MQ(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function v2e(t){return t===null||MQ(t)}function _2e(t){return t===null||Number.isInteger(t)}function b2e(){return!0}function TQ(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?_2e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?v2e:MQ;break;case"string":case"esriFieldTypeString":i=t.nullable?jwe:Ww;break;default:i=b2e}return arguments.length===1?i:i(e)}const w2e=["integer","small-integer","big-integer","long"],S2e=["single","double"],x2e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],$2e=["esriFieldTypeSingle","esriFieldTypeDouble"],EQ=new Set([...w2e,...x2e]),M2e=new Set([...S2e,...$2e]),T2e=d4(EQ,M2e);function E2e(t){return t!=null&&EQ.has(t.type)}function TD(t){return t!=null&&T2e.has(t.type)}function CQ(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function V3(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function IQ(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function LQ(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function AQ(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function sU(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function nU(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function oqe(t,e){return C2e(t,e)===null}function lqe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function C2e(t,e){return t==null||t.nullable&&e===null?null:TQ(t,e)?TD(t)&&!I2e(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function I2e(t,e){const i=typeof t=="string"?PQ(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=s:e>=r&&e<=s}function PQ(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return L2e;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return A2e;case"esriFieldTypeBigInteger":case"big-integer":return P2e;case"esriFieldTypeSingle":case"single":return O2e;case"esriFieldTypeDouble":case"double":return k2e}}const L2e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},A2e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},P2e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},rx=(2-2**-23)*2**127,O2e={min:-rx,max:rx,isInteger:!1,rawMin:-rx,rawMax:rx},k2e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function uqe(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:s}=PQ(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function cqe(t,e){return!R2e(t,e,null)}function R2e(t,e,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function D2e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function N2e(t){const e=t?.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let E$=class extends ve{constructor(e){super(e),this.type=null}};d([m({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],E$.prototype,"type",void 0),E$=d([N("esri.popup.content.Content")],E$);const Zc=E$,sx=new wt({asc:"ascending",desc:"descending"});let m1=class extends yt(ve){constructor(e){super(e),this.field=null,this.order="ascending"}};d([m({type:String,json:{write:!0}})],m1.prototype,"field",void 0),d([m({type:sx.apiValues,json:{type:sx.jsonValues,read:sx.read,write:sx.write}})],m1.prototype,"order",void 0),m1=d([N("esri.popup.support.AttachmentsOrderByInfo")],m1);const z2e=m1;let ml=class extends yt(Zc){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};d([m({type:[String],json:{write:!0}})],ml.prototype,"attachmentKeywords",void 0),d([m({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],ml.prototype,"attachmentTypes",void 0),d([m({type:String,json:{write:!0}})],ml.prototype,"description",void 0),d([m({type:["auto","preview","list"],json:{write:!0}})],ml.prototype,"displayType",void 0),d([m({type:[z2e],json:{write:!0}})],ml.prototype,"orderByFields",void 0),d([m({type:String,json:{write:!0}})],ml.prototype,"title",void 0),d([m({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ml.prototype,"type",void 0),ml=d([N("esri.popup.content.AttachmentsContent")],ml);const Z0=ml;var IO;let Up=IO=class extends Zc{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new IO({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?J(this.outFields):null})}};d([m()],Up.prototype,"creator",void 0),d([m()],Up.prototype,"destroyer",void 0),d([m()],Up.prototype,"outFields",void 0),d([m({type:["custom"],readOnly:!0})],Up.prototype,"type",void 0),Up=IO=d([N("esri.popup.content.CustomContent")],Up);const F2e=Up;var LO;let Jy=LO=class extends ve{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new LO({title:this.title,expression:this.expression})}};d([m({type:String,json:{write:!0}})],Jy.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],Jy.prototype,"expression",void 0),d([m({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Jy.prototype,"returnType",void 0),Jy=LO=d([N("esri.popup.ElementExpressionInfo")],Jy);const V2e=Jy;var AO;let y1=AO=class extends Zc{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new AO({expressionInfo:this.expressionInfo?.clone()})}};d([m({type:V2e,json:{write:!0}})],y1.prototype,"expressionInfo",void 0),d([m({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],y1.prototype,"type",void 0),y1=AO=d([N("esri.popup.content.ExpressionContent")],y1);const j3=y1;let C$=class extends yt(ve){constructor(e){super(e),this.type=null}};d([m({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],C$.prototype,"type",void 0),C$=d([N("esri.layers.support.FieldFormat")],C$);const ED=C$,OQ="auto";let ec=class extends ED{constructor(e){super(e),this.dateStyle=null,this.hour12=OQ,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};d([m({type:["full","long","medium","short"],json:{write:!0}})],ec.prototype,"dateStyle",void 0),d([m({type:["always","auto","never"],nonNullable:!0,json:{default:OQ,write:!0}})],ec.prototype,"hour12",void 0),d([m({type:["long","short"],json:{write:!0}})],ec.prototype,"month",void 0),d([m({type:["full","long","medium","short"],json:{write:!0}})],ec.prototype,"timeStyle",void 0),d([m({type:["date-time"]})],ec.prototype,"type",void 0),d([m({type:["numeric"],json:{write:!0}})],ec.prototype,"year",void 0),ec=d([N("esri.layers.support.DateTimeFieldFormat")],ec);const Ed=ec,aU={min:0,max:20},kQ=2,RQ=0,DQ="decimal",NQ="auto";let qh=class extends ED{constructor(e){super(e),this.maximumFractionDigits=kQ,this.minimumFractionDigits=RQ,this.style=DQ,this.type="number",this.useGrouping=NQ}};d([m({type:bt,nonNullable:!0,range:aU,json:{default:kQ,write:!0}})],qh.prototype,"maximumFractionDigits",void 0),d([m({type:bt,nonNullable:!0,range:aU,json:{default:RQ,write:!0}})],qh.prototype,"minimumFractionDigits",void 0),d([m({type:["decimal"],nonNullable:!0,json:{default:DQ,write:!0}})],qh.prototype,"style",void 0),d([m({type:["number"]})],qh.prototype,"type",void 0),d([m({type:["always","auto","never"],nonNullable:!0,json:{default:NQ,write:!0}})],qh.prototype,"useGrouping",void 0),qh=d([N("esri.layers.support.NumberFieldFormat")],qh);const lT=qh;let Xy=class extends yt(ve){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};d([je(lye)],Xy.prototype,"dateFormat",void 0),d([m({type:Boolean,json:{write:!0}})],Xy.prototype,"digitSeparator",void 0),d([m({type:bt,json:{write:!0}})],Xy.prototype,"places",void 0),Xy=d([N("esri.popup.support.FieldInfoFormat")],Xy);const hu=Xy,j2e={base:ED,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":Ed,number:lT}};function vqe(t,e){const{format:i}=t;return e&&U3(e)?i?zQ(i,e):I$(e,{hour12:"always",useGrouping:"always"}):null}function zQ(t,e){const{dateFormat:i}=t;if(!e)return i?lU(t):oU(t);if(!U3(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return FQ(t);case"single":case"double":return oU(t);case"date":case"timestamp-offset":return i?lU(t):I$(e,r);case"date-only":return i?U2e(t):I$(e);case"time-only":return i?G2e(t):I$(e,r)}}function U3(t){return TD(t)||V3(t)||IQ(t)||AQ(t)||LQ(t)}function FQ(t){return new lT({useGrouping:t.digitSeparator?"always":"never"})}function oU(t){const e=FQ(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function lU(t){return new Ed({dateStyle:VQ(t),year:qQ(t),month:UQ(t),timeStyle:GQ(t),hour12:jQ(t)})}function U2e(t){return new Ed({dateStyle:VQ(t),year:qQ(t),month:UQ(t)})}function G2e(t){return new Ed({timeStyle:GQ(t),hour12:jQ(t)})}function VQ(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function jQ(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function UQ(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function GQ(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function qQ(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function q2e(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?uU(t):r?cU(t):null;if(U3(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?BQ(t):null;case"single":case"double":return i?uU(t):null;case"date":case"timestamp-offset":return r?cU(t):null;case"date-only":return r?B2e(t):null;case"time-only":return r?H2e(t):null}}function BQ(t){return new hu({digitSeparator:t.useGrouping!=="never"})}function uU(t){const e=BQ(t);return e.places=t.maximumFractionDigits,e}function cU(t){let e;const i=HQ(t),r=WQ(t),s=t.hour12==="never"?"24":null,n=t.year==="numeric"?"year":null,a=ZQ(t);return i&&r&&s?e=`${i}-${r}-${s}`:i&&r?e=`${i}-${r}`:i?e=i:n&&a?e=`${a}-${n}`:n&&(e=n),e?new hu({dateFormat:e}):null}function B2e(t){let e;const i=HQ(t),r=t.year==="numeric"?"year":null,s=ZQ(t);return i?e=i:r&&s?e=`${s}-${r}`:r&&(e=r),e?new hu({dateFormat:e}):null}function H2e(t){let e;const i=WQ(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new hu({dateFormat:e}):null}function HQ(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function WQ(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function ZQ(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function I$(t,e){if(!U3(t))return;const i=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new lT({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new lT({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new Ed({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new Ed({dateStyle:"short"});case"time-only":return new Ed({timeStyle:"short",hour12:r})}}let sa=class extends yt(ve){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?q2e(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?zQ(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?hu.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};d([m({value:null,clonable:!1,types:j2e,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!i?.writeFieldFormat}}}}})],sa.prototype,"fieldFormat",null),d([m({type:String,json:{write:!0}})],sa.prototype,"fieldName",void 0),d([m({value:null,clonable:!1,type:hu,json:{write:!0}})],sa.prototype,"format",null),d([Ge("format")],sa.prototype,"readFormat",null),d([m({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],sa.prototype,"isEditable",void 0),d([m({type:String,json:{write:!0}})],sa.prototype,"label",void 0),d([m({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],sa.prototype,"statisticType",void 0),d([je(new wt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],sa.prototype,"stringFieldOption",void 0),d([m({type:String,json:{write:!0}})],sa.prototype,"tooltip",void 0),d([m({type:Boolean,json:{write:!0}})],sa.prototype,"visible",void 0),sa=d([N("esri.popup.FieldInfo")],sa);const CD=sa;var PO;let Bh=PO=class extends Zc{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new PO(J({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};d([m({type:Object,json:{write:!0}})],Bh.prototype,"attributes",void 0),d([m({type:String,json:{write:!0}})],Bh.prototype,"description",void 0),d([m({type:[CD],json:{write:!0}})],Bh.prototype,"fieldInfos",void 0),d([m({type:String,json:{write:!0}})],Bh.prototype,"title",void 0),d([m({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Bh.prototype,"type",void 0),Bh=PO=d([N("esri.popup.content.FieldsContent")],Bh);const Y0=Bh;let Gp=class extends ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};d([m({type:String,json:{write:!0}})],Gp.prototype,"altText",void 0),d([m({type:String,json:{write:!0}})],Gp.prototype,"caption",void 0),d([m({type:String,json:{write:!0}})],Gp.prototype,"title",void 0),d([m({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Gp.prototype,"type",void 0),Gp=d([N("esri.popup.content.mixins.MediaInfo")],Gp);const ID=Gp;var OO;let qp=OO=class extends Ce{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new OO({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};d([m()],qp.prototype,"color",void 0),d([m()],qp.prototype,"fieldName",void 0),d([m()],qp.prototype,"tooltip",void 0),d([m()],qp.prototype,"value",void 0),qp=OO=d([N("esri.popup.content.support.ChartMediaInfoValueSeries")],qp);const W2e=qp;var kO;let Hh=kO=class extends ve{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new kO({colors:J(this.colors),fields:J(this.fields),normalizeField:this.normalizeField,series:J(this.series),tooltipField:this.tooltipField})}};d([m({type:[we],json:{type:[[bt]],write:!0}})],Hh.prototype,"colors",void 0),d([m({type:[String],json:{write:{isRequired:!0}}})],Hh.prototype,"fields",void 0),d([m({type:String,json:{write:!0}})],Hh.prototype,"normalizeField",void 0),d([m({type:[W2e],json:{read:!1}})],Hh.prototype,"series",void 0),d([m({type:String,json:{write:!0}})],Hh.prototype,"tooltipField",void 0),Hh=kO=d([N("esri.popup.content.support.ChartMediaInfoValue")],Hh);const Z2e=Hh;let g1=class extends ID{constructor(e){super(e),this.type=null,this.value=void 0}};d([m({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],g1.prototype,"type",void 0),d([m({type:Z2e,json:{write:{isRequired:!0}}})],g1.prototype,"value",void 0),g1=d([N("esri.popup.content.mixins.ChartMediaInfo")],g1);const G3=g1,q3=es()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var RO;let L$=RO=class extends G3{constructor(t){super(t),this.type="bar-chart"}clone(){return new RO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:q3.write,isRequired:!0}}})],L$.prototype,"type",void 0),L$=RO=d([N("esri.popup.content.BarChartMediaInfo")],L$);const YQ=L$;var DO;let A$=DO=class extends G3{constructor(t){super(t),this.type="column-chart"}clone(){return new DO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:q3.write,isRequired:!0}}})],A$.prototype,"type",void 0),A$=DO=d([N("esri.popup.content.ColumnChartMediaInfo")],A$);const JQ=A$;var NO;let v1=NO=class extends ve{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new NO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};d([m({type:String,json:{write:!0}})],v1.prototype,"linkURL",void 0),d([m({type:String,json:{write:{isRequired:!0}}})],v1.prototype,"sourceURL",void 0),v1=NO=d([N("esri.popup.content.support.ImageMediaInfoValue")],v1);const Y2e=v1;var zO;let Qy=zO=class extends ID{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new zO({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};d([m({type:Number,json:{write:!0}})],Qy.prototype,"refreshInterval",void 0),d([m({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qy.prototype,"type",void 0),d([m({type:Y2e,json:{write:{isRequired:!0}}})],Qy.prototype,"value",void 0),Qy=zO=d([N("esri.popup.content.ImageMediaInfo")],Qy);const XQ=Qy;var FO;let P$=FO=class extends G3{constructor(t){super(t),this.type="line-chart"}clone(){return new FO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:q3.write,isRequired:!0}}})],P$.prototype,"type",void 0),P$=FO=d([N("esri.popup.content.LineChartMediaInfo")],P$);const QQ=P$;var VO;let O$=VO=class extends G3{constructor(t){super(t),this.type="pie-chart"}clone(){return new VO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([m({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:q3.write,isRequired:!0}}})],O$.prototype,"type",void 0),O$=VO=d([N("esri.popup.content.PieChartMediaInfo")],O$);const KQ=O$,jO={base:ID,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":YQ,"column-chart":JQ,"line-chart":QQ,"pie-chart":KQ,image:XQ}};var UO;let Io=UO=class extends Zc{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?XQ.fromJSON(e):e.type==="barchart"?YQ.fromJSON(e):e.type==="columnchart"?JQ.fromJSON(e):e.type==="linechart"?QQ.fromJSON(e):e.type==="piechart"?KQ.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new UO(J({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};d([m()],Io.prototype,"activeMediaInfoIndex",void 0),d([m({type:Object,json:{write:!0}})],Io.prototype,"attributes",void 0),d([m({type:String,json:{write:!0}})],Io.prototype,"description",void 0),d([m({types:[jO]})],Io.prototype,"mediaInfos",void 0),d([Ge("mediaInfos")],Io.prototype,"readMediaInfos",null),d([Le("mediaInfos")],Io.prototype,"writeMediaInfos",null),d([m({type:String,json:{write:!0}})],Io.prototype,"title",void 0),d([m({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Io.prototype,"type",void 0),Io=UO=d([N("esri.popup.content.MediaContent")],Io);const rw=Io;var GO;let _1=GO=class extends ve{constructor(t){super(t),this.field=null,this.order=null}clone(){return new GO({field:this.field,order:this.order})}};d([m({type:String,json:{write:!0}})],_1.prototype,"field",void 0),d([m({type:["asc","desc"],json:{write:!0}})],_1.prototype,"order",void 0),_1=GO=d([N("esri.popup.support.RelatedRecordsInfoFieldOrder")],_1);const eK=_1;let yl=class extends yt(Zc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};d([m({type:String,json:{write:!0}})],yl.prototype,"description",void 0),d([m({type:Number,json:{type:bt,write:!0}})],yl.prototype,"displayCount",void 0),d([m({type:["list"],json:{write:{isRequired:!0}}})],yl.prototype,"displayType",void 0),d([m({type:[eK],json:{write:!0}})],yl.prototype,"orderByFields",void 0),d([m({type:Number,json:{type:bt,write:{isRequired:!0}}})],yl.prototype,"relationshipId",void 0),d([m({type:String,json:{write:!0}})],yl.prototype,"title",void 0),d([m({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],yl.prototype,"type",void 0),yl=d([N("esri.popup.content.RelationshipContent")],yl);const sw=yl;var qO;let b1=qO=class extends Zc{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new qO({text:this.text})}};d([m({type:String,json:{write:!0}})],b1.prototype,"text",void 0),d([m({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],b1.prototype,"type",void 0),b1=qO=d([N("esri.popup.content.TextContent")],b1);const nw=b1;let tc=class extends yt(ve){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};d([m({type:String,json:{write:!0}})],tc.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],tc.prototype,"description",void 0),d([m({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],tc.prototype,"type",void 0),d([m({type:Number,json:{type:bt,write:!0}})],tc.prototype,"associatedNetworkSourceId",void 0),d([m({type:Number,json:{type:bt,write:!0}})],tc.prototype,"associatedAssetGroup",void 0),d([m({type:Number,json:{type:bt,write:!0}})],tc.prototype,"associatedAssetType",void 0),tc=d([N("esri.popup.support.UtilityNetworkAssociationType")],tc);const J2e=tc;let Wh=class extends yt(Zc){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};d([m({type:String,json:{write:!0}})],Wh.prototype,"description",void 0),d([m({type:Number,json:{type:bt,write:!0}})],Wh.prototype,"displayCount",void 0),d([m({type:String,json:{write:!0}})],Wh.prototype,"title",void 0),d([m({type:[J2e],json:{write:!0}})],Wh.prototype,"associationTypes",void 0),d([je({utilityNetworkAssociations:"utility-network-associations"})],Wh.prototype,"type",void 0),Wh=d([N("esri.popup.content.UtilityNetworkAssociationsContent")],Wh);const LD=Wh,X2e={base:null,key:"type",typeMap:{attachment:Z0,media:rw,text:nw,expression:j3,field:Y0,relationship:sw,utilityNetworkAssociations:LD}},Q2e={base:null,key:"type",typeMap:{attachment:Z0,media:rw,text:nw,expression:j3,field:Y0,relationship:sw}};var BO;let Bp=BO=class extends ve{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new BO({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([m({type:String,json:{write:!0}})],Bp.prototype,"name",void 0),d([m({type:String,json:{write:!0}})],Bp.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],Bp.prototype,"expression",void 0),d([m({type:["string","number"],json:{write:!0}})],Bp.prototype,"returnType",void 0),Bp=BO=d([N("esri.popup.ExpressionInfo")],Bp);const K2e=Bp;var HO;let w1=HO=class extends ve{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new HO({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};d([m({type:Boolean,json:{write:!0}})],w1.prototype,"returnTopmostRaster",void 0),d([m({type:Boolean,json:{write:!0}})],w1.prototype,"showNoDataRecords",void 0),w1=HO=d([N("esri.popup.LayerOptions")],w1);const eSe=w1;var WO;let S1=WO=class extends ve{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new WO({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?J(this.orderByFields):null})}};d([m({type:Boolean,json:{write:!0}})],S1.prototype,"showRelatedRecords",void 0),d([m({type:[eK],json:{write:!0}})],S1.prototype,"orderByFields",void 0),S1=WO=d([N("esri.popup.RelatedRecordsInfo")],S1);const hU=S1;var ZO;let za=ZO=class extends $m(Ce){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new ZO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};d([m()],za.prototype,"active",void 0),d([m()],za.prototype,"className",void 0),d([m()],za.prototype,"disabled",void 0),d([m()],za.prototype,"icon",void 0),d([m()],za.prototype,"id",void 0),d([m()],za.prototype,"indicator",void 0),d([m()],za.prototype,"title",void 0),d([m()],za.prototype,"type",void 0),d([m()],za.prototype,"visible",void 0),za=ZO=d([N("esri.support.actions.ActionBase")],za);const B3=za;var YO;let k$=YO=class extends B3{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new YO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};d([m()],k$.prototype,"image",void 0),k$=YO=d([N("esri.support.actions.ActionButton")],k$);const tK=k$;var JO;let x1=JO=class extends B3{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new JO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};d([m()],x1.prototype,"image",void 0),d([m()],x1.prototype,"value",void 0),x1=JO=d([N("esri.support.actions.ActionToggle")],x1);const iK=x1,z_="relationships/",dU="expression/",tSe=$e.ofType({key:"type",defaultKeyValue:"button",base:B3,typeMap:{button:tK,toggle:iK}}),iSe={base:Zc,key:"type",typeMap:{media:rw,custom:F2e,text:nw,attachments:Z0,fields:Y0,expression:j3,relationship:sw,utilityNetworkAssociations:LD}},rK=new Set(["attachments","fields","media","text","expression","relationship"]),rSe=new Set([...rK,"utility-network-associations"]);let Mr=class extends yt(ve){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Dd(iSe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||zs(e)?e:(le.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,r,s){const{content:n}=this,a=Array.isArray(n)?n:null,{writeFieldFormat:o,...u}=s||{};if(e){const h=a?a.filter(y=>y.type==="fields"):[],p=h.length&&h.every(y=>y.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(y=>{const v=y.toJSON(u);return p&&(v.visible=!1),v})}if(a)for(const h of a)h.type==="fields"&&this._writeFieldsContent(h,i,u)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...s,...this._getContentExpressionInfos(this.content,s)]),W0(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>r?.origin==="web-scene"?rK.has(s.type):rSe.has(s.type)).map(s=>s?.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}_writeFieldsContent(e,i,r){const s=e.fieldInfos;if(!Array.isArray(s)||!s.length)return;const n=i.fieldInfos;if(Array.isArray(n))for(const a of s){const o=n.find(u=>u.fieldName?.toLowerCase()===a.fieldName?.toLowerCase());o?o.visible=!0:n.push(a.toJSON(r))}else i.fieldInfos=s.map(a=>a.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=J(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),rw.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),nw.fromJSON(n)):n.type==="attachments"?Z0.fromJSON(n):n.type==="fields"?Y0.fromJSON(n):n.type==="expression"?j3.fromJSON(n):n.type==="relationship"?sw.fromJSON(n):n.type==="utilityNetworkAssociations"?LD.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith(z_))return null;const s=i.replace(z_,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),a=s[1];return!Number.isNaN(n)&&a?sw.fromJSON({relationshipId:n,orderByFields:[{field:a,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${z_}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new nw({text:e})):n.push(new Y0),Array.isArray(i)&&i.length&&n.push(rw.fromJSON({mediaInfos:i})),r&&n.push(Z0.fromJSON({displayType:"auto"}));const{showRelatedRecords:a,orderByFields:o}=s;return a&&o?.length&&o.forEach(u=>{const h=this._toRelationshipContent(u);h&&n.push(h)}),n.length?n:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,n=s||{},{fields:a,normalizeField:o,tooltipField:u,sourceURL:h,linkURL:p}=n,y=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(h),...this._extractFieldNames(p),...a??[]];return o&&y.push(o),u&&y.push(u),y}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,s){s&&await Promise.all(s.map(n=>Gs(e,i,r,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(z_)||i.startsWith(dU))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return N2e(e).filter(i=>!(i.startsWith(z_)||i.startsWith(dU)))}};d([m({type:tSe})],Mr.prototype,"actions",void 0),d([m()],Mr.prototype,"content",void 0),d([Nt("content")],Mr.prototype,"castContent",null),d([Ge("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Mr.prototype,"readContent",null),d([Le("web-scene","content",{popupElements:{type:$e.ofType(Q2e)},showAttachments:{type:Boolean},mediaInfos:{type:$e.ofType(jO)},description:{type:String},relatedRecordsInfo:{type:hU}})],Mr.prototype,"writeWebSceneContent",null),d([Le("content",{popupElements:{type:$e.ofType(X2e)},showAttachments:{type:Boolean},mediaInfos:{type:$e.ofType(jO)},description:{type:String},relatedRecordsInfo:{type:hU}})],Mr.prototype,"writeWebMapContent",null),d([m({type:[K2e],json:{write:!0}})],Mr.prototype,"expressionInfos",void 0),d([m({type:[CD]})],Mr.prototype,"fieldInfos",void 0),d([Le("fieldInfos")],Mr.prototype,"writeFieldInfos",null),d([m({type:eSe})],Mr.prototype,"layerOptions",void 0),d([Le("layerOptions")],Mr.prototype,"writeLayerOptions",null),d([m({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Mr.prototype,"lastEditInfoEnabled",void 0),d([m()],Mr.prototype,"outFields",void 0),d([m()],Mr.prototype,"overwriteActions",void 0),d([m()],Mr.prototype,"returnGeometry",void 0),d([m({json:{type:String}})],Mr.prototype,"title",void 0),d([Le("title")],Mr.prototype,"writeTitle",null),Mr=d([N("esri.PopupTemplate")],Mr);const wv=Mr,AD=Symbol("idFieldsProviderSymbol");function sSe(t){return!!t&&AD in t}function pU(t){return sSe(t)?t[AD]:void 0}const Zw=Symbol("popupProvider");function Tqe(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function nSe(t){return!!t&&Zw in t}function aSe(t){return nSe(t)?t[Zw]:null}function Eqe(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function fU(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const mU=new wt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let oSe=0,ar=class extends ve{constructor(e){super(e),this.id="sym"+oSe++,this.type=null,this.color=new we([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};d([m({type:mU.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:mU.write,isRequired:!0}}})],ar.prototype,"type",void 0),d([m({type:we,json:{write:{allowNull:!0}}})],ar.prototype,"color",void 0),d([Ge("color")],ar.prototype,"readColor",null),ar=d([N("esri.symbols.Symbol")],ar);var XO;let Ls=XO=class extends ar{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return n?Gs(t,e,null,n.expression):null});await Promise.all(r)}}}clone(){return new XO({data:J(this.data)})}hash(){return nH(JSON.stringify(this.data)).toString()}};d([m({json:{write:!1}})],Ls.prototype,"color",void 0),d([m({json:{write:!0}})],Ls.prototype,"data",void 0),d([Ge("data",["symbol"])],Ls.prototype,"readData",null),d([Le("data",{})],Ls.prototype,"writeData",null),d([je({CIMSymbolReference:"cim"},{readOnly:!0})],Ls.prototype,"type",void 0),Ls=XO=d([N("esri.symbols.CIMSymbol")],Ls);let cn=class extends ve{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};d([m({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],cn.prototype,"enabled",void 0),d([Le("enabled")],cn.prototype,"writeEnabled",null),d([m({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],cn.prototype,"type",void 0),cn=d([N("esri.symbols.Symbol3DLayer")],cn);function lSe(t,e){const i=e.transparency!=null?Hb(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new we([r[0]||0,r[1]||0,r[2]||0,i]):null}function uSe(t,e){e.color=t.toJSON().slice(0,3);const i=eD(t.a);i!==0&&(e.transparency=i)}function Kd(t){return{type:we,nonNullable:t?.nonNullable,json:{type:[bt],default:null,read:{source:["color","transparency"],reader:lSe},write:{target:{color:{type:[bt],isRequired:t?.colorRequiredOnWrite},transparency:{type:bt}},writer:uSe}}}}const yu={type:Number,cast:gt,json:{write:!0}};function Lqe(t){return t==="emissive"?0:1}let Hp=class extends ve{constructor(e){super(e),this.color=new we([0,0,0,1]),this.extensionLength=0,this.size=Ut(1)}clone(){}cloneProperties(){return{color:J(this.color),size:this.size,extensionLength:this.extensionLength}}};d([m({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Hp.prototype,"type",void 0),d([m(Kd({colorRequiredOnWrite:!0}))],Hp.prototype,"color",void 0),d([m({...yu,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Hp.prototype,"extensionLength",void 0),d([m(yu)],Hp.prototype,"size",void 0),Hp=d([N("esri.symbols.edges.Edges3D")],Hp);const PD=Hp;var QO;let R$=QO=class extends PD{constructor(t){super(t),this.type="sketch"}clone(){return new QO(this.cloneProperties())}};d([je({sketch:"sketch"},{readOnly:!0})],R$.prototype,"type",void 0),R$=QO=d([N("esri.symbols.edges.SketchEdges3D")],R$);const cSe=R$;var KO;let D$=KO=class extends PD{constructor(t){super(t),this.type="solid"}clone(){return new KO(this.cloneProperties())}};d([je({solid:"solid"},{readOnly:!0})],D$.prototype,"type",void 0),D$=KO=d([N("esri.symbols.edges.SolidEdges3D")],D$);const sK=D$,nK={types:{key:"type",base:PD,typeMap:{solid:sK,sketch:cSe}},json:{write:!0}};var ek;let $g=ek=class extends ve{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new ek(t)}};d([m({json:{write:!1}})],$g.prototype,"strength",void 0),d([m({json:{write:!1}})],$g.prototype,"source",void 0),$g=ek=d([N("esri.symbols.support.Symbol3DEmissive")],$g);var tk;let Vn=tk=class extends ve{constructor(t){super(t),this.color=null,this.emissive=new $g({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new tk(t)}};d([m(Kd())],Vn.prototype,"color",void 0),d([m({type:$g,json:{write:!1}})],Vn.prototype,"emissive",void 0),Vn=tk=d([N("esri.symbols.support.Symbol3DMaterial")],Vn);var ik,n0;let dc=(n0=class extends cn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new ik({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},ik=n0,n0);d([je({Extrude:"extrude"},{readOnly:!0})],dc.prototype,"type",void 0),d([m({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],dc.prototype,"size",void 0),d([m({type:Vn,json:{write:!0}})],dc.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],dc.prototype,"castShadows",void 0),d([m(nK)],dc.prototype,"edges",void 0),dc=ik=d([N("esri.symbols.ExtrudeSymbol3DLayer")],dc);let gb=class extends ve{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],gb.prototype,"type",void 0),gb=d([N("esri.symbols.patterns.LinePattern3D")],gb);const hSe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var rk;const dSe=es()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Of=rk=class extends gb{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new rk(t)}};d([m({type:["style"],json:{write:{isRequired:!0}}})],Of.prototype,"type",void 0),d([je(dSe),m({type:hSe,json:{write:{isRequired:!0}}})],Of.prototype,"style",void 0),Of=rk=d([N("esri.symbols.patterns.LineStylePattern3D")],Of);let vb=class extends ve{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],vb.prototype,"type",void 0),vb=d([N("esri.symbols.patterns.Pattern3D")],vb);const pSe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var sk;let Mg=sk=class extends vb{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new sk({style:this.style})}};d([m({type:["style"],json:{write:{isRequired:!0}}})],Mg.prototype,"type",void 0),d([m({type:pSe,json:{read:!0,write:{isRequired:!0}}})],Mg.prototype,"style",void 0),Mg=sk=d([N("esri.symbols.patterns.StylePattern3D")],Mg);const fSe={types:{key:"type",base:vb,typeMap:{style:Mg}},json:{write:!0}},aK={types:{key:"type",base:gb,typeMap:{style:Of}},json:{write:!0}},_b=new we("white"),mSe=new we([255,255,255,0]);function ySe(t){return t.r===0&&t.g===0&&t.b===0}var nk;let bb=nk=class extends Vn{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new nk(t)}};d([je({multiply:"multiply",replace:"replace",tint:"tint"})],bb.prototype,"colorMixMode",void 0),bb=nk=d([N("esri.symbols.support.Symbol3DFillMaterial")],bb);function OD(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function gSe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function vSe(t,e,i,r,s,n,a,o,u,h,p,y,v,b,w,S){return[t,e,i,r,s,n,a,o,u,h,p,y,v,b,w,S]}const _Se=OD();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:_Se,clone:gSe,create:OD,fromValues:vSe},Symbol.toStringTag,{value:"Module"}));function bSe(t){return t<=QB?new Array(t).fill(0):new Float64Array(t)}function kqe(t){return(XB(t)?t.byteLength/8:t.length)<=QB?Array.from(t):new Float64Array(t)}function Rqe(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function Dqe(t){return[...t]}function Nqe(t){const e=OD();for(let i=0;i<16;++i)e[i]=t[i];return e}function Yw(t=$Se){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function kD(t,e,i,r,s,n,a=Yw()){return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=s,a[5]=n,a}function zqe(t,e=Yw()){return wSe(t,0,t.length/3,e)}function wSe(t,e,i,r=Yw()){return oK(r,ak),SSe(r,t,e,i),r}function Fqe(t,e=bSe(24)){const[i,r,s,n,a,o]=t;return e[0]=i,e[1]=r,e[2]=s,e[3]=i,e[4]=r,e[5]=o,e[6]=i,e[7]=a,e[8]=s,e[9]=i,e[10]=a,e[11]=o,e[12]=n,e[13]=r,e[14]=s,e[15]=n,e[16]=r,e[17]=o,e[18]=n,e[19]=a,e[20]=s,e[21]=n,e[22]=a,e[23]=o,e}function Vqe(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new at(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function jqe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Uqe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Gqe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function SSe(t,e,i=0,r=e.length/3){let s=t[0],n=t[1],a=t[2],o=t[3],u=t[4],h=t[5];for(let p=0;p<r;p++)s=Math.min(s,e[i+3*p]),n=Math.min(n,e[i+3*p+1]),a=Math.min(a,e[i+3*p+2]),o=Math.max(o,e[i+3*p]),u=Math.max(u,e[i+3*p+1]),h=Math.max(h,e[i+3*p+2]);t[0]=s,t[1]=n,t[2]=a,t[3]=o,t[4]=u,t[5]=h}function qqe(t,e,i){const r=e.length;let s=t[0],n=t[1],a=t[2],o=t[3],u=t[4],h=t[5];if(i)for(let p=0;p<r;p++){const y=e[p];s=Math.min(s,y[0]),n=Math.min(n,y[1]),a=Math.min(a,y[2]),o=Math.max(o,y[0]),u=Math.max(u,y[1]),h=Math.max(h,y[2])}else for(let p=0;p<r;p++){const y=e[p];s=Math.min(s,y[0]),n=Math.min(n,y[1]),o=Math.max(o,y[0]),u=Math.max(u,y[1])}t[0]=s,t[1]=n,t[2]=a,t[3]=o,t[4]=u,t[5]=h}function Bqe(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Jw(t){return t[0]>=t[3]?0:t[3]-t[0]}function Xw(t){return t[1]>=t[4]?0:t[4]-t[1]}function Qw(t){return t[2]>=t[5]?0:t[5]-t[2]}function Hqe(t){const e=Jw(t),i=Qw(t),r=Xw(t);return Math.sqrt(e*e+i*i+r*r)}function Wqe(t,e=[0,0,0]){return e[0]=t[0]+Jw(t)/2,e[1]=t[1]+Xw(t)/2,e[2]=t[2]+Qw(t)/2,e}function Zqe(t,e=[0,0,0]){return e[0]=Jw(t),e[1]=Xw(t),e[2]=Qw(t),e}function Yqe(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function xSe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function Jqe(t,e){return e==null||xSe(t,e)}function Xqe(t,e,i,r,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+r,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+r,s}function Qqe(t,e,i=t){const r=t[0]+Jw(t)/2,s=t[1]+Xw(t)/2,n=t[2]+Qw(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=s+(t[1]-s)*e,i[2]=n+(t[2]-n)*e,i[3]=r+(t[3]-r)*e,i[4]=s+(t[4]-s)*e,i[5]=n+(t[5]-n)*e,i}function Kqe(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function eBe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function tBe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function oK(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function iBe(t){return t?oK(t,ak):Yw(ak)}function rBe(t,e=Oi()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function sBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function nBe(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function yU(t){return t.length===6}function aBe(t){return Jw(t)===0&&Xw(t)===0&&Qw(t)===0}function oBe(t,e,i){if(t==null||e==null)return t===e;if(!yU(t)||!yU(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const ak=[1/0,1/0,1/0,-1/0,-1/0,-1/0],$Se=[0,0,0,0,0,0];Yw();function lBe(t,{isPrimitive:e,width:i,depth:r,height:s}){const n=e?10:1;if(i==null&&s==null&&r==null)return[n*t[0],n*t[1],n*t[2]];const a=bv(i,r,s);let o;for(let u=0;u<3;u++){const h=a[u];if(h!=null){o=h/t[u];break}}for(let u=0;u<3;u++)a[u]==null&&(a[u]=t[u]*o);return a}const MSe=kD(-.5,-.5,-.5,.5,.5,.5),TSe=kD(-.5,-.5,0,.5,.5,1),ESe=kD(-.5,-.5,0,.5,.5,.5);function uBe(t){switch(t){case"sphere":case"cube":case"diamond":return MSe;case"cylinder":case"cone":case"inverted-cone":return TSe;case"tetrahedron":return ESe;default:return}}const RD=["butt","square","round"],CSe=[...RD,"none"],lK=["miter","bevel","round"];var ok;let Wp=ok=class extends ve{constructor(t){super(t),this.color=new we([0,0,0,1]),this.size=Ut(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new ok(t)}};d([m(Kd({colorRequiredOnWrite:!0}))],Wp.prototype,"color",void 0),d([m({...yu,json:{write:{isRequired:!0}}})],Wp.prototype,"size",void 0),d([m(aK)],Wp.prototype,"pattern",void 0),d([m({type:RD,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Wp.prototype,"patternCap",void 0),Wp=ok=d([N("esri.symbols.support.Symbol3DOutline")],Wp);var N$,a0;let rn=(a0=class extends cn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new N$(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Of({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??_b).clone(),pattern:i};return i&&e.outline?.cap&&(r.patternCap=e.outline.cap),new N$({material:new bb({color:(e.color??mSe).clone()}),pattern:e.style&&e.style!=="solid"?new Mg({style:e.style}):null,outline:r})}},N$=a0,a0);d([je({Fill:"fill"},{readOnly:!0})],rn.prototype,"type",void 0),d([m({type:bb,json:{write:!0}})],rn.prototype,"material",void 0),d([m(fSe)],rn.prototype,"pattern",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rn.prototype,"castShadows",void 0),d([m({type:Wp,json:{write:!0}})],rn.prototype,"outline",void 0),d([m(nK)],rn.prototype,"edges",void 0),rn=N$=d([N("esri.symbols.FillSymbol3DLayer")],rn);var lk;const ISe=es()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Zp=lk=class extends ve{constructor(t){super(t)}readHref(t,e,i){return t?Vc(t,i):e.dataURI}writeHref(t,e,i,r){t&&(ym(t)?e.dataURI=t:(e.href=nm(t,r),jn(e.href)&&(e.href=io(e.href))))}clone(){return new lk({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};d([m({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Zp.prototype,"href",void 0),d([Ge("href")],Zp.prototype,"readHref",null),d([Le("href",{href:{type:String},dataURI:{type:String}})],Zp.prototype,"writeHref",null),d([je(ISe)],Zp.prototype,"primitive",void 0),Zp=lk=d([N("esri.symbols.support.IconSymbol3DLayerResource")],Zp);const LSe="circle";let z$=class extends yt(ve){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};d([m({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],z$.prototype,"mode",void 0),z$=d([N("esri.symbols.support.OccludedVisibility")],z$);const uK=z$;var uk;let Tg=uk=class extends Ce{constructor(t){super(t),this.x=0,this.y=0}clone(){return new uk({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};d([m({type:Number})],Tg.prototype,"x",void 0),d([m({type:Number})],Tg.prototype,"y",void 0),Tg=uk=d([N("esri.symbols.support.Symbol3DAnchorPosition2D")],Tg);var ck;let $1=ck=class extends ve{constructor(t){super(t),this.color=new we([0,0,0,1]),this.size=Ut(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new ck(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};d([m(Kd({colorRequiredOnWrite:!0}))],$1.prototype,"color",void 0),d([m({...yu,json:{write:{isRequired:!0}}})],$1.prototype,"size",void 0),$1=ck=d([N("esri.symbols.support.Symbol3DIconOutline")],$1);var Ky,o0;let Jr=(o0=class extends cn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new Ky({anchor:this.anchor,anchorPosition:J(this.anchorPosition),enabled:this.enabled,material:J(this.material),outline:J(this.outline),resource:J(this.resource),angle:this.angle,size:this.size,occludedVisibility:J(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||_b,r=gU(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||_b).clone()}:null;return new Ky({size:e.size,angle:e.angle,resource:{primitive:PSe(()=>le.getLogger(this.prototype),e.style)},material:{color:i},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||ySe(e.color)?_b:e.color,r=gU(e);return new Ky({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Ky({resource:{href:gH({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Ky=o0,o0);function gU(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=vU(t.xoffset),s=vU(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function vU(t){return isFinite(t)?t:0}d([m({type:Vn,json:{write:!0}})],Jr.prototype,"material",void 0),d([m({type:Zp,json:{write:!0}})],Jr.prototype,"resource",void 0),d([je({Icon:"icon"},{readOnly:!0})],Jr.prototype,"type",void 0),d([m({...yu,json:{write:{isRequired:!0}}})],Jr.prototype,"size",void 0),d([je({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Jr.prototype,"anchor",void 0),d([m({type:Tg,json:{type:[Number],read:{reader:t=>new Tg({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Jr.prototype,"anchorPosition",void 0),d([m({type:$1,json:{write:!0}})],Jr.prototype,"outline",void 0),d([m({type:Number,json:{write:!0,default:0}})],Jr.prototype,"angle",void 0),d([m({type:uK})],Jr.prototype,"occludedVisibility",void 0),Jr=Ky=d([N("esri.symbols.IconSymbol3DLayer")],Jr);const ASe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function PSe(t,e){return ASe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const OSe=["begin","end","begin-end"],cK=["arrow","circle","square","diamond","cross","x"];let xc=class extends yt(ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};d([m({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],xc.prototype,"type",void 0),d([m({type:OSe,json:{default:"begin-end",write:!0}})],xc.prototype,"placement",void 0),d([m({type:cK,json:{default:"arrow",write:!0}})],xc.prototype,"style",void 0),d([m({type:we,json:{type:[bt],default:null,write:!0}})],xc.prototype,"color",void 0),xc=d([N("esri.symbols.LineStyleMarker3D")],xc);var F$,l0;let tn=(l0=class extends cn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ut(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new F$(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Ut(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Of({style:e.style}):null,material:new Vn({color:(e.color||_b).clone()}),marker:e.marker?new xc({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new F$(i)}},F$=l0,l0);d([m({type:Vn,json:{write:!0}})],tn.prototype,"material",void 0),d([je({Line:"line"},{readOnly:!0})],tn.prototype,"type",void 0),d([m({type:lK,json:{write:!0,default:"miter"}})],tn.prototype,"join",void 0),d([m({type:RD,json:{write:!0,default:"butt"}})],tn.prototype,"cap",void 0),d([m({...yu,json:{write:{isRequired:!0}}})],tn.prototype,"size",void 0),d([m(aK)],tn.prototype,"pattern",void 0),d([m({types:{key:"type",base:xc,typeMap:{style:xc}},json:{write:!0}})],tn.prototype,"marker",void 0),tn=F$=d([N("esri.symbols.LineSymbol3DLayer")],tn);var hk;const kSe=es()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let M1=hk=class extends ve{clone(){return new hk({href:this.href,primitive:this.primitive})}};d([m({type:String,json:{read:r3,write:am}})],M1.prototype,"href",void 0),d([je(kSe)],M1.prototype,"primitive",void 0),M1=hk=d([N("esri.symbols.support.ObjectSymbol3DLayerResource")],M1);const RSe="sphere";var dk;let wf=dk=class extends Ce{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new dk({x:this.x,y:this.y,z:this.z})}};d([m({type:Number})],wf.prototype,"x",void 0),d([m({type:Number})],wf.prototype,"y",void 0),d([m({type:Number})],wf.prototype,"z",void 0),wf=dk=d([N("esri.symbols.support.Symbol3DAnchorPosition3D")],wf);var pk,u0;let Yr=(u0=class extends cn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new pk({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},pk=u0,u0);d([m({type:Vn,json:{write:!0}})],Yr.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Yr.prototype,"castShadows",void 0),d([m({type:M1,json:{write:!0}})],Yr.prototype,"resource",void 0),d([je({Object:"object"},{readOnly:!0})],Yr.prototype,"type",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"width",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"height",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"depth",void 0),d([je({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Yr.prototype,"anchor",void 0),d([m({type:wf,json:{type:[Number],read:{reader:t=>new wf({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Yr.prototype,"anchorPosition",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"heading",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"tilt",void 0),d([m({type:Number,json:{write:!0}})],Yr.prototype,"roll",void 0),d([m({readOnly:!0})],Yr.prototype,"isPrimitive",null),Yr=pk=d([N("esri.symbols.ObjectSymbol3DLayer")],Yr);var fk,c0;let hs=(c0=class extends cn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new fk({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},fk=c0,c0);d([m({type:Vn,json:{write:!0}})],hs.prototype,"material",void 0),d([m({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hs.prototype,"castShadows",void 0),d([je({Path:"path"},{readOnly:!0})],hs.prototype,"type",void 0),d([m({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],hs.prototype,"profile",void 0),d([m({type:lK,nonNullable:!0,json:{write:!0,default:"miter"}})],hs.prototype,"join",void 0),d([m({type:CSe,nonNullable:!0,json:{write:!0,default:"butt"}})],hs.prototype,"cap",void 0),d([m({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],hs.prototype,"width",void 0),d([Ge("width",["width","size","height"])],hs.prototype,"readWidth",null),d([m({type:Number,json:{write:!0}})],hs.prototype,"height",void 0),d([Ge("height",["height","size","width"])],hs.prototype,"readHeight",null),d([m({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],hs.prototype,"anchor",void 0),d([m({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],hs.prototype,"profileRotation",void 0),hs=fk=d([N("esri.symbols.PathSymbol3DLayer")],hs);const DSe=["none","underline","line-through"],NSe=["normal","italic","oblique"],zSe=["normal","lighter","bold","bolder"],hK={type:Number,cast:t=>{const e=an(t);return e===0?1:ys(e,.1,4)},nonNullable:!0},FSe=["left","right","center"],VSe=["baseline","top","middle","bottom"],dK={type:FSe,nonNullable:!0},pK={type:VSe,nonNullable:!0},jSe=8;var mk;let ha=mk=class extends ve{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return gt(t)}clone(){return new mk({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};d([m({type:DSe,json:{default:"none",write:!0}})],ha.prototype,"decoration",void 0),d([m({type:String,json:{write:!0}})],ha.prototype,"family",void 0),d([m({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ha.prototype,"size",void 0),d([Nt("size")],ha.prototype,"castSize",null),d([m({type:NSe,json:{default:"normal",write:!0}})],ha.prototype,"style",void 0),d([m({type:zSe,json:{default:"normal",write:!0}})],ha.prototype,"weight",void 0),ha=mk=d([N("esri.symbols.Font")],ha);var yk;let Eg=yk=class extends ve{constructor(){super(...arguments),this.color=new we([0,0,0,1]),this.size=0}clone(){const t={color:J(this.color),size:this.size};return new yk(t)}};d([m(Kd())],Eg.prototype,"color",void 0),d([m(yu)],Eg.prototype,"size",void 0),Eg=yk=d([N("esri.symbols.support.Symbol3DHalo")],Eg);let wb=class extends yt(ve){constructor(e){super(e),this.color=null}};d([m(Kd())],wb.prototype,"color",void 0),wb=d([N("esri.symbols.support.Symbol3DTextBackground")],wb);var V$,h0;let Er=(h0=class extends cn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,s){const n={...s,textSymbol3D:!0};i.font=e.write({},n),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new V$({enabled:this.enabled,font:J(this.font),halo:J(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:J(this.background),occludedVisibility:J(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new V$({font:e.font!=null?e.font.clone():new ha,halo:USe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Vn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new wb({color:e.backgroundColor.clone()}):null})}},V$=h0,h0);function USe(t,e){return t&&e!=null&&e>0?new Eg({color:J(t),size:e}):null}d([m({type:ha,json:{write:!0}})],Er.prototype,"font",null),d([Le("font")],Er.prototype,"writeFont",null),d([m({type:Eg,json:{write:!0}})],Er.prototype,"halo",void 0),d([m({...dK,json:{default:"center",write:!0}})],Er.prototype,"horizontalAlignment",void 0),d([m({...hK,json:{default:1,write:!0}})],Er.prototype,"lineHeight",void 0),d([m({type:Vn,json:{write:!0}})],Er.prototype,"material",void 0),d([m({type:wb,json:{write:!0}})],Er.prototype,"background",void 0),d([m(yu)],Er.prototype,"size",null),d([m({type:String,json:{write:!0}})],Er.prototype,"text",void 0),d([je({Text:"text"},{readOnly:!0})],Er.prototype,"type",void 0),d([m({...pK,json:{default:"baseline",write:!0}})],Er.prototype,"verticalAlignment",void 0),d([m({type:uK})],Er.prototype,"occludedVisibility",void 0),Er=V$=d([N("esri.symbols.TextSymbol3DLayer")],Er);var gk,d0;let pc=(d0=class extends cn{constructor(e){super(e),this.color=vk.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new gk({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},gk=d0,d0);d([m({type:we,nonNullable:!0,json:{type:[bt],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>vk.clone(),defaultEquals:t=>t.toCss(!0)===vk.toCss(!0)}})],pc.prototype,"color",void 0),d([je({Water:"water"},{readOnly:!0})],pc.prototype,"type",void 0),d([m({type:["small","medium","large"],json:{write:!0,default:"medium"}})],pc.prototype,"waterbodySize",void 0),d([m({type:Number,json:{write:!0,default:null}})],pc.prototype,"waveDirection",void 0),d([m({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],pc.prototype,"waveStrength",void 0),pc=gk=d([N("esri.symbols.WaterSymbol3DLayer")],pc);const vk=new we([0,119,190]);var _k;let Go=_k=class extends Ce{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new _k({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};d([m({type:String})],Go.prototype,"name",void 0),d([m({type:String})],Go.prototype,"styleUrl",void 0),d([m({type:String})],Go.prototype,"styleName",void 0),d([m({type:ge})],Go.prototype,"portal",void 0),Go=_k=d([N("esri.symbols.support.StyleOrigin")],Go);var bk;let Zf=bk=class extends Ce{constructor(){super(...arguments),this.url=""}clone(){return new bk({url:this.url})}};d([m({type:String})],Zf.prototype,"url",void 0),Zf=bk=d([N("esri.symbols.support.Thumbnail")],Zf);const fK={icon:Jr,object:Yr,line:tn,path:hs,fill:rn,extrude:dc,text:Er,water:pc},GSe=$e.ofType({base:cn,key:"type",typeMap:fK,errorContext:"symbol-layer"});let On=class extends ar{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,s=r||$e;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&le.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){lu(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=Vc(e.styleUrl,r);return new Go({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Go({portal:r?.portal||ge.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new _a("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let n=nm(e.styleUrl,s);jn(n)&&(n=io(n)),i.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!yH(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new _a("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof cn||e&&fK[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};d([m({json:{read:!1,write:!1}})],On.prototype,"color",null),d([m({type:GSe,nonNullable:!0,json:{write:!0}}),Nt(CW)],On.prototype,"symbolLayers",null),d([m({type:Go})],On.prototype,"styleOrigin",void 0),d([Ge("styleOrigin")],On.prototype,"readStyleOrigin",null),d([Le("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],On.prototype,"writeStyleOrigin",null),d([m({type:Zf,json:{read:!1}})],On.prototype,"thumbnail",void 0),d([m({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],On.prototype,"type",void 0),On=d([N("esri.symbols.Symbol3D")],On);let Cg=class extends ve{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};d([m({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Cg.prototype,"type",void 0),d([m({readOnly:!0})],Cg.prototype,"visible",void 0),Cg=d([N("esri.symbols.callouts.Callout3D")],Cg);var wk;let j$=wk=class extends ve{constructor(t){super(t),this.color=new we("white")}clone(){return new wk({color:J(this.color)})}};d([m(Kd({colorRequiredOnWrite:!0}))],j$.prototype,"color",void 0),j$=wk=d([N("esri.symbols.callouts.LineCallout3DBorder")],j$);const qSe=j$;var Sk;let fc=Sk=class extends Cg{constructor(t){super(t),this.type="line",this.color=new we([0,0,0,1]),this.size=Ut(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Sk({color:J(this.color),size:this.size,border:J(this.border)})}};d([je({line:"line"})],fc.prototype,"type",void 0),d([m(Kd({colorRequiredOnWrite:!0}))],fc.prototype,"color",void 0),d([m({...yu,json:{write:{isRequired:!0}}})],fc.prototype,"size",void 0),d([m({type:qSe,json:{write:!0}})],fc.prototype,"border",void 0),d([m({readOnly:!0})],fc.prototype,"visible",null),fc=Sk=d([N("esri.symbols.callouts.LineCallout3D")],fc);function DD(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function mK(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!DD(t)}function mBe(t){return t.type==="point-3d"||t.type==="label-3d"}function yBe(t){return t.horizontalAlignment==="center"}const yK={types:{key:"type",base:Cg,typeMap:{line:fc}},json:{write:!0}};var xk;let dd=xk=class extends ve{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new xk({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};d([m({...yu,json:{write:{isRequired:!0}}})],dd.prototype,"screenLength",void 0),d([m({type:Number,nonNullable:!0,json:{write:!0,default:0}})],dd.prototype,"minWorldLength",void 0),d([m({type:Number,json:{write:!0}})],dd.prototype,"maxWorldLength",void 0),dd=xk=d([N("esri.symbols.support.Symbol3DVerticalOffset")],dd);var U$;const gK=$e.ofType({base:null,key:"type",typeMap:{text:Er}});let Fo=U$=class extends On{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new gK,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return mK(this)}hasVisibleVerticalOffset(){return DD(this)}clone(){return new U$({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail),callout:J(this.callout),verticalOffset:J(this.verticalOffset)})}static fromTextSymbol(t){return new U$({symbolLayers:new $e([Er.fromTextSymbol(t)])})}};d([m({type:dd,json:{write:!0}})],Fo.prototype,"verticalOffset",void 0),d([m(yK)],Fo.prototype,"callout",void 0),d([m({json:{read:!1,write:!1}})],Fo.prototype,"styleOrigin",void 0),d([m({type:gK})],Fo.prototype,"symbolLayers",void 0),d([je({LabelSymbol3D:"label-3d"},{readOnly:!0})],Fo.prototype,"type",void 0),Fo=U$=d([N("esri.symbols.LabelSymbol3D")],Fo);var G$;const vK=$e.ofType({base:null,key:"type",typeMap:{line:tn,path:hs}}),BSe=$e.ofType({base:null,key:"type",typeMap:{line:tn,path:hs}});let Yo=G$=class extends On{constructor(t){super(t),this.symbolLayers=new vK,this.type="line-3d"}clone(){return new G$({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleLineSymbol(t){return new G$({symbolLayers:new $e([tn.fromSimpleLineSymbol(t)])})}};d([m({type:vK,json:{type:BSe}})],Yo.prototype,"symbolLayers",void 0),d([je({LineSymbol3D:"line-3d"},{readOnly:!0})],Yo.prototype,"type",void 0),Yo=G$=d([N("esri.symbols.LineSymbol3D")],Yo);var q$;const _K=$e.ofType({base:null,key:"type",typeMap:{fill:rn}});let Lc=q$=class extends On{constructor(t){super(t),this.symbolLayers=new _K,this.type="mesh-3d"}clone(){return new q$({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleFillSymbol(t){return new q$({symbolLayers:new $e([rn.fromSimpleFillSymbol(t)])})}};d([m({type:_K})],Lc.prototype,"symbolLayers",void 0),d([je({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Lc.prototype,"type",void 0),Lc=q$=d([N("esri.symbols.MeshSymbol3D")],Lc);let T1=class extends ar{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};d([je({esriSLS:"simple-line"},{readOnly:!0})],T1.prototype,"type",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],T1.prototype,"width",void 0),T1=d([N("esri.symbols.LineSymbol")],T1);var $k;let gl=$k=class extends ve{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new $k({color:J(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};d([m({type:["begin","end","begin-end"],json:{write:!0}})],gl.prototype,"placement",void 0),d([je({"line-marker":"line-marker"},{readOnly:!0}),m({json:{origins:{"web-map":{write:!1}}}})],gl.prototype,"type",void 0),d([m({type:cK})],gl.prototype,"style",void 0),d([Le("style")],gl.prototype,"writeStyle",null),d([m({type:we,value:null,json:{write:{allowNull:!0}}})],gl.prototype,"color",null),d([Ge("color")],gl.prototype,"readColor",null),d([Le("color")],gl.prototype,"writeColor",null),gl=$k=d([N("esri.symbols.LineSymbolMarker")],gl);const HSe=gl;var Mk;const FL=new wt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ui=Mk=class extends T1{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,n){if(t&&typeof t!="string")return t;const a={};return t!=null&&(a.style=t),e!=null&&(a.color=e),i!=null&&(a.width=gt(i)),r!=null&&(a.cap=r),s!=null&&(a.join=s),n!=null&&(a.miterLimit=gt(n)),a}clone(){return new Mk({color:J(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};d([je({esriSLS:"simple-line"},{readOnly:!0})],Ui.prototype,"type",void 0),d([m({type:FL.apiValues,json:{read:FL.read,write:FL.write}})],Ui.prototype,"style",void 0),d([m({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Ui.prototype,"cap",void 0),d([m({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Ui.prototype,"join",void 0),d([m({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":HSe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ui.prototype,"marker",void 0),d([m({type:Number,json:{read:!1,write:!1}})],Ui.prototype,"miterLimit",void 0),Ui=Mk=d([N("esri.symbols.SimpleLineSymbol")],Ui);let Ig=class extends ar{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};d([m({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ui}},json:{default:null,write:!0}})],Ig.prototype,"outline",void 0),d([m({type:["simple-fill","picture-fill"],readOnly:!0})],Ig.prototype,"type",void 0),Ig=d([N("esri.symbols.FillSymbol")],Ig);function WSe(t,e,i){return e.imageData?gH({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):bK(e.url,i)}function bK(t,e){if(!jn(t)){const i=YSe(e);if(i)return Cw(i,"images",t)}return Vc(t,e)}function ZSe(t,e,i,r){if(ym(t)){const s=I0(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&am(i.url,e,"url",r)}else am(t,e,"url",r)}const wK={json:{read:{source:["imageData","url"],reader:WSe},write:{writer(t,e,i,r){ZSe(t,e,this.source,r)}}}},SK={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=bK(e.url,i)),r}}}};function YSe(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var Tk;let Ln=Tk=class extends Ig{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=gt(i)),r!=null&&(s.height=gt(r)),s}clone(){const t=new Tk({color:J(this.color),height:this.height,outline:J(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",J(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};d([je({esriPFS:"picture-fill"},{readOnly:!0})],Ln.prototype,"type",void 0),d([m(wK)],Ln.prototype,"url",void 0),d([m({type:Number,json:{write:!0}})],Ln.prototype,"xscale",void 0),d([m({type:Number,json:{write:!0}})],Ln.prototype,"yscale",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Ln.prototype,"width",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Ln.prototype,"height",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Ln.prototype,"xoffset",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Ln.prototype,"yoffset",void 0),d([m(SK)],Ln.prototype,"source",void 0),Ln=Tk=d([N("esri.symbols.PictureFillSymbol")],Ln);let mc=class extends ar{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};d([m({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],mc.prototype,"angle",void 0),d([m({type:["simple-marker","picture-marker"],readOnly:!0})],mc.prototype,"type",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],mc.prototype,"xoffset",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],mc.prototype,"yoffset",void 0),d([m({cast:t=>t==="auto"?t:an(gt(t)),json:{write:!0}})],mc.prototype,"size",void 0),mc=d([N("esri.symbols.MarkerSymbol")],mc);var Ek;let en=Ek=class extends mc{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=gt(e)),i!=null&&(r.height=gt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Ek({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",J(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};d([m({json:{write:!1}})],en.prototype,"color",void 0),d([je({esriPMS:"picture-marker"},{readOnly:!0})],en.prototype,"type",void 0),d([m(wK)],en.prototype,"url",void 0),d([m(SK)],en.prototype,"source",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],en.prototype,"height",void 0),d([Ge("height",["height","size"])],en.prototype,"readHeight",null),d([m({type:Number,cast:gt,json:{write:!0}})],en.prototype,"width",void 0),d([m({json:{write:!1}})],en.prototype,"size",void 0),en=Ek=d([N("esri.symbols.PictureMarkerSymbol")],en);var Yp;const xK=$e.ofType({base:null,key:"type",typeMap:{icon:Jr,object:Yr,text:Er}});let on=Yp=class extends On{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new xK,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return mK(this)}hasVisibleVerticalOffset(){return DD(this)}clone(){return new Yp({verticalOffset:J(this.verticalOffset),callout:J(this.callout),styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Yp({symbolLayers:new $e([Jr.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Yp({symbolLayers:new $e([Jr.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Yp(i?.callout?{symbolLayers:new $e([Jr.fromCIMSymbol(t)]),callout:new fc({size:.5,color:new we([0,0,0])}),verticalOffset:new dd({screenLength:40})}:{symbolLayers:new $e([Jr.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Yp({symbolLayers:new $e([Er.fromTextSymbol(t)])})}};d([m({type:dd,json:{write:!0}})],on.prototype,"verticalOffset",void 0),d([m(yK)],on.prototype,"callout",void 0),d([m({type:xK,json:{origins:{"web-scene":{write:!0}}}})],on.prototype,"symbolLayers",void 0),d([je({PointSymbol3D:"point-3d"},{readOnly:!0})],on.prototype,"type",void 0),on=Yp=d([N("esri.symbols.PointSymbol3D")],on);var E1;const $K=$e.ofType({base:null,key:"type",typeMap:{extrude:dc,fill:rn,icon:Jr,line:tn,object:Yr,text:Er,water:pc}});let to=E1=class extends On{constructor(t){super(t),this.symbolLayers=new $K,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Rd(le.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Rd(le.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Vs(()=>this.symbolLayers,"after-add",({item:e})=>t(e),no))}clone(){return new E1({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromJSON(t){const e=new E1;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new E1({symbolLayers:new $e([rn.fromSimpleFillSymbol(t)])})}};d([m({type:$K,json:{write:!0}})],to.prototype,"symbolLayers",void 0),d([je({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],to.prototype,"type",void 0),to=E1=d([N("esri.symbols.PolygonSymbol3D")],to);var Ck;const VL=new wt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ln=Ck=class extends Ig{constructor(...t){super(...t),this.color=new we([0,0,0,.25]),this.outline=new Ui,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new Ck({color:J(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};d([m()],ln.prototype,"color",void 0),d([m()],ln.prototype,"outline",void 0),d([je({esriSFS:"simple-fill"},{readOnly:!0})],ln.prototype,"type",void 0),d([m({type:VL.apiValues,json:{read:VL.read,write:VL.write}})],ln.prototype,"style",void 0),ln=Ck=d([N("esri.symbols.SimpleFillSymbol")],ln);var Ik;const jL=new wt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Pi=Ik=class extends mc{constructor(...t){super(...t),this.color=new we([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ui}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=gt(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new Ik({angle:this.angle,color:J(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};d([m()],Pi.prototype,"color",void 0),d([Le("color")],Pi.prototype,"writeColor",null),d([je({esriSMS:"simple-marker"},{readOnly:!0})],Pi.prototype,"type",void 0),d([m()],Pi.prototype,"size",void 0),d([m({type:jL.apiValues,json:{read:jL.read,write:jL.write}})],Pi.prototype,"style",void 0),d([m({type:String,json:{write:!0}})],Pi.prototype,"path",null),d([m({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ui}},json:{default:null,write:!0}})],Pi.prototype,"outline",void 0),Pi=Ik=d([N("esri.symbols.SimpleMarkerSymbol")],Pi);var Lk;let Xt=Lk=class extends ar{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ha,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return gt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new Lk({angle:this.angle,backgroundColor:J(this.backgroundColor),borderLineColor:J(this.borderLineColor),borderLineSize:this.borderLineSize,color:J(this.color),font:this.font&&this.font.clone(),haloColor:J(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};d([m({type:we,json:{write:!0}})],Xt.prototype,"backgroundColor",void 0),d([m({type:we,json:{write:!0}})],Xt.prototype,"borderLineColor",void 0),d([m({type:Number,json:{write:!0},cast:gt})],Xt.prototype,"borderLineSize",void 0),d([m({type:ha,json:{write:!0}})],Xt.prototype,"font",void 0),d([m({...dK,json:{write:!0}})],Xt.prototype,"horizontalAlignment",void 0),d([m({type:Boolean,json:{write:!0}})],Xt.prototype,"kerning",void 0),d([m({type:we,json:{write:!0}})],Xt.prototype,"haloColor",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Xt.prototype,"haloSize",void 0),d([m({type:Boolean,json:{write:!0}})],Xt.prototype,"rightToLeft",void 0),d([m({type:Boolean,json:{write:!0}})],Xt.prototype,"rotated",void 0),d([m({type:String,json:{write:!0}})],Xt.prototype,"text",void 0),d([je({esriTS:"text"},{readOnly:!0})],Xt.prototype,"type",void 0),d([m({...pK,json:{write:!0}})],Xt.prototype,"verticalAlignment",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Xt.prototype,"xoffset",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Xt.prototype,"yoffset",void 0),d([m({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Xt.prototype,"angle",void 0),d([m({type:Number,json:{write:!0}})],Xt.prototype,"width",void 0),d([m({type:Number})],Xt.prototype,"lineWidth",void 0),d([Le("lineWidth")],Xt.prototype,"writeLineWidth",null),d([Nt("lineWidth")],Xt.prototype,"castLineWidth",null),d([m(hK)],Xt.prototype,"lineHeight",void 0),d([Le("lineHeight")],Xt.prototype,"writeLineHeight",null),Xt=Lk=d([N("esri.symbols.TextSymbol")],Xt);var Ak;let ds=Ak=class extends ar{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ge.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new Ak({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){jH(le.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new G("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const a=i&&e.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:r}=await K(()=>Promise.resolve().then(()=>oDe),void 0,import.meta.url);Wt(t);const s=r(this,{portal:this.portal},t);s.catch(a=>{le.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const n=await s;return e?.set(i,n.clone()),n}};d([m({json:{write:!1}})],ds.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],ds.prototype,"styleName",void 0),d([m({type:ge,json:{write:!1}})],ds.prototype,"portal",void 0),d([m({type:String,json:{read:r3,write:am}})],ds.prototype,"styleUrl",void 0),d([m({type:Zf,json:{read:!1}})],ds.prototype,"thumbnail",void 0),d([m({type:String,json:{write:!0}})],ds.prototype,"name",void 0),d([je({styleSymbolReference:"web-style"},{readOnly:!0})],ds.prototype,"type",void 0),d([m()],ds.prototype,"_fetchCacheKey",null),ds=Ak=d([N("esri.symbols.WebStyleSymbol")],ds);function H3(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function el(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const kf={base:ar,key:"type",typeMap:{"simple-fill":ln,"picture-fill":Ln,"picture-marker":en,"simple-line":Ui,"simple-marker":Pi,text:Xt,"label-3d":Fo,"line-3d":Yo,"mesh-3d":Lc,"point-3d":on,"polygon-3d":to,"web-style":ds,cim:Ls},errorContext:"symbol"},bBe={base:ar,key:"type",typeMap:{"picture-marker":en,"simple-marker":Pi,"point-3d":on,cim:Ls},errorContext:"symbol"},wBe={base:ar,key:"type",typeMap:{"simple-line":Ui,"line-3d":Yo,cim:Ls},errorContext:"symbol"},SBe={base:ar,key:"type",typeMap:{"simple-fill":ln,"picture-fill":Ln,"polygon-3d":to,cim:Ls},errorContext:"symbol"},JSe={base:ar,key:"type",typeMap:{"picture-marker":en,"simple-marker":Pi,text:Xt,"web-style":ds,cim:Ls},errorContext:"symbol"},XSe=pv({types:kf}),MK={base:ar,key:"type",typeMap:{"simple-fill":ln,"picture-fill":Ln,"picture-marker":en,"simple-line":Ui,"simple-marker":Pi,text:Xt,"line-3d":Yo,"mesh-3d":Lc,"point-3d":on,"polygon-3d":to,"web-style":ds,cim:Ls},errorContext:"symbol"},QSe={base:ar,key:"type",typeMap:{text:Xt,"label-3d":Fo},errorContext:"symbol"},_U={base:ar,key:"type",typeMap:{"line-3d":Yo,"mesh-3d":Lc,"point-3d":on,"polygon-3d":to,"web-style":ds,cim:Ls},errorContext:"symbol"},KSe={base:ar,key:"type",typeMap:{"label-3d":Fo},errorContext:"symbol"},TK=Dd(kf);var Pk;function exe(t){if(!t)return null;const e={};for(const i in t){const r=Ud(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function txe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var p0;let Fr=(p0=class extends yt(ve){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:e$(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&xce(le.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new Pk({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=aSe(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[r,this.sourceLayer,this.layer])if(s&&typeof s=="object"){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=pU(this.origin);if(e)return fU(this,e);const i=this.sourceLayer??this.layer;return i?fU(this,i):null}getGlobalId(){const e=pU(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){return{aggregateGeometries:txe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Fb(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Kr(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),Kr(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},Pk=p0,p0);d([m({value:null,json:{read:exe}})],Fr.prototype,"aggregateGeometries",null),d([m({value:null})],Fr.prototype,"attributes",null),d([m({value:null,types:Hw,json:{read:Ud}})],Fr.prototype,"geometry",null),d([m({type:Boolean})],Fr.prototype,"isAggregate",void 0),d([m({clonable:!1})],Fr.prototype,"layer",void 0),d([m({clonable:"reference"})],Fr.prototype,"origin",void 0),d([m({type:wv,value:null})],Fr.prototype,"popupTemplate",null),d([m({clonable:"reference"})],Fr.prototype,"sourceLayer",void 0),d([m({value:null,types:kf})],Fr.prototype,"symbol",null),d([m({clonable:!1,json:{read:!1,write:!1}})],Fr.prototype,"_version",void 0),d([m({type:Boolean,value:!0})],Fr.prototype,"visible",null),Fr=Pk=d([N("esri.Graphic")],Fr);let Sb=class extends fb{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};d([TW({Type:Fr,ensureType:Ur(Fr)})],Sb.prototype,"itemType",void 0),Sb=d([N("esri.support.GraphicsCollection")],Sb);let ic=class extends Ce{constructor(e){super(e),this.view=null,this.baseLayerViews=new $e,this.groundLayerViews=new $e,this.referenceLayerViews=new $e,this._loadingHandle=_e(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Lt)}destroy(){this._set("view",null),this._loadingHandle=fi(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.groundLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};d([m({constructOnly:!0})],ic.prototype,"view",void 0),d([m({readOnly:!0})],ic.prototype,"baseLayerViews",void 0),d([m({readOnly:!0})],ic.prototype,"groundLayerViews",void 0),d([m({readOnly:!0})],ic.prototype,"referenceLayerViews",void 0),d([m({readOnly:!0})],ic.prototype,"suspended",null),d([m({type:Boolean,readOnly:!0})],ic.prototype,"updating",null),ic=d([N("esri.views.BasemapView")],ic);const ixe=ic;let na=class extends Ce{constructor(e){super(e),this.factor=1.5,this.offset=qi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};d([m({type:Number})],na.prototype,"factor",void 0),d([m({nonNullable:!0})],na.prototype,"offset",void 0),d([m()],na.prototype,"position",void 0),d([m({type:Number,range:{min:0}})],na.prototype,"size",void 0),d([m()],na.prototype,"maskUrl",void 0),d([m()],na.prototype,"maskEnabled",void 0),d([m()],na.prototype,"overlayUrl",void 0),d([m()],na.prototype,"overlayEnabled",void 0),d([m({readOnly:!0})],na.prototype,"version",null),d([m({type:Boolean})],na.prototype,"visible",void 0),na=d([N("esri.views.Magnifier")],na);const EK=na;let Cd=class{constructor(e){this._observable=new Dw,this._map=new Map(e)}get size(){return We(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return We(this._observable),this._map.entries()}forEach(e,i){We(this._observable),this._map.forEach((r,s)=>e.call(i,r,s,this),i)}get(e){return We(this._observable),this._map.get(e)}has(e){return We(this._observable),this._map.has(e)}keys(){return We(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return We(this._observable),this._map.values()}[Symbol.iterator](){return We(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var Ok;let Rf=Ok=class extends ve{constructor(t){super(t),this.name=null,this.code=null}clone(){return new Ok({name:this.name,code:this.code})}};d([m({type:String,json:{write:{isRequired:!0}}})],Rf.prototype,"name",void 0),d([m({type:[String,Number],json:{write:{isRequired:!0}}})],Rf.prototype,"code",void 0),Rf=Ok=d([N("esri.layers.support.CodedValue")],Rf);const rxe=new wt({inherited:"inherited",codedValue:"coded-value",range:"range"});let bd=class extends ve{constructor(e){super(e),this.name=null,this.type=null}};d([m({type:String,json:{write:!0}})],bd.prototype,"name",void 0),d([je(rxe),m({json:{write:{isRequired:!0}}})],bd.prototype,"type",void 0),bd=d([N("esri.layers.support.Domain")],bd);var kk,f0;let wd=(f0=class extends bd{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(s=>(String(s.code)===r&&(i=s.name),!!i))}return i}clone(){return new kk({codedValues:J(this.codedValues),name:this.name})}},kk=f0,f0);d([m({type:[Rf],json:{write:{isRequired:!0}}})],wd.prototype,"codedValues",void 0),d([je({codedValue:"coded-value"})],wd.prototype,"type",void 0),wd=kk=d([N("esri.layers.support.CodedValueDomain")],wd);var Rk,m0;let xb=(m0=class extends bd{constructor(e){super(e),this.type="inherited"}clone(){return new Rk}},Rk=m0,m0);d([je({inherited:"inherited"})],xb.prototype,"type",void 0),xb=Rk=d([N("esri.layers.support.InheritedDomain")],xb);var Dk,y0;let Sf=(y0=class extends bd{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Dk({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},Dk=y0,y0);d([m({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Sf.prototype,"maxValue",void 0),d([m({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Sf.prototype,"minValue",void 0),d([je({range:"range"})],Sf.prototype,"type",void 0),Sf=Dk=d([N("esri.layers.support.RangeDomain")],Sf);const sxe={key:"type",base:bd,typeMap:{range:Sf,"coded-value":wd,inherited:xb}};function nxe(t){if(!t?.type)return null;switch(t.type){case"range":return Sf.fromJSON(t);case"codedValue":return wd.fromJSON(t);case"inherited":return xb.fromJSON(t)}return null}const axe=new wt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Nk;const oxe=new wt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var g0;let Nr=(g0=class extends ve{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?.value??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?oxe.fromJSON(r.fieldValueType):null}clone(){return new Nk({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},Nk=g0,g0);d([m({type:String,json:{write:!0}})],Nr.prototype,"alias",void 0),d([m({type:[String,Number],json:{write:{allowNull:!0}}})],Nr.prototype,"defaultValue",void 0),d([m()],Nr.prototype,"description",void 0),d([Ge("description")],Nr.prototype,"readDescription",null),d([m({types:sxe,json:{read:{reader:nxe},write:!0}})],Nr.prototype,"domain",void 0),d([m({type:Boolean,json:{write:!0}})],Nr.prototype,"editable",void 0),d([m({type:bt,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Nr.prototype,"length",void 0),d([m({type:String,json:{write:!0}})],Nr.prototype,"name",void 0),d([m({type:Boolean,json:{write:!0}})],Nr.prototype,"nullable",void 0),d([je(axe)],Nr.prototype,"type",void 0),d([m()],Nr.prototype,"valueType",void 0),d([Ge("valueType",["description"])],Nr.prototype,"readValueType",null),d([m({type:Boolean,json:{read:!1}})],Nr.prototype,"visible",void 0),Nr=Nk=d([N("esri.layers.support.Field")],Nr);var zk;let eg=zk=class extends ve{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new zk({mapLayerId:t,gdbVersion:e})}};d([je({mapLayer:"map-layer"}),m({json:{write:{isRequired:!0}}})],eg.prototype,"type",void 0),d([m({type:bt,json:{write:{isRequired:!0}}})],eg.prototype,"mapLayerId",void 0),d([m({type:String,json:{write:!0}})],eg.prototype,"gdbVersion",void 0),eg=zk=d([N("esri.layers.support.source.MapLayerSource")],eg);var Fk;let rc=Fk=class extends ve{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:s};return new Fk(n)}};d([je({queryTable:"query-table"}),m({json:{write:{isRequired:!0}}})],rc.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],rc.prototype,"workspaceId",void 0),d([m({type:String,json:{write:!0}})],rc.prototype,"query",void 0),d([m({type:String,json:{write:!0}})],rc.prototype,"oidFields",void 0),d([m({type:Ee,json:{write:!0}})],rc.prototype,"spatialReference",void 0),d([je(vD)],rc.prototype,"geometryType",void 0),rc=Fk=d([N("esri.layers.support.source.QueryTableDataSource")],rc);var Vk;let tg=Vk=class extends ve{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new Vk({workspaceId:t,dataSourceName:e})}};d([je({raster:"raster"}),m({json:{write:{isRequired:!0}}})],tg.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],tg.prototype,"dataSourceName",void 0),d([m({type:String,json:{write:!0}})],tg.prototype,"workspaceId",void 0),tg=Vk=d([N("esri.layers.support.source.RasterDataSource")],tg);var jk;let Jp=jk=class extends ve{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new jk({workspaceId:t,gdbVersion:e,dataSourceName:i})}};d([je({table:"table"}),m({json:{write:{isRequired:!0}}})],Jp.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Jp.prototype,"workspaceId",void 0),d([m({type:String,json:{write:!0}})],Jp.prototype,"gdbVersion",void 0),d([m({type:String,json:{write:!0}})],Jp.prototype,"dataSourceName",void 0),Jp=jk=d([N("esri.layers.support.source.TableDataSource")],Jp);var Uk,Gk;const lxe=es()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let aa=Uk=class extends ve{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return bU()(t,e,i)}castLeftTableSource(t){return Dd(qk(),t)}readRightTableSource(t,e,i){return bU()(t,e,i)}castRightTableSource(t){return Dd(qk(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:s};return new Uk(n)}};d([je({joinTable:"join-table"}),m({json:{write:{isRequired:!0}}})],aa.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],aa.prototype,"leftTableKey",void 0),d([m({type:String,json:{write:!0}})],aa.prototype,"rightTableKey",void 0),d([m({json:{write:!0}})],aa.prototype,"leftTableSource",void 0),d([Ge("leftTableSource")],aa.prototype,"readLeftTableSource",null),d([Nt("leftTableSource")],aa.prototype,"castLeftTableSource",null),d([m({json:{write:!0}})],aa.prototype,"rightTableSource",void 0),d([Ge("rightTableSource")],aa.prototype,"readRightTableSource",null),d([Nt("rightTableSource")],aa.prototype,"castRightTableSource",null),d([je(lxe)],aa.prototype,"joinType",void 0),aa=Uk=d([N("esri.layers.support.source.JoinTableDataSource")],aa);let UL=null;function bU(){return UL||(UL=pv({types:qk()})),UL}let GL=null;function qk(){return GL||(GL={key:"type",base:null,typeMap:{"data-layer":El,"map-layer":eg}}),GL}const uxe={key:"type",base:null,typeMap:{"join-table":aa,"query-table":rc,raster:tg,table:Jp}};var v0;let El=(v0=class extends ve{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new Gk({fields:e,dataSource:i})}},Gk=v0,v0);d([je({dataLayer:"data-layer"}),m({json:{write:{isRequired:!0}}})],El.prototype,"type",void 0),d([m({type:[Nr],json:{write:!0}})],El.prototype,"fields",void 0),d([m({types:uxe,json:{write:!0}})],El.prototype,"dataSource",void 0),El=Gk=d([N("esri.layers.support.source.DataLayerSource")],El),El.from=Ur(El);let Xp=class extends yt(ve){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};d([m({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Xp.prototype,"onFields",void 0),d([m({type:String,json:{write:!0}})],Xp.prototype,"operator",void 0),d([m({type:String,json:{write:!0}})],Xp.prototype,"searchTerm",void 0),d([m({type:String,json:{write:!0}})],Xp.prototype,"searchType",void 0),Xp=d([N("esri.rest.support.FullTextSearch")],Xp);const cxe=Xp;var Bk;const wU=new wt({upperLeft:"upper-left",lowerLeft:"lower-left"});let od=Bk=class extends ve{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Bk(J({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};d([m({type:at,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],od.prototype,"extent",void 0),d([m({type:["view","edit"],json:{write:!0}})],od.prototype,"mode",void 0),d([m({type:String,json:{read:wU.read,write:wU.write}})],od.prototype,"originPosition",void 0),d([m({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],od.prototype,"tolerance",void 0),od=Bk=d([N("esri.rest.support.QuantizationParameters")],od);const hxe=t=>{const e=t;let i=class extends e{};return i=d([N("esri.rest.support.QueryMixin")],i),i},dxe=new wt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var Hk;const SU=new wt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Lo=Hk=class extends ve{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=J(t))}clone(){return new Hk({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:J(this.statisticParameters)})}};d([m({type:Number,json:{write:!0}})],Lo.prototype,"maxPointCount",void 0),d([m({type:Number,json:{write:!0}})],Lo.prototype,"maxRecordCount",void 0),d([m({type:Number,json:{write:!0}})],Lo.prototype,"maxVertexCount",void 0),d([m({type:String,json:{write:!0}})],Lo.prototype,"onStatisticField",void 0),d([m({type:String,json:{write:!0}})],Lo.prototype,"outStatisticFieldName",void 0),d([m({type:String,json:{read:{source:"statisticType",reader:SU.read},write:{target:"statisticType",writer:SU.write}}})],Lo.prototype,"statisticType",void 0),d([m({type:Object})],Lo.prototype,"statisticParameters",void 0),d([Le("statisticParameters")],Lo.prototype,"writeStatisticParameters",null),Lo=Hk=d([N("esri.rest.support.StatisticDefinition")],Lo);var B$;const pxe=new wt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var Qf;let Re=(Qf=class extends hxe(ve){static from(e){return dv(B$,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const s in e){const n=e[s];Array.isArray(n)?r[s]=n.map(a=>a instanceof Date?a.getTime():a):n instanceof Date?r[s]=n.getTime():r[s]=n}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new B$(J({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},B$=Qf,Qf.MAX_MAX_RECORD_COUNT_FACTOR=5,Qf);d([m({json:{write:!0}})],Re.prototype,"aggregateIds",void 0),d([m({type:Boolean,json:{write:!0}})],Re.prototype,"cacheHint",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"compactGeometryEnabled",void 0),d([m({json:{write:!0}})],Re.prototype,"datumTransformation",void 0),d([Nt("datumTransformation")],Re.prototype,"castDatumTransformation",null),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"defaultSpatialReferenceEnabled",void 0),d([m({type:Number,json:{write:!0}})],Re.prototype,"distance",void 0),d([m({type:El,json:{write:!0}})],Re.prototype,"dynamicDataSource",void 0),d([m({type:String,json:{write:!0}})],Re.prototype,"formatOf3DObjects",void 0),d([m({type:[cxe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Re.prototype,"fullText",void 0),d([m({type:String,json:{write:!0}})],Re.prototype,"gdbVersion",void 0),d([m({types:Hw,json:{read:Ud,write:!0}})],Re.prototype,"geometry",void 0),d([m({type:Number,json:{write:!0}})],Re.prototype,"geometryPrecision",void 0),d([m({type:[String],json:{write:!0}})],Re.prototype,"groupByFieldsForStatistics",void 0),d([m({type:String,json:{write:!0}})],Re.prototype,"having",void 0),d([m({type:Date})],Re.prototype,"historicMoment",void 0),d([Le("historicMoment")],Re.prototype,"writeHistoricMoment",null),d([m({type:Number,json:{write:!0}})],Re.prototype,"maxAllowableOffset",void 0),d([m({type:Number,cast:t=>t<1?1:t>Re.MAX_MAX_RECORD_COUNT_FACTOR?Re.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Re.prototype,"maxRecordCountFactor",void 0),d([m({type:["xyFootprint"],json:{write:!0}})],Re.prototype,"multipatchOption",void 0),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],Re.prototype,"num",void 0),d([m({json:{write:!0}})],Re.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],Re.prototype,"orderByFields",void 0),d([m({type:[String],json:{write:!0}})],Re.prototype,"outFields",void 0),d([m({type:Ee,json:{name:"outSR",write:!0}})],Re.prototype,"outSpatialReference",void 0),d([m({type:[Lo],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Re.prototype,"outStatistics",void 0),d([m({json:{write:!0}})],Re.prototype,"parameterValues",void 0),d([Le("parameterValues")],Re.prototype,"writeParameterValues",null),d([m({type:Ne,json:{write:!0}})],Re.prototype,"pixelSize",void 0),d([m({type:od,json:{write:!0}})],Re.prototype,"quantizationParameters",void 0),d([m({type:[Object],json:{write:!0}})],Re.prototype,"rangeValues",void 0),d([m({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Re.prototype,"relationParameter",void 0),d([m({type:String,json:{write:!0}})],Re.prototype,"resultType",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"returnCentroid",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"returnDistinctValues",void 0),d([m({type:Boolean,json:{default:!0,write:!0}})],Re.prototype,"returnExceededLimitFeatures",void 0),d([m({type:Boolean,json:{write:!0}})],Re.prototype,"returnGeometry",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"returnQueryGeometry",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"returnM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Re.prototype,"returnZ",void 0),d([m({type:Boolean,json:{write:!0}})],Re.prototype,"returnTrueCurves",void 0),d([m({type:Ee,json:{write:!0}})],Re.prototype,"sourceSpatialReference",void 0),d([je(dxe,{ignoreUnknown:!1,name:"spatialRel"})],Re.prototype,"spatialRelationship",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],Re.prototype,"start",void 0),d([Le("start"),Le("num")],Re.prototype,"writeStart",null),d([m({type:String,json:{write:!0}})],Re.prototype,"sqlFormat",void 0),d([m({type:String,json:{write:!0}})],Re.prototype,"text",void 0),d([m({type:vr,json:{write:!0}})],Re.prototype,"timeExtent",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],Re.prototype,"timeReferenceUnknownClient",void 0),d([je(pxe,{ignoreUnknown:!1}),m({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],Re.prototype,"units",void 0),d([m({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Re.prototype,"where",void 0),d([Le("where")],Re.prototype,"writeWhere",null),Re=B$=d([N("esri.rest.support.Query")],Re);function Rh(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Fa=class extends fv{constructor(e){super(e),this._selectionMap=new Cd,this._sources=new $e,this._trashCan=[],this._layerEditHandles=new $e,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([_e(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),_e(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},Lt),Vs(()=>this.sources,"change",e=>{const i=this._selectionMap,r=[];for(const s of e.removed){const n=i.get(s);n&&(i.delete(s),n.highlightHandle?.remove(),r.push({layer:s,selection:[],added:[],removed:[...n.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(fi)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){lu(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const r=s=>{Oye(s)?(s.layers?.forEach(r),s.tables?.forEach(r)):Pye(s)?(s.sublayers?.forEach(r),s.subtables?.forEach(r)):e9(s)?s.sublayers?.forEach(r):Rh(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:s,selections:n}=this;if(!s&&r==="layerView")return le.getLogger(this).warn("Cannot query layer views without a view."),[];const a=(e?.length?n.filter(o=>e.includes(o.layer)):n).map(async o=>{const{layer:u,selection:h}=o;if(!h.length)return;const p=By(u)?u.parent:u;if(p!=null){if(s&&r==="layerView"&&!xU(p)&&$U(p)){const y=await s.whenLayerView(p).catch(()=>null);if(y)return MU(y,h,i)}return MU(p,h,i)}}).filter(Qr);return(await Promise.all(a)).filter(Qr)}updateSelection(e){const i=new Map;for(const[n,a]of this._selectionMap)i.set(n,[...a.selection]);let r=!1;const s=e.current.concat(e.added);for(const n of s){const a=n.sourceLayer,o=n.getObjectId();if(this.sources.includes(a)&&(Rh(a)||By(a))&&o!==null){const u=av(i,a,()=>[]);u.includes(o)||(u.push(o),r=!0)}}for(const n of e.removed){const a=n.sourceLayer,o=n.getObjectId();if(this.sources.includes(a)&&(Rh(a)||By(a))&&o!==null){const u=i.get(a),h=u?.indexOf(o);h!==void 0&&h>=0&&(u?.splice(h,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:a}=this,o=[];for(const[u,h]of i){const p=n.get(u);p!==void 0&&a.push(p),n.set(u,{selection:h}),o.push({layer:u,selection:h,...lV(p!==void 0?p.selection:[],h)})}this._onSelectionChange(o)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const s=new Set(r.selection),n=new Set(i),a=ohe(s,n);this._setSelection(e,Array.from(a))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const a of e){const o=r.get(a),u=By(a)?a.parent:a;if(u!=null&&$U(u)){if(xU(u))continue;i.whenLayerView(u).then(h=>{o?.highlightHandle?.remove(),o!=null&&s&&n===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&o.selection.length>0&&(o.highlightHandle=h.highlight(o.selection,this.highlightName))}).catch(()=>{o?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(fi);const e=new Set(this.sources.map(i=>By(i)?i.parent:i));for(const i of e)Rh(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(e9(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:s,objectId:n})=>{n!=null&&s==null&&r.push(n)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){const{deletedFeatures:r,edits:s,updatedFeatures:n}=e;if(s?.updateFeatures?.forEach(a=>{const o=a.getObjectId()??a.attributes[i.objectIdField];if(o==null||n.find(p=>p.objectId===o)?.error)return;const u=i.findSublayerForFeature(a);if(!Rh(u))return;const h=i.sublayers.find(p=>!(!Rh(p)||!this.getSelection(p)?.includes(o)));Rh(h)&&h!==u&&(this.removeFromSelection(h,[o]),this.appendToSelection(u,[o]))}),r.length){const a=[];r.forEach(({error:o,objectId:u})=>{u!=null&&o==null&&a.push(u)}),i.sublayers.forEach(o=>{Rh(o)&&this._selectionMap.has(o)&&this.removeFromSelection(o,a)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!mxe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...lV(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};d([m()],Fa.prototype,"_selectionMap",void 0),d([m()],Fa.prototype,"_sources",void 0),d([m({readOnly:!0,nonNullable:!0})],Fa.prototype,"selections",null),d([m({readOnly:!0,nonNullable:!0})],Fa.prototype,"count",null),d([m()],Fa.prototype,"view",void 0),d([m({readOnly:!0,nonNullable:!0})],Fa.prototype,"hasSelection",null),d([m()],Fa.prototype,"showHighlight",void 0),d([m()],Fa.prototype,"sources",null),d([m()],Fa.prototype,"highlightName",void 0),Fa=d([N("esri.views.SelectionManager")],Fa);const xU=t=>By(t)?t.parent?.isTable===!0:t.isTable,fxe=t=>t.layer!==void 0,$U=t=>t?.when!==void 0,mxe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},MU=async(t,e,i={})=>{let r;if(fxe(t)){const s=t;r=s===void 0?null:await s.queryFeatures(new Re({...i,objectIds:e})).then(n=>({data:n,layer:t.layer}))}else{const s=t;r=s===void 0?null:await s.queryFeatures(new Re({...i,objectIds:e})).then(n=>({data:n,layer:s}))}return r},yxe=Fa;let C1=class extends yt(Ce){constructor(e){super(e),this.accentColor=new we([255,127,0]),this.textColor=new we([255,255,255])}};d([m({type:we,nonNullable:!0})],C1.prototype,"accentColor",void 0),d([m({type:we,nonNullable:!0})],C1.prototype,"textColor",void 0),C1=d([N("esri.views.Theme")],C1);const Wk=C1,CK=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],IK={};function LK(t){return!!IK[t]}function gxe(t){for(const e of t)if(!LK(e))return!1;return!0}CK.forEach(t=>{IK[t]=!0});let AK=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager?.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const n=Array.isArray(e)?e:e.split(",");if(!gxe(n))return n.some(LK)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let a,o;Array.isArray(i)?o=i:(a=i,o=[]),typeof r=="function"?a=r:s=r,s=s??Nc.DEFAULT;const u=this._createUniqueGroupName(),h=new vxe(this.view,n,o,a);this._handlers.set(u,{handler:h,priority:s});for(const p of n){const y=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,y+1)}return this.inputManager&&this.inputManager.installHandlers(u,[h],s),vt(()=>this._removeHandler(u,n))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},vxe=class extends Gr{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,a=>s(wxe(e,a)));break;case"double-click":this.registerIncoming("double-click",r,a=>s(Sxe(e,a)));break;case"immediate-click":this.registerIncoming("immediate-click",r,a=>s(xxe(e,a)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,a=>s($xe(e,a)));break;case"hold":this.registerIncoming("hold",r,a=>s(Mxe(e,a)));break;case"drag":this.registerIncoming("drag",r,a=>{const o=this._wrapDrag(a);o&&s(o)});break;case"key-down":this.registerIncoming("key-down",r,a=>s(Txe(a)));break;case"key-up":this.registerIncoming("key-up",r,a=>s(Exe(a)));break;case"pointer-down":this.registerIncoming("pointer-down",r,a=>s(F_(a,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,a=>s(F_(a,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,a=>s(F_(a,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,a=>s(Cxe(a)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,a=>s(Ixe(a)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,a=>s(F_(a,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,a=>s(F_(a,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,a=>{s(Lxe(a))});break;case"focus":this.registerIncoming("focus",r,a=>{s(_xe(a))});break;case"blur":this.registerIncoming("blur",r,a=>{s(bxe(a))})}}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:n,pointerType:a,button:o}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const u=i.pointer.native,h=i.buttons,{cancelable:p,timestamp:y}=e,v={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:v,pointerType:a,button:o,buttons:h,radius:i.radius,angle:qY(i.angle),native:u,timestamp:y,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:b=>e.defer(b),preventDefault:()=>e.preventDefault()}}};function _xe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function bxe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function wxe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:a,native:o,eventId:u}=e.data,{cancelable:h,timestamp:p}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:a,native:o,timestamp:p,screenPoint:qi(n,a),mapPoint:Kw(t,n,a),eventId:u,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function Sxe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:a,native:o,eventId:u}=e.data,{cancelable:h,timestamp:p}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:a,native:o,timestamp:p,mapPoint:Kw(t,n,a),eventId:u,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function xxe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:a,native:o,eventId:u}=e.data,h=o.pointerId,{cancelable:p,timestamp:y}=e;return{type:"immediate-click",pointerId:h,pointerType:i,button:r,buttons:s,x:n,y:a,native:o,timestamp:y,mapPoint:Kw(t,n,a),eventId:u,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}function $xe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:a,native:o,eventId:u}=e.data,h=o.pointerId,{cancelable:p,timestamp:y}=e;return{type:"immediate-double-click",pointerId:h,pointerType:i,button:r,buttons:s,x:n,y:a,native:o,timestamp:y,mapPoint:Kw(t,n,a),eventId:u,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}function Mxe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:a,native:o}=e.data,{cancelable:u,timestamp:h}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:a,native:o,timestamp:h,mapPoint:Kw(t,n,a),cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function Kw(t,e,i){return t.toMap(qi(e,i),{exclude:[]})}function Txe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:a=>t.defer(a),preventDefault:()=>t.preventDefault()}}function Exe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function F_(t,e){const{x:i,y:r,button:s,buttons:n,native:a,eventId:o}=t.data,u=a.pointerId,h=a.pointerType,{cancelable:p,timestamp:y}=t;return{type:e,x:i,y:r,pointerId:u,pointerType:h,button:s,buttons:n,native:a,timestamp:y,eventId:o,cancelable:p,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function Cxe(t){const{x:e,y:i,buttons:r,native:s,eventId:n}=t.data.currentEvent,{button:a}=t.data.startEvent,o=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,h=t.data.action,p={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:v}=t;return{type:"pointer-drag",x:e,y:i,pointerId:o,pointerType:u,button:a,buttons:r,action:h,origin:p,native:s,timestamp:v,eventId:n,cancelable:y,stopPropagation:()=>t.stopPropagation(),defer:b=>t.defer(b),preventDefault:()=>t.preventDefault()}}function Ixe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:s,y:n,deltaY:a,native:o}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:a,native:o,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:u=>t.defer(u),preventDefault:()=>t.preventDefault()}}function Lxe(t){const{action:e,state:i,device:r}=t.data,{cancelable:s,timestamp:n}=t,{buttons:a,axes:o}=i;return{type:"gamepad",device:r,timestamp:n,action:e,buttons:a,axes:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:u=>t.defer(u),preventDefault:()=>t.preventDefault()}}const Axe="z",Pxe="r",PK={cancel:"Escape",complete:"Enter"},OBe={...PK,redo:Pxe,undo:Axe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},kBe={toggle:"Control"},RBe={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},DBe={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:fQ,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let NBe=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=Oxe.fromDefinition(e,i),s=av(this._bindings,r.key,()=>[]);return s.push(r),vt(()=>G5(s,r))}register(e,i=Nc.WIDGET){return gm([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,s=this._bindings.get(r);if(s)for(const n of s)n.process(e,i)}},Oxe=class Zk{constructor(e,i,r,s,n){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=s,this.callback=n}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new Zk(e,[],!1,!1,i);const{key:r,modifier:s,repeats:n,continuePropagation:a}=e;return new Zk(r,s?Array.isArray(s)?s:[s]:[],!!n,!!a,i)}};function kxe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return le.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function Yk(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function Rxe(t){return t.type==="key-down"&&t.key===PK.cancel}function vl(t){return qi(t.x,t.y)}function OK(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?qi(e.clientX-i.left,e.clientY-i.top):qi(0,0)}function kK(t,e){return e instanceof Event?OK(t,e):vl(e)}function RK(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let H$=class extends Ce{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new Cd,this._grabbedManipulators=new Cd,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":TU(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!EU(e))break;const s=vl(e),n=Ty(s,e.pointerType,i.tools);if(n==null)break;const a=n.manipulator,o=n.tool;a==null||o==null||!a.interactive||a.grabbable&&a.grabbableForEvent(e)||!a.grabbing||a.dragging||this._releaseManipulatorBeforeDragging(a,e,i),a!=null&&o!=null&&a.interactive&&a.grabbable&&a.grabbableForEvent(e)&&!a.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:a,tool:o,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!EU(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,a=s?.tool;if(n==null||a==null)break;const o=vl(e);o.x=ys(o.x,0,i.view.width),o.y=ys(o.y,0,i.view.height);const u=s.start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,h?n.events.emit("drag",{action:"update",start:u,screenPoint:o}):n.events.emit("drag",{action:"start",start:u,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:a,manipulator:n,start:u}));break;case"end":n.dragging=!1,h&&n.events.emit("drag",{action:"end",start:u,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=vl(e),n=Ty(s,e.pointerType,i.tools);if(!Dxe(e)){for(const h of i.tools)if((n==null||n.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let p=!1;h.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,p=!0)}),p&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}if(n==null)break;const{manipulator:a,tool:o}=n;if(!a.interactive)break;a.selectable&&o.automaticManipulatorSelection&&(a.selected=!a.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());const u=e.native.shiftKey;a.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:u,stopPropagation:r}),qL(a,r);break}case"click":{const s=vl(e),n=Ty(s,e.pointerType,i.tools),a=n?.manipulator;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:o}),r();break}case"double-click":{const s=vl(e),n=Ty(s,e.pointerType,i.tools),a=n!=null?n.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),qL(a,r);break}case"immediate-double-click":{const s=vl(e),n=Ty(s,e.pointerType,i.tools),a=n!=null?n.manipulator:null;if(a==null||!a.interactive)break;const o=e.native.shiftKey;a.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),e.pointerType==="mouse"&&qL(a,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:vl(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:vl(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>i.add(s)),this._hoveredManipulators.forEach(({tool:s})=>r.add(s));for(const s of e){s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),a=$ce(n,({tool:o})=>o===s);s.firstGrabbedManipulator=a!=null?a.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},s=!0,n){const a=(o,u)=>o===e&&(n==null||n===u);this._grabbedManipulators.forEach(({tool:o,manipulator:u,pointerType:h},p)=>{a(o,u)&&(this._grabbedManipulators.delete(p),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:o,manipulator:u},h)=>{a(o,u)&&(this._draggedManipulators.delete(h),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:o,manipulator:u},h)=>{a(o,u)&&(this._hoveredManipulators.delete(h),u.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(qi(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!TU(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(vl(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){let n=Ty(e,r,s);const a=this._hoveredManipulators.get(i)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&a===n.manipulator||(a!=null&&(a.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function Ty(t,e,i){for(const r of i){if(r.manipulators==null||!Yk(r))continue;const s=r.manipulators.intersect(t,e);if(s!=null)return{tool:r,manipulator:s}}return null}function TU(t){return t==="mouse"}function EU(t){return t.pointerType!=="mouse"||t.button===0}function Dxe(t){return!!t.native.shiftKey}function qL(t,e){t?.consumesClicks&&e()}d([m()],H$.prototype,"cursor",null),H$=d([N("esri.views.interactive.ToolViewManagerManipulatorState")],H$);const CU="attached",BL="tools",Nxe=1e3;let _l=class extends Ce{constructor(e){super(e),this._updatingHandles=new Wf,this._clock=ov,this._manipulatorState=new H$,this.tools=new $e,this._interacting=!1,this._interactingTimeout=Nxe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(CK,e=>{this._handleInputEvent(e)},Nc.TOOL),...kxe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void le.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=Yk(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=fi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([_e(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],CU):this.addHandles(_e(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(CU),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const s of this.tools)!i&&s.visible&&s.handleInputEvent(r);!i&&Rxe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(BL);for(const e of this.tools){if(e instanceof Ce){const i=_e(()=>[e.cursor,e.visible,e.editable],()=>{Yk(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,BL)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],BL)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};d([m({constructOnly:!0,nonNullable:!0})],_l.prototype,"view",void 0),d([m({value:null})],_l.prototype,"activeTool",null),d([m({readOnly:!0,type:$e})],_l.prototype,"tools",void 0),d([m()],_l.prototype,"cursor",null),d([m({readOnly:!0})],_l.prototype,"updating",null),d([m()],_l.prototype,"_interacting",void 0),d([m({readOnly:!0})],_l.prototype,"interacting",null),_l=d([N("esri.views.ToolViewManager")],_l);const zxe=new we("cyan"),Fxe=1,Vxe=.25,jxe=new we("black"),Uxe=.4,Gxe=.2,jBe=.25,DK="default",qxe="temporary",Bxe=new we("yellow");var Jk;let oa=Jk=class extends Ce{constructor(t){super(t),this.name=DK,this.color=zxe.clone(),this.haloColor=null,this.haloOpacity=Fxe,this.fillOpacity=Vxe,this.shadowColor=jxe.clone(),this.shadowOpacity=Uxe,this.shadowDifference=Gxe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new Jk({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};d([m({type:String,constructOnly:!0,nonNullable:!0})],oa.prototype,"name",void 0),d([m({type:we,nonNullable:!0})],oa.prototype,"color",void 0),d([m({type:we})],oa.prototype,"haloColor",void 0),d([m({nonNullable:!0})],oa.prototype,"haloOpacity",void 0),d([m({nonNullable:!0})],oa.prototype,"fillOpacity",void 0),d([m({type:we,nonNullable:!0})],oa.prototype,"shadowColor",void 0),d([m({nonNullable:!0})],oa.prototype,"shadowOpacity",void 0),d([m({nonNullable:!0})],oa.prototype,"shadowDifference",void 0),d([m({nonNullable:!0})],oa.prototype,"haloWidth",void 0),d([m({nonNullable:!0})],oa.prototype,"haloBlur",void 0),oa=Jk=d([N("esri.views.support.HighlightOptions")],oa);const Id=oa;function Hxe(){return new($e.ofType(Id))([new Id({name:DK}),new Id({name:qxe,color:Bxe})])}let ig=class extends Ce{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Wxe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Zxe[this.deviceType]}};d([m({nonNullable:!0,readOnly:!0})],ig.prototype,"nativeIndex",void 0),d([m({type:String,readOnly:!0})],ig.prototype,"deviceType",null),d([m({type:Number,readOnly:!0})],ig.prototype,"axisThreshold",null),ig=d([N("esri.views.input.gamepad.GamepadInputDevice")],ig);const ND=ig,Wxe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Zxe={standard:.15,spacemouse:.025,unknown:0};let I1=class extends Ce{constructor(e){super(e),this.devices=new $e,this.enabledFocusMode="document"}};d([m({type:$e.ofType(ND),readOnly:!0})],I1.prototype,"devices",void 0),d([m({type:["document","view","none"]})],I1.prototype,"enabledFocusMode",void 0),I1=d([N("esri.views.input.gamepad.GamepadSettings")],I1);const Yxe=I1;let W$=class extends Ce{constructor(){super(...arguments),this.gamepad=new Yxe}};d([m({readOnly:!0})],W$.prototype,"gamepad",void 0),W$=d([N("esri.views.input.Input")],W$);const Jxe=W$,HL=()=>m({type:["pan","rotate","zoom","none"],nonNullable:!0});let Qp=class extends Ce{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};d([HL()],Qp.prototype,"dragPrimary",void 0),d([HL()],Qp.prototype,"dragSecondary",void 0),d([HL()],Qp.prototype,"dragTertiary",void 0),d([m({type:["zoom","none"],nonNullable:!0})],Qp.prototype,"mouseWheel",void 0),Qp=d([N("esri.views.navigation.NavigationActionMap")],Qp);const zD=Qp;let Zh=class extends Ce{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};d([m({type:Boolean,nonNullable:!0})],Zh.prototype,"enabled",void 0),d([m({type:ND})],Zh.prototype,"device",void 0),d([m({type:["pan","zoom"],nonNullable:!0})],Zh.prototype,"mode",void 0),d([m({type:["forward-down","forward-up"],nonNullable:!0})],Zh.prototype,"tiltDirection",void 0),d([m({type:Number,nonNullable:!0})],Zh.prototype,"velocityFactor",void 0),Zh=d([N("esri.views.navigation.gamepad.GamepadSettings")],Zh);const NK=Zh;let Yh=class extends Ce{constructor(e){super(e),this.actionMap=new zD,this.browserTouchPanEnabled=!0,this.gamepad=new NK,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){dP(le.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};d([m({type:zD,nonNullable:!0})],Yh.prototype,"actionMap",void 0),d([m({type:Boolean})],Yh.prototype,"browserTouchPanEnabled",void 0),d([m({type:NK,nonNullable:!0})],Yh.prototype,"gamepad",void 0),d([m({type:Boolean})],Yh.prototype,"momentumEnabled",void 0),d([m({type:Boolean})],Yh.prototype,"mouseWheelZoomEnabled",null),Yh=d([N("esri.views.navigation.Navigation")],Yh);const W3=Yh;function ZBe(t,e,i){const r=zK(t),s=e,n=Xxe(r,s,i);if(r){const a=Pn.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&a!==r.heightUnit){const o=new G("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${a})`,{horizontalUnit:a});return new G("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:o})}}if(!Qxe(t)||n===4)return new G("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case 1:{const a=r?.heightUnit||"unknown",o=s?.heightUnit||"unknown",u=new G("layerview:incompatible-height-unit",`The vertical units of the layer (${a}) must match the vertical units of the scene (${o})`,{layerUnit:a,sceneUnit:o});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}case 2:{const a=r?.heightModel||"unknown",o=s?.heightModel||"unknown",u=new G("layerview:incompatible-height-model",`The height model of the layer (${a}) must match the height model of the scene (${o})`,{layerHeightModel:a,sceneHeightModel:o});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}case 3:{const a=r?.vertCRS||"unknown",o=s?.vertCRS||"unknown",u=new G("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${a}) must match the vertical datum of the scene (${o})`,{layerDatum:a,sceneDatum:o});return new G("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}}return null}function Xxe(t,e,i){if(!IU(t)||!IU(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function IU(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function Qxe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!jK(t)}function zK(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?vm(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&FK(t)&&t.heightModelInfo?t.heightModelInfo:jK(t)?Pn.deriveUnitFromSR(e$e,t.spatialReference):null}function FK(t){return"heightModelInfo"in t}function VK(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function jK(t){return VK(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):UK(t)}function Kxe(t){return t.layers!=null||UK(t)||VK(t)||FK(t)}function UK(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const e$e=new Pn({heightModel:"gravity-related-height"});let Xk,WL=null;async function t$e(t){WL||(WL=K(()=>import("./geometryServiceUtils-Da7sc5wA.js"),__vite__mapDeps([187,188]),import.meta.url).then(e=>Xk=e)),await WL,Wt(t)}async function GK(t,e,i,r){if(!t)return null;const s=t.spatialReference;return gu()||ao(s,e)?Jd(t,e):Xk?Xk.projectGeometry(t,e,i,r):(await Promise.race([t$e(r),qc(r)]),GK(t,e,i,r))}async function YBe(t,e){try{return t?.spatialReference?await tX(t,e):null}catch{return null}}let oi=class extends Ce{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=sm(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return e?.length===1})&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(i))&&(r=n,!0),n=>"tileInfo"in n);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,r=>{const s=zK(r);return!!s&&(e={heightModelInfo:s,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>Kxe(r));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],a=s.find(o=>o.spatialReference.equals(this.spatialReference))??n;if(a)return e.push({extent:a,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const o of s)e.push({extent:o,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=sm(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:h3(async n=>{try{const a=await GK(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:a}}catch{if(Ns(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const s of e)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const a=r$e(s.viewingMode,n.viewingMode);if(a!==!1){r.push({spatialReference:s.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const a=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:o,viewingMode:u}of a)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||r.push({spatialReference:o,viewingMode:u})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const s=new i$e(r,i);for(const n of e)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{jr(i)}),"loading"):e.loadStatus:"loaded"}};d([m()],oi.prototype,"required",void 0),d([m({constructOnly:!0})],oi.prototype,"map",void 0),d([m({constructOnly:!0})],oi.prototype,"getSpatialReferenceSupport",void 0),d([m()],oi.prototype,"defaultSpatialReference",void 0),d([m()],oi.prototype,"userSpatialReference",void 0),d([m()],oi.prototype,"sourcePreloadCount",void 0),d([m()],oi.prototype,"priorityCollection",void 0),d([m()],oi.prototype,"requiresExtentInSpatialReference",void 0),d([m()],oi.prototype,"suspended",void 0),d([m({readOnly:!0})],oi.prototype,"ready",null),d([m({readOnly:!0})],oi.prototype,"heightModelInfoReady",null),d([m({readOnly:!0})],oi.prototype,"spatialReference",null),d([m({readOnly:!0})],oi.prototype,"extent",null),d([m({readOnly:!0})],oi.prototype,"heightModelInfo",null),d([m({readOnly:!0})],oi.prototype,"vcsWkid",null),d([m({readOnly:!0})],oi.prototype,"latestVcsWkid",null),d([m({readOnly:!0})],oi.prototype,"viewingMode",null),d([m({readOnly:!0})],oi.prototype,"tileInfo",null),d([m({readOnly:!0})],oi.prototype,"mapCollections",null),d([m({readOnly:!0})],oi.prototype,"_spatialReferenceTask",null),d([m({readOnly:!0})],oi.prototype,"_tileInfoTask",null),d([m({readOnly:!0})],oi.prototype,"_heightModelInfoTask",null),d([m({readOnly:!0})],oi.prototype,"_extentCandidatesTask",null),d([m()],oi.prototype,"_extentTask",null),d([m()],oi.prototype,"_projectExtentTask",void 0),oi=d([N("esri.views.support.DefaultsFromMap")],oi);let i$e=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function r$e(t,e){return t!=null?e!=null?t===e&&t:t:e}function s$e(t){return"tryRecycleWith"in t}let n$e=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=va(),this.promise=this._deferred.promise,so(this._controller.signal,()=>{this._recycleController?.abort();const s=new G("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!s$e(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==i)continue;const a=this.layerView.tryRecycleWith(n,{signal:r});if(a){e.splice(s,1),this.layer=n;const o=this.layerView,u=o.view;return this.promise=a.then(()=>(Wt(r),n.emit("layerview-destroy",{view:u,layerView:o}),u.emit("layerview-destroy",{view:u,layerView:o}),n.emit("layerview-create",{view:u,layerView:o}),u.emit("layerview-create",{view:u,layerView:o}),o)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let s,n;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),a$e(r))s=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new G("layer:view-not-supported","No layerview implementation was found");const u=await this.layerViewImporter.importLayerView(r);Wt(i),s="default"in u?new u.default({layer:r,view:e}):new u({layer:r,view:e})}const a=()=>{n=fi(n),s.destroyed||s.destroy(),this.done=!0};n=so(i,a),Wt(i);try{await s.when()}catch(u){throw a(),u}if(!this._map?.allLayers?.includes(r))return a(),void this._deferred?.reject(new G("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=s,r.emit("layerview-create",{view:e,layerView:s}),e.emit("layerview-create",{layer:r,layerView:s}),this.done=!0,this._deferred?.resolve(s)}catch(s){r.emit("layerview-create-error",{view:e,error:s}),e.emit("layerview-create-error",{layer:r,error:s}),this.done=!0,this._deferred?.reject(new G("layerview:create-error","layerview creation failed",{layer:r,error:s}))}}};function a$e(t){return t.createLayerView!==bi.prototype.createLayerView}function o$e(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let xn=class extends Ce{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Wf,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=va(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(hv(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,a=p=>{if(p!=null){for(const y of p)if(y){if(this.layerViewFilter?.(y)===!1)continue;r.add(y);const v=this._layerLayerViewInfoMap.get(y);v&&n?v.start():v||this._recyclingInfoMap.has(y)||s.push(y),"layers"in y&&y.layers&&a(y.layers)}}};for(const p of this._rootCollectionNames)a(Rs(this,p));const o=new Array,u=p=>{const y=p.tryRecycle(s);y?(this._recyclingInfoMap.set(p.layer,p),this.notifyChange("updating"),y.then(()=>{this._recyclingInfoMap.delete(p.layer),this._layerLayerViewInfoMap.set(p.layer,p),this._reschedule(),this.notifyChange("updating")}).catch(v=>{jr(v)||(this._recyclingInfoMap.delete(p.layer),p.destroy(),this._reschedule(),this.notifyChange("updating"))})):o.push(p)};for(const p of this._layerLayerViewInfoMap.values())r.has(p.layer)||(this._layerLayerViewInfoMap.delete(p.layer),u(p));for(const p of this._recyclingInfoMap.values())r.has(p.layer)||(this._recyclingInfoMap.delete(p.layer),u(p));for(const p of s)this._createLayerView(p);this._refreshCollections(),o.forEach(p=>p.destroy());const h=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.groundLayers,i?.basemap?.referenceLayers,i?.layers].filter(p=>!!p);r.forEach(p=>"layers"in p&&h.push(p.layers)),this.addHandles(h.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Vs(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),_e(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),ps)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),qS(this._recyclingInfoMap),qS(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ht()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Due(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),qS(this._layerLayerViewInfoMap),qS(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const i=this._layerLayerViewInfoMap.get(e)?.promise;if(!i){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new G("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return i}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Rs(this,e),Rs(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())Rs(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void i?.removeAll();let s=0;for(const n of e){const a=this._layerLayerViewInfoMap.get(n);if(!a?.layerView)continue;const{layerView:o}=a;o.layer=n,o.parent=r,i.at(s)!==o&&i.splice(s,0,o),"layers"in n&&o$e(o)&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),++s}s<i.length&&i.splice(s)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new n$e(e,this.view,this.layerViewImporter);i.promise?.then(()=>this._refreshCollections(),r=>{r&&(jr(r)||r.name==="cancelled:layerview-create")||le.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};d([m()],xn.prototype,"_workPromise",void 0),d([m({readOnly:!0})],xn.prototype,"_watchUpdatingTracking",void 0),d([m({readOnly:!0})],xn.prototype,"_layersToLayerViews",void 0),d([m({constructOnly:!0})],xn.prototype,"layerviewMapping",void 0),d([m({readOnly:!0})],xn.prototype,"_rootCollectionNames",null),d([m({constructOnly:!0})],xn.prototype,"layerViewFilter",void 0),d([m()],xn.prototype,"layerViewImporter",void 0),d([m()],xn.prototype,"supportsGround",void 0),d([m({readOnly:!0})],xn.prototype,"updating",null),d([m({readOnly:!0})],xn.prototype,"updatingRemaining",null),d([m({constructOnly:!0})],xn.prototype,"view",void 0),xn=d([N("esri.views.support.LayerViewManager")],xn);const l$e=xn;let rg=class extends Ce{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};d([m()],rg.prototype,"featureTitleFields",void 0),d([m()],rg.prototype,"utilityNetworkFields",void 0),d([m()],rg.prototype,"globalIdField",void 0),rg=d([N("esri.views.support.RequiredFieldsOptions")],rg);const u$e=rg;var sg,kd;let De=(kd=class extends u3(b4){constructor(e){super(e),this._userSpatialReference=null,this.handles=new uv,this.updatingHandles=new Wf,this.allLayerViews=new Qa({getCollections:()=>this.layerviewCollections,getChildrenFunction:h$e}),this.analyses=new q0,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Sb,this.typeSpecificPreconditionsReady=!0,this.layerViews=new $e,this.magnifier=new EK,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new $e,this._highPriorityCursorHandles=new $e,this.input=new Jxe,this.navigation=new W3,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new AK(this),this.persistableViewModels=new $e,this.requiredFieldsOptions=new u$e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(_e(()=>this.preconditionsReady,i=>{const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,sg.views.add(this)):(this._lockedSpatialReference=null,sg.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new G("view:startup-error","View._startup failed",s)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},no))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,jw(()=>this.ready)))),this.basemapView=new ixe({view:this}),this.layerViewManager=new l$e({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new _l({view:this}),this.selectionManager=new yxe({view:this}),this.addHandles([Kr(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{le.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),_e(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ps),_e(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},no),_e(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ps)])}get _layerToLayerviewMapping(){return sg._layerToLayerview}destroy(){this.destroyed||(sg.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=xi(this.graphics),this.analyses=xi(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=xi(this.analysisViewManager),this.toolViewManager=xi(this.toolViewManager),this.layerViewManager=xi(this.layerViewManager),this.selectionManager=xi(this.selectionManager),this.basemapView=xi(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=xi(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return le.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new oi({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??Hxe()}set highlights(e){this._set("highlights",lu(e,this._get("highlights"),$e.ofType(Id)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||GM(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(le.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),GM(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=h3(s=>CH(X("view-readyState-waiting-delay"),null,s)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=sm(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!Ar(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Qo}set timeZone(e){this._userTimeZone=e,nye(e)||le.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,s={cursor:e},n=vt(()=>r.remove(s));return r.add(s),this.addHandles(n),n}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Wk}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new G("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&le.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Kr(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");n.innerHTML="https://esriurl.com/webgl-faq",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(s),i.appendChild(n);const a=this.getSurface();throw a&&a.appendChild(i),e}}},sg=kd,kd._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],kd.views=new $e,kd);d([m()],De.prototype,"_userSpatialReference",void 0),d([m()],De.prototype,"activeTool",null),d([m({readOnly:!0})],De.prototype,"allLayerViews",void 0),d([m({readOnly:!0})],De.prototype,"layerviewCollections",null),d([m(wO(q0,"analyses"))],De.prototype,"analyses",void 0),d([m()],De.prototype,"animation",null),d([m()],De.prototype,"basemapView",void 0),d([m()],De.prototype,"center",null),d([m()],De.prototype,"defaultsFromMapSettings",null),d([m()],De.prototype,"defaultsFromMap",null),d([m()],De.prototype,"dependencies",void 0),d([m()],De.prototype,"displayFilterEnabled",void 0),d([m({type:at})],De.prototype,"extent",null),d([m()],De.prototype,"fatalError",void 0),d([m(wO(Sb,"graphics"))],De.prototype,"graphics",void 0),d([m({readOnly:!0,type:Pn})],De.prototype,"heightModelInfo",null),d([m({type:$e.ofType(Id)})],De.prototype,"highlights",null),d([m({readOnly:!0})],De.prototype,"interacting",null),d([m({constructOnly:!0})],De.prototype,"layerViewFilter",void 0),d([m({readOnly:!0})],De.prototype,"navigating",null),d([m({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],De.prototype,"preconditionsReady",null),d([m({readOnly:!0})],De.prototype,"typeSpecificPreconditionsReady",void 0),d([m({type:$e,readOnly:!0})],De.prototype,"layerViews",void 0),d([m()],De.prototype,"resolution",null),d([m({type:EK})],De.prototype,"magnifier",void 0),d([m({value:null,type:DX})],De.prototype,"map",null),d([m()],De.prototype,"padding",void 0),d([m({readOnly:!0})],De.prototype,"ready",void 0),d([m()],De.prototype,"_readyStateWaitingTask",void 0),d([m({readOnly:!0})],De.prototype,"readyState",null),d([m({type:Ee})],De.prototype,"spatialReference",null),d([m()],De.prototype,"stationary",null),d([m({type:vr})],De.prototype,"timeExtent",null),d([m({type:String,nonNullable:!0})],De.prototype,"timeZone",null),d([m()],De.prototype,"tools",null),d([m()],De.prototype,"toolViewManager",void 0),d([m({readOnly:!0})],De.prototype,"type",void 0),d([m({type:Number})],De.prototype,"scale",void 0),d([m({readOnly:!0})],De.prototype,"updating",void 0),d([m({readOnly:!0})],De.prototype,"initialExtentRequired",void 0),d([m({readOnly:!0})],De.prototype,"initialExtent",null),d([m()],De.prototype,"cursor",null),d([m({readOnly:!0})],De.prototype,"input",void 0),d([m({type:W3,nonNullable:!0})],De.prototype,"navigation",void 0),d([m()],De.prototype,"layerViewManager",void 0),d([m()],De.prototype,"analysisViewManager",void 0),d([m()],De.prototype,"selectionManager",void 0),d([m()],De.prototype,"width",void 0),d([m()],De.prototype,"height",void 0),d([m({readOnly:!0})],De.prototype,"resizing",void 0),d([m({value:null,readOnly:!0})],De.prototype,"size",null),d([m({readOnly:!0})],De.prototype,"suspended",void 0),d([m({readOnly:!0})],De.prototype,"viewEvents",void 0),d([m({readOnly:!0})],De.prototype,"persistableViewModels",void 0),d([m()],De.prototype,"_isValid",void 0),d([m()],De.prototype,"_readyCycleForced",void 0),d([m()],De.prototype,"_lockedSpatialReference",void 0),d([m()],De.prototype,"_userTimeZone",void 0),d([m()],De.prototype,"_lockedTimeZone",void 0),d([m()],De.prototype,"_userTimeExtent",void 0),d([m()],De.prototype,"_lockedTimeExtent",void 0),d([m({type:Wk})],De.prototype,"theme",void 0),d([m({readOnly:!0,type:Wk})],De.prototype,"effectiveTheme",null),De=sg=d([N("esri.views.View")],De);const ZL=globalThis.$arcgis;ZL&&!ZL.views&&Object.defineProperty(ZL,"views",{configurable:!1,enumerable:!0,writable:!1,value:De.views});const c$e=De;function h$e(t){return t.layerViews}function Bi(){return[0,0]}function d$e(t){return[t[0],t[1]]}function e2(t,e){return[t,e]}function p$e(t,e){return[t,e]}function f$e(t,e=Bi()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function qK(){return Bi()}function BK(){return e2(1,1)}function HK(){return e2(1,0)}function WK(){return e2(0,1)}const m$e=qK(),y$e=BK(),g$e=HK(),v$e=WK();Object.freeze(Object.defineProperty({__proto__:null,ONES:y$e,UNIT_X:g$e,UNIT_Y:v$e,ZEROS:m$e,clone:d$e,create:Bi,freeze:p$e,fromArray:f$e,fromValues:e2,ones:BK,unitX:HK,unitY:WK,zeros:qK},Symbol.toStringTag,{value:"Module"}));function _$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function t2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function b$e(t,e,i,r,s,n,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=a,t}function FD(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],a=e[4],o=e[5];let u=i*n-r*s;return u?(u=1/u,t[0]=n*u,t[1]=-r*u,t[2]=-s*u,t[3]=i*u,t[4]=(s*o-n*a)*u,t[5]=(r*a-i*o)*u,t):null}function w$e(t){return t[0]*t[3]-t[1]*t[2]}function Pl(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=i[0],p=i[1],y=i[2],v=i[3],b=i[4],w=i[5];return t[0]=r*h+n*p,t[1]=s*h+a*p,t[2]=r*y+n*v,t[3]=s*y+a*v,t[4]=r*b+n*w+o,t[5]=s*b+a*w+u,t}function qd(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=Math.sin(i),p=Math.cos(i);return t[0]=r*p+n*h,t[1]=s*p+a*h,t[2]=r*-h+n*p,t[3]=s*-h+a*p,t[4]=o,t[5]=u,t}function i2(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=i[0],p=i[1];return t[0]=r*h,t[1]=s*h,t[2]=n*p,t[3]=a*p,t[4]=o,t[5]=u,t}function du(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],u=e[5],h=i[0],p=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=a,t[4]=r*h+n*p+o,t[5]=s*h+a*p+u,t}function Z3(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function ZK(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function VD(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function S$e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function x$e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function $$e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function YK(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function M$e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function T$e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function E$e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function C$e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],u=e[0],h=e[1],p=e[2],y=e[3],v=e[4],b=e[5],w=dn();return Math.abs(i-u)<=w*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-h)<=w*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-p)<=w*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-y)<=w*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(a-v)<=w*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-b)<=w*Math.max(1,Math.abs(o),Math.abs(b))}const I$e=Pl,L$e=YK;Object.freeze(Object.defineProperty({__proto__:null,add:$$e,copy:_$e,determinant:w$e,equals:C$e,exactEquals:E$e,frob:x$e,fromRotation:Z3,fromScaling:ZK,fromTranslation:VD,identity:t2,invert:FD,mul:I$e,multiply:Pl,multiplyScalar:M$e,multiplyScalarAndAdd:T$e,rotate:qd,scale:i2,set:b$e,str:S$e,sub:L$e,subtract:YK,translate:du},Symbol.toStringTag,{value:"Module"}));function pu(){return[1,0,0,1,0,0]}function A$e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function P$e(t,e,i,r,s,n){return[t,e,i,r,s,n]}const O$e=pu();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:O$e,clone:A$e,create:pu,fromValues:P$e},Symbol.toStringTag,{value:"Module"}));const nx={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new rr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator}),minus180Line:new rr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new rr({paths:[[[180,-180],[180,180]]],spatialReference:Ee.WGS84}),minus180Line:new rr({paths:[[[-180,-180],[-180,180]]],spatialReference:Ee.WGS84})}};function Df(t,e){return Math.ceil((t-e)/(2*e))}function JK(t,e){const i=$b(t);for(const r of i)for(const s of r)s[0]+=e;return t}function $b(t){return sr(t)?t.rings:t.paths}function tHe(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function k$e(t){return typeof t=="string"?Lr(t):J(t)}function R$e(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(a=>R$e(a));else if(typeof n=="object")if(n.toJSON){const a=n.toJSON(i?.[s]);r[s]=e?a:JSON.stringify(a)}else r[s]=e?n:JSON.stringify(n);else r[s]=n}return r}function D$e(t,e){return t?e&&u4(t)?e:l4(t)??pt?.findCredential(t)?.token:null}async function iHe(t,e,i){const r=D$e(t,e);return r||(!pt&&Tt.request.useIdentity&&await K(()=>import("./IdentityManager-CQkbT77r.js"),[],import.meta.url),(await pt.getCredential(t,i))?.token)}async function N$e(t,e,i,r){const s=k$e(t),n=e[0].spatialReference,a={...r,responseType:"json",query:{...s.query,f:"json",sr:BW(n),target:JSON.stringify({geometryType:D3(e[0]),geometries:e}),cutter:JSON.stringify(i)}},o=await Ot(s.path+"/cut",a),{cutIndexes:u,geometries:h=[]}=o.data;return{cutIndexes:u,geometries:h.map(p=>{const y=Ud(p);return y.spatialReference=n,y})}}function z$e(t){return{geometryType:D3(t[0]),geometries:t.map(e=>e.toJSON())}}function F$e(t,e,i){const r=k1e(e);return t.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function V$e(t,e,i){const r=typeof t=="string"?Lr(t):t,s=e[0].spatialReference,n=D3(e[0]),a={...i,query:{...r.query,f:"json",sr:BW(s),geometries:JSON.stringify(z$e(e))}},{data:o}=await Ot(r.path+"/simplify",a);return F$e(o.geometries,n,s)}const XK=()=>le.getLogger("esri.geometry.support.normalizeUtils");function j$e(t){return t.type==="polygon"}function U$e(t){return t[0].type==="polygon"}function G$e(t){return t[0].type==="polyline"}function LU(t){const e=[];let i=0,r=0;for(let s=0;s<t.length;s++){const n=t[s];let a=null;for(let o=0;o<n.length;o++)a=n[o],e.push(a),o===0?(i=a[0],r=i):(i=Math.min(i,a[0]),r=Math.max(r,a[0]));a&&e.push([(i+r)/2,0])}return e}function QK(t,e){if(!(t instanceof rr||t instanceof pi)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw XK().error(s),new G("internal:geometry",s)}const i=$b(t),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let a=0;a<s.length-1;a++){const o=s[a][0],u=s[a][1],h=s[a+1][0],p=s[a+1][1],y=Math.sqrt((h-o)*(h-o)+(p-u)*(p-u)),v=(p-u)/y,b=(h-o)/y,w=y/e;if(w>1){for(let I=1;I<=w-1;I++){const L=I*e,O=b*L+o,R=v*L+u;n.push([O,R])}const S=(y+Math.floor(w-1)*e)/2,M=b*S+o,T=v*S+u;n.push([M,T])}n.push([h,p])}}return j$e(t)?new pi({rings:r,spatialReference:t.spatialReference}):new rr({paths:r,spatialReference:t.spatialReference})}function AU(t,e,i){if(e){const r=QK(t,1e6);t=If(r,!0)}return i&&(t=JK(t,i)),t}function PU(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=Df(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=Df(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=Df(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=Df(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function q$e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],n=e.geometries[r],a=$b(n);for(let o=0;o<a.length;o++){const u=a[o];u.some(h=>{if(h[0]<180)return!0;{let p=0;for(let v=0;v<u.length;v++){const b=u[v][0];p=b>p?b:p}p=Number(p.toFixed(9));const y=-360*Df(p,180);for(let v=0;v<u.length;v++){const b=n.getPoint(o,v);n.setPoint(o,v,b.clone().offset(y,0))}return!0}})}if(s===i){if(U$e(t))for(const o of $b(n))t[s]=t[s].addRing(o);else if(G$e(t))for(const o of $b(n))t[s]=t[s].addPath(o)}else i=s,t[s]=n}return t}async function B$e(t,e,i){if(!Array.isArray(t))return B$e([t],e);e&&typeof e!="string"&&XK().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??Tt.geometryServiceUrl;let s,n,a,o,u,h,p,y,v=0;const b=[],w=[];for(const O of t)if(O!=null)if(s||(s=O.spatialReference,n=Fs(s),a=s.isWebMercator,h=a?102100:4326,o=nx[h].maxX,u=nx[h].minX,p=nx[h].plus180Line,y=nx[h].minus180Line),n)if(O.type==="mesh")w.push(O);else if(O.type==="point")w.push(PU(O.clone(),o,u));else if(O.type==="multipoint"){const R=O.clone();R.points=R.points.map(z=>PU(z,o,u)),w.push(R)}else if(O.type==="extent"){const R=O.clone()._normalize(!1,!1,n);w.push(R.rings?new pi(R):R)}else if(O.extent){const R=O.extent,z=Df(R.xmin,u)*(2*o);let j=z===0?O.clone():JK(O.clone(),z);R.offset(z,0);let{xmin:U,xmax:B}=R;U=Number(U.toFixed(9)),B=Number(B.toFixed(9)),R.intersects(p)&&B!==o?(v=B>v?B:v,j=AU(j,a),b.push(j),w.push("cut")):R.intersects(y)&&U!==u?(v=B*(2*o)>v?B*(2*o):v,j=AU(j,a,360),b.push(j),w.push("cut")):w.push(j)}else w.push(O.clone());else w.push(O);else w.push(O);let S=Df(v,o),M=-90;const T=S,I=new rr;for(;S>0;){const O=360*S-180;I.addPath([[O,M],[O,-1*M]]),M*=-1,S--}if(b.length>0&&T>0){const O=q$e(b,await N$e(r,b,I,i)),R=[],z=[];for(let B=0;B<w.length;B++){const Q=w[B];if(Q!=="cut")z.push(Q);else{const oe=O.shift(),ue=t[B];ue!=null&&ue.type==="polygon"&&ue.rings&&ue.rings.length>1&&oe.rings.length>=ue.rings.length?(R.push(oe),z.push("simplify")):z.push(a?qf(oe):oe)}}if(!R.length)return z;const j=await V$e(r,R,i),U=[];for(let B=0;B<z.length;B++){const Q=z[B];Q!=="simplify"?U.push(Q):U.push(a?qf(j.shift()):j.shift())}return U}const L=[];for(let O=0;O<w.length;O++){const R=w[O];if(R!=="cut")L.push(R);else{const z=b.shift();L.push(a===!0?qf(z):z)}}return L}function H$e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Fs(t.spatialReference);if(!i)return e;const[r,s]=i.valid,n=2*s,{width:a}=e;let o,{xmin:u,xmax:h}=e;if([u,h]=[h,u],t.type==="extent"||a===0||a<=s||a>n||u<r||h>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;o=LU(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;o=LU(t.paths);break;case"multipoint":o=t.points}const p=e.clone();for(let y=0;y<o.length;y++){let v=o[y][0];v<0?(v+=s,h=Math.max(v,h)):(v-=s,u=Math.min(v,u))}return p.xmin=u,p.xmax=h,p.width<a?(p.xmin-=s,p.xmax-=s,p):e}function jD(t,e,i){const r=Fs(i);if(r==null)return t;const[s,n]=r.valid,a=2*n;let o=0,u=0;e>n?o=Math.ceil(Math.abs(e-n)/a):e<s&&(o=-Math.ceil(Math.abs(e-s)/a)),t>n?u=Math.ceil(Math.abs(t-n)/a):t<s&&(u=-Math.ceil(Math.abs(t-s)/a));let h=t+(o-u)*a;const p=h-e;return p>n?h-=a:p<s&&(h+=a),h}function rHe(t,e){return UD(e)?.normalize(t)??t}function UD(t){const e=Fs(t);if(e==null)return null;const[i,r]=e.valid;return new R3(i,r)}const sHe=UD(Ee.WGS84);UD(Ee.WebMercator);const KK=96,eee=39.37,W$e=180/Math.PI;function tee(t){return t.wkid?t:t.spatialReference||Ee.WGS84}function GD(t,e){return e.type?ir(t,e.x,e.y):Gg(t,e)}function iee(t){return ba(t)}function Y3(t,e,i=0){let r=t.width,s=t.height;if(i!==0){const o=au(i),u=Math.abs(Math.cos(o)),h=Math.abs(Math.sin(o));r=t.width*u+t.height*h,s=t.width*h+t.height*u}const n=Math.max(1,e[0]),a=Math.max(1,e[1]);return Math.max(r/n,s/a)*tMe(t.spatialReference)}async function L1(t,e,i,r){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if($e.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const o=t.every(p=>"attributes"in p),u=t.some(p=>!p.geometry);let h=t;if(o&&u&&e&&e.allLayerViews){const p=new Map;for(const w of t){const S=w.layer,M=p.get(S)||[],T=w.attributes[S.objectIdField];T!=null&&M.push(T),p.set(S,M)}const y=[];p.forEach((w,S)=>{const M=e.allLayerViews?.find(T=>T.layer.id===S.id);if(M&&"queryFeatures"in M){const T=S.createQuery();T.objectIds=w,T.returnGeometry=!0,y.push(M.queryFeatures(T))}});const v=await Promise.all(y),b=[];for(const w of v)if(w&&w.features&&w.features.length)for(const S of w.features)S.geometry!=null&&b.push(S.geometry);h=b}for(const p of h)r=await L1(p,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new Ne(t);else if(t instanceof Vr)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const o=t.layer,u=e.allLayerViews?.find(h=>h.layer.id===o.id);if(u&&"queryFeatures"in u){const h=o.createQuery();h.objectIds=[t.attributes[o.objectIdField]],h.returnGeometry=!0,s=(await u.queryFeatures(h))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new at({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=H$e(s);break;default:n=s.extent}if(!n)return null;gu()||ao(n.spatialReference,i)||await qc();const a=Jd(n,i);if(!a)return null;if(r){const o=a.center,u=o.clone();u.x=jD(o.x,r.center.x,i),u.x!==o.x&&a.centerAt(u),r=r.union(a)}else r=a;return r}function Z$e(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const s=r.layer;s?.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,i=s.maxScale>i?s.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function OU(t,e){const i=tee(t);return Ar(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Jd(t,e)}async function Y$e(t,e){if(!t||!e)return new ro({targetGeometry:new Ne,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:a}=e,o=[s?a[0]-s.left-s.right:a[0],s?a[1]-s.top-s.bottom:a[1]];let u=null;t instanceof ro?u=t:t.viewpoint?u=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(u=t.target);let h=null;u?.targetGeometry?h=u.targetGeometry:t instanceof at?h=t:t instanceof Vr?h=await L1(t,e,i):t&&(h=await L1(t.center,e,i)||await L1(t.target,e,i)||await L1(t,e,i)),!h&&n?.targetGeometry?h=n.targetGeometry:!h&&e.extent&&(h=e.extent),i||(i=tee(e.spatialReference||e.extent||h)),gu()||Ar(h.spatialReference,i)||ao(h.spatialReference,i)||await qc();const p=OU(h,i),y="center"in p?p.center:p;e.pickClosestTarget!==!1&&y.type==="point"&&n.targetGeometry?.type==="point"&&(y.x=jD(y.x,n.targetGeometry.x,y.spatialReference));let v=0;u?v=u.rotation:t.hasOwnProperty("rotation")?v=t.rotation:n&&(v=n.rotation);let b=0;b=u?.targetGeometry!=null&&u.targetGeometry.type==="point"?u.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?n.scale:Y3(OU(h.extent,i),o,v);const w=Z$e(t.target??t);w&&(w.min&&w.min<b?b=w.min:w.max&&w.max>b&&(b=w.max));let S=new ro({targetGeometry:y,scale:b,rotation:v});return r&&(S=r.fit(S),r.constrainByGeometry(S),r.rotationEnabled||(S.rotation=n.rotation)),S}function Ds(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function J$e(t,e,i){return i?ir(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Uw(t,e,.5)}const X$e=(function(){const t=Bi();return function(e,i,r){const s=i.targetGeometry;GD(t,s);const n=.5*Sv(i);return e.xmin=t[0]-n*r[0],e.ymin=t[1]-n*r[1],e.xmax=t[0]+n*r[0],e.ymax=t[1]+n*r[1],e.spatialReference=s.spatialReference,e}})();function Q$e(t,e,i,r,s){return Qk(t,e,i.center),t.scale=Y3(i,r),s?.constraints?.constrain(t),t}function K$e(t,e,i,r){return HD(t,e,i,r),FD(t,t)}const ree=(function(){const t=Bi();return function(e,i,r){return aD(e,iMe(e,i),J$e(t,i,r))}})(),eMe=(function(){const t=pu(),e=Bi();return function(i,r,s,n){const a=Sv(r),o=qD(r);return ir(e,a,a),ZK(t,e),qd(t,t,o),du(t,t,ree(e,s,n)),du(t,t,[0,n.top-n.bottom]),ir(i,t[4],t[5])}})();function Sv(t){return t.scale*see(t.targetGeometry?.spatialReference)}function see(t){return Fn(t)?1/(iee(t)*eee*KK):1}function qD(t){return nD(t.rotation)||0}function tMe(t){return Fn(t)?iee(t)*eee*KK:1}function iMe(t,e){return Uw(t,e,.5)}const BD=(function(){const t=Bi(),e=Bi(),i=Bi();return function(r,s,n,a,o,u){return pJ(t,s),Uw(e,n,.5*u),ir(i,1/a*u,-1/a*u),VD(r,e),o&&qd(r,r,o),i2(r,r,i),du(r,r,t),r}})(),HD=(function(){const t=Bi();return function(e,i,r,s){const n=Sv(i),a=qD(i);return GD(t,i.targetGeometry),BD(e,t,r,n,a,s)}})(),rMe=(function(){const t=Bi();return function(e,i,r,s){const n=Sv(i);return GD(t,i.targetGeometry),BD(e,t,r,n,0,s)}})();function nee(t){const e=Fs(t);return e?e.valid[1]-e.valid[0]:0}function sMe(t,e){return Math.round(nee(t)/e)}const nMe=(function(){const t=Bi(),e=Bi(),i=[0,0,0];return function(r,s,n){Wb(t,r,s),rO(t,t),Wb(e,r,n),rO(e,e),mJ(i,t,e);let a=Math.acos(fJ(t,e)/(eT(t)*eT(e)))*W$e;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}})(),aMe=(function(){const t=Bi();return function(e,i,r,s){const n=e.targetGeometry;return Ds(e,i),eMe(t,i,r,s),n.x+=t[0],n.y+=t[1],e}})(),Qk=function(t,e,i){Ds(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},oMe=(function(){const t=Bi();return function(e,i,r,s,n){n||(n="center"),aD(t,r,s),Uw(t,t,.5);const a=t[0],o=t[1];switch(n){case"center":ir(t,0,0);break;case"left":ir(t,-a,0);break;case"top":ir(t,0,o);break;case"right":ir(t,a,0);break;case"bottom":ir(t,0,-o);break;case"top-left":ir(t,-a,o);break;case"bottom-left":ir(t,-a,-o);break;case"top-right":ir(t,a,o);break;case"bottom-right":ir(t,a,-o)}return J3(e,i,t),e}})();function nHe(t,e,i){return Ds(t,e),t.rotation+=i,t}function lMe(t,e,i){return Ds(t,e),t.rotation=i,t}const uMe=(function(){const t=Bi();return function(e,i,r,s,n){return Ds(e,i),isNaN(r)||r===0||(oee(t,s,i,n),e.scale=i.scale*r,lee(t,t,e,n),J3(e,e,ir(t,t[0]-s[0],s[1]-t[1]))),e}})();function kU(t,e,i){return Ds(t,e),t.scale=i,t}const aee=(function(){const t=Bi();return function(e,i,r,s,n,a){return Ds(e,i),isNaN(r)||r===0||(oee(t,n,i,a),e.scale=i.scale*r,e.rotation+=s,lee(t,t,e,a),J3(e,e,ir(t,t[0]-n[0],n[1]-t[1]))),e}})(),aHe=(function(){const t=Bi(),e=Bi();return function(i,r,s,n,a,o,u){return ree(e,o,u),uJ(t,a,e),n?aee(i,r,s,n,t,o):uMe(i,r,s,t,o)}})(),oee=(function(){const t=pu();return function(e,i,r,s){return As(e,i,K$e(t,r,s,1))}})(),lee=(function(){const t=pu();return function(e,i,r,s){return As(e,i,HD(t,r,s,1))}})(),J3=(function(){const t=Bi(),e=pu();return function(i,r,s){Ds(i,r);const n=Sv(r),a=i.targetGeometry;return Z3(e,qD(r)),i2(e,e,e2(n,n)),As(t,s,e),a.x+=t[0],a.y+=t[1],i}})();function zc(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function cMe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function hMe(t,e,i,r,s,n){const a=new Float32Array(6);return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a[4]=s,a[5]=n,a}function uee(t,e,i,r){const s=e[r],n=e[r+1];t[r]=i[0]*s+i[2]*n+i[4],t[r+1]=i[1]*s+i[3]*n+i[5]}function cee(t,e,i,r=0,s=0,n=2){const a=s||e.length/n;for(let o=r;o<a;o++)uee(t,e,i,o*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:cMe,create:zc,fromValues:hMe,transform:uee,transformMany:cee},Symbol.toStringTag,{value:"Module"}));function Z$(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function dMe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function pMe(t,e,i,r,s,n,a,o,u){const h=new Float32Array(9);return h[0]=t,h[1]=e,h[2]=i,h[3]=r,h[4]=s,h[5]=n,h[6]=a,h[7]=o,h[8]=u,h}Object.freeze(Object.defineProperty({__proto__:null,clone:dMe,create:Z$,fromValues:pMe},Symbol.toStringTag,{value:"Module"}));function aw(){return new Float32Array(2)}function fMe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function pm(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function hee(){return aw()}function dee(){return pm(1,1)}function pee(){return pm(1,0)}function fee(){return pm(0,1)}const mMe=hee(),yMe=dee(),gMe=pee(),vMe=fee();Object.freeze(Object.defineProperty({__proto__:null,ONES:yMe,UNIT_X:gMe,UNIT_Y:vMe,ZEROS:mMe,clone:fMe,create:aw,fromValues:pm,ones:dee,unitX:pee,unitY:fee,zeros:hee},Symbol.toStringTag,{value:"Module"}));function _Me(t){return t instanceof Float32Array&&t.length>=2}function bMe(t){return Array.isArray(t)&&t.length>=2}function YL(t){return _Me(t)||bMe(t)}var Kk;const ju=[0,0];let sc=Kk=class extends ve{constructor(t){super(t),this._viewpoint2D={center:Bi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new at,this.id=0,this.inverseTransform=pu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=pu(),this.transformNoRotation=pu(),this.displayMat3=Z$(),this.displayViewMat3=Z$(),this.viewMat3=Z$(),this.viewMat2d=zc(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Ds(i,t.viewpoint),this._set("size",Gg(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new Kk({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return YL(e)?As(t,e,this.inverseTransform):(ju[0]=e,ju[1]=i,As(t,ju,this.inverseTransform))}toScreen(t,e,i){return YL(e)?As(t,e,this.transform):(ju[0]=e,ju[1]=i,As(t,ju,this.transform))}toScreenNoRotation(t,e,i){return YL(e)?As(t,e,this.transformNoRotation):(ju[0]=e,ju[1]=i,As(t,ju,this.transformNoRotation))}wrapMapCoordinate(t,e){Gg(t,e);const[i]=e,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:a,xmax:o}=s;if(n.isWrappable){const u=nee(n)/2;a=Math.max(a,r-u),o=Math.min(o,r+u)}return(i<a||i>o)&&(t[0]=jD(i,r,n)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return BD(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),a=new ro({targetGeometry:new Ne(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",a),!n||!e||!i)return;this.resolution=Sv(a),this.rotation=r,this.scale=i,this.spatialReference=e,Gg(this.center,t);const o=n[0]!==0?2/n[0]:0,u=n[1]!==0?-2/n[1]:0;qg(this.displayMat3,o,0,0,0,u,0,-1,1,1);const h=wJ(this.viewMat3),p=pm(n[0]/2,n[1]/2),y=pm(-n[0]/2,-n[1]/2),v=nD(r);nO(h,h,p),$J(h,h,v),nO(h,h,y),Yb(this.displayViewMat3,this.displayMat3,h);const b=VD(this.viewMat2d,p);return qd(b,b,v),du(b,b,y),X$e(this.extent,a,n),HD(this.transform,a,n,s),FD(this.inverseTransform,this.transform),rMe(this.transformNoRotation,a,n,s),this.worldScreenWidth=sMe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};d([m({readOnly:!0})],sc.prototype,"id",void 0),d([m({value:1,json:{write:!0}})],sc.prototype,"pixelRatio",null),d([m({json:{write:!0}})],sc.prototype,"size",null),d([m()],sc.prototype,"spatialReference",void 0),d([m({type:ro,json:{write:!0}})],sc.prototype,"viewpoint",null),d([m({readOnly:!0})],sc.prototype,"visibleArea",null),sc=Kk=d([N("esri.views.2d.ViewState")],sc);const RU=sc;var eR,tR;let $c=eR=class extends Ce{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new eR({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};d([m()],$c.prototype,"left",void 0),d([m()],$c.prototype,"top",void 0),d([m()],$c.prototype,"right",void 0),d([m()],$c.prototype,"bottom",void 0),$c=eR=d([N("esri.views.2d.PaddedViewState.Padding")],$c);let ng=tR=class extends RU{constructor(...t){super(...t),this.paddedViewState=new RU,this._updateContent=(()=>{const e=Bi();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;ir(e,r.left+r.right,r.top+r.bottom),Wb(e,i,e),Gg(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(_e(()=>[this.size,this.padding],()=>this._updateContent(),no)),this.padding=new $c,this.size=[0,0]}set padding(t){this._set("padding",t||new $c)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=aMe(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=e,{x:a,y:o,spatialReference:u}=r,h=this._viewpoint2D;h.center[0]=a,h.center[1]=o,h.rotation=s,h.scale=n,h.spatialReference=u,this._update()}}clone(){return new tR({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};d([m()],ng.prototype,"paddedViewState",void 0),d([m({type:$c})],ng.prototype,"padding",null),d([m()],ng.prototype,"viewpoint",null),ng=tR=d([N("esri.views.2d.PaddedViewState")],ng);const WD=ng;let A1=class extends Ce{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};d([m()],A1.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),d([m()],A1.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),A1=d([N("esri.views.support.debugFlags")],A1);const wMe=new A1,mee=Symbol("Yield");let SMe=class{constructor(){this._tasks=new Array,this._numPendingTasks=B0(0),this._readyToRun=B0(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return mee;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((s,n)=>new NU(s,n,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((s,n)=>new NU(s,n,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((s,n)=>new xMe(s,n,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(Ns(i.signal))this._cancelTask(i,Ht());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=Ht();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&DU(e.iterator.return()),zs(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&DU(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);zs(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),s=new $Me(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(s,i)}_processIterator(e,i){const r=e.iterator.next(i);zs(r)?r.then(s=>this._onIteratorResult(e,s),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,s)=>{const n=e(r,s);i.call(this._tasks,n),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function DU(t){zs(t)?t.then(JL,JL):JL(t)}function JL(t){jr(t)||t instanceof Error||t instanceof G||t!=null&&typeof t=="object"&&"done"in t&&t.done||le.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let ZD=class{constructor(e,i,r=void 0,s=void 0){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=s}},NU=class extends ZD{constructor(e,i,r,s,n){super(e,i,s,n),this.callback=r,this.type=0}},xMe=class extends ZD{constructor(e,i,r,s,n){super(e,i,s,n),this.generatorFunction=r,this.type=1}},$Me=class extends ZD{constructor(e,i,r,s,n){super(e,i,s,n),this.iterator=r,this.type=2}};function MMe(){return new LMe}const ct={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},qa=0,zU=new Map([[ct.RESOURCE_CONTROLLER_IMMEDIATE,qa],[ct.RESOURCE_CONTROLLER,4],[ct.SLIDE,qa],[ct.STREAM_DATA_LOADER,qa],[ct.ELEVATION_QUERY,qa],[ct.TERRAIN_SURFACE,1],[ct.SURFACE_GEOMETRY_UPDATES,1],[ct.LOD_RENDERER,2],[ct.GRAPHICS_CORE,2],[ct.I3S_CONTROLLER,2],[ct.POINT_CLOUD_LAYER,2],[ct.FEATURE_TILE_FETCHER,2],[ct.STREAM_CONTROLLER,2],[ct.CLOUDS_GENERATOR,2],[ct.OVERLAY,4],[ct.OVERLAY_RENDERER,4],[ct.STAGE,4],[ct.GRAPHICS_DECONFLICTOR,4],[ct.FILTER_VISIBILITY,4],[ct.SCALE_VISIBILITY,4],[ct.FRUSTUM_VISIBILITY,4],[ct.POINT_OF_INTEREST_FREQUENT,6],[ct.POINT_OF_INTEREST_INFREQUENT,30],[ct.LABELER,8],[ct.FEATURE_QUERY_ENGINE,8],[ct.FEATURE_TILE_TREE,16],[ct.FEATURE_TILE_TREE_ACTIVE,qa],[ct.ELEVATION_ALIGNMENT,12],[ct.ELEVATION_ALIGNMENT_SCENE,14],[ct.TEXT_TEXTURE_ATLAS,12],[ct.TEXTURE_UNLOAD,12],[ct.LINE_OF_SIGHT_TOOL,16],[ct.LINE_OF_SIGHT_TOOL_INTERACTIVE,qa],[ct.SNAPPING,qa],[ct.SHADOW_ACCUMULATOR,30],[ct.FLOW_GENERATOR,12],[ct.MAPVIEW_FETCH_QUEUE,qa],[ct.MAPVIEW_LAYERVIEW_UPDATE,2],[ct.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,qa]]);function FU(t){return zU.has(t)?zU.get(t):typeof t=="number"?t:1}const TMe=6.5,VU=1,EMe=30,CMe=1e3/30,IMe=100,jU=.9;let LMe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=B0(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new nb("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new yee,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=_e(()=>wMe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Lt);for(const e of Object.keys(ct))this.performanceInfo.tasks.set(ct[e],new nb(String(ct[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,fi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new AMe(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new nb(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-i),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=TMe,r=e.frameDuration,s=VU;switch(this.state){case 2:i=0,r=Math.max(IMe,e.frameDuration),s=EMe;break;case 1:r=Math.max(CMe,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<VU&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,s),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){eP(this._tasks,e),eP(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,s)=>{i+=r>1?` ${r}x ${s}`:` ${s}`}),i}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*jU+e*(1-jU)}_schedule(){for(Wle(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===qa&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==qa&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===mee&&(i.blockFrame=this._frameNumber)}catch(s){le.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,s),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-e;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(ct))this._frameTaskTimes.set(ct[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},AMe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new SMe,this._handles=new uv,this._basePriority=FU(i),this.schedulePriority=this._basePriority,this._task=B0(r??this._queue),this._handles.add(Kr(()=>this.task.readyToRun,s=>e.taskRunningChanged(s)))}remove(){this.processQueue(Mb),this._scheduler.removeTask(this),this.schedule=XL.schedule,this.reschedule=XL.reschedule,this.scheduleGenerator=XL.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=FU(e);this._basePriority!==qa&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},yee=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const Mb=new yee;Mb.enabled=!1;let PMe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Ns(i)){const s=Ht();return r?Promise.resolve(r(s)):Promise.reject(s)}return aP(e(Mb))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(Ns(i)){const n=Ht();if(r)return r(n);throw n}const s=e(Mb);for(;;){const n=s.next(Mb),a=zs(n)?await n:n;if(Ns(i)){const o=Ht();if(r){const h=r(o),p=s.return(null);return zs(p)&&await L0(p),h}const u=s.throw(o);throw zs(u)&&await L0(u),o}if(a.done)return a.value}}};const XL=new PMe;let OMe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=MMe(),this._schedulerHandle=Kr(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||zs(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:a}}=this.view;r?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==a&&(n.viewChange(),n.lastUpdateId=a),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==a&&(s.viewChange(),s.lastUpdateId=a),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new WD,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=_e(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=P0(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function kMe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s,n,a,o;const u=[0,0],h=RMe(t);for(let v=0;v<h.length;v++){const b=h[v];for(let w=0;w<b.length-1;w++){Lge(u,r,b,w);const S=L3(r,u);(s==null||S<s)&&(s=S,n=[...u],a=v,o=w)}}if(s==null||!n||a==null||o==null)throw new G("nearest-coordinate:failed","Failed to find the nearest coordinate");const[p,y]=n;return{coordinate:new Ne({x:p,y,spatialReference:i}),distance:s}}function RMe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var iR;let xf=iR=class extends Z4(Ce){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Jd(this.geometry,this.spatialReference)}catch(t){return le.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Nw(this.normalizedGeometry,i):P4(this.normalizedGeometry,i))return t;const{coordinate:r}=kMe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new iR({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};d([m({constructOnly:!0})],xf.prototype,"geometry",void 0),d([m({readOnly:!0})],xf.prototype,"normalizedGeometry",null),d([m({constructOnly:!0})],xf.prototype,"spatialReference",void 0),xf=iR=d([N("esri.views.2d.constraints.GeometryConstraint")],xf);var rR;let P1=rR=class extends Z4(Ce){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new rR({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};d([m()],P1.prototype,"enabled",void 0),d([m()],P1.prototype,"rotationEnabled",void 0),P1=rR=d([N("esri.views.2d.constraints.RotationConstraint")],P1);const gee=P1;var sR;let $n=sR=class extends Z4(Ce){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,a=-1,o=-1,u=!1,h=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(p=>p.clone()),e.sort((p,y)=>y.scale-p.scale),e.forEach((p,y)=>p.level=y);for(const p of e)!u&&i>0&&i>=p.scale&&(a=p.level,u=!0),!h&&r>0&&r>=p.scale&&(o=t?t.level:-1,h=!0),t=p;s===-1&&(s=i===0?0:a),n===-1&&(n=r===0?e.length-1:o),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),i=e[s].scale,r=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach((p,y)=>{this._lodByScale[p.scale]=p,this._scales[y]=p.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,a=r!==0&&t.scale<r,o=i!==0&&t.scale>i;if(a||o){const u=o?i:r;if(e&&n){const h=(u-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*h,s.y=n.y+(s.y-n.y)*h}t.scale=u}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new sR({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};d([m({readOnly:!0})],$n.prototype,"effectiveLODs",void 0),d([m({readOnly:!0})],$n.prototype,"effectiveMinZoom",void 0),d([m({readOnly:!0})],$n.prototype,"effectiveMaxZoom",void 0),d([m({readOnly:!0})],$n.prototype,"effectiveMinScale",void 0),d([m({readOnly:!0})],$n.prototype,"effectiveMaxScale",void 0),d([m()],$n.prototype,"lods",void 0),d([m()],$n.prototype,"minZoom",void 0),d([m()],$n.prototype,"maxZoom",void 0),d([m()],$n.prototype,"minScale",void 0),d([m()],$n.prototype,"maxScale",void 0),d([m()],$n.prototype,"snapToZoom",void 0),$n=sR=d([N("esri.views.2d.constraints.ZoomConstraint")],$n);const vee=$n,DMe={base:null,key:"type",typeMap:{extent:at,polygon:pi}};let Ji=class extends Ce{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new $e}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new xf({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new gee({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,s=this.maxZoom,n=this.minScale,a=this.maxScale,o=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===n&&e.maxScale===a&&e.snapToZoom===o?e:new vee({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:a,snapToZoom:o})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>i.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};d([m({readOnly:!0})],Ji.prototype,"effectiveLODs",null),d([m({readOnly:!0})],Ji.prototype,"effectiveMinScale",null),d([m({readOnly:!0})],Ji.prototype,"effectiveMaxScale",null),d([m({readOnly:!0})],Ji.prototype,"effectiveMinZoom",null),d([m({readOnly:!0})],Ji.prototype,"effectiveMaxZoom",null),d([m({types:DMe,value:null})],Ji.prototype,"geometry",null),d([m({type:[_r]})],Ji.prototype,"lods",void 0),d([m()],Ji.prototype,"minScale",void 0),d([m()],Ji.prototype,"maxScale",void 0),d([m()],Ji.prototype,"minZoom",void 0),d([m()],Ji.prototype,"maxZoom",void 0),d([m()],Ji.prototype,"rotationEnabled",void 0),d([m()],Ji.prototype,"snapToZoom",void 0),d([m({type:$e})],Ji.prototype,"customConstraints",void 0),d([m()],Ji.prototype,"view",void 0),d([m({readOnly:!0})],Ji.prototype,"version",null),d([m({type:xf,readOnly:!0})],Ji.prototype,"_geometry",null),d([m({type:gee})],Ji.prototype,"_rotation",null),d([m({readOnly:!0,type:vee})],Ji.prototype,"_zoom",null),Ji=d([N("esri.views.2d.MapViewConstraints")],Ji);const UU=Ji;let Ss=class extends Ce{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([_e(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},no)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ne({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void le.getLogger(this).error(new G("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const r=this.viewpoint;Qk(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void le.getLogger(this).error(new G("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void le.getLogger(this).error(new G("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;Q$e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;lMe(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;kU(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new G("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new G("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new G("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void le.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new ro({targetGeometry:new Ne,scale:0,rotation:0});Ds(s,i),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;kU(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),a=this._get("scale"),o=this._get("rotation"),u=this._get("viewpoint"),h=this._get("zoom"),p=h!=null&&r!=null&&r.zoomToScale(h)||void 0;let y,v,b;const w=u?.rotation,S=u?.targetGeometry;S?.type==="extent"?y=S:S?.type==="point"&&(v=S,b=u?.scale);const M=n??y;return{center:s??v??M?.center,rotation:o??w,scale:(a??p??b??(M&&Y3(M,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,s){const n=e.targetGeometry;try{this._project(e,r)}catch(a){le.getLogger(this).warn(new _a("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:a})),e.targetGeometry=s||new Ne({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new WD({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,a=new Ne({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const u=i.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=u}const r=i.clone(),[s,n]=i.center;let a=null;try{a=this._project(new Ne({x:s,y:n,spatialReference:i.spatialReference}),e)}catch(u){DW()||le.getLogger(this).warn(new _a("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a?.toJSON(),spatialReference:e,error:u}))}a||(a=new Ne({x:0,y:0,spatialReference:e}));const o=Qk(new ro({targetGeometry:new Ne,scale:0,rotation:0}),i.viewpoint,a);r.viewpoint=o;try{const h=[i.size[0]/2,i.size[1]/2],p=[h[0]+20,h[1]],y=i.toMap([0,0],p),{x:v,y:b}=this._project(new Ne({x:y[0],y:y[1],spatialReference:i.spatialReference}),e);y[0]=v,y[1]=b,r.toScreen(y,y);const w=nMe(h,y,p),S=Math.hypot(y[0]-h[0],y[1]-h[1])/20;!Number.isFinite(S)||Math.abs(S)>4?(o.rotation=0,o.targetGeometry=new Ne({x:0,y:0,spatialReference:e})):(o.scale*=S,o.scale>X("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(w)?w:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,i){if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[e,i],oMe(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),n=this.state.spatialReference;return new Ne({x:r,y:s,spatialReference:n})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),s=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),qi(s[0],s[1])}_project(e,i){const r=e?.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Ar(i,r.spatialReference))return e;const s=Jd(r,i);if(!s)throw new G("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return NMe(e)?(e.targetGeometry=s,e):s}};function NMe(t){return t?.declaredClass==="esri.Viewpoint"}d([m({type:Ne})],Ss.prototype,"center",null),d([m()],Ss.prototype,"constraints",void 0),d([m({type:at})],Ss.prototype,"extent",null),d([m({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Ss.prototype,"padding",null),d([m()],Ss.prototype,"ready",void 0),d([m()],Ss.prototype,"resizeAlign",void 0),d([m({readOnly:!0})],Ss.prototype,"resolution",null),d([m({type:Number})],Ss.prototype,"rotation",null),d([m({type:Number})],Ss.prototype,"scale",null),d([m({readOnly:!0})],Ss.prototype,"state",void 0),d([m({type:ro})],Ss.prototype,"viewpoint",null),d([m({readOnly:!0})],Ss.prototype,"visibleArea",null),d([m()],Ss.prototype,"zoom",null),Ss=d([N("esri.views.2d.ViewStateManager")],Ss);const GU=160;let O1=class extends Ce{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=GU&&this.clear()},GU))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};d([m()],O1.prototype,"_timer",void 0),d([m()],O1.prototype,"stationary",null),O1=d([N("esri.views.2d.support.StationaryManager")],O1);const zMe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Ss({constraints:new UU({view:this})}),this.stationaryManager=new O1,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new OMe(this),this.viewEvents=new AK(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([_e(()=>this.viewpoint,()=>this.stationaryManager.flip(),no)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const s=this._get("animation");if(r===s)return;if(s&&s.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const n=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=r,s?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return d([m({readOnly:!0})],i.prototype,"animationManager",void 0),d([m({readOnly:!0})],i.prototype,"fullOpacity",void 0),d([m()],i.prototype,"stateManager",void 0),d([m()],i.prototype,"constraintsInfo",null),d([m()],i.prototype,"extent",null),d([m({readOnly:!0})],i.prototype,"state",null),d([m({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),d([m()],i.prototype,"renderingOptions",void 0),d([m({readOnly:!0})],i.prototype,"interacting",null),d([m()],i.prototype,"stationary",null),d([m()],i.prototype,"animation",null),d([m({type:UU})],i.prototype,"constraints",null),d([m()],i.prototype,"padding",null),d([m()],i.prototype,"resizeAlign",null),d([m()],i.prototype,"rotation",null),d([m({readOnly:!0})],i.prototype,"viewEvents",void 0),d([m({type:ro})],i.prototype,"viewpoint",null),i=d([N("esri.views.Viewport2DBaseMixin")],i),i},FMe=()=>Tt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var _0;let ag=(_0=class extends b4{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=va(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new G("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=zs(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},_0.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},_0);d([m({readOnly:!0})],ag.prototype,"done",null),d([m({readOnly:!0,type:String})],ag.prototype,"state",void 0),d([m()],ag.prototype,"target",void 0),ag=d([N("esri.views.ViewAnimation")],ag);const nR=ag;let Y$=class extends Ce{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void le.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new nR;this.view.animation=r,await jw(()=>this.view.ready,i);const s={...i,animate:i?.animate??(!FMe()&&this.view.animationsEnabled),animationMode:i?.animationMode??"auto"},{extent:n,spatialReference:a,size:o,viewpoint:u,constraints:h,padding:p,allLayerViews:y}=this.view,v=Y$e(e,{extent:n,spatialReference:a,size:o,viewpoint:u,constraints:h,padding:p,allLayerViews:y,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(v),this._gotoTask={},s.animate?this._gotoAnimated(v,s):this._gotoImmediate(v,s)}_gotoImmediate(e,i){const r=this._gotoTask,s=this.view.animation,n=e.then(a=>{if(Wt(i),r!==this._gotoTask)throw new G("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=a,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(e,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(a=>{if(Wt(i),r!==this._gotoTask)throw new G("view:goto-interrupted","Goto was interrupted");return s.update(a),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(e,i,r,s){const n=()=>e===this._gotoTask;return que(r,s).finally(()=>{n()&&(i.done||i.stop())})}};d([m({constructOnly:!0})],Y$.prototype,"view",void 0),Y$=d([N("esri.views.2d.GoToManager")],Y$);function _ee(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function bee(t,e){return e.some(i=>_ee(t,i))}function qU(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(s=>s.value===t).map(s=>s.key)}let BU=class extends Gr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){_ee(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},VMe=class extends Gr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=i,{view:a}=this,{mapViewNavigation:o}=a;switch(s){case"begin":{const{scale:u}=a;this._startScale=u,this._currentScale=u,this._previousDelta=n,o.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const u=1.015**n.y,h=this._startScale*u,p=h/this._currentScale;o.setViewpointImmediate(p),this._currentScale=h;break}case"end":{const{constraints:u}=a,{effectiveLODs:h,snapToZoom:p}=u;if(!p||!h)return void o.end();const y=u.snapScale(this._currentScale),v=(n.y>0?Math.max(y,u.snapToPreviousScale(this._startScale)):Math.min(y,u.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(v).then(()=>{o.end()});break}}}},X3=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},jMe=class extends Gr{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new X3({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&bee(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},UMe=class extends Gr{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new X3({start:(n,a)=>{s.rotate.begin(this._view,a.data),a.stopPropagation()},update:(n,a)=>{s.rotate.update(this._view,a.data),a.stopPropagation()},end:(n,a)=>{s.rotate.end(),a.stopPropagation()},condition:(n,a)=>n===1&&bee(a.data,this.pointerActions)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function wee(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function GMe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function qMe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function BMe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function See(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function xee(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function $ee(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function HMe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function WMe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ZMe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function YMe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function JMe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function XMe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function QMe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function KMe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Mee(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function eTe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function Tee(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function Eee(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function Cee(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function tTe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function iTe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function aR(t,e){const i=e[0],r=e[1],s=e[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function Iee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rTe(t,e,i){const r=e[0],s=e[1],n=e[2],a=i[0],o=i[1],u=i[2];return t[0]=s*u-n*o,t[1]=n*a-r*u,t[2]=r*o-s*a,t}function sTe(t,e,i){const r=e[0],s=e[1],n=e[2],a=i[0],o=i[1],u=i[2],h=s*u-n*o,p=n*a-r*u,y=r*o-s*a,v=Math.sqrt(h*h+p*p+y*y);return t[0]=h/v,t[1]=p/v,t[2]=y/v,t}function nTe(t,e,i,r){const s=e[0],n=e[1],a=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=a+r*(i[2]-a),t}function aTe(t,e,i,r,s,n){const a=n*n,o=a*(2*n-3)+1,u=a*(n-2)+n,h=a*(n-1),p=a*(3-2*n);return t[0]=e[0]*o+i[0]*u+r[0]*h+s[0]*p,t[1]=e[1]*o+i[1]*u+r[1]*h+s[1]*p,t[2]=e[2]*o+i[2]*u+r[2]*h+s[2]*p,t}function oTe(t,e,i,r,s,n){const a=1-n,o=a*a,u=n*n,h=o*a,p=3*n*o,y=3*u*a,v=u*n;return t[0]=e[0]*h+i[0]*p+r[0]*y+s[0]*v,t[1]=e[1]*h+i[1]*p+r[1]*y+s[1]*v,t[2]=e[2]*h+i[2]*p+r[2]*y+s[2]*v,t}function lTe(t,e=1){const i=I3,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=s*e,t}function uTe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12],t[1]=i[1]*r+i[5]*s+i[9]*n+i[13],t[2]=i[2]*r+i[6]*s+i[10]*n+i[14],t}function cTe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t}function hTe(t,e,i){const r=i[0],s=i[1],n=i[2],a=i[3],o=e[0],u=e[1],h=e[2],p=s*h-n*u,y=n*o-r*h,v=r*u-s*o,b=s*v-n*y,w=n*p-r*v,S=r*y-s*p,M=2*a;return t[0]=o+p*M+2*b,t[1]=u+y*M+2*w,t[2]=h+v*M+2*S,t}function dTe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function pTe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function fTe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function mTe(t,e){aR(HU,t),aR(WU,e);const i=Iee(HU,WU);return i>1?0:i<-1?Math.PI:Math.acos(i)}const HU=Yd(),WU=Yd();function yTe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function gTe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function vTe(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=e[0],a=e[1],o=e[2],u=dn();return Math.abs(i-n)<=u*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-a)<=u*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-o)<=u*Math.max(1,Math.abs(s),Math.abs(o))}function _Te(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],n=i[2]-e[2];let a=r*r+s*s+n*n;return a>0?(a=1/Math.sqrt(a),t[0]=r*a,t[1]=s*a,t[2]=n*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const bTe=See,wTe=xee,STe=$ee,xTe=Tee,$Te=Eee,MTe=wee,TTe=Cee;Object.freeze(Object.defineProperty({__proto__:null,abs:ZMe,add:BMe,angle:mTe,bezier:oTe,ceil:HMe,clamp:QMe,copy:GMe,cross:rTe,crossAndNormalize:sTe,direction:_Te,dist:xTe,distance:Tee,div:STe,divide:$ee,dot:Iee,equals:vTe,exactEquals:gTe,floor:WMe,hermite:aTe,inverse:iTe,len:MTe,length:wee,lerp:nTe,max:XMe,min:JMe,mul:wTe,multiply:xee,negate:tTe,normalize:aR,random:lTe,rotateX:dTe,rotateY:pTe,rotateZ:fTe,round:KMe,scale:Mee,scaleAndAdd:eTe,set:qMe,sign:YMe,sqrDist:$Te,sqrLen:TTe,squaredDistance:Eee,squaredLength:Cee,str:yTe,sub:bTe,subtract:See,transformMat3:cTe,transformMat4:uTe,transformQuat:hTe},Symbol.toStringTag,{value:"Module"}));function wo(t){let e=t*t;return t<0&&(e*=-1),e}function ETe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function CTe(t,e,i){const r=i,s=t.state,n=t.device,a=e.tiltDirection==="forward-down"?1:-1,o=1;return n.deviceType==="standard"?(r.translation[0]=wo(s.axes[0]),r.translation[1]=wo(s.axes[1]),r.translation[2]=wo(s.buttons[7])-wo(s.buttons[6]),r.heading=wo(s.axes[2]),r.tilt=wo(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*wo(s.axes[0]),r.translation[1]=1.2*wo(s.axes[1]),r.translation[2]=2*-wo(s.axes[2]),r.heading=1.2*wo(s.axes[5]),r.tilt=1.2*wo(s.axes[3])),r.tilt*=a,Mee(r.translation,r.translation,o),r}function ITe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let LTe=class extends Gr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new uv,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([_e(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=P0({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Lt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,ETe(this._transformation)):(this._currentDevice=e.data.device,CTe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if(ITe(i))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=PTe*s*e;J3(r,r,[i.translation[0]*n,-i.translation[1]*n]);const a=1+i.translation[2]*OTe*e,o=this._view.constraints.rotationEnabled?-i.heading*ATe*e:0,u=this._view.size,h=[u[0]/2,u[1]];aee(r,r,a,o,h,u);const p=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=p}};const ATe=.06,PTe=.7,OTe=6e-4;function Lee(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),vt(()=>document.removeEventListener("visibilitychange",e))}let kTe=class extends Gr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const a=s.type==="key-down";if(this._pressedKeys[a?"add":"delete"](n),a){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const o=this._timeout===void 0,u=this._pressedKeys.size>0;o||u?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Lee(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},RTe=class extends Gr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Lee(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},DTe=class extends Gr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=0),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let a=null;switch(s){case 0:a=n.zoomIn();break;case 1:a=n.zoomOut();break;default:return}n.begin(),a.then(()=>n.end()),e.stopPropagation()}};const NTe=.6;let zTe=class extends Gr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=e.data,a=1/NTe**(1/60*n),o=i.zoom(a,[r,s]);this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},FTe=class extends Gr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new X3({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function ZU(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>UTe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function VTe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function jTe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function UTe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let GTe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const a=n.gamepad,o=a.index,u=this._inputDevices[o];u&&(this._emitGamepadEvent(a,ZU(u),!1),this._inputDevices.splice(o,1),this._latestUpdate.splice(o,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(YU(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new ND(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=P0({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;YU(s=>{const n=this._inputDevices[s.index];if(!n)return;const a=this._latestUpdate[s.index],o=ZU(n),u=r||jTe(o);a&&(a.timestamp===s.timestamp||!a.active&&u||VTe(a.state,o))||this._emitGamepadEvent(s,o,!u)})}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!r)return;const a=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:a})}};function qTe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function YU(t){for(const e of navigator.getGamepads())qTe(e)&&t(e)}const JU=X("edge"),BTe=X("chrome"),HTe=X("ff"),WTe=X("safari"),XU="esri-view-surface",Ey={touchNone:`${XU}--touch-none`,touchPan:`${XU}--touch-pan`};var Kf;let ZTe=(Kf=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new GTe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=xi(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(QL[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&QL[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(QL[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ey.touchNone:Ey.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ey.touchPan:Ey.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ey.touchNone),this._element.classList.remove(Ey.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=OK(this._element,e);return Kf.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&X("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:JU&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}JU?r*=.7:BTe||WTe?r*=.6:HTe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,a)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Kf.test={disableSubpixelCoordinates:!1},Kf);const QL={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let YTe=class extends Gr{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Aee=()=>({maximumClickDelay:300}),JTe=(t={})=>({...Aee(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),YD=(t={})=>({...Aee(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function uT(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function XTe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function QTe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:qi()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[L,O]=t,[R,z]=[O.x-L.x,O.y-L.y];return e.radius=Math.sqrt(R*R+z*z)/2,e.center.x=(L.x+O.x)/2,e.center.y=(L.y+O.y)/2,e}let i=0,r=0;for(let L=0;L<t.length;L++)i+=t[L].x,r+=t[L].y;i/=t.length,r/=t.length;const s=t.map(L=>L.x-i),n=t.map(L=>L.y-r);let a=0,o=0,u=0,h=0,p=0,y=0,v=0;for(let L=0;L<s.length;L++){const O=s[L],R=n[L],z=O*O,j=R*R;a+=z,o+=j,u+=O*R,h+=z*O,p+=j*R,y+=O*j,v+=R*z}const b=.5*(h+y),w=.5*(p+v),S=a*o-u*u,M=(b*o-w*u)/S,T=(a*w-u*b)/S,I=qi(M+i,T+r);return{radius:Math.sqrt(M*M+T*T+(a+o)/t.length),center:I}}function Yf(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}let KTe=class extends Gr{constructor(e={},i=ov){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=qi(0,0),this._pointerState=new Map,this._parameters=YD(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new X3({start:(r,s)=>this._dragStart(r,s),update:(r,s)=>this._dragUpdate(s),end:(r,s)=>this._dragEnd(s)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=fi(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=fi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const a=KL("begin",qi(0,0),r);this._doubleTapDrag.emit(a,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=KL("update",qi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=KL("end",qi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Yf(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const a=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),uT(s.event.data,i)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=Yf(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}};function KL(t,e,i){const{button:r,buttons:s,pointer:n,pointers:a,pointerType:o,timestamp:u}=i;return{action:t,delta:e,button:r,buttons:s,pointer:n,pointers:a,pointerType:o,timestamp:u}}let e3e=class extends Gr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:t3e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=ax(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=J$(s,Pee(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=ax(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=ax(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=J$(r,i)-e,r.lastAngle=J$(r,i)-e})}_emitEvent(e,i,r){const s=ax(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Pee(t){const e=[];return t.forEach(i=>{e.push(qi(i.event.x,i.event.y))}),QTe(e)}function ax(t){const e=Pee(t);let i=0;return t.forEach(r=>{let s=J$(r,e),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const a=s-r.initialAngle;i+=a}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function t3e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function J$(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}let i3e=class extends Gr{constructor(e={},i=ov){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=YD(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Yf(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Yf(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,a=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),uT(n,e.data)>a?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(i))):uT(s,e.data)>a?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=Yf(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},r3e=class extends Gr{constructor(e={},i=ov){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=JTe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=fi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const a=this._pointerState.get(r);if(a){if(!a.isDragging){const o=a.previousEvent;this._pointerHold.emit(o,void 0,e.modifiers),a.holdEmitted=!0}a.holdTimeout=null}},this._parameters.holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(ox("update",s,i),void 0,s.modifiers):XTe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(ox("start",s,i)):this._pointerDrag.emit(ox("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(ox("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function ox(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let s3e=class extends Gr{constructor(e={},i=ov){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=YD(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=fi(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=fi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=n3e(i);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:a,modifiers:o}=n.event,u=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;uT(a,i)>u?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(a,void 0,o))}_handlePointerDown(e){const i=Yf(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=Yf(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:e,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}};function n3e(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const lx={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},QU=Symbol("handles");let og=class extends Ce{initialize(){const e=()=>this.view?.ready;this.addHandles([Kr(()=>!e(),()=>this._disconnect()),Kr(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(QU),this._inputManager=xi(this._inputManager)}_connect(){const e=this.view.surface,i=new ZTe(e,this.view.input),r=[new i3e,new r3e,new s3e,new e3e(this.view.navigation),new KTe],s=new Co({eventSource:i,recognizers:r}),n=new jMe(this.view,["primary"]),a=new UMe(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new YTe],Nc.INTERNAL),s.installHandlers("navigation",[new FTe(this.view),new LTe(this.view),new zTe(this.view),new BU(this.view),new BU(this.view,[lx.counter]),n,new kTe(this.view,lx.pan),new DTe(this.view,lx.zoom),new RTe(this.view,lx.rotate),a,new VMe(this.view,"touch")],Nc.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([_e(()=>this.view?.navigation?.browserTouchPanEnabled,o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},Lt),_e(()=>{const{actionMap:o}=this.view.navigation;return{panActions:qU("pan",o),rotateActions:qU("rotate",o)}},({panActions:o,rotateActions:u})=>{n.pointerActions=o,a.pointerActions=u},ps)],QU)}get test(){}};d([m()],og.prototype,"view",void 0),d([m()],og.prototype,"latestPointerInfo",null),d([m()],og.prototype,"multiTouchActive",null),og=d([N("esri.views.2d.input.MapViewInputManager")],og);const a3e=og,o3e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new Y$({view:this}),this.animationsEnabled=!0,this.inputManager=new a3e({view:this}),this.addHandles([this.on("resize",s=>this.stateManager.resize(s.width,s.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,s,n,a){return this.viewEvents.on(r,s,n,a)||super.on(r,s)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,s){return this.goToManager.goTo(r,s)}toMap(r){if(!this.ready)return null;const s=RK(r)?kK(this,r):r;return this.stateManager.toMap(s)}};return d([m()],i.prototype,"goToManager",void 0),d([m({readOnly:!0})],i.prototype,"interacting",null),d([m()],i.prototype,"stationary",null),d([m()],i.prototype,"animationsEnabled",void 0),d([m({readOnly:!0})],i.prototype,"inputManager",void 0),i=d([N("esri.views.Viewport2DMixin")],i),i};let KU=class{constructor(e){this._view=e,this.viewpoint=new ro({targetGeometry:new Ne,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return see(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=rZ(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=au(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:s,rotate:n,zoom:a,zoomOffset:o}=r,{center:u}=this;u.spatialReference=e.center.spatialReference,u.x=h1(e.center.x,i.center.x,s),u.y=h1(e.center.y,i.center.y,s),this.viewpoint.scale=h1(e.scale,i.scale+o,a);let h=e.rotation;const p=i.rotation;Math.abs(p-h)>=180&&(h+=360*(h<p?1:-1)),this.viewpoint.rotation=h1(h,p,n)}copyFrom(e){Ds(this.viewpoint,e.viewpoint),this._view=e.view}};function V_(t,e,i,r){const s=3*t,n=3*(i-t)-s,a=1-s-n,o=3*e,u=3*(r-e)-o,h=1-o-u;function p(w){return((a*w+n)*w+s)*w}function y(w){return((h*w+u)*w+o)*w}function v(w){return(3*a*w+2*n)*w+s}function b(w,S){let M,T,I,L,O,R;for(I=w,R=0;R<8;R++){if(L=p(I)-w,Math.abs(L)<S)return I;if(O=v(I),Math.abs(O)<1e-6)break;I-=L/O}if(M=0,T=1,I=w,I<M)return M;if(I>T)return T;for(;M<T;){if(L=p(I),Math.abs(L-w)<S)return I;w>L?M=I:T=I,I=.5*(T-M)+M}return I}return function(w,S=1e-6){return y(b(w,S))}}const Ha={};Ha.ease=V_(.25,.1,.25,1),Ha.linear=V_(0,0,1,1),Ha.easeIn=Ha["ease-in"]=V_(.42,0,1,1),Ha.easeOut=Ha["ease-out"]=V_(0,0,.58,1),Ha.easeInOut=Ha["ease-in-out"]=V_(.42,0,.58,1);const l3e=t=>t,ow=t=>t*t,cT=t=>1-ow(1-t),e7=t=>t<.5?ow(2*t)/2:(cT(2*(t-.5))+1)/2,hT=t=>t*t*t,oR=t=>1-hT(1-t),t7=t=>t<.5?hT(2*t)/2:(oR(2*(t-.5))+1)/2,dT=t=>t*t*t*t,lR=t=>1-dT(1-t),i7=t=>t<.5?dT(2*t)/2:(lR(2*(t-.5))+1)/2,pT=t=>t*t*t*t*t,uR=t=>1-pT(1-t),r7=t=>t<.5?pT(2*t)/2:(uR(2*(t-.5))+1)/2,fT=t=>1-Math.cos(t*Math.PI/2),cR=t=>1-fT(1-t),s7=t=>t<.5?fT(2*t)/2:(cR(2*(t-.5))+1)/2,mT=t=>2**(10*(t-1)),yT=t=>1-mT(1-t),n7=t=>t<.5?mT(2*t)/2:(yT(2*(t-.5))+1)/2,gT=t=>-(Math.sqrt(1-t*t)-1),hR=t=>1-gT(1-t),a7=t=>t<.5?gT(2*t)/2:(hR(2*(t-.5))+1)/2;function oo(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function lo(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const o7=lo(oo(1),1),l7=lo(oo(1),0),vT=lo(oo(1),.5),u7=lo(oo(2),1),c7=lo(oo(2),0),h7=lo(oo(2),.5),d7=lo(oo(3),1),p7=lo(oo(3),0),f7=lo(oo(3),.5),m7=lo(oo(4),1),y7=lo(oo(4),0),g7=lo(oo(4),.5),v7={linear:l3e,"in-quad":ow,"out-quad":cT,"in-out-quad":e7,"in-coast-quad":o7,"out-coast-quad":l7,"in-out-coast-quad":vT,"in-cubic":hT,"out-cubic":oR,"in-out-cubic":t7,"in-coast-cubic":u7,"out-coast-cubic":c7,"in-out-coast-cubic":h7,"in-quart":dT,"out-quart":lR,"in-out-quart":i7,"in-coast-quart":d7,"out-coast-quart":p7,"in-out-coast-quart":f7,"in-quint":pT,"out-quint":uR,"in-out-quint":r7,"in-coast-quint":m7,"out-coast-quint":y7,"in-out-coast-quint":g7,"in-sine":fT,"out-sine":cR,"in-out-sine":s7,"in-expo":mT,"out-expo":yT,"in-out-expo":n7,"in-circ":gT,"out-circ":hR,"in-out-circ":a7,"quad-in":ow,"quad-out":cT,"quad-in-out":e7,"quad-in-coast":o7,"quad-out-coast":l7,"quad-in-out-coast":vT,"cubic-in":hT,"cubic-out":oR,"cubic-in-out":t7,"cubic-in-coast":u7,"cubic-out-coast":c7,"cubic-in-out-coast":h7,"quart-in":dT,"quart-out":lR,"quart-in-out":i7,"quart-in-coast":d7,"quart-out-coast":p7,"quart-in-out-coast":f7,"quint-in":pT,"quint-out":uR,"quint-in-out":r7,"quint-in-coast":m7,"quint-out-coast":y7,"quint-in-out-coast":g7,"sine-in":fT,"sine-out":cR,"sine-in-out":s7,"expo-in":mT,"expo-out":yT,"expo-in-out":n7,"circ-in":gT,"circ-out":hR,"circ-in-out":a7,ease:t=>Ha.ease(t),"ease-in":t=>Ha.easeIn(t),"ease-out":t=>Ha.easeOut(t),"ease-in-out":t=>Ha.easeInOut(t)};let u3e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const _T={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Oee={maxDuration:4e3};let c3e=class kee{constructor(e){this._createCamera=e,this.compared=new u3e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:_T.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new kee(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??_T.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>dn()}get hasFov(){return Math.abs(this.compared.fov)>dn()}get hasRotate(){return this.compared.rotate>dn()}},h3e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},d3e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,s=0;const n=this.definition,a=this.segments.reduce((o,u)=>o||u.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){const u=this.segments[o],h=u.definition;if(e<=u.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(u,u.time===0?0:e/u.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+h.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+h.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,a&&!isNaN(i.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:p,targetZoom:y}=h.compared,v=i.zoom*(y-p)+p,b=this.segments[0].definition.compared.sourceZoom,w=this.segments[this.segments.length-1].definition.compared.targetZoom,S=Math.abs(y-b)>Math.abs(p-b)?y:p;i.zoomOffset=S-w,i.zoom=(v-b)/(S-b)}else i.zoom=1;return i}e-=u.time,r+=h.compared.pan,s+=h.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},eA=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let a=0,o=0;r&&(s&&(a=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(o=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const u=this.definition.desiredPixelFlow;if(r&&s&&n){const h=a+o+a*o;this._zoomPixelFlow=a*o/h*u,this._panPixelFlow=o/h*u,this._rotatePixelFlow=a/h*u}else if(r&&s){const h=1+a;this._zoomPixelFlow=a/h*u,this._panPixelFlow=1/h*u}else if(r&&n){const h=1+o;this._zoomPixelFlow=o/h*u,this._rotatePixelFlow=1/h*u}else if(s&&n){const h=this._panPixelsAtSource/this._rotatePixels,p=1+h;this._panPixelFlow=h/p*u,this._rotatePixelFlow=1/p*u}else s?this._panPixelFlow=u:r?this._zoomPixelFlow=u:n&&(this._rotatePixelFlow=u);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/p3e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const p3e=au(45);function f3e(t,e,i){const r=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function m3e(t,e,i){const r=1/e,s=Math.log(t.compared.sourceZoom*r),n=1/t.desiredPixelFlow,a=1/Math.LN2,o=e-t.compared.sourceZoom,u=1/o,h=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(o))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*n*a*u*h-t.halfWindowSize*s*n*a*u+t.halfWindowSize*s*n*a*h/(o*o)}function y3e(t,e,i){const r=e-t.compared.sourceZoom,s=1/r,n=1/e,a=Math.log(t.compared.sourceZoom*n),o=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*o+2*s*a+2*n-2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function g3e(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function v3e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function _3e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function b3e(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function w3e(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function S3e(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function x3e(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function $3e(t,e,i){const r=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,a=-e+t.compared.targetZoom,o=1/a,u=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*s*n*o+t.halfWindowSize*r*s*n*u/(a*a)+t.halfWindowSize*s*n*o*u/e}function M3e(t,e,i){const r=e-t.compared.targetZoom,s=1/r,n=1/e,a=Math.log(e/t.compared.targetZoom),o=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*o-2*s*a+2*n+2*a*o/(r*r)-o/(e*e))/(t.desiredPixelFlow*Math.LN2)}function T3e(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function E3e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function C3e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function I3e(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,s=t.halfWindowPanAtZoom(r),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(i-s):n*(i+s)}function L3e(t,e){let i=A3e(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,a=s?g3e:f3e,o=s?v3e:m3e,u=s?_3e:y3e,h=n?T3e:x3e,p=n?E3e:$3e,y=n?C3e:M3e,v=R=>a(t,R,r)+b3e(t,R,r)+h(t,R,r),b=R=>o(t,R,r)+w3e(t,R,r)+p(t,R,r),w=R=>u(t,R,r)+S3e(t,R,r)+y(t,R,r);let S=v(i);const M=I3e(t);let T;const I=e.maximumIterations||20,L=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<I;T++){const R=e.desiredSlope??1e-6;let z=b(i);Math.abs(z)>R&&(z+=R);const j=z/w(i);if(isNaN(j)||i>=L&&j<0){if(!isFinite(L))return null;i=L,S=v(i);break}if(i-=j,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const U=v(i);if(Math.abs(U-S)/S<=.005)break;S=U}return isNaN(S)||S>M*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function A3e(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let P3e=class extends d3e{constructor(e,i){super(),this._preallocSegments=[new eA,new eA,new eA],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i?.apex?L3e(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=cT(r.zoom):e===this._descensionSegment&&(r.zoom=ow(r.zoom))}_updateWithApex(e,i){const[r,s,n]=this._preallocSegments,a=i?.ascensionFactor??.5,o=Math.min(1-a,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),u=1-a-o;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*a,r.definition.compared.rotate=this.definition.compared.rotate*a,r.definition.segmentEnd=a,r.update(),this._ascensionSegment=r,this.segments.push(r),u>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*u,s.definition.compared.rotate=this.definition.compared.rotate*u,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+u,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*o,n.definition.compared.rotate=this.definition.compared.rotate*o,n.definition.segmentStart=a+u,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const O3e=new h3e;let k3e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=vT,this.definition=new c3e(e),this.path=new P3e}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Wce(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?vT:yT)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,O3e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??_T.minDuration/r,n=i.maxDuration??_T.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,s),n)}};const R3e=2e3,D3e=64;let N3e=class{constructor(e){this._view=e,this._animation=new k3e(()=>new KU(this._view)),this._current=new KU(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){Ds(this._current.viewpoint,e),Ds(this._source.viewpoint,e),Ds(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Ds(e,this._current.viewpoint)}},lg=class extends Ce{constructor(e){super(e),this._animation=null,this._destinationViewState=new WD,this.updateFunction=null,this.easing=v7.ease,this.viewpoint=new ro({targetGeometry:new Ne,scale:0,rotation:0}),this._updateTask=P0({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new N3e(e.view)}destroy(){this._updateTask=fi(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const s=this.viewpoint;Ds(s,i);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*D3e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??Oee.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?v7[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,z3e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const a=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new nR({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==nR.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,s=this._transition.duration,n=s>0?r/s:1,a=n>=1;this._transition.applyRatio(this.viewpoint,n),a&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function z3e(t,e,i,r){if(e?.duration!=null)return!0;const{time:s,isLinear:n}=t,a=e?.speedFactor||1;if(s>(e?.maxDuration??Oee.maxDuration/a))return!1;if(n){const u=Bi(),h=qi(...r.toScreen(u,...i.center)),p=qi(...i.toScreen(u,...r.center)),y=p!=null&&p.x>-1*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-1*i.size[1]&&p.y<(1.5+.5)*i.size[1],v=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1];if(s>R3e/a&&!y&&!v)return!1}return!0}d([m()],lg.prototype,"easing",void 0),d([m()],lg.prototype,"view",void 0),d([m()],lg.prototype,"viewpoint",void 0),lg=d([N("esri.views.2d.AnimationManager")],lg);const F3e=lg;function vi(){return Promise.all([K(()=>import("./webglDeps-Tmr2IJ84.js"),__vite__mapDeps([189,143,190,191,192,44]),import.meta.url),K(()=>import("./mapViewDeps-Bcdv3JRS.js"),__vite__mapDeps([193,194,195,143,190,191,134,74,196,76,192,44,142,43,197,73,96,198,123,126,24,22,25,77,82,199,79,80,189,200,91,201,202,122,203,132,133,61,72,75,29,28,204,81,205,78,8,9,10,206,83,88,207,70,208,209,210,211,139,212]),import.meta.url)])}const j_=()=>vi().then(()=>K(()=>import("./TileLayerView2D-5TeEvXdS.js"),__vite__mapDeps([213,198,197,73,43,191,192,44,142,143,96,123,126,24,22,25,200,195,190,134,196,76,91,201,202,122,61,194,74,77,82,79,80,132,133,206,72,75,29,28,83,88,207,70,214,215,216,211,217,175,218,209,210,219,220,221,222,223,224]),import.meta.url)),Tp=()=>vi().then(()=>K(()=>import("./FeatureLayerView2D-Ck5j3z8W.js").then(t=>t.F),__vite__mapDeps([225,207,24,22,25,226,227,228,29,35,217,198,175,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,194,195,134,196,76,77,82,91,62,60,61,63,89,83,199,229,147,37,85,223,219,220,224]),import.meta.url)),_7={"base-dynamic":()=>vi().then(()=>K(()=>import("./BaseDynamicLayerView2D-BIiJW8xj.js"),__vite__mapDeps([230,231,197,73,43,191,192,44,142,143,96,198,123,126,24,22,25,215,195,190,134,216,217,175,232,219,220]),import.meta.url)),"base-tile":j_,"bing-maps":j_,catalog:()=>vi().then(()=>K(()=>import("./CatalogLayerView2D-CFjnaqsF.js"),__vite__mapDeps([233,217,198,175,219]),import.meta.url)),"catalog-dynamic-group":()=>vi().then(()=>K(()=>import("./CatalogDynamicGroupLayerView2D-Dbc3ud0u.js"),__vite__mapDeps([234,217,198,175,219]),import.meta.url)),"catalog-footprint":()=>vi().then(()=>K(()=>import("./CatalogFootprintLayerView2D-vwpi-7sq.js"),__vite__mapDeps([235,225,207,24,22,25,226,227,228,29,35,217,198,175,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,194,195,134,196,76,77,82,91,62,60,61,63,89,83,199,229,147,37,85,223,219,220,224]),import.meta.url)),csv:Tp,"geo-rss":()=>vi().then(()=>K(()=>import("./GeoRSSLayerView2D-hwtkeLI1.js"),__vite__mapDeps([236,217,198,175,208,209,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,24,22,25,194,195,134,196,76,77,82,206,72,75,29,28,83,88,207,70,219]),import.meta.url)),feature:Tp,geojson:Tp,parquet:Tp,graphics:()=>vi().then(()=>K(()=>import("./GraphicsLayerView2D-DHyKHD9a.js"),__vite__mapDeps([237,217,198,175,208,209,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,24,22,25,194,195,134,196,76,77,82,206,72,75,29,28,83,88,207,70,219,224]),import.meta.url)),group:()=>vi().then(()=>K(()=>import("./GroupLayerView2D-Cagdtf2m.js"),__vite__mapDeps([238,217,198,175,219]),import.meta.url)),imagery:()=>vi().then(()=>K(()=>import("./ImageryLayerView2D-CGSIj9OA.js"),__vite__mapDeps([239,240,192,44,142,143,43,110,197,73,191,96,198,123,126,24,22,25,105,103,217,175,206,72,74,75,76,29,28,194,195,190,134,196,77,82,83,88,207,70,218,209,210,211,231,215,216,232,108,185,226,223,219,220,224]),import.meta.url)),"imagery-tile":()=>vi().then(()=>K(()=>import("./ImageryTileLayerView2D-D_2b2TVX.js"),__vite__mapDeps([241,242,240,192,44,142,143,43,110,197,73,191,96,198,123,126,24,22,25,105,103,217,175,107,243,211,195,190,134,205,196,76,216,244,108,224,185,226,223,219,220]),import.meta.url)),kml:()=>vi().then(()=>K(()=>import("./KMLLayerView2D-CwpCejXX.js"),__vite__mapDeps([245,246,215,198,195,143,190,191,134,216,231,197,73,43,192,44,142,96,123,126,24,22,25,217,175,208,209,210,74,211,194,196,76,77,82,206,72,75,29,28,83,88,207,70,219,8,9,10,108,203,189,132,133,201,243]),import.meta.url)),"knowledge-graph":()=>vi().then(()=>K(()=>import("./KnowledgeGraphLayerView2D-DMP7z53Y.js"),__vite__mapDeps([247,217,198,175,219]),import.meta.url)),"link-chart":()=>vi().then(()=>K(()=>import("./KnowledgeGraphLayerView2D-DMP7z53Y.js"),__vite__mapDeps([247,217,198,175,219]),import.meta.url)),"knowledge-graph-sublayer":Tp,"map-image":()=>vi().then(()=>K(()=>import("./MapImageLayerView2D-lioPPba8.js"),__vite__mapDeps([248,231,197,73,43,191,192,44,142,143,96,198,123,126,24,22,25,215,195,190,134,216,217,175,206,72,74,75,76,29,28,194,196,77,82,83,88,207,70,218,209,210,211,232,219,226,220,221,222,223,224]),import.meta.url)),"map-notes":()=>vi().then(()=>K(()=>import("./MapNotesLayerView2D-1v-oa3gV.js"),__vite__mapDeps([249,217,198,175,208,209,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,24,22,25,194,195,134,196,76,77,82,206,72,75,29,28,83,88,207,70,219,224]),import.meta.url)),media:()=>vi().then(()=>K(()=>import("./MediaLayerView2D-BNuvbpMw.js"),__vite__mapDeps([250,251,88,198,197,73,43,191,192,44,142,143,96,123,126,24,22,25,200,195,190,134,196,76,91,201,202,122,61,194,74,77,82,79,80,132,133,206,72,75,29,28,83,207,70,204,81,252,205,217,175,219]),import.meta.url)),"ogc-feature":()=>vi().then(()=>K(()=>import("./OGCFeatureLayerView2D-ciVaSGg6.js"),__vite__mapDeps([253,225,207,24,22,25,226,227,228,29,35,217,198,175,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,194,195,134,196,76,77,82,91,62,60,61,63,89,83,199,229,147,37,85,223,219,220,224]),import.meta.url)),"open-street-map":j_,"oriented-imagery":Tp,route:()=>vi().then(()=>K(()=>import("./RouteLayerView2D-CuGp4ddr.js"),__vite__mapDeps([254,255,256,217,198,175,208,209,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,24,22,25,194,195,134,196,76,77,82,206,72,75,29,28,83,88,207,70,219,224]),import.meta.url)),stream:()=>vi().then(()=>K(()=>import("./StreamLayerView2D--hWgEtda.js"),__vite__mapDeps([257,225,207,24,22,25,226,227,228,29,35,217,198,175,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,194,195,134,196,76,77,82,91,62,60,61,63,89,83,199,229,147,37,85,223,219,220,224]),import.meta.url)),"subtype-group":()=>vi().then(()=>K(()=>import("./SubtypeGroupLayerView2D-CCAJ9_JA.js"),__vite__mapDeps([258,225,207,24,22,25,226,227,228,29,35,217,198,175,210,74,73,43,190,143,211,197,191,192,44,142,96,123,126,194,195,134,196,76,77,82,91,62,60,61,63,89,83,199,229,147,37,85,223,219,220,224]),import.meta.url)),tile:j_,"vector-tile":()=>vi().then(()=>K(()=>import("./VectorTileLayerView2D-DDwI4kbi.js"),__vite__mapDeps([259,61,122,202,123,143,192,44,142,197,73,43,191,96,198,126,24,22,25,211,27,124,125,217,175,219,220]),import.meta.url)),video:()=>vi().then(()=>K(()=>import("./VideoLayerView2D-CfiIXTRO.js"),__vite__mapDeps([260,261,262,252,96,197,73,43,191,192,44,142,143,198,123,126,24,22,25,194,195,190,134,74,196,76,77,82,205,263,217,175,208,209,210,211,206,72,75,29,28,83,88,207,70,219]),import.meta.url)),wcs:()=>vi().then(()=>K(()=>import("./ImageryTileLayerView2D-D_2b2TVX.js"),__vite__mapDeps([241,242,240,192,44,142,143,43,110,197,73,191,96,198,123,126,24,22,25,105,103,217,175,107,243,211,195,190,134,205,196,76,216,244,108,224,185,226,223,219,220]),import.meta.url)),"web-tile":j_,wfs:Tp,wms:()=>vi().then(()=>K(()=>import("./WMSLayerView2D-Bu3Jno0u.js"),__vite__mapDeps([264,231,197,73,43,191,192,44,142,143,96,198,123,126,24,22,25,215,195,190,134,216,217,175,232,219,220,265,226]),import.meta.url)),wmts:()=>vi().then(()=>K(()=>import("./WMTSLayerView2D-DUFQbveu.js"),__vite__mapDeps([266,214,215,198,195,143,190,191,134,216,197,73,43,192,44,142,96,123,126,24,22,25,211,217,175,219,220]),import.meta.url)),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function V3e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new G(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const b7={hasLayerViewModule:t=>_7[t.type]!=null,importLayerView:t=>{const e=_7[t.type];if(e==null)throw V3e(t);return e(t)}};var da;let xv=(da=class{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new da(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,a,o,u]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(a),this.col=parseFloat(o),this.world=parseFloat(u)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new da(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const s=this.clone();return s.col+=e,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new da(e,i,r,s),new da(e,i,r+1,s),new da(e,i+1,r,s),new da(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},da.pool=new _m(()=>new da(""),null,null,25,50),da);function Cy(t,e){return[t,e]}function Ep(t,e,i){return t[0]=e,t[1]=i,t}function j3e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const So=new xv("0/0/0/0");let U3e=class Ree{static create(e,i,r=null){const s=Fs(e.spatialReference),n=i.origin||Cy(e.origin.x,e.origin.y),a=Cy(e.size[0]*i.resolution,e.size[1]*i.resolution),o=Cy(-1/0,-1/0),u=Cy(1/0,1/0),h=Cy(1/0,1/0);r!=null&&(Ep(o,Math.max(0,Math.floor((r.xmin-n[0])/a[0])),Math.max(0,Math.floor((n[1]-r.ymax)/a[1]))),Ep(u,Math.max(0,Math.floor((r.xmax-n[0])/a[0])),Math.max(0,Math.floor((n[1]-r.ymin)/a[1]))),Ep(h,u[0]-o[0]+1,u[1]-o[1]+1));const{cols:p,rows:y}=i;let v,b,w,S;return!r&&p&&y&&(Ep(o,p[0],y[0]),Ep(u,p[1],y[1]),Ep(h,p[1]-p[0]+1,y[1]-y[0]+1)),e.isWrappable?(v=Cy(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),h[1]),b=!0,w=s.origin,S=s.valid):(v=h,b=!1),new Ree(i.level,i.resolution,i.scale,n,o,u,h,a,v,b,w,S)}constructor(e,i,r,s,n,a,o,u,h,p,y,v){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=a,this.size=o,this.norm=u,this.worldSize=h,this.wrap=p,this._spatialReferenceOrigin=y,this._spatialReferenceValid=v}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?s[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){So.set(i);const s=r?So.col:this.denormalizeCol(So.col,So.world),n=So.row;return j3e(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,i,r=!1){So.set(i);const s=r?So.col:this.denormalizeCol(So.col,So.world);return Array.isArray(e)?Ep(e,this.getXForColumn(s),this.getYForRow(So.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(So.row)),e}};var em;let JD=(em=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const a=e.getWorldForColumn(n);yield new xv(e.level,i,e.normalizeCol(n),a)}}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:a,colFrom:o,colTo:u}of r)for(let h=o;h<=u;h++)e.call(i,n,a,s.normalizeCol(h),s.getWorldForColumn(h))}},em.pool=new _m(()=>new em),em),tA=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Ei=new xv("0/0/0/0");let G3e=class Dee{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[n,a]=i,o=n-r,u=a-s,h=u!==0?o/u:0,p=(Math.ceil(s)-s)*h,y=(Math.floor(s)-s)*h;return new Dee(r,Math.floor(s),Math.ceil(a),h,o<0?p:y,o<0?y:p,o<0?n:r,o<0?r:n)}constructor(e,i,r,s,n,a,o,u){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=a,this.leftBound=o,this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const ta=[[0,0],[0,0],[0,0],[0,0]],q3e=1e-6;let B3e=class{constructor(e,i=null,r=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter(o=>o.level>=r&&o.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const a=this._lodInfos=n.map(o=>U3e.create(e,o,i));n.forEach((o,u)=>{this._infoByLevel[o.level]=a[u],this._infoByScale[o.scale]=a[u],this.scales[u]=o.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Ei.set(i);const s=this._infoByLevel[Ei.level];return s?s.getTileBounds(e,Ei,r):e}getTileCoords(e,i,r=!1){Ei.set(i);const s=this._infoByLevel[Ei.level];return s?s.getTileCoords(e,Ei,r):e}getTileCoverage(e,i=192,r=!0,s="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=JD.pool.acquire(n),o=this._wrap;let u,h,p,y=1/0,v=-1/0;const b=a.spans;ta[0][0]=ta[0][1]=ta[1][1]=ta[3][0]=-i,ta[1][0]=ta[2][0]=e.size[0]+i,ta[2][1]=ta[3][1]=e.size[1]+i;for(const T of ta)e.toMap(T,T),T[0]=n.getColumnForX(T[0]),T[1]=n.getRowForY(T[1]);const w=[];let S=3;for(let T=0;T<4;T++){if(ta[T][1]===ta[S][1]){S=T;continue}const I=G3e.create(ta[T],ta[S]);y=Math.min(I.ymin,y),v=Math.max(I.ymax,v),w[I.ymin]===void 0&&(w[I.ymin]=[]),w[I.ymin].push(I),S=T}if(y==null||v==null||v-y>100)return null;let M=[];for(u=y;u<v;){w[u]!=null&&(M=M.concat(w[u])),h=1/0,p=-1/0;for(let T=M.length-1;T>=0;T--){const I=M[T];h=Math.min(h,I.getLeftCol()),p=Math.max(p,I.getRightCol())}if(h=Math.floor(h),p=Math.floor(p),u>=n.first[1]&&u<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const T=Math.floor(p/n.worldSize[0]);for(let I=Math.floor(h/n.worldSize[0]);I<=T;I++)b.push(new tA(u,Math.max(n.getFirstColumnForWorld(I),h),Math.min(n.getLastColumnForWorld(I),p)))}else b.push(new tA(u,h,p));else h>n.last[0]||p<n.first[0]||(h=Math.max(h,n.first[0]),p=Math.min(p,n.last[0]),b.push(new tA(u,h,p)));u+=1;for(let T=M.length-1;T>=0;T--){const I=M[T];I.ymax>=u?I.incrRow():M.splice(T,1)}}return a}getTileParentId(e){Ei.set(e);const i=this._infoByLevel[Ei.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ei,this._lodInfos[r],Ei),Ei.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ei.set(i);const r=this._infoByLevel[Ei.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Ei,s,Ei);const a=s.denormalizeCol(Ei.col,Ei.world);for(const o of e.spans)if(o.row===Ei.row&&o.colFrom<=a&&o.colTo>=a)return!0}if(s.resolution<r.resolution){const[a,o,u,h]=e.spans.reduce((S,M)=>(S[0]=Math.min(S[0],M.row),S[1]=Math.max(S[1],M.row),S[2]=Math.min(S[2],M.colFrom),S[3]=Math.max(S[3],M.colTo),S),[1/0,-1/0,1/0,-1/0]),p=r.denormalizeCol(Ei.col,Ei.world),y=s.getColumnForX(r.getXForColumn(p)),v=s.getRowForY(r.getYForRow(Ei.row)),b=s.getColumnForX(r.getXForColumn(p+1))-1,w=s.getRowForY(r.getYForRow(Ei.row+1))-1;return!(y>h||b<u||v>o||w<a)}const n=s.denormalizeCol(Ei.col,Ei.world);return e.spans.some(a=>a.row===Ei.row&&a.colFrom<=n&&a.colTo>=n)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=Fs(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+q3e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}},H3e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},W3e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Cd,this._controllers=new Cd,this._processingItems=new Cd,this._pausedSignal=B0(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new tw(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=fi(this._schedule),this._task=fi(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let n=null;i&&(n=so(i,()=>s.abort()));const a=()=>{const p=this._processingItems.get(e);p&&p.controller.abort(),o(),h.reject(Ht())},o=()=>{u.remove(),n?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},u=n4(s.signal,a),h=va();return this._deferreds.set(e,h),this._controllers.set(e,s),h.promise.then(o,o),this._queue.push(e),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Ht()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=hv(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,s=new H3e(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(n){this._processError(s,n)}zs(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const w7=[0,0];let nc=class extends Ce{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:s}=this;this._queue=new W3e({concurrency:e,scheduler:r,priority:s,process:(n,a)=>{const o=this._keyToItem.get(n);return i(o,{signal:a})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=xi(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(e.key),n=av(this._tilesByScale,s,()=>new Set),a=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(e.key),this._keyToItem.set(i,e),r.then(a,a),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const a of e)i.add(this._keyToItem.get(a).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[a,o]of this._tilesByScale)if(nW(o,u=>i.has(u))){const u=Math.abs(a-r);u<n&&(s=o,n=u)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,s=this.state.center;let n,a=Number.POSITIVE_INFINITY;for(const o of e)if(i.has(o.id)){r.getTileCoords(w7,o);const u=L3(w7,s);u<a&&(a=u,n=o)}return n}};d([m({constructOnly:!0})],nc.prototype,"concurrency",void 0),d([m({constructOnly:!0})],nc.prototype,"priority",void 0),d([m({constructOnly:!0})],nc.prototype,"process",void 0),d([m({constructOnly:!0})],nc.prototype,"scheduler",void 0),d([m()],nc.prototype,"state",void 0),d([m({constructOnly:!0})],nc.prototype,"tileInfoView",void 0),nc=d([N("esri.views.2d.tiling.TileQueue")],nc);const tWe=nc;let Z3e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];S7(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:a,origin:o}=this._tileInfoView.tileInfo,u=r*a[0],h=r*a[1],p=[0,0],y=[0,0];for(n.sort((v,b)=>(p[0]=o.x+u*(v.col+.5),p[1]=o.y-h*(v.row+.5),y[0]=o.x+u*(b.col+.5),y[1]=o.y-h*(b.row+.5),Zb(p,i)-Zb(y,i)));n.length>0;){const v=n.pop();if(this._removeTile(v.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),S7(this._tilePerId,e)}};function S7(t,e){t.delete(e)}const Cp=new xv(0,0,0,0),Uu=new Map,U_=[],iA=[];let rWe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Z3e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:a}=e.state,{minScale:o,maxScale:u}=this.tileInfoView,h=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>o||s<u))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:y,lodInfo:v}=p,{level:b}=v;this.tiles.length=0,r.forEach(T=>T.visible=!0);let w=0,S=0;if(y.length>0)for(const{row:T,colFrom:I,colTo:L}of y)for(let O=I;O<=L;O++){w++;const R=Cp.set(b,T,v.normalizeCol(O),v.getWorldForColumn(O)).id;let z=r.get(R);if(z)z.isReady?(Uu.set(R,z),S++):h||this._addParentTile(R,Uu);else{if(this._tileCache?.has(R)){if(z=this._tileCache.pop(R),this.tileIndex.set(R,z),z.isReady){Uu.set(R,z),S++;continue}}else z=this.acquireTile(Cp),this.tileIndex.set(R,z);h||this._addParentTile(R,Uu)}}const M=S===w;for(const[T,I]of r){if(Uu.has(T))continue;Cp.set(T);const L=this.tileInfoView.intersects(p,Cp),O=this.cachePolicy==="purge"?Cp.level!==b:Cp.level>b;!L||!h&&M?!O&&L||U_.push(I):I.isReady?O&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Cp,b)?U_.push(I):iA.push(I):O&&U_.push(I)}for(const T of iA)T.isReady&&Uu.set(T.key.id,T);for(const T of U_)this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(T.key.id);for(const T of Uu.values())this.tiles.push(T);for(const T of r.values())Uu.has(T.key.id)||(T.visible=!1);this._tileCache?.prune(b,n,a),JD.pool.release(p),iA.length=0,U_.length=0,Uu.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s?.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache?.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s?.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=Oi();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const n=Oi();if(this.tileInfoView.getTileBounds(n,s.key,!0),Xge(n,r))return!0}return!1}};const Y3e={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>K(()=>import("./ElevationProfileAnalysisView2D-Cvz8UTqL.js"),__vite__mapDeps([267,150,261,268,269,270,271,272,273,274,10,275,276,277,278,279,94,95,280,281,7,282,283,117,54,100,101,113,152,52,284,87,126,131,112]),import.meta.url),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function J3e(t){const e=Y3e[t.type];if(!e)throw new G("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let X3e=class{constructor(e,i={}){this.events=new tde,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",r);s||(s=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=gm([lv(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||X("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=X("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,s,n,a,o,u]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${s}, ${n}, ${a}, ${o}, ${u})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:s},pixelRatio:n}=e,a=s[0],o=s[1],u=Math.round(a*n),h=Math.round(o*n);i.width===u&&i.height===h||(i.width=u,i.height=h),r.width=a+"px",r.height=o+"px"}_computeViewTransform(e,i){const[r,s]=e.center,[n,a]=i.center,[o,u]=e.toScreen([0,0],n,a),[h,p]=e.toScreen([0,0],r,s),y=h-o,v=p-u,b=e.scale/i.scale,w=i.rotation-e.rotation,S=pu();return t2(S),i2(S,S,[b,b]),qd(S,S,au(w)),du(S,S,[y,v]),S}};function Q3e(t,e,i,r,s){Nee(t,e,i||0,r||t.length-1,s||K3e)}function Nee(t,e,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,a=e-i+1,o=Math.log(n),u=.5*Math.exp(2*o/3),h=.5*Math.sqrt(o*u*(n-u)/n)*(a-n/2<0?-1:1);Nee(t,e,Math.max(i,Math.floor(e-a*u/n+h)),Math.min(r,Math.floor(e+(n-a)*u/n+h)),s)}var p=t[e],y=i,v=r;for(G_(t,i,e),s(t[r],p)>0&&G_(t,i,r);y<v;){for(G_(t,y,v),y++,v--;s(t[y],p)<0;)y++;for(;s(t[v],p)>0;)v--}s(t[i],p)===0?G_(t,i,v):G_(t,++v,r),v<=e&&(i=v+1),e<=v&&(r=v-1)}}function G_(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function K3e(t,e){return t<e?-1:t>e?1:0}function bT(t,e){if(!(this instanceof bT))return new bT(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function eEe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Iy(t,e){k1(t,0,t.children.length,e,t)}function k1(t,e,i,r,s){s||(s=ug(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,a=e;a<i;a++)n=t.children[a],R1(s,t.leaf?r(n):n);return s}function R1(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function x7(t,e){return t.minX-e.minX}function $7(t,e){return t.minY-e.minY}function rA(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ux(t){return t.maxX-t.minX+(t.maxY-t.minY)}function tEe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function iEe(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function sA(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function cx(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ug(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M7(t,e,i,r,s){for(var n,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(n=e+Math.ceil((i-e)/r/2)*r,Q3e(t,n,e,i,s),a.push(e,n,n,i))}bT.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!cx(t,e))return i;for(var s,n,a,o,u=[];e;){for(s=0,n=e.children.length;s<n;s++)a=e.children[s],cx(t,o=e.leaf?r(a):a)&&(e.leaf?i.push(a):sA(t,o)?this._all(a,i):u.push(a));e=u.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!cx(t,e))return!1;for(var r,s,n,a,o=[];e;){for(r=0,s=e.children.length;r<s;r++)if(n=e.children[r],cx(t,a=e.leaf?i(n):n)){if(e.leaf||sA(t,a))return!0;o.push(n)}e=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ug([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,s,n,a=this.data,o=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],i=h.pop(),n=!0),a.leaf&&(s=eEe(t,a.children,e))!==-1)return a.children.splice(s,1),u.push(a),this._condense(u),this;n||a.leaf||!sA(a,o)?r?(i++,a=r.children[i],n=!1):a=null:(u.push(a),h.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:x7,compareMinY:$7,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,n=i-e+1,a=this._maxEntries;if(n<=a)return Iy(s=ug(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(a)),a=Math.ceil(n/Math.pow(a,r-1))),(s=ug([])).leaf=!1,s.height=r;var o,u,h,p,y=Math.ceil(n/a),v=y*Math.ceil(Math.sqrt(a));for(M7(t,e,i,v,this.compareMinX),o=e;o<=i;o+=v)for(M7(t,o,h=Math.min(o+v-1,i),y,this.compareMinY),u=o;u<=h;u+=y)p=Math.min(u+y-1,h),s.children.push(this._build(t,u,p,r-1));return Iy(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,n,a,o,u,h,p,y;r.push(e),!e.leaf&&r.length-1!==i;){for(p=y=1/0,s=0,n=e.children.length;s<n;s++)u=rA(a=e.children[s]),(h=tEe(t,a)-u)<y?(y=h,p=u<p?u:p,o=a):h===y&&u<p&&(p=u,o=a);e=o||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),n=[],a=this._chooseSubtree(s,this.data,e,n);for(a.children.push(t),R1(a,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),a=ug(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,Iy(i,this.toBBox),Iy(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=ug([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Iy(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,n,a,o,u,h,p;for(u=h=1/0,r=e;r<=i-e;r++)a=iEe(s=k1(t,0,r,this.toBBox),n=k1(t,r,i,this.toBBox)),o=rA(s)+rA(n),a<u?(u=a,p=r,h=o<h?o:h):a===u&&o<h&&(h=o,p=r);return p},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:x7,s=t.leaf?this.compareMinY:$7;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,n,a=this.toBBox,o=k1(t,0,e,a),u=k1(t,i-e,i,a),h=ux(o)+ux(u);for(s=e;s<i-e;s++)n=t.children[s],R1(o,t.leaf?a(n):n),h+=ux(o);for(s=i-e-1;s>=e;s--)n=t.children[s],R1(u,t.leaf?a(n):n),h+=ux(u);return h},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)R1(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Iy(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function rEe(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let T7=class zee{constructor(e,i){this.key=new xv(0,0,0,0),this.bounds=Oi(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Wge(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return rEe(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=nn.acquire();for(let r=0;r<e.length;r++)i[r]=new zee(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return od.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Ip={added:[],removed:[]},nA=new Set,sEe=new xv(0,0,0,0);function nEe(t,e){const i=Fs(e);if(!i)return null;const[r,s]=i.valid;return t[2]>s?[Oi([t[0],t[1],s,t[3]]),Oi([r,t[1],r+t[2]-s,t[3]])]:t[0]<r?[Oi([r,t[1],t[2],t[3]]),Oi([s-(r-t[0]),t[1],s,t[3]])]:null}let aEe=class extends MW{constructor(e){super(),this._tiles=new Map,this._index=bT(9,X("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||E3(e)===0||C3(e)===0)return[];const i=nEe(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new T7(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:a,colFrom:o,colTo:u}of r)for(let h=o;h<=u;h++){const p=sEe.set(n,a,s.normalizeCol(h),s.getWorldForColumn(h)).id;if(nA.add(p),!this.has(p)){const y=new T7(this.tileScheme,p);this._tiles.set(p,y),this._index.insert(y),this.tiles.push(y),Ip.added.push(y)}}for(let a=this.tiles.length-1;a>=0;a--){const o=this.tiles[a];nA.has(o.id)||(this._tiles.delete(o.id),this.tiles.splice(a,1),this._index.remove(o),Ip.removed.push(o))}(Ip.added.length||Ip.removed.length)&&this.emit("update",Ip),JD.pool.release(i),nA.clear(),Ip.added.length=0,Ip.removed.length=0}};const oWe=1e-30,E7=512,hx=16777216,lWe=8,Fee=29,Vee=24,uWe=4,cWe=0,hWe=0,dWe=0,pWe=1,fWe=2,mWe=3,yWe=4,gWe=5,vWe=6,_We=12,bWe=13,wWe=5,oEe=6,SWe=5,xWe=6,jee=6,lEe=1<<jee,$We=lEe<<1,MWe=1.05,TWe=3,EWe=1,uEe=3,cEe=3,CWe=5,IWe=6,LWe=1.15,hEe=4,AWe=128,dEe=256,PWe=dEe-2*hEe,OWe=2,kWe=128,Uee=1,RWe=10,pEe=1024,DWe=128,NWe=4,zWe=1,FWe=1<<20,VWe=.75,jWe=10,UWe=.75,GWe=256,fEe=32,mEe=512,qWe=0,BWe=1,yEe=1,HWe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],WWe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],q_=256,gEe=()=>le.getLogger("esri.views.webgl.checkWebGLError");function Gee(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const qee=!!X("enable-feature:webgl-debug");function Bee(){return qee}function ZWe(){return qee}function Lp(t,e=Bee()){if(e){const i=Gee(t);if(i){const r=new Error().stack;gEe().error(new G("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const YWe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ap={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Ve={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},vEe=Object.values(Ve),wT={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},Tb={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},dR={FLOAT:Ap.FLOAT,UNSIGNED_BYTE:Ap.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:Ap.BYTE,UNSIGNED_SHORT:Ap.UNSIGNED_SHORT,SHORT:Ap.SHORT,UNSIGNED_INT:Ap.UNSIGNED_INT,INT:Ap.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},JWe=33984,C7={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},XWe=1029,QWe=0,KWe=36064,eZe=36065,tZe=36066,iZe=36067,rZe=33306,sZe=36096,nZe=36128,Ms={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function aZe(t,e,i,r=0){const s=t.gl;t.bindBuffer(i);for(const n of i.layout){const a=e.get(n.name);if(a==null){console.warn(`There is no location for vertex attribute '${n.name}' defined.`);continue}const o=r*n.stride;if(n.count<=4)s.vertexAttribPointer(a,n.count,n.type,n.normalized,n.stride,n.offset+o),s.enableVertexAttribArray(a),n.divisor>0&&s.vertexAttribDivisor(a,n.divisor);else if(n.count===9)for(let u=0;u<3;u++)s.vertexAttribPointer(a+u,3,n.type,n.normalized,n.stride,n.offset+12*u+o),s.enableVertexAttribArray(a+u),n.divisor>0&&s.vertexAttribDivisor(a+u,n.divisor);else if(n.count===16)for(let u=0;u<4;u++)s.vertexAttribPointer(a+u,4,n.type,n.normalized,n.stride,n.offset+16*u+o),s.enableVertexAttribArray(a+u),n.divisor>0&&s.vertexAttribDivisor(a+u,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count);if(Bee()){const u=Gee(t.gl);u&&console.error(`Unable to bind vertex attribute "${n.name}" with baseInstanceOffset ${o}:`,u,n)}}}function oZe(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function _Ee(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Ve.R8:case Ve.R8I:case Ve.R8UI:case Ve.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Ve.RGBA4:case Ve.R16F:case Ve.R16I:case Ve.R16UI:case Ve.RG8:case Ve.RG8I:case Ve.RG8UI:case Ve.RG8_SNORM:case Ve.RGB565:case Ve.RGB5_A1:case Tb.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Ve.RGB8:case Ve.RGB8I:case Ve.RGB8UI:case Ve.RGB8_SNORM:case Ve.SRGB8:case Tb.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Ve.RGBA8:case Ve.R32F:case Ve.R11F_G11F_B10F:case Ve.RG16F:case Ve.R32I:case Ve.R32UI:case Ve.RG16I:case Ve.RG16UI:case Ve.RGBA8I:case Ve.RGBA8UI:case Ve.RGBA8_SNORM:case Ve.SRGB8_ALPHA8:case Ve.RGB9_E5:case Ve.RGB10_A2UI:case Ve.RGB10_A2:case Tb.DEPTH_COMPONENT32F:case wT.DEPTH24_STENCIL8:return 4;case wT.DEPTH32F_STENCIL8:return 5;case Ve.RGB16F:case Ve.RGB16I:case Ve.RGB16UI:return 6;case Ve.RG32F:case Ve.RG32I:case Ve.RG32UI:case Ve.RGBA16F:case Ve.RGBA16I:case Ve.RGBA16UI:return 8;case Ve.RGB32F:case Ve.RGB32I:case Ve.RGB32UI:return 12;case Ve.RGBA32F:case Ve.RGBA32I:case Ve.RGBA32UI:return 16;case Ms.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ms.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ms.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ms.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ms.COMPRESSED_R11_EAC:case Ms.COMPRESSED_SIGNED_R11_EAC:case Ms.COMPRESSED_RGB8_ETC2:case Ms.COMPRESSED_SRGB8_ETC2:case Ms.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ms.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ms.COMPRESSED_RG11_EAC:case Ms.COMPRESSED_SIGNED_RG11_EAC:case Ms.COMPRESSED_RGBA8_ETC2_EAC:case Ms.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Hee=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=dR.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function bEe(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:_Ee(t.internalFormat))*(t.target===34067?6:1))}const B_=()=>le.getLogger("esri/views/webgl/textureUtils");function H_(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&B_().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&(Wee(s)||Zee(s))){const{linearFilterDepth:n,compareEnabled:a,samplingMode:o,hasMipmap:u}=t;u&&B_().error("Depth textures cannot have mipmaps"),n?o!==9729&&o!==9728&&B_().error("Depth textures cannot sample mipmaps"):(o!==9728&&B_().error("Depth textures without filtering must use NEAREST filtering"),a&&B_().error("Depth textures without filtering cannot use compare function"))}}function wEe(t){return vEe.includes(t)}function Wee(t){return e3(Tb,t)}function Zee(t){return e3(wT,t)}function SEe(t){return t!=null&&e3(Ms,t)}function cg(t){return t!=null&&"type"in t&&t.type==="compressed"}function xEe(t){return t!=null&&"byteLength"in t}function I7(t){return t!=null&&!cg(t)&&!xEe(t)}function Ly(t){return t===32879||t===35866}function L7(t,e,i,r=1){let s=Math.max(e,i);return t===32879&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function dx(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case dR.FLOAT:switch(t.pixelFormat){case 6408:return Ve.RGBA32F;case 6407:return Ve.RGB32F;default:throw new G("texture:unknown-format","Unable to derive format")}case dR.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Ve.RGBA8;case 6407:return Ve.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?wT.DEPTH24_STENCIL8:e===6402?Tb.DEPTH_COMPONENT24:e,t.internalFormat}function $Ee(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let MEe=class Yee extends Hee{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case Ve.R16F:case Ve.R32F:case Ve.R8_SNORM:case Ve.R8:this.pixelFormat=6403;break;case Ve.R8I:case Ve.R8UI:case Ve.R16I:case Ve.R16UI:case Ve.R32I:case Ve.R32UI:this.pixelFormat=36244}}static validate(e,i){return new Yee(e,i)}};const TEe=!!X("esri-tests-disable-gpu-memory-measurements"),Gu=()=>le.getLogger("esri/views/webgl/Texture");var Tr;let EEe=(Tr=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const s=MEe.validate(e,i);if(!s)throw new G("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return TEe?0:bEe(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(C7.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new G("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!cg(e)&&this._descriptor.internalFormat&&e3(Ms,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!cg(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,s,n,a,o=0){a||Gu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Gu().error("An attempt to update uninitialized texture!");const u=this._descriptor;u.internalFormat=dx(u);const{context:h,pixelFormat:p,dataType:y,target:v,isImmutable:b}=u;if(b&&!this._wasImmutablyAllocated)throw new G("texture:uninitialized","Cannot update immutable texture before allocation!");const w=h.bindTexture(this,Tr.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>u.width||r+n>u.height)&&Gu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=h;o&&(s&&n||Gu().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),S.pixelStorei(S.UNPACK_SKIP_ROWS,o)),I7(a)?S.texSubImage2D(v,e,i,r,s,n,p,y,a):cg(a)?S.compressedTexSubImage2D(v,e,i,r,s,n,u.internalFormat,a.levels[e]):S.texSubImage2D(v,e,i,r,s,n,p,y,a),o&&S.pixelStorei(S.UNPACK_SKIP_ROWS,0),h.bindTexture(w,Tr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,n,a,o,u){u||Gu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Gu().error("An attempt to update an uninitialized texture!");const h=this._descriptor;h.internalFormat=dx(h);const{context:p,pixelFormat:y,dataType:v,isImmutable:b,target:w}=h;if(b&&!this._wasImmutablyAllocated)throw new G("texture:uninitialized","Cannot update immutable texture before allocation!");Ly(w)||Gu().warn("Attempting to set 3D texture data on a non-3D texture");const S=p.bindTexture(this,Tr.TEXTURE_UNIT_FOR_UPDATES);p.setActiveTexture(Tr.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>h.width||r+a>h.height||s+o>h.depth)&&Gu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:M}=p;if(cg(u))u=u.levels[e],M.compressedTexSubImage3D(w,e,i,r,s,n,a,o,h.internalFormat,u);else{const T=u;M.texSubImage3D(w,e,i,r,s,n,a,o,y,v,T)}p.bindTexture(S,Tr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new G("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,H_(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,Tr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Tr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Tr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new G("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,H_(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,H_(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),H_(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=sm(this._compressionAbortController)}_setData(e,i){const r=this._descriptor,s=r.context?.gl;if(!s)return;Lp(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),r.context.instanceCounter.increment(C7.Texture,this)),H_(r);const n=r.context.bindTexture(this,Tr.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Tr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Lp(s);const a=i??r.target,o=Ly(a);if(I7(e))this._setDataFromTexImageSource(e,a);else{const{width:u,height:h,depth:p}=r;if(u==null||h==null)throw new G("texture:missing-size","Width and height must be specified!");if(o&&p==null)throw new G("texture:missing-depth","Depth must be specified!");if(r.internalFormat=dx(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(a,r.internalFormat,r.hasMipmap,u,h,p),cg(e)){if(!SEe(r.internalFormat))throw new G("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,a)}else this._texImage(a,0,r.internalFormat,u,h,p,e),Lp(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Lp(s),r.context.bindTexture(n,Tr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=dx(s);const n=Ly(i),{width:a,height:o,depth:u}=$Ee(e);s.width&&s.height,s.width||(s.width=a),s.height||(s.height=o),n&&s.depth,n&&(s.depth=u),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,a,o,u),this._texImage(i,0,s.internalFormat,a,o,u,e),Lp(r),s.hasMipmap&&(this.generateMipmap(),Lp(r))}_setDataFromCompressedSource(e,i,r){const s=this._descriptor,{width:n,height:a,depth:o}=s,u=e.levels,h=L7(r,n,a,o),p=Math.min(h,u.length)-1;this._descriptor.context.gl.texParameteri(s.target,33085,p),this._forEachMipmapLevel((y,v,b,w)=>{const S=u[Math.min(y,u.length-1)];this._compressedTexImage(r,y,i,v,b,w,S)},p)}_texStorage(e,i,r,s,n,a){const{gl:o}=this._descriptor.context;if(!wEe(i)&&!Wee(i)&&!Zee(i))throw new G("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const u=r?L7(e,s,n,a):1;if(Ly(e)){if(a==null)throw new G("texture:missing-depth","Missing depth dimension for 3D texture upload");o.texStorage3D(e,u,i,s,n,a)}else o.texStorage2D(e,u,i,s,n);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,n,a,o){const u=this._descriptor.context.gl,h=Ly(e),{isImmutable:p,pixelFormat:y,dataType:v}=this._descriptor;if(p){if(o!=null){const b=o;if(h){if(a==null)throw new G("texture:missing-depth","Missing depth dimension for 3D texture upload");u.texSubImage3D(e,i,0,0,0,s,n,a,y,v,b)}else u.texSubImage2D(e,i,0,0,s,n,y,v,b)}}else{const b=o;if(h){if(a==null)throw new G("texture:missing-depth","Missing depth dimension for 3D texture upload");u.texImage3D(e,i,r,s,n,a,0,y,v,b)}else u.texImage2D(e,i,r,s,n,0,y,v,b)}}_compressedTexImage(e,i,r,s,n,a,o){const u=this._descriptor.context.gl,h=Ly(e);if(this._descriptor.isImmutable){if(o!=null)if(h){if(a==null)throw new G("texture:missing-depth","Missing depth dimension for 3D texture upload");u.compressedTexSubImage3D(e,i,0,0,0,s,n,a,r,o)}else u.compressedTexSubImage2D(e,i,0,0,s,n,r,o)}else if(h){if(a==null)throw new G("texture:missing-depth","Missing depth dimension for 3D texture upload");u.compressedTexImage3D(e,i,r,s,n,a,0,o)}else u.compressedTexImage2D(e,i,r,s,n,0,o)}async _compressOnWorker(e){const{width:i,height:r,context:s,flipped:n,preMultiplyAlpha:a,hasMipmap:o}=this._descriptor,u=this._descriptor.compress?.compressionTracker,h=this._descriptor.compress?.compressionCallback,{compressedTextureETC:p,compressedTextureS3TC:y}=s.capabilities;if(!Tr.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!p&&!y)return;this.abortCompression();const v=new AbortController;let b;this._compressionAbortController=v,u?.increment();try{e instanceof Uint8Array?b=e.buffer:(b=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),Wt(v));const w={data:b,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:a,hasMipmap:o,hasETC:!!p,hasS3TC:!!y},S=await Tr.compressionWorkerHandle.invoke(w,v.signal,"low");if(Wt(v),S.compressedTexture&&this.hasWebGLTextureObject){const M=this.usedMemory;this._descriptor.internalFormat=S.internalFormat,this._setData(S.compressedTexture),h?.(M-this.usedMemory)}}catch(w){jr(w)||Gu().error("Texture compression failed!")}finally{u?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),b instanceof ImageBitmap&&b.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:n,hasMipmap:a,target:o}=this._descriptor;const u=o===32879;if(r==null||s==null||u&&n==null)throw new G("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let h=0;e(h,r,s,n),a&&(r!==1||s!==1||u&&n!==1)&&!(h>=i);++h)r=Math.max(1,r>>1),s=Math.max(1,s>>1),u&&(n=Math.max(1,n>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let r=e.samplingMode,s=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(s=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(s=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),Lp(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Tr.TEXTURE_UNIT_FOR_UPDATES=0,Tr.compressionWorkerHandle=null,Tr);const aA=()=>le.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function CEe(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const IEe=[0,0,0,0];let Jee=class{constructor(){this.type="single",this._highlightOptions=new Id,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*q_),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,oEe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<jee)-1,activeGradient:this}]}_updateGradientTexture(e){const i=LEe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,CEe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,u=Math.sqrt(Math.PI/2)*yEe,h=Math.abs(s)>u?Math.round(10*(Math.abs(s)-u))/10:0,p=Math.abs(o)>u?Math.round(10*(Math.abs(o)-u))/10:0;let y;h&&!p?aA().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&p?aA().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&p&&aA().error("The highlight is "+Math.max(h,p)+"px away from the edge of the feature; consider reducing some width values.");const v=[void 0,void 0,void 0,void 0];function b(S,M,T){v[0]=(1-T)*S[0]+T*M[0],v[1]=(1-T)*S[1]+T*M[1],v[2]=(1-T)*S[2]+T*M[2],v[3]=(1-T)*S[3]+T*M[3]}const{_texelData:w}=this;for(let S=0;S<q_;++S)y=s+S/(q_-1)*(o-s),y<s?(v[0]=0,v[1]=0,v[2]=0,v[3]=0):y<n?b(IEe,r.outlineColor,(y-s)/(n-s)):y<a?[v[0],v[1],v[2],v[3]]=r.outlineColor:y<o?b(r.outlineColor,r.fillColor,(y-a)/(o-a)):[v[0],v[1],v[2],v[3]]=r.fillColor,w[4*S]=255*v[0],w[4*S+1]=255*v[1],w[4*S+2]=255*v[2],w[4*S+3]=255*v[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=o,!this._shadeTex){const S=new Hee(q_,1);S.wrapMode=33071,this._shadeTex=new EEe(e,S)}this._shadeTex.updateData(0,0,0,q_,1,this._texelData)}};function LEe(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let AEe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new Jee),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:e,activeGradient:s}),e<<=1}return i}};const Xee={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},PEe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},OEe={...Xee,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function kEe({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),a=1/2**(r-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:a,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:ba(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function Qee(t){return t.passOptions?.type==="highlight"}function Kee(t){return t.passOptions?.type==="hittest"}function REe(t){if(!Kee(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function DEe(t){if(!Qee(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function hZe(t,e,i){const r={};for(const s in i)typeof i[s]!="function"?r[s]=i[s]:r[s]=i[s](t,e);return r}function dZe(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:kEe(t,e),hittestRequest:REe(t),highlight:DEe(t)}}function pZe(t){return{inside:t.selection===2,outside:t.selection===3}}function NEe(t){return Kee(t)?PEe:Qee(t)&&t.passOptions.stepType==="clear"?OEe:Xee}function fZe(t){const{row:e,col:i}=t.key,r=i*E7,s=e*E7;return{tileOffsetFromLocalOrigin:[r%hx,s%hx],maxIntsToLocalOrigin:[Math.floor(r/hx),Math.floor(s/hx)]}}const zEe=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function mZe(t){return zEe.toJSON(t)}function yZe(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function FEe(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new AEe:new Jee),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function gZe(t,e,i,r){const{painter:s,highlightGradient:n}=t,{highlight:a}=s.effects;if(!n)return;const o=t.passOptions,u=n.getReasonsWithGradients();for(let h=0;h<u.length;h++){const p={...t,passOptions:{type:"highlight",activeGradient:u[h].activeGradient,activeReasons:u[h].activeReasons,stepType:"burn",highlightAll:e}};if(a.bind(p),i(p),h<u.length-1){let v=0;for(let b=h+1;b<u.length;b++)v|=u[b].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:u[h].activeGradient,activeReasons:v,stepType:"clear",highlightAll:e}})}const y={...t,passOptions:{type:"highlight",activeGradient:u[h].activeGradient,activeReasons:u[h].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(NEe(t)),s.updatePipelineState(t.context),a.draw(y),a.unbind()}t.passOptions=o}const px=t=>parseFloat(t)/100;function VEe(t,e,i){const r=typeof t.left=="string"?px(t.left)*e:t.left,s=typeof t.right=="string"?px(t.right)*e:t.right,n=typeof t.top=="string"?px(t.top)*i:t.top,a=typeof t.bottom=="string"?px(t.bottom)*i:t.bottom,o=n;return{xmin:r,xmax:Math.max(e-s,r),ymin:o,ymax:Math.max(i-a,n)}}function ete(t,e,i,r){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:a,xmax:o,ymin:u,ymax:h}=VEe(e,s,n),{x:p,y}=i;return p>a&&p<o&&y>u&&y<h}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||O4(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?P4(e.geometry,r):Nw(e.geometry,r))}}function jEe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function UEe(t,e){if(!t.highlights){if(!e)return;t.highlights=new $e([new Id])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function GEe(t,e,i){const r=RK(e)?kK(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let a=!1,o=null,u=null;i?.include?P7(i.include,A7(t,v=>{s.add(v),oA(v,b=>n.add(b))},(v,b)=>{n.add(v),s.add(b)},v=>{o||(o=new Set),o.add(v)},v=>s.add(v),()=>a=!0)):(a=!0,s=new Set(t.allLayerViews),s.forEach(v=>{oA(v,b=>n.add(b))})),i?.exclude&&P7(i.exclude,A7(t,v=>{s.delete(v),oA(v,b=>n.delete(b))},v=>n.delete(v),v=>{u||(u=new Set),u.add(v)}));const h=t.toMap(r),p=t.allLayerViews.filter(v=>!v.suspended&&s.has(v)&&v.clips.every(b=>ete(t,b,r,h))).reverse();let y=[...a?t.graphicsView.hitTest(h).map(v=>({type:"graphic",graphic:v,layer:null,mapPoint:h})):[],...await Promise.all(p.map(v=>v.hitTest(h,r)).toArray())].filter(Qr).flat().filter(Qr);return y=y.filter(v=>v.type!=="graphic"||v.layer?.type!=="subtype-group"||n.has(v.graphic.layer)),o&&(y=y.filter(v=>!("graphic"in v)||!v.graphic||o?.has(pR(v.graphic)))),u&&(y=y.filter(v=>!("graphic"in v)||!v.graphic||!u?.has(pR(v.graphic)))),{screenPoint:r,results:y}}function A7(t,e,i,r,s,n){return a=>{if(a instanceof Fr){if(a.layer===t)n?.();else{const o=t.allLayerViews.find(u=>u.layer===a.layer);o&&s?.(o)}r(pR(a))}else if(!("layer"in a&&"element"in a))if(a.type==="subtype-sublayer"){const o=t.allLayerViews.find(u=>u.layer===a.parent);o&&i(a,o)}else{const o=t.allLayerViews.find(u=>u.layer===a);o&&e(o)}}}function P7(t,e){if(t)if(EM(t))for(const i of t)if(EM(i))for(const r of i)e(r);else e(i);else e(t)}function pR(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function oA(t,e){const i=t.layer;i?.type==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let W_=null,ST=!0;function qEe(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(ST)try{return new ImageData(t,e)}catch{ST=!1}return tte(t,e,i)}function vZe(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(ST)try{return new ImageData(t,e,i)}catch{ST=!1}const s=tte(e,i,r);return s.data.set(t,0),s}function BEe(){return W_||(W_=document.createElement("canvas"),W_.width=1,W_.height=1),W_}function tte(t,e,i){return i||(i=BEe()),i.getContext("2d").createImageData(t,e)}async function HEe(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await Ot(i,{...e,responseType:"image"});return r}catch(r){throw jr(r)?r:new G("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function WEe(t,e){const{arrayBuffer:i,mediaType:r}=await ZEe(t,e),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:a}=await K(()=>import("./gif-Dc51BPwV.js"),[],import.meta.url);if(n(i))return a(i,e)}if(s){const{isAnimatedPNG:n,parseApng:a}=await K(()=>import("./apng-DKGEKyov.js"),__vite__mapDeps([285,19]),import.meta.url);if(n(i))return a(i,e)}return HEe(new Blob([i],{type:r}),e)}async function ZEe(t,e){const i=I0(t);if(i?.isBase64)return{arrayBuffer:cH(i.data),mediaType:i.mediaType};const r=await Ot(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function ite(t,e,i){const{ctx:r,canvas:s}=ste(t,i),n=r.getImageData(0,0,t.width,t.height),a=ate(s,e);return nte(s),{dataUrl:a,data:n}}function rte(t,e){const{ctx:i,canvas:r}=ste(t,e),s=i.getImageData(0,0,t.width,t.height);return nte(r),s}function ste(t,e){const i=YEe();e.premultipliedAlpha&&KEe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&QEe(r),{ctx:r,canvas:i}}function nte(t){t.width=0,t.height=0}function YEe(){return lA==null&&(lA=document.createElement("canvas")),lA}let lA=null;function ate(t,e){const i=eCe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function ote(t,e){const i=XEe(t),r=iCe[i];return{format:i,quality:ys(e??r,0,100)}}function lte(t,e){return e/Math.max(t[0],t[1])}function JEe(t,e,i,r=0,s=0,n=t.width-r,a=t.height-s,o=!1){const{data:u}=t,{width:h,height:p,data:y}=e,v=n/h,b=a/p,w=Math.ceil(v/2),S=Math.ceil(b/2),M=t.width;for(let T=0;T<p;T++)for(let I=0;I<h;I++){const L=4*(I+(o?p-T-1:T)*h);let O=0,R=0,z=0,j=0,U=0,B=0;const Q=(T+.5)*b;for(let oe=Math.floor(T*b);oe<(T+1)*b;oe++){const ue=Math.abs(Q-(oe+.5))/S,Se=(I+.5)*v,me=ue*ue;for(let ke=Math.floor(I*v);ke<(I+1)*v;ke++){const te=Math.abs(Se-(ke+.5))/w,be=Math.sqrt(me+te*te);if(be>=1)continue;let Me=2*be*be*be-3*be*be+1;const et=4*(r+ke+(s+oe)*M);B+=Me*u[et+3],R+=Me,!i&&u[et+3]<255&&(Me=Me*u[et+3]/255),z+=Me*u[et],j+=Me*u[et+1],U+=Me*u[et+2],O+=Me}}y[L]=z/O,y[L+1]=j/O,y[L+2]=U/O,y[L+3]=B/R}return e}function XEe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return tCe}}function QEe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function KEe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const n=255/s;e[r]=e[r]*n,e[r+1]=e[r+1]*n,e[r+2]=e[r+2]*n}}}const eCe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},O7=98,tCe="png",iCe={png:100,jpg:O7,jpeg:O7},_Ze=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:qEe,encode:ite,encodeData:rte,getFormatAndQuality:ote,getMaximumResolutionScale:lte,resampleHermite:JEe,toDataUrl:ate},Symbol.toStringTag,{value:"Module"})),ute={flipY:!0,premultipliedAlpha:!0};async function rCe(t,e){const i=await cte(t,e),{format:r,quality:s}=ote(e?.format,e?.quality);return ite(i,{format:r,quality:s},ute)}async function sCe(t,e){const i=await cte(t,e);return rte(i,ute)}function cte(t,e){const i=oCe(e||{},aCe(t.stage,t.size),t.size,t.padding),r=nCe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e?.rotation)}function nCe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const s=e.find(n=>n.layer.id===r.id);s?.container&&i.push(s.container)}),i}function aCe(t,e){return Math.min(4,lte(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function oCe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=i[0]-(r.left+r.right),a=i[1]-(r.top+r.bottom);let o,u,h=t.area||{x:0,y:0,width:n,height:a};if(s){const p=n/a,y=s[0]/s[1];if(y>p){const v=h.width/y;h={x:h.x,y:Math.round(h.y+(h.height-v)/2),width:h.width,height:Math.round(v)}}else{const v=h.height*y;h={x:Math.round(h.x+(h.width-v)/2),y:h.y,width:Math.round(v),height:h.height}}}else s=[h.width,h.height];return s[0]>h.width?(o=Math.min(s[0]/h.width,e),u=s[0]/h.width/o):(o=1,u=s[0]/h.width),{cropArea:{x:Math.round((h.x+r.left)*o),y:Math.round((h.y+r.top)*o),width:Math.round(h.width*o),height:Math.round(h.height*o)},outputScale:u,resolutionScale:o}}const lCe=t=>t.includes("Brush");let hte=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),lCe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const k7=Symbol("analyses-owner-handles");let Jh=class extends Ce{constructor(e){super(e),this._allAnalysisViews=new $e,this._creatingViewCount=0,this._attachedToViewResolver=R7(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Ht("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Ht()),this._attachedToViewResolver=R7()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new G("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),k7)}_disconnectOwners(){this.removeHandles(k7),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const s of e)this._addAnalysis(s);const i=e.on("after-add",s=>this._addAnalysis(s.item)),r=e.on("after-remove",s=>this._removeAnalysis(s.item));return vt(()=>{i.remove(),r.remove();for(const s of e)this._removeAnalysis(s)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=h3(s=>this._createAnalysisViewPromise(r,s).then(n=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:n}),n),n=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:n}),n}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):le.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=hv(()=>this._update()))}_update(){this._scheduledUpdateHandle=fi(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=sm(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=xi(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new G("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(Ns(i))throw this._creatingViewCount-=1,Ht("AnalysisView creation aborted");const s=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let n=!0;so(i,()=>{n&&this._destroyAnalysisView(r,s)});try{await s.when()}catch(a){throw n=!1,this._destroyAnalysisView(r,s),a}if(Ns(i))throw Ht();return n=!1,e.view=s,e.state.view=1,this._allAnalysisViews.add(s),this._creatingViewCount-=1,s}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};d([m()],Jh.prototype,"updating",null),d([m({constructOnly:!0})],Jh.prototype,"importAnalysisViewModule",void 0),d([m({constructOnly:!0})],Jh.prototype,"view",void 0),d([m()],Jh.prototype,"_allAnalysisViews",void 0),d([m()],Jh.prototype,"_creatingViewCount",void 0),Jh=d([N("esri.views.support.AnalysisViewManager")],Jh);const uCe=Jh;function R7(){const t=va();return t.promise.catch(()=>{}),t}let cCe=class{constructor(e){this.getUnmaskedRenderer=e}};function hCe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new cCe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let D7;function dCe(){return D7??=mCe(),D7}let pCe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function fCe(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=hCe(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function mCe(){const t=new pCe,e=fCe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function yCe(t){const e=dCe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new G("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new G("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new G("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new G("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function gCe(t){return t&&"nodeType"in t}function vCe(t){return t&&typeof t.render=="function"}const N7={component:"esri-component"};let Kp=class extends Ce{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(N7.component),i&&i.classList.remove(N7.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||gCe(e)?(this._set("widget",null),_D(e)):(vCe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};d([m()],Kp.prototype,"id",null),d([m()],Kp.prototype,"node",null),d([Nt("node")],Kp.prototype,"castNode",null),d([m({readOnly:!0})],Kp.prototype,"widget",void 0),Kp=d([N("esri.views.ui.Component")],Kp);const X$=Kp,_Ce=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},MZe=(t,e,i)=>{const r=bCe(e).subscribe;return r(s=>{s.some(a=>_Ce(t,a.target))&&i()})},uA={},bCe=t=>{const e=t.join(","),i=uA[e];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(a=>r.forEach(o=>o(a)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:a=>(r.add(a),()=>{r.delete(a),r.size===0&&(s.disconnect(),uA[e]=void 0)})};return uA[e]=n,n},dte=(t,e)=>{let i=t;for(;i;){const r=i.closest?.(e);if(r)return r;const s=i.getRootNode?.();if(s===globalThis.document)return;i=s.host}};function wCe(t){const e=dte(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const TZe=(t,e,i)=>dte(t,`[${e}]`)?.getAttribute(e)??i,SCe="--esri-calcite-mode-name";function xCe(){const t=getComputedStyle(document.body).getPropertyValue(SCe).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const pte="calcite-mode-";function fte(t){return xCe()??wCe(t??document.body)}function mte(t){return fte(t)==="dark"}function $Ce(t){return`${pte}${fte(t)}`}function MCe(t){const e=$Ce(t);TCe(t),t.classList.add(e)}function TCe(t){Array.from(t.classList).forEach(e=>{e.startsWith(pte)&&t.classList.remove(e)})}const Q3=new Map;function yte(){Q3.clear()}function ECe(t){return Q3.get(t)}function CCe(t,e){Q3.set(t,e)}function cA(t){Q3.delete(t)}function Lg(...t){const e=nn.acquire();for(let r=0;r<t.length;r++){const s=t[r],n=typeof s;if(n==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(n==="object")for(const a in s)s[a]&&e.push(a)}const i=e.join(" ");return nn.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{yte();for(const s of r)t.get(s.target)?.(s)}),i=(r,s,n)=>(t.set(r,s),e.observe(r,n),vt(()=>{e.unobserve(r),t.delete(r)}));return(r,s,n)=>{let a=null;return gm([_e(()=>typeof r=="function"?r():r,o=>{a?.remove(),o&&(a=i(o,s,n))},ps),vt(()=>a?.remove())])}})();function K3(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function EZe(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function CZe(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function ICe(t){return t==="Enter"||t===" "}async function Eb(t,e){await ihe(Lw(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const LCe={left:0,top:0,bottom:0,right:0},gte={bottom:30,top:15,right:15,left:15},qu="esri-ui",wn={ui:qu,corner:`${qu}-corner`,innerContainer:`${qu}-inner-container`,manualContainer:`${qu}-manual-container`,cornerContainer:`${qu}-corner-container`,topLeft:`${qu}-top-left`,topRight:`${qu}-top-right`,bottomLeft:`${qu}-bottom-left`,bottomRight:`${qu}-bottom-right`};function ACe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function fx(t){return t===0?"0":`${t}px`}function hA(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function dA(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let bl=class extends fv{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Un(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&dA(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&dA(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([_e(()=>[this.view?.padding,this.container],this._applyViewPadding,Lt),_e(()=>this.padding,this._applyUIPadding,Lt),_e(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Lt),R4(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(wn.ui),MCe(e),this._attachContainers(e)),i&&(i.classList.remove(wn.ui),dA(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(e-r-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...gte,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(e-r-s,0)}add(e,i){let r,s,n;if(Array.isArray(e))return void e.forEach(o=>this.add(o,i));const a=hA(e);a&&({index:r,position:i,component:e,key:s}=a),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),s,n)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const n=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(o=>{const u=this._componentMap.get(o);u&&u.position===s.position&&u.index>s.index&&u.index--}),this._components.splice(n,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,i);return}const r=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||i.removeInternal);for(const n of s)this.remove(n)}move(e,i){if(Array.isArray(e)&&e.forEach(a=>this.move(a,i)),!e)return;let r;const s=hA(e)||hA(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const n=this.remove(e);n&&this.add(n,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>i.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:s})=>r??s)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s,n){e instanceof X$||(e=new X$({node:e}));const{widget:a}=e;a!=null&&a instanceof Ce&&a.addHandles(vt(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const o=this._positionNameToContainerLookup[i];this._components.some(u=>{const h=this._componentMap.get(u)?.position,p=h?this._positionNameToContainerLookup[h]:null;return o===p&&this._componentMap.get(u)?.index===r})&&this._components.forEach(u=>{const h=this._componentMap.get(u),p=h?.position,y=p?this._positionNameToContainerLookup[p]:null;h&&y===o&&h.index>=r&&h.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:s,position:i,internal:n,index:r})}_find(e){return e?e instanceof X$?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??LCe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(wn.innerContainer,wn.cornerContainer);const i=document.createElement("div");i.classList.add(wn.innerContainer,wn.manualContainer);const r=document.createElement("div");r.classList.add(wn.topLeft,wn.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(wn.topRight,wn.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(wn.bottomLeft,wn.corner),e.appendChild(n);const a=document.createElement("div");a.classList.add(wn.bottomRight,wn.corner),e.appendChild(a),this._innerContainer=e,this._manualContainer=i;const o=K3();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":a,"top-leading":o?s:r,"top-trailing":o?r:s,"bottom-leading":o?a:n,"bottom-trailing":o?n:a},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:s}=e,n=this._positionNameToContainerLookup[i],a=s!=null&&s>-1;if(ACe(r.widget)&&r.widget.startup(),!a)return void n.appendChild(r.node);const o=Array.from(n.children);if(o.length!==0){for(const u of o){const h=this._findByNode(u);if(h&&s<(this._componentMap.get(h)?.index??0))return void u.parentNode?.insertBefore(r.node,u)}n.appendChild(r.node)}else n.appendChild(r.node)}_toPixelPosition(e){return{top:fx(e.top),left:fx(e.left),right:fx(e.right),bottom:fx(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(Qr).filter(s=>i.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};d([m()],bl.prototype,"_locale",void 0),d([m()],bl.prototype,"container",null),d([m()],bl.prototype,"height",null),d([m({value:gte})],bl.prototype,"padding",null),d([Nt("padding")],bl.prototype,"castPadding",null),d([m()],bl.prototype,"view",void 0),d([m()],bl.prototype,"width",null),bl=d([N("esri.views.ui.UI")],bl);const PCe=bl,OCe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},kCe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},RCe=t=>({...kCe,...t}),DCe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},NCe=(t,e)=>t.find(e),z7=(t,e,i=!1)=>{let r=t;return e.forEach((s,n)=>{const a=r?.children?NCe(r.children,o=>o.domNode===s):void 0;i&&!a&&n!==e.length-1||(r=a)}),r},zCe=t=>{let e;const i={...OCe,...t},r=RCe(i),s=r.performanceLogger;let n,a=!0,o=!1;const u=[],h=[],p=(v,b,w)=>{let S;r.eventHandlerInterceptor=(T,I,L,O)=>function(R){let z;s("domEvent",R);const j=DCe(R.currentTarget,S.domNode),U=j.some(Q=>customElements.get(Q?.tagName?.toLowerCase()));if(R.eventPhase===Event.CAPTURING_PHASE||!U)j.reverse(),z=z7(S.getLastRender(),j);else{const Q=R.composedPath(),oe=Q.slice(Q.indexOf(R.currentTarget),Q.indexOf(S.domNode)).reverse();z=z7(S.getLastRender(),oe,!0)}let B;return z&&(B=i.handleInterceptedEvent(e,z,this,R)),s("domEventProcessed",R),B},i.postProcessProjectionOptions?.(r);const M=w();S=v(b,M,r),r.eventHandlerInterceptor=void 0,u.push(S),h.push(w),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(S,M)};let y=()=>{if(n=void 0,a){a=!1,s("renderStart",void 0);for(let v=0;v<u.length;v++){const b=h[v]();s("rendered",void 0);try{u[v].update(b)}catch(w){console.error(w)}s("patched",void 0)}s("renderDone",void 0),a=!0}};return i.modifyDoRenderImplementation&&(y=i.modifyDoRenderImplementation(y,u,h)),e={renderNow:y,scheduleRender:()=>{n||o||(n=requestAnimationFrame(y))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,a=!0,e.scheduleRender()},append:(v,b)=>{p(_d.append,v,b)},insertBefore:(v,b)=>{p(_d.insertBefore,v,b)},merge:(v,b)=>{p(_d.merge,v,b)},replace:(v,b)=>{p(_d.replace,v,b)},detach:v=>{for(let b=0;b<h.length;b++)if(h[b]===v)return h.splice(b,1),u.splice(b,1)[0];throw new Error("renderFunction was not found")}},e},ji=(t,e,...i)=>{try{return t?.call(e,...i)}catch(r){console.error(r,t)}},fR=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(r){console.error(r,t)}},XD=Symbol.for("controller"),FCe=t=>typeof t=="object"&&t!==null&&(XD in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),LZe=t=>typeof t?.then=="function";let D1;const N1=t=>{D1!==t&&(D1=t,queueMicrotask(()=>D1===t?D1=void 0:0))},eE=t=>D1;let ef=[];const VCe=t=>{if(t===void 0){ef=[];return}const e=ef.indexOf(t);ef=e===-1?[...ef,t]:ef.slice(0,e+1),queueMicrotask(()=>ef=[])},jCe=()=>ef;let Ag;const AZe=t=>{Ag!==t&&(Ag=t,queueMicrotask(()=>Ag===t?Ag=void 0:0))},UCe=()=>{const t=Ag;return Ag=void 0,t},GCe=async(t,e)=>{const i=QD(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(s=>e(s,r))}return i.exports},qCe=async t=>{const e=QD(t);return await e.ready,e},QD=t=>{const i=eE().manager.X(t);if(i!==void 0)return i;if(FCe(t))return t;const r=UCe();if(r!==void 0)return r};let mR=!1;const PZe=t=>{mR=!0;try{return t()}finally{mR=!1}};const Q$=globalThis,KD=Q$.ShadowRoot&&(Q$.ShadyCSS===void 0||Q$.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,eN=Symbol(),F7=new WeakMap;let vte=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==eN)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(KD&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=F7.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&F7.set(i,e))}return e}toString(){return this.cssText}};const BCe=t=>new vte(typeof t=="string"?t:t+"",void 0,eN),kZe=(t,...e)=>{const i=t.length===1?t[0]:e.reduce(((r,s,n)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[n+1]),t[0]);return new vte(i,t,eN)},HCe=(t,e)=>{if(KD)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of e){const r=document.createElement("style"),s=Q$.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,t.appendChild(r)}},V7=KD?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return BCe(i)})(t):t;const{is:WCe,defineProperty:ZCe,getOwnPropertyDescriptor:YCe,getOwnPropertyNames:JCe,getOwnPropertySymbols:XCe,getPrototypeOf:QCe}=Object,tE=globalThis,j7=tE.trustedTypes,KCe=j7?j7.emptyScript:"",eIe=tE.reactiveElementPolyfillSupport,Cb=(t,e)=>t,yR={toAttribute(t,e){switch(e){case Boolean:t=t?KCe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},tN=(t,e)=>!WCe(t,e),U7={attribute:!0,type:String,converter:yR,reflect:!1,useDefault:!1,hasChanged:tN};Symbol.metadata??=Symbol("metadata"),tE.litPropertyMetadata??=new WeakMap;let hg=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=U7){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,i);s!==void 0&&ZCe(this.prototype,e,s)}}static getPropertyDescriptor(e,i,r){const{get:s,set:n}=YCe(this.prototype,e)??{get(){return this[i]},set(a){this[i]=a}};return{get:s,set(a){const o=s?.call(this);n?.call(this,a),this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??U7}static _$Ei(){if(this.hasOwnProperty(Cb("elementProperties")))return;const e=QCe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Cb("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Cb("properties"))){const i=this.properties,r=[...JCe(i),...XCe(i)];for(const s of r)this.createProperty(s,i[s])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)i.unshift(V7(s))}else e!==void 0&&i.push(V7(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return HCe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const n=(r.converter?.toAttribute!==void 0?r.converter:yR).toAttribute(i,r.type);this._$Em=e,n==null?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(e,i){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const n=r.getPropertyOptions(s),a=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:yR;this._$Em=s;const o=a.fromAttribute(i,n.type);this[s]=o??this._$Ej?.get(s)??o,this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){const s=this.constructor,n=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??tN)(n,i)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:s,wrapped:n},a){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??i??this[e]),n!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,n]of this._$Ep)this[s]=n;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,n]of r){const{wrapped:a}=n,o=this[s];a!==!0||this._$AL.has(s)||o===void 0||this.C(s,void 0,n,o)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach((r=>r.hostUpdate?.())),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach((i=>i.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};hg.elementStyles=[],hg.shadowRootOptions={mode:"open"},hg[Cb("elementProperties")]=new Map,hg[Cb("finalized")]=new Map,eIe?.({ReactiveElement:hg}),(tE.reactiveElementVersions??=[]).push("2.1.1");const iN=globalThis,xT=iN.trustedTypes,G7=xT?xT.createPolicy("lit-html",{createHTML:t=>t}):void 0,_te="$lit$",pd=`lit$${Math.random().toFixed(9).slice(2)}$`,bte="?"+pd,tIe=`<${bte}>`,fm=document,lw=()=>fm.createComment(""),uw=t=>t===null||typeof t!="object"&&typeof t!="function",rN=Array.isArray,iIe=t=>rN(t)||typeof t?.[Symbol.iterator]=="function",pA=`[ 	
\f\r]`,Z_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,q7=/-->/g,B7=/>/g,Pp=RegExp(`>|${pA}(?:([^\\s"'>=/]+)(${pA}*=${pA}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),H7=/'/g,W7=/"/g,wte=/^(?:script|style|textarea|title)$/i,Ste=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),DZe=Ste(1),NZe=Ste(2),Bd=Symbol.for("lit-noChange"),nr=Symbol.for("lit-nothing"),Z7=new WeakMap,Nf=fm.createTreeWalker(fm,129);function xte(t,e){if(!rN(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return G7!==void 0?G7.createHTML(e):e}const rIe=(t,e)=>{const i=t.length-1,r=[];let s,n=e===2?"<svg>":e===3?"<math>":"",a=Z_;for(let o=0;o<i;o++){const u=t[o];let h,p,y=-1,v=0;for(;v<u.length&&(a.lastIndex=v,p=a.exec(u),p!==null);)v=a.lastIndex,a===Z_?p[1]==="!--"?a=q7:p[1]!==void 0?a=B7:p[2]!==void 0?(wte.test(p[2])&&(s=RegExp("</"+p[2],"g")),a=Pp):p[3]!==void 0&&(a=Pp):a===Pp?p[0]===">"?(a=s??Z_,y=-1):p[1]===void 0?y=-2:(y=a.lastIndex-p[2].length,h=p[1],a=p[3]===void 0?Pp:p[3]==='"'?W7:H7):a===W7||a===H7?a=Pp:a===q7||a===B7?a=Z_:(a=Pp,s=void 0);const b=a===Pp&&t[o+1].startsWith("/>")?" ":"";n+=a===Z_?u+tIe:y>=0?(r.push(h),u.slice(0,y)+_te+u.slice(y)+pd+b):u+pd+(y===-2?o:b)}return[xte(t,n+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let gR=class $te{constructor({strings:e,_$litType$:i},r){let s;this.parts=[];let n=0,a=0;const o=e.length-1,u=this.parts,[h,p]=rIe(e,i);if(this.el=$te.createElement(h,r),Nf.currentNode=this.el.content,i===2||i===3){const y=this.el.content.firstChild;y.replaceWith(...y.childNodes)}for(;(s=Nf.nextNode())!==null&&u.length<o;){if(s.nodeType===1){if(s.hasAttributes())for(const y of s.getAttributeNames())if(y.endsWith(_te)){const v=p[a++],b=s.getAttribute(y).split(pd),w=/([.?@])?(.*)/.exec(v);u.push({type:1,index:n,name:w[2],strings:b,ctor:w[1]==="."?nIe:w[1]==="?"?aIe:w[1]==="@"?oIe:rE}),s.removeAttribute(y)}else y.startsWith(pd)&&(u.push({type:6,index:n}),s.removeAttribute(y));if(wte.test(s.tagName)){const y=s.textContent.split(pd),v=y.length-1;if(v>0){s.textContent=xT?xT.emptyScript:"";for(let b=0;b<v;b++)s.append(y[b],lw()),Nf.nextNode(),u.push({type:2,index:++n});s.append(y[v],lw())}}}else if(s.nodeType===8)if(s.data===bte)u.push({type:2,index:n});else{let y=-1;for(;(y=s.data.indexOf(pd,y+1))!==-1;)u.push({type:7,index:n}),y+=pd.length-1}n++}}static createElement(e,i){const r=fm.createElement("template");return r.innerHTML=e,r}};function J0(t,e,i=t,r){if(e===Bd)return e;let s=r!==void 0?i._$Co?.[r]:i._$Cl;const n=uw(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),n===void 0?s=void 0:(s=new n(t),s._$AT(t,i,r)),r!==void 0?(i._$Co??=[])[r]=s:i._$Cl=s),s!==void 0&&(e=J0(t,s._$AS(t,e.values),s,r)),e}let sIe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,s=(e?.creationScope??fm).importNode(i,!0);Nf.currentNode=s;let n=Nf.nextNode(),a=0,o=0,u=r[0];for(;u!==void 0;){if(a===u.index){let h;u.type===2?h=new iE(n,n.nextSibling,this,e):u.type===1?h=new u.ctor(n,u.name,u.strings,this,e):u.type===6&&(h=new lIe(n,this,e)),this._$AV.push(h),u=r[++o]}a!==u?.index&&(n=Nf.nextNode(),a++)}return Nf.currentNode=fm,s}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},iE=class Mte{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,s){this.type=2,this._$AH=nr,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=J0(this,e,i),uw(e)?e===nr||e==null||e===""?(this._$AH!==nr&&this._$AR(),this._$AH=nr):e!==this._$AH&&e!==Bd&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):iIe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==nr&&uw(this._$AH)?this._$AA.nextSibling.data=e:this.T(fm.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=gR.createElement(xte(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(i);else{const n=new sIe(s,this),a=n.u(this.options);n.p(i),this.T(a),this._$AH=n}}_$AC(e){let i=Z7.get(e.strings);return i===void 0&&Z7.set(e.strings,i=new gR(e)),i}k(e){rN(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of e)s===i.length?i.push(r=new Mte(this.O(lw()),this.O(lw()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},rE=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,s,n){this.type=1,this._$AH=nr,this._$AN=void 0,this.element=e,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=nr}_$AI(e,i=this,r,s){const n=this.strings;let a=!1;if(n===void 0)e=J0(this,e,i,0),a=!uw(e)||e!==this._$AH&&e!==Bd,a&&(this._$AH=e);else{const o=e;let u,h;for(e=n[0],u=0;u<n.length-1;u++)h=J0(this,o[r+u],i,u),h===Bd&&(h=this._$AH[u]),a||=!uw(h)||h!==this._$AH[u],h===nr?e=nr:e!==nr&&(e+=(h??"")+n[u+1]),this._$AH[u]=h}a&&!s&&this.j(e)}j(e){e===nr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},nIe=class extends rE{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===nr?void 0:e}},aIe=class extends rE{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==nr)}},oIe=class extends rE{constructor(e,i,r,s,n){super(e,i,r,s,n),this.type=5}_$AI(e,i=this){if((e=J0(this,e,i,0)??nr)===Bd)return;const r=this._$AH,s=e===nr&&r!==nr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==nr&&(r===nr||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},lIe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){J0(this,e)}};const qZe={I:iE},uIe=iN.litHtmlPolyfillSupport;uIe?.(gR,iE),(iN.litHtmlVersions??=[]).push("3.3.1");const cIe=(t,e,i)=>{const r=i?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const n=i?.renderBefore??null;r._$litPart$=s=new iE(e.insertBefore(lw(),n),n,void 0,i??{})}return s._$AI(t),s};const sN=globalThis;let Qg=class extends hg{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=cIe(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Bd}};Qg._$litElement$=!0,Qg.finalized=!0,sN.litElementHydrateSupport?.({LitElement:Qg});const hIe=sN.litElementPolyfillSupport;hIe?.({LitElement:Qg});(sN.litElementVersions??=[]).push("4.2.1");class cw{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const dIe=(t,e)=>{const i=e/pIe;let r=0;const s=setInterval(()=>{r+=i,r>=e&&(clearInterval(s),t())},i);return s},pIe=4,fIe=(t,e,i)=>{const r=Object.keys(t),s=r.length;Pg===void 0&&queueMicrotask(sE),Pg??=new Map;let n=Pg.get(t);return n===void 0&&(n={callbacks:[],keyCount:s},Pg.set(t,n)),n.keyCount!==s&&(n.callbacks.forEach(a=>a(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(a=>{const o=h=>ji(e,null,h),u=a[s];u===void 0?o(void 0):t[u]===i?o(u):o(void 0)}),i};let Pg;const sE=()=>{Pg?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Pg=void 0},mIe=(t,e,i)=>{const r=t.manager;return r.V!==nr&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>ji(e,void 0,i===n?s:void 0)),i},yIe=(t=[eE(),...jCe()],e,i)=>{const r=Array.isArray(t)?t:[t];let s=r.length+1;const n=a=>{s-=1,a!==void 0&&(s=Math.min(s,0)),s===0&&e(a)};r.forEach(a=>fIe(a,o=>n(o===void 0?void 0:{key:o,host:a,isReactive:!1}),i));for(const a of r)if("manager"in a&&a.manager.component===a){mIe(a,o=>n(o===void 0?void 0:{key:o,host:a,isReactive:!0}),i);break}return i},gIe=(t="",e={},i=eE())=>{const r={emit:s=>{t===""&&sE();const n=new CustomEvent(t,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(n),n}};return t===""&&yIe(void 0,s=>t=s.key,r),r},HZe=gIe.bind(null,"");var Tte;Tte=XD;class vIe{constructor(e){this.#i=[],this.#e=[],this.#r=[],this.#l=[],this.#u=[],this.#c=[],this.#h=[],this.#d=[],this.#a=[],this.#o=!1,this.P=new cw,this.connectedCalled=!1,this.loadedCalled=!1,this[Tte]=!0,this.#n=[];const i=this,r=e??eE();i.#t=r,i.ready=i.P.promise,i.#s=J7(i),i.component=r,i.#t.addController(i),i.#t.manager===void 0||(VCe(i),queueMicrotask(()=>i.catchUpLifecycle()))}#i;#e;#r;#l;#u;#c;#h;#d;#a;#o;#t;catchUpLifecycle(){const{manager:e}=this.#t;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#o&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#s;get exports(){return this.#s}set exports(e){const i=this.#s;i!==e&&(this.#s=e,this.#n.forEach(ji),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){this.#s=i?J7(e):e,this.#n.forEach(ji)}#n;watchExports(e){const i=()=>e(this.#s);return this.#n.push(i),()=>void this.#n.splice(this.#n.indexOf(i),1)}get use(){return N1(this.#t),GCe}get useRef(){return N1(this.#t),qCe}get useRefSync(){return N1(this.#t),QD}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#i.push(e)}onDisconnected(e){this.#e.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#u.push(e)}onUpdated(e){this.#c.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#t.el.isConnected&&this.#p(e)}triggerConnected(){const e=this;e.hostConnected&&ji(e.hostConnected,e),e.#i.forEach(ji),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&ji(e.hostDisconnected,e),e.#e.forEach(ji),e.#a.forEach(ji),e.#a=[]}async triggerLoad(){if(this.#o)return;this.#o=!0;const e=this;e.hostLoad&&await fR(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(fR)),this.P.resolve(this.#s)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&ji(this.hostLoaded,this),this.#l.forEach(ji),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&ji(this.hostUpdate,this,e),this.#u.forEach(Y7,e)}triggerUpdated(e){this.hostUpdated&&ji(this.hostUpdated,this,e),this.#c.forEach(Y7,e)}triggerDestroy(){this.hostDestroy&&ji(this.hostDestroy,this),this.#h.forEach(ji)}triggerLifecycle(){this.hostLifecycle&&this.#p(()=>this.hostLifecycle()),this.#d.forEach(this.#p,this)}#p(e){N1(this.#t);const i=ji(e);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?this.#a.push(s):typeof s=="object"&&typeof s.remove=="function"&&this.#a.push(s.remove)})}}function Y7(t){ji(t,void 0,this)}const _Ie=vIe,J7=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(t,e);return i},bIe=t=>t.replace(wIe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),wIe=/[A-Z]+(?![a-z])|[A-Z]/gu,SIe=1,xIe=2,$Ie=4,MIe=8,TIe=16,EIe=32,CIe=64,Ete=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},X7={};function Cte(){}const K$=Object.defineProperty,IIe=globalThis.HTMLElement??Cte;var An,Cc,b0,$w,vR;const cz=class cz extends IIe{constructor(){var s;super();fo(this,$w);fo(this,An);fo(this,Cc);fo(this,b0);mo(this,Cc,{}),mo(this,b0,[]),this.I=new cw,this.H=new cw,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,r.C?.forEach(n=>{Object.hasOwn(i,n)&&(Zt(i,Cc)[n]=i[n],delete i[n])}),r.A?w_(s=i,$w,vR).call(s,{a:r.A}):r.B.then(async n=>{var a;await r.K.p,w_(a=i,$w,vR).call(a,await(n.default?.then(o=>typeof o=="function"?{a:o}:o)??n))}).catch(n=>{i.H.reject(n),setTimeout(()=>{throw n})})}static F(){for(const i of this.C??[])K$(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Zt(this,Cc)[i]},set(r){Zt(this,Cc)[i]=r}});for(const i of this.E??[])K$(this.prototype,i,{async value(...r){return Zt(this,An)||await this.H.promise,await Zt(this,An)[i](...r)},configurable:!0});for(const i of this.D??[])K$(this.prototype,i,{value(...r){return Zt(this,An)[i](...r)},configurable:!0})}get manager(){return Zt(this,An)?.manager}attributeChangedCallback(i,r,s){Zt(this,An)?.attributeChangedCallback(i,r,s),Zt(this,An)||Zt(this,b0).push(i)}connectedCallback(){Zt(this,An)?Zt(this,An).connectedCallback?.():queueMicrotask(()=>this.G=Ete(this))}disconnectedCallback(){Zt(this,An)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Zt(this,An)?.requestUpdate()}};An=new WeakMap,Cc=new WeakMap,b0=new WeakMap,$w=new WeakSet,vR=function(i){const r=this.constructor,s=r.L,n=Zt(this,Cc),a=Object.values(i).find(v=>v.L===s),o=`${s}--lazy`;let u=a;for(;u&&!Object.hasOwn(u,"lumina");)u=Object.getPrototypeOf(u);AIe(u),!r.A&&(r.A=a,customElements.define(o,a)),a.N=this;const p=document.createElement(o);a.N=void 0,mo(this,An,p),mo(this,Cc,p),Zt(this,b0).forEach(v=>p.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(n).forEach(LIe,p);const y=this.isConnected;(y||this.G)&&(p.connectedCallback?.(),y||p.disconnectedCallback())},cz.lumina=!0;let Q7=cz;function LIe([t,e]){this[t]=e}const AIe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},e.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},K$(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};const Ite={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},Lte=t=>(...e)=>({_$litDirective$:t,values:e});let Ate=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};const PIe=Lte(class extends Ate{constructor(t){if(super(t),t.type!==Ite.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((r=>r!==""))));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const i=t.element.classList;for(const r of this.st)r in e||(i.remove(r),this.st.delete(r));for(const r in e){const s=!!e[r];s===this.st.has(r)||this.nt?.has(r)||(s?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return Bd}});const Pte="important",OIe=" !"+Pte,kIe=Lte(class extends Ate{constructor(t){if(super(t),t.type!==Ite.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const s=e[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(OIe);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?Pte:""):i[r]=s}}return Bd}});class RIe extends _Ie{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=nr,this.T=[],this.#r=new WeakMap,this.#e=e,this.exports=void 0,this.hasDestroy=_R in e&&typeof e.destroy=="function",Qg.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const i=e.el.localName;throw e.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${_R} prop.`)}this.#i!==void 0&&clearTimeout(this.#i),sE();for(const i of e.M)"triggerConnected"in i?i.triggerConnected():ji(i.hostConnected,i)},hostDisconnected:()=>{for(const i of e.M)"triggerDisconnected"in i?i.triggerDisconnected():ji(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of e.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):ji(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of e.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):ji(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),N1(e)}#i;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#i=void 0,this.destroyed=!0;for(const e of this.#e.M)"triggerDestroy"in e?e.triggerDestroy():ji(e.hostDestroy,e);this.#e.M.splice(0)}}U(){if(this.#i!==void 0&&clearTimeout(this.#i),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const e=()=>void this.#e.destroy();this.#i=dIe(e,DIe)}}S(e,i){const r=this.T;this.V=nr,this.T=[],r.forEach(s=>s(e,i))}#r;W(e,i){(typeof i=="object"&&i!==null||typeof i=="function")&&this.#r.set(i,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let DIe=1e3;const _R="autoDestroyDisabled";var Vf,Mw,Tw,jf,Ll,rv,Ote,kte;const zb=class zb extends Qg{constructor(){super();fo(this,rv);fo(this,Vf);fo(this,Mw);fo(this,Tw);fo(this,jf);fo(this,Ll);this.M=[],this.manager=new RIe(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,a=zb.prototype.shouldUpdate;mo(i,jf,s?.H??new cw),i.I=s?.I??new cw,i.J=s?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,mo(i,Tw,i.enableUpdating),i.enableUpdating=Cte,i.shouldUpdate!==a&&(mo(i,Mw,i.shouldUpdate),i.shouldUpdate=a),n&&(mo(i,Vf,new Map),r.elementProperties.forEach((o,u)=>Zt(i,Vf).set(u,n())))}static finalizeStyles(i){const r=super.finalizeStyles(i),s=this.shadowRootOptions===X7;return this.K?.commonStyles===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,a=n?.hasChanged??tN,o={attribute:s&SIe&&typeof i=="string"?bIe(i):!1,reflect:!!(s&xIe),type:s&$Ie?Boolean:s&MIe?Number:void 0,state:!!(s&TIe),readOnly:!!(s&EIe),noAccessor:!!(s&CIe),c:!1,...n,hasChanged(u,h){const p=a(u,h);return o.c=p,p}};super.createProperty(i,o)}static getPropertyDescriptor(i,r,s){const n=this.K,a=super.getPropertyDescriptor(i,r,s);return s.d=a,{...a,get(){return n.t?.(Zt(this,Vf).get(i)),a.get?.call(this)},set(o){const u=this.manager;if(s.readOnly&&!mR&&(u.R||u.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${o}"`);a.set.call(this,o??void 0),s.c&&Zt(this,Vf)?.get(i)?.notify(),u.T.length>0&&(sE(),u?.S(i,o))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());mo(this,Ll,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>w_(this,rv,kte).call(this).catch(s=>{Zt(this,jf).reject(s),setTimeout(()=>{throw s})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Zt(this,Ll)?.destroy(),mo(this,Ll,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,a=i??(s===X7?this.el:this.el.attachShadow(s));if(this.isConnected){const o=a.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(u=>"styleSheet"in u?u.styleSheet:u)]}return a}shouldUpdate(i){var r;return this.manager.Q=i,((r=Zt(this,Mw))==null?void 0:r.call(this,i))??!0}update(i){Zt(this,Ll)?w_(this,rv,Ote).call(this,i):super.update(i)}listen(i,r,s){const n=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const a=s?.bind(this)??s;this.manager.onLifecycle(()=>(i.addEventListener(r,a,n),()=>i.removeEventListener(r,a,n)))}async componentOnReady(){return await Zt(this,jf).promise,this}addController(i){this.M.push(i),!(XD in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};Vf=new WeakMap,Mw=new WeakMap,Tw=new WeakMap,jf=new WeakMap,Ll=new WeakMap,rv=new WeakSet,Ote=function(i){try{Zt(this,Ll).clear(),this.constructor.K.r(Zt(this,Ll),()=>J8(zb.prototype,this,"update").call(this,i))}catch(r){throw Zt(this,Ll).clear(),r}},kte=async function(){const i=this.el.G??Ete(this.el);i&&await i;const r=[];for(const n of this.M)"triggerLoad"in n?r.push(n.triggerLoad()):r.push(fR(n.hostLoad,n));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(n=>n.has(_R)&&this.manager.U()),Zt(this,Tw).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(n=>!n.manager?.loadedCalled);s.length&&await Promise.allSettled(s.map(async n=>await n.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const n of this.M)"triggerLoaded"in n?n.triggerLoaded():ji(n.hostLoaded,n);this.loaded?.(),Zt(this,jf).resolve()},zb.lumina=!0;let K7=zb;const NIe=t=>{let e;const i=s=>{e=new URL(s,globalThis.location?.href||void 0).href},r={...t,getAssetPath(s){const n=new URL(s,e);return n.origin!==globalThis.location?.origin?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(t.defaultAssetPath),r},ZZe=t=>typeof t=="object"&&t!=null?PIe(t):t,YZe=t=>typeof t=="object"&&t!=null?kIe(t):t,JZe=nr;function XZe(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const QZe={toAttribute:t=>t===!0?"":t===!1?null:t},zIe="calcite-mode-auto",FIe="calcite-mode-dark",KZe={rtl:"calcite--rtl"},eYe={filter:250,nextTick:0,resize:150,reposition:100},tYe=10,iYe=25;function eG(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(FIe)||t.contains(zIe)&&e?"dark":"light",r=a=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:a}})),s=a=>{n!==a&&r(a),n=a};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>s(a.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Ib=globalThis.calciteConfig,rYe=Ib?.focusTrapStack||[],sYe=Ib?.logLevel||"info",tG="3.3.3",VIe="2025-10-08",jIe="7391af08e";function UIe(){if(Ib&&Ib.version)return;console.info(`Using Calcite Components ${tG} [Date: ${VIe}, Revision: ${jIe}]`);const t=Ib||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:tG,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?eG():document.addEventListener("DOMContentLoaded",eG,{once:!0});queueMicrotask(UIe);const GIe=NIe({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:nYe,getAssetPath:aYe,setAssetPath:qIe}=GIe;let Rte=!1;const BIe=t=>{Rte=!0,qIe(t)};let Dte;function HIe(){Rte||BIe(Xa(Si(Dte)))}function Yc(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}Dte="components/assets";const Nte=Symbol("widget"),zte=Symbol("widget-test-data"),WIe=[],ZIe={},$T=new WeakMap;function Fte(t,e){let i=e.children;if(i?.length)for(let s=0;s<i.length;++s)i[s]=Fte(t,i[s]);else i=WIe;const r=e.vnodeSelector;if(MT(r)){const s=e.properties||ZIe,n=s.key||r,a={key:n,afterCreate:YIe,afterUpdate:JIe,afterRemoved:Vte,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return e}function YIe(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const a=new s(n);a.container=t,$T.set(t,a),a.afterCreate?.(a,t),r.addHandles(vt(()=>Vte(t))),queueMicrotask(()=>{a[zte].projector?.renderNow()})}function JIe(t,e,i,{widgetProperties:r}){const s=$T.get(t);s&&(s.set(r),s.afterUpdate?.(s,t))}function Vte(t){const e=$T.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),$T.delete(t))}function MT(t){return typeof t=="function"&&t[Nte]}const iG=new Set;function XIe(t){iG.add(t),t.finally(()=>iG.delete(t))}function QIe(t){return vt()}var rG;let KIe=0;function jte(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?jte(t[r],e[r]):t[r]=e[r]);return t}const eLe=zCe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,n,a)=>{const o=e?.(r,s,n,a),u=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||u){const h=r[2].toLowerCase()+r.slice(3),p=b=>o?.call(n,b);n.addEventListener(h,p,u);const y=()=>n.removeEventListener(h,p,u),v=a.afterRemoved;a.afterRemoved=b=>{v?.(b),y()}}return o}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:n}=r,a=s===Event.CAPTURING_PHASE;let o=`on${n}${a?"capture":""}`;const u=e.properties;(u&&o in u||(o=`on${n[0].toUpperCase()}${n.slice(1)}${a?"Capture":""}`,u&&o in u))&&(yte(),t.scheduleRender(),u[o].call(u.bind||i,r))}});let fA=!1;var tm;let Wr=(tm=class extends _4(fv){constructor(e,i){super(e,i),this._attached=!1,this._projector=eLe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Aw(async()=>{if(this._messageBundleProps?.length){const u=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:p})=>{if(this.destroyed)return;let y=await pZ(h);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(y=jte(J(y),this.uiStrings)),this[p]=y)}));if(this.destroyed)return;for(const h of u)h.status==="rejected"&&le.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),this.addHandles(QIe()),HIe();const r="esri-widget-uid-"+_v(),s=this.render.bind(this);this._trackingTarget=new a3(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),a=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const u=s()??n(),h=u.properties??={};if(h.key??=r,MT(u.vnodeSelector)){if(!this.visible)return n()}else this.visible?h.styles||(h.styles={}):(h.class="",h.styles={display:"none"}),h.styles.display??="";let p=0;return u.children?.forEach(y=>{MT(y.vnodeSelector)||(y.properties??={},y.properties.key??=`${this.id}--${p++}`)}),Fte(this,u)};this.render=()=>{if(fA)return a();let u=ECe(this)??null;if(u)return u;this._trackingTarget.clear(),fA=!0;try{u=jc(this._trackingTarget,a)}catch(h){throw le.getLogger(this).error(h),h}finally{fA=!1}return u&&CCe(this,u),u};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),XIe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(vV):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(xi(this._trackingTarget),xi(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,cA(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return _D(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+KIe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(rG=Nte,zte)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(cA(this),this._projector.scheduleRender())}classes(...e){return Lg.apply(this,e)}renderNow(){cA(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(_e(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&i3(i)&&this.addHandles(this._delegatedEventNames.map(s=>lv(i,s,n=>{this.emit(s,n)})),"delegated-events")},ps)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(vV),this.scheduleRender()};this.addHandles([R4(e),_e(()=>this.uiStrings,e)]),this.addHandles(Kr(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},tm[rG]=!0,tm.vnodeSelector="div",tm);d([m()],Wr.prototype,"_readyForTrueRender",void 0),d([m({value:null})],Wr.prototype,"container",null),d([Nt("container")],Wr.prototype,"castContainer",null),d([m()],Wr.prototype,"icon",null),d([m()],Wr.prototype,"id",null),d([m()],Wr.prototype,"label",null),d([m()],Wr.prototype,"renderable",null),d([m()],Wr.prototype,"uiStrings",void 0),d([m()],Wr.prototype,"viewModel",void 0),d([m({value:!0})],Wr.prototype,"visible",null),d([m()],Wr.prototype,"key",void 0),d([m()],Wr.prototype,"children",void 0),d([m()],Wr.prototype,"afterCreate",void 0),d([m()],Wr.prototype,"afterUpdate",void 0),d([m()],Wr.prototype,"afterRemoved",void 0),Wr=d([N("esri.widgets.Widget")],Wr);const Wi=Wr,tLe=new Map;function iLe(t){return tLe.get(t)}function sG(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function rLe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function mx(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function sLe(t){return t.type==="bing-maps"}const ul=[];let dg=class extends Ce{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new $e,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(s=>_e(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i?.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Vs(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Kr(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;ul.length=0;let r=!1,s=null;if(!e||!i)return void this._clear();i.forEach(a=>{if(a.suspended||!a.layer?.attributionVisible)return;const o=a.layer;if(sG(o,"user"))return void mx(ul,a,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(r=!0,s=a),o.hasAttributionData){if(this._fetchedAttributionData.has(a)){const h=this._fetchedAttributionData.get(a);return void(h?mx(ul,a,this._getDynamicAttribution(h,e,o)):sG(o)&&mx(ul,a,o.copyright))}return void this._fetchAttributionData(a)}const u="portalItem"in o?o.portalItem?.accessInformation:void 0;mx(ul,a,u||o.copyright)});const n=i.find(a=>a.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){const a=iLe(this.view);if(a){const o=a.getAttributionText();for(let u=o.length-1;u>-1;--u)ul.unshift({text:o[u],layerView:n})}}r&&s&&ul.unshift({text:"Google Maps",layerView:s}),rLe(this.items,ul)&&(this.items.removeAll(),this.items.addMany(ul)),ul.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await c3(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,sLe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const a=r[n],o=a.coverageAreas;if(!o)return;for(const u of o){const h=u.bbox,p=u.zoomMin-(i&&u.zoomMin?1:0),y=u.zoomMax-(i&&u.zoomMax?1:0),v=new at({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:Ee.WGS84}),b={extent:qf(v),attribution:a.attribution||"",score:u.score!=null?u.score:100,id:n};for(let w=p;w<=y;w++)s[w]??=[],s[w].push(b)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,r){const{extent:s,scale:n}=i;let a=r.tileInfo?.scaleToZoom(n)??0;if(a=Math.min(e.maxKey??0,Math.round(a)),!s||a==null||a<=-1)return"";const o=e[a],u=m3(s.center.clone().normalize(),Ee.WebMercator),h=new Set;return o?o.filter(p=>{const y=p.id,v=!h.has(y)&&u&&p.extent&&Nw(p.extent,u);return v&&h.add(y),v}).sort((p,y)=>y.score-p.score||p.objectId-y.objectId).map(p=>p.attribution).join(", "):""}};d([m({readOnly:!0,type:$e})],dg.prototype,"items",void 0),d([m({readOnly:!0})],dg.prototype,"state",null),d([m()],dg.prototype,"view",void 0),dg=d([N("esri.widgets.Attribution.AttributionViewModel")],dg);const Ute=dg,ui={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",loaderAnimation:"esri-widget__loader-animation",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function Gte(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:aLe(t[e])}}}function nLe(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function aLe(t){return function(e,...i){nLe(e)?ICe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Hn(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var oLe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},qte=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?qte(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=oLe(s)),e.push(s))}},lLe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return qte(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function F(t,e,...i){return typeof t!="function"||MT(t)?lLe(t,e??null,...i):t(e,...i)}function lYe(...t){return t}const Ay="esri-attribution",Py={base:Ay,poweredBy:`${Ay}__powered-by`,sources:`${Ay}__sources`,open:`${Ay}--open`,sourcesOpen:`${Ay}__sources--open`,link:`${Ay}__link`};let Qs=class extends Wi{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:s})=>{this._scheduleOverflowCheck(s)})}),this._mutationObserver=new MutationObserver(r=>{let s=!1;for(const n of r)if(n.type==="childList"||n.type==="characterData"||n.type==="attributes"){s=!0;break}s&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ute}initialize(){this.addHandles(Vs(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Py.open]:this._isOpen};return F("div",{bind:this,class:this.classes(Py.base,ui.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return F("div",{class:Py.poweredBy},"Powered by"," ",F("a",{class:Py.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[Py.sourcesOpen]:e,[ui.interactive]:i};return F("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Py.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=e,a=n>s,o=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,o&&(i=!0),this._isOpen){const u=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,u&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};d([m()],Qs.prototype,"_isOpen",void 0),d([m()],Qs.prototype,"_isInteractive",null),d([m()],Qs.prototype,"_attributionTextOverflowed",void 0),d([m()],Qs.prototype,"_prevSourceNodeHeight",void 0),d([m({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Qs.prototype,"attributionText",null),d([m()],Qs.prototype,"icon",null),d([m()],Qs.prototype,"itemDelimiter",void 0),d([m()],Qs.prototype,"label",null),d([m(),Hn("esri/widgets/Attribution/t9n/Attribution")],Qs.prototype,"messages",void 0),d([m()],Qs.prototype,"view",null),d([m({type:Ute})],Qs.prototype,"viewModel",void 0),d([Gte()],Qs.prototype,"_toggleState",null),Qs=d([N("esri.widgets.Attribution")],Qs);const uLe=Qs;function cLe(){const t=X("mapview-essential-goto-duration");return t==null?t:t}function hLe(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function dLe(t,e,i){return t.goTo(e,i)}const pLe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:s}=this;return Iw(s),this.goToOverride?this.goToOverride(s,r):dLe(s,r.target,r.options)}};return d([m()],i.prototype,"goToOverride",void 0),d([m()],i.prototype,"view",void 0),i=d([N("esri.widgets.support.GoTo")],i),i};let tf=class extends pLe(Ce){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Lt)}destroy(){this.view=null}get canShowNorth(){return hLe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:cLe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?_e(()=>e?.rotation,this._updateForRotation,Lt):_e(()=>e?.camera,this._updateForCamera,Lt))}_watchForView(e){this.addHandles(_e(()=>this.view,this._updateRotationWatcher,e))}};d([m({readOnly:!0})],tf.prototype,"canShowNorth",null),d([m({readOnly:!0})],tf.prototype,"orientation",void 0),d([m({readOnly:!0})],tf.prototype,"state",null),d([m()],tf.prototype,"view",void 0),tf=d([N("esri.widgets.Compass.CompassViewModel")],tf);const Bte=tf,nG="esri-compass",aG={base:nG,iconContainer:`${nG}__icon-container`};let ac=class extends Wi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Bte,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Yc({button:()=>K(()=>import("./index-Bwf2GSA2.js"),__vite__mapDeps([286,287,288,289,290,291,292,293,294,295,296,297,298,299]),import.meta.url),icon:()=>K(()=>import("./index-CgzgUqVR.js").then(e=>e.i),__vite__mapDeps([291,292,288,293]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return F("div",{class:this.classes(aG.base,ui.widget)},F("calcite-button",{class:ui.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},F("div",{"aria-hidden":"true",class:aG.iconContainer,title:r.reset},F("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};d([m()],ac.prototype,"goToOverride",null),d([m()],ac.prototype,"icon",null),d([m()],ac.prototype,"label",null),d([m(),Hn("esri/widgets/Compass/t9n/Compass")],ac.prototype,"messages",void 0),d([m()],ac.prototype,"view",null),d([m({type:Bte})],ac.prototype,"viewModel",void 0),ac=d([N("esri.widgets.Compass")],ac);const fLe=ac,oG="esri-navigation-toggle",lG={base:oG,isLayoutHorizontal:`${oG}--horizontal`};let pg=class extends Ce{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||Sce(le.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(Kr(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};d([m({readOnly:!0})],pg.prototype,"state",null),d([m()],pg.prototype,"_navigationMode",void 0),d([m()],pg.prototype,"view",void 0),pg=d([N("esri.widgets.NavigationToggle.NavigationToggleViewModel")],pg);const Hte=pg;let oc=class extends Wi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Hte({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;Eb(r),this.toggle()},e?.isDefaultUI||Pw(le.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return Yc({button:()=>K(()=>import("./index-Bwf2GSA2.js"),__vite__mapDeps([286,287,288,289,290,291,292,293,294,295,296,297,298,299]),import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return F("div",{class:this.classes(lG.base,ui.widget,{[lG.isLayoutHorizontal]:this.layout==="horizontal"})},F("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:i?"outline-fill":"solid",class:ui.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),F("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:i?"solid":"outline-fill",class:ui.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};d([m()],oc.prototype,"icon",null),d([m()],oc.prototype,"label",null),d([m({value:"vertical"})],oc.prototype,"layout",null),d([m(),Hn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],oc.prototype,"messages",void 0),d([m()],oc.prototype,"view",null),d([m({type:Hte})],oc.prototype,"viewModel",void 0),oc=d([N("esri.widgets.NavigationToggle")],oc);const mLe=oc;let rf=class extends Ce{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};d([m({readOnly:!0})],rf.prototype,"canZoomIn",null),d([m({readOnly:!0})],rf.prototype,"canZoomOut",null),d([m()],rf.prototype,"view",void 0),d([m()],rf.prototype,"_scale",null),rf=d([N("esri.widgets.Zoom.ZoomConditions2D")],rf);const yLe=rf;let fg=class extends Ce{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};d([m({readOnly:!0})],fg.prototype,"canZoomIn",null),d([m({readOnly:!0})],fg.prototype,"canZoomOut",null),d([m()],fg.prototype,"view",void 0),fg=d([N("esri.widgets.Zoom.ZoomConditions3D")],fg);const gLe=fg;let Xh=class extends Ce{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new yLe({view:e}):e.type==="3d"&&(this._zoomConditions=new gLe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():L0(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():L0(e.goTo({zoomFactor:.5})))}};d([m()],Xh.prototype,"_zoomConditions",void 0),d([m()],Xh.prototype,"canZoomIn",null),d([m()],Xh.prototype,"canZoomOut",null),d([m({readOnly:!0})],Xh.prototype,"state",null),d([m()],Xh.prototype,"view",null),Xh=d([N("esri.widgets.Zoom.ZoomViewModel")],Xh);const Wte=Xh,uG={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let lc=class extends Wi{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Wte,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Yc({button:()=>K(()=>import("./index-Bwf2GSA2.js"),__vite__mapDeps([286,287,288,289,290,291,292,293,294,295,296,297,298,299]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[uG.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return F("div",{class:this.classes(uG.base,ui.widget,e)},F("calcite-button",{class:ui.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),F("calcite-button",{class:ui.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};d([m()],lc.prototype,"icon",null),d([m()],lc.prototype,"label",null),d([m({value:"vertical"})],lc.prototype,"layout",null),d([m(),Hn("esri/widgets/Zoom/t9n/Zoom")],lc.prototype,"messages",void 0),d([m()],lc.prototype,"view",null),d([m({type:Wte})],lc.prototype,"viewModel",void 0),lc=d([N("esri.widgets.Zoom")],lc);const vLe=lc;function _Le(t){return t?.view!==void 0}let eM=class extends PCe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s?.widget;_Le(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([_e(()=>this.components,this._componentsWatcher,Lt),_e(()=>this.view,this._updateViewAwareWidgets,Lt)])}_add(e,i,r,s,n){let a=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;a=this._createComponent(e)}super._add(a,i,r,s,n)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new X$({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new uLe({view:i});case"compass":return new fLe({view:i});case"navigation-toggle":return new mLe({view:i,isDefaultUI:!0});case"zoom":return new vLe({view:i})}}};d([m()],eM.prototype,"components",void 0),eM=d([N("esri.views.ui.DefaultUI")],eM);const Zte=eM;let tM=class extends Zte{constructor(e){super(e),this.components=["attribution","zoom"]}};d([m()],tM.prototype,"components",void 0),tM=d([N("esri.views.ui.2d.DefaultUI2D")],tM);const Yte=tM;let bLe=class{constructor(e={},i={},r=8,s=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=s}},Jte=class bR{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new G(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new bR(this.major,this.minor,this._context)}static parse(e,i=""){const[r,s]=e.split("."),n=/^\s*\d+\s*$/;if(!r?.match||!n.test(r))throw new G((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s?.match||!n.test(s))throw new G((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),o=parseInt(s,10);return new bR(a,o,i)}},wLe=class extends Jte{constructor(e,i){super(e,i,"webmap")}};function mA(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new wLe(2,35);var wR;let iM=wR=class extends ve{constructor(t){super(t),this.color=new we([0,0,0,1])}clone(){return new wR(J({color:this.color}))}};d([m({type:we,json:{write:!0}})],iM.prototype,"color",void 0),iM=wR=d([N("esri.webmap.background.ColorBackground")],iM);const SLe=iM;let Xte,Qte,Kte,eie,tie,iie,rie;async function xLe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:a}]=await Promise.all([K(()=>import("./webglDeps-Tmr2IJ84.js"),__vite__mapDeps([189,143,190,191,192,44]),import.meta.url),K(()=>import("./mapViewDeps-Bcdv3JRS.js"),__vite__mapDeps([193,194,195,143,190,191,134,74,196,76,192,44,142,43,197,73,96,198,123,126,24,22,25,77,82,199,79,80,189,200,91,201,202,122,203,132,133,61,72,75,29,28,204,81,205,78,8,9,10,206,83,88,207,70,208,209,210,211,139,212]),import.meta.url)]);Qte=t,Kte=e,eie=i,tie=r,iie=s,rie=n,Xte=a}var w0;let ft=(w0=class extends o3e(zMe(obe(Pwe(ywe(c$e))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Qa({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new W3({actionMap:new zD({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new q0,this.analysisViewManager=new uCe({importAnalysisViewModule:i=>J3e(i),view:this}),this.floors=new $e,this.grid=null,this.map=null,this.timeline=new hte,this.type="2d",this.view2dType=null,this.ui=new Yte,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>sCe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},rbe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=xi(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new aEe(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:s,extent:n}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(i?.effectiveLODs||(a=-1),(!r||e===0&&a===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return QJ(i.spatialReference,r)}get background(){return mA(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return jEe(this)}set highlightOptions(e){UEe(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&le.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(X("esri-2d-log-updating")){const r=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new pi({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return GEe(this,e,i)}async takeScreenshot(e){return rCe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new G("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return mA(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return mA(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return b7.hasLayerViewModule(e)}importLayerView(e){return b7.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(le.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),r=await this.hitTest(e),s=this.allLayerViews.toArray().filter(h=>h.clips.every(p=>ete(this,p,e,i))).reverse(),n=new globalThis.Map(s.map(h=>[h.layer.uid,h])),a=[];let o=0,u=0;for(;o<r.results.length||u<s.length;){const h=r.results.at(o);if(h&&h.type!=="graphic"){++o;continue}const p=n.get((h?.layer??h?.graphic.layer)?.uid);if((!h||p)&&u<s.length&&s.at(u)!==p){const y=s.at(u);"fetchPopupFeaturesAtLocation"in y&&a.push({mapPoint:i,layerView:y}),++u}else h&&(a.push({graphic:h.graphic,layerView:p}),++o)}return{hits:a,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=yCe(this.type);if(X("safari")&&X("safari")<9&&(e=new G("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:X("safari")})),e!=null)throw le.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return xLe()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:s,size:n}=this;if(!e)return null;const a=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),u=a?.viewpoint,h=u?.targetGeometry?.extent??i,p=h?.center,y=u?.rotation??0,v=u?.scale||h&&Y3(h,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),b=o.center??p,w=o.rotation??y,S=o.scale??v;return b&&S?new ro({targetGeometry:b,scale:S,rotation:w}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new X3e(this.surface),r=new Xte(this.surface,{canvas:this.renderCanvas,contextOptions:new bLe(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new iie,this._magnifierView.magnifier=this.magnifier,this._gridView=new rie;const s=new eie({view:this});this._set("labelManager",s);const n=new F3e({view:this});this._set("animationManager",n);const a=new tie({view:this,animationManager:n});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",u=>this.fatalError=u.error),_e(()=>this.stationary,u=>r.stationary=u,ps),_e(()=>this.background,u=>{r.backgroundColor=u?.color,this._magnifierView.backgroundColor=u?.color},ps),_e(()=>this.magnifier,u=>this._magnifierView.magnifier=u,ps),_e(()=>this.grid,u=>this._gridView.grid=u,ps),_e(()=>this.renderingOptions,u=>r.renderingOptions=u,ps),_e(()=>this.highlights.items.map(u=>({name:u.name,options:{fillColor:u.color,haloColor:u.haloColor,fillOpacity:u.fillOpacity,haloOpacity:u.haloOpacity,haloWidth:u.haloWidth,haloBlur:u.haloBlur}})),()=>{r.highlightGradient=FEe(r.highlightGradient,this.highlights.items)},ps),_e(()=>this.state.id,()=>r.state=this.state,ps),_e(()=>this.animationsEnabled,u=>{this.stage.animationsEnabled=u},ps)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new B3e(zr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Qte({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Kte(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},w0.type="2d",w0);d([m({constructOnly:!0})],ft.prototype,"deactivatedWebGLExtensions",void 0),d([m({constructOnly:!0})],ft.prototype,"debugWebGLExtensions",void 0),d([m({readOnly:!0})],ft.prototype,"featuresTilingScheme",void 0),d([m({readOnly:!0})],ft.prototype,"graphicsTileStore",null),d([m()],ft.prototype,"graphicsView",void 0),d([m()],ft.prototype,"constraintsInfo",null),d([m()],ft.prototype,"initialExtentRequired",null),d([m()],ft.prototype,"labelManager",void 0),d([m({type:W3,nonNullable:!0})],ft.prototype,"navigation",void 0),d([m({constructOnly:!0})],ft.prototype,"renderCanvas",void 0),d([m()],ft.prototype,"renderingOptions",void 0),d([m({constructOnly:!0})],ft.prototype,"supersampleScreenshotsEnabled",void 0),d([m()],ft.prototype,"defaultsFromMapSettings",null),d([m({readOnly:!0})],ft.prototype,"typeSpecificPreconditionsReady",null),d([m(wO(q0,"analyses"))],ft.prototype,"analyses",void 0),d([m()],ft.prototype,"analysisViewManager",void 0),d([m({type:SLe})],ft.prototype,"background",null),d([m()],ft.prototype,"center",null),d([m({type:$e})],ft.prototype,"floors",void 0),d([m()],ft.prototype,"grid",void 0),d([m({type:Id})],ft.prototype,"highlightOptions",null),d([m()],ft.prototype,"map",void 0),d([m()],ft.prototype,"padding",null),d([m({readOnly:!0})],ft.prototype,"rendering",null),d([m({readOnly:!0})],ft.prototype,"resolution",null),d([m()],ft.prototype,"scale",null),d([m({type:Boolean,value:!1})],ft.prototype,"spatialReferenceLocked",null),d([m({readOnly:!0})],ft.prototype,"tileInfo",null),d([m({type:hte,readOnly:!0})],ft.prototype,"timeline",void 0),d([m({readOnly:!0})],ft.prototype,"type",void 0),d([m({readOnly:!0})],ft.prototype,"updating",null),d([m({readOnly:!0})],ft.prototype,"view2dType",void 0),d([m({readOnly:!0})],ft.prototype,"visibleArea",null),d([m()],ft.prototype,"zoom",null),d([m({readOnly:!0})],ft.prototype,"navigating",null),d([m(),Nt(t=>t instanceof Zte?t:dv(Yte,t))],ft.prototype,"ui",void 0),d([m()],ft.prototype,"animationsEnabled",void 0),ft=d([N("esri.views.View2D")],ft);const $Le=ft;let rM=class extends $Le{constructor(e){super(e),this.view2dType="map"}};d([m({readOnly:!0})],rM.prototype,"view2dType",void 0),rM=d([N("esri.views.MapView")],rM);const MLe=rM;let TLe=class sie{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(pP),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new sie,r=this._originStores[0];r&&r.forEach((s,n)=>{i.set(n,J(s),0)});for(let s=2;s<pP;s++){const n=this._originStores[s];n&&n.forEach((a,o)=>{e&&e.has(o)||i.set(o,J(a),s)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),n!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let n=i-1;n>=0;n--){const a=this._originStores[n];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r?.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),n!==s}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const nie=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const s=Us(this),n=s.store,a=new TLe;s.store=a,LW(s,n,a)}read(r,s){PW(this,r,s)}getAtOrigin(r,s){const n=yA(this),a=Ic(s);if(typeof r=="string")return n.get(r,a);const o={};return r.forEach(u=>{o[u]=n.get(u,a)}),o}originOf(r){return LM(this.originIdOf(r))}originIdOf(r){return yA(this).originOf(r)}revert(r,s){const n=yA(this),a=Ic(s),o=Us(this);let u;u=typeof r=="string"?r==="*"?n.keys(a):[r]:r,u.forEach(h=>{o.invalidate(h),n.revert(h,a),o.commit(h)})}};return i=d([N("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function yA(t){return Us(t).store}nie(Ce);const ELe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,s="user"){Us(this).clearOrigin(r,Ic(s))}write(r,s){return kW(this,r=r||{},s),r}setAtOrigin(r,s,n){Us(this).setAtOrigin(r,s,Ic(n))}removeOrigin(r){const s=cG(this),n=Ic(r),a=s.keys(n);for(const o of a)s.originOf(o)===n&&s.set(o,s.get(o,n),7)}updateOrigin(r,s){const n=cG(this),a=Ic(s),o=Rs(this,r);for(let u=a+1;u<pP;++u)n.delete(r,u);n.set(r,o,a)}toJSON(r){return this.write({},r)}};return i=d([N("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function cG(t){return Us(t).store}const nN=t=>{const e=ELe(nie(t));let i=class extends e{};return i=d([N("esri.core.MultiOriginJSONSupport")],i),i},xYe=nN(Ce),CLe=Symbol("getSliceableSymbol");let hw=class{};hw=d([N("esri.graphic.GraphicOrigin")],hw);const ILe=Symbol("isGeoJSONGraphicOrigin");var hG;let LLe=class extends hw{get[(hG=ILe,Zw)](){return this.layer}get[AD](){return this.layer}get[CLe](){return this.layer}constructor(e){super(),this[hG]=!0,this.type="geojson",this.layer=e}get id(){return this.layer.id}};const ALe={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCentroidOnDegeneratedQuantizedGeometry:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDegeneratedQuantizedGeometry:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},PLe={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}},aN=[252,146,31,255],OLe=[153,153,153,255],aie={type:"esriSMS",style:"esriSMSCircle",size:6,color:aN,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},oie={type:"esriSLS",style:"esriSLSSolid",width:.75,color:aN},lie={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},kLe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},RLe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},DLe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},NLe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};function TYe(t){return{renderer:{type:"simple",symbol:t==="esriGeometryPoint"||t==="esriGeometryMultipoint"?aie:t==="esriGeometryPolyline"?oie:lie}}}const zLe=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let FLe=1;function EYe(t,e){if(X("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let i=`this${dG(e)} = null;`;for(const s in t)i+=`this${dG(s)} = ${JSON.stringify(t[s])};`;const r=new Function(`
      return class AttributesClass$${FLe++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[e]:null,...t})}}function dG(t){return zLe.test(t)?`.${t}`:`["${t}"]`}function CYe(t={}){return[{name:"New Feature",description:"",prototype:{attributes:J(t)}}]}function VLe(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:ALe,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:PLe,editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}var SR;const xR=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Zr=SR=class extends ve{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Fr)}writeGeometryType(t,e,i,r){if(t)return void xR.write(t,e,i,r);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void xR.write(n.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Ud(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Ee.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new SR(this.cloneProperties())}cloneProperties(){return J({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t?.[i];r.geometry=s?.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,n=h=>Math.round((h-r)/e),a=h=>Math.round((s-h)/i),o=this.features,u=this._getQuantizationFunction(this.geometryType,n,a);for(let h=0,p=o.length;h<p;h++)u?.(o[h].geometry)||(o.splice(h,1),h--,p--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,a]}=i,o=v=>v*n+r,u=v=>s-v*a;let h=null,p=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,v],scale:[,,b]}=i;h=w=>w*b+v}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,v],scale:[,,,b]}=i;p=w=>w==null?w:w*b+v}const y=this._getHydrationFunction(t,o,u,h,p);for(const{geometry:v}of e)v!=null&&y&&y(v);return this.transform=null,this}readFeaturesWithClass(t,e,i){const r=Ee.fromJSON(e.spatialReference),s=[];for(let n=0;n<t.length;n++){const a=t[n],o=i.fromJSON(a),u=a.geometry?.spatialReference;o.geometry==null||u||(o.geometry.spatialReference=r);const h=a.aggregateGeometries,p=o.aggregateGeometries;if(h&&p!=null)for(const y in p){const v=p[y],b=h[y],w=b?.spatialReference;v==null||w||(v.spatialReference=r)}s.push(o)}return s}_quantizePoints(t,e,i){let r,s;const n=[];for(let a=0,o=t.length;a<o;a++){const u=t[a];if(a>0){const h=e(u[0]),p=i(u[1]);h===r&&p===s||(n.push([h-r,p-s]),r=h,s=p)}else r=e(u[0]),s=i(u[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=sr(r)?r.rings:r.paths,n=[];for(let a=0,o=s.length;a<o;a++){const u=s[a],h=this._quantizePoints(u,e,i);h&&n.push(h)}return n.length>0?(sr(r)?r.rings=n:r.paths=n,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,s){return t==="point"?n=>{n.x=e(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:t==="polyline"||t==="polygon"?n=>{const a=sr(n)?n.rings:n.paths;let o,u;for(let h=0,p=a.length;h<p;h++){const y=a[h];for(let v=0,b=y.length;v<b;v++){const w=y[v];v>0?(o+=w[0],u+=w[1]):(o=w[0],u=w[1]),w[0]=e(o),w[1]=i(u)}}if(r&&s)for(let h=0,p=a.length;h<p;h++){const y=a[h];for(let v=0,b=y.length;v<b;v++){const w=y[v];w[2]=r(w[2]),w[3]=s(w[3])}}else if(r)for(let h=0,p=a.length;h<p;h++){const y=a[h];for(let v=0,b=y.length;v<b;v++){const w=y[v];w[2]=r(w[2])}}else if(s)for(let h=0,p=a.length;h<p;h++){const y=a[h];for(let v=0,b=y.length;v<b;v++){const w=y[v];w[2]=s(w[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=i(n.ymin),n.xmax=e(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const a=n.points;let o,u;for(let h=0,p=a.length;h<p;h++){const y=a[h];h>0?(o+=y[0],u+=y[1]):(o=y[0],u=y[1]),y[0]=e(o),y[1]=i(u)}if(r&&s)for(let h=0,p=a.length;h<p;h++){const y=a[h];y[2]=r(y[2]),y[3]=s(y[3])}else if(r)for(let h=0,p=a.length;h<p;h++){const y=a[h];y[2]=r(y[2])}else if(s)for(let h=0,p=a.length;h<p;h++){const y=a[h];y[2]=s(y[2])}}:null}};d([m({type:String,json:{write:!0}})],Zr.prototype,"displayFieldName",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Zr.prototype,"exceededTransferLimit",void 0),d([m({type:[Fr],json:{write:!0}})],Zr.prototype,"features",void 0),d([Ge("features")],Zr.prototype,"readFeatures",null),d([m({type:[Nr],json:{write:!0}})],Zr.prototype,"fields",void 0),d([m({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:xR.read}}})],Zr.prototype,"geometryType",void 0),d([Le("geometryType")],Zr.prototype,"writeGeometryType",null),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Zr.prototype,"hasM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Zr.prototype,"hasZ",void 0),d([m({types:Hw,json:{write:!0}})],Zr.prototype,"queryGeometry",void 0),d([Ge("queryGeometry")],Zr.prototype,"readQueryGeometry",null),d([m({type:Ee,json:{write:!0}})],Zr.prototype,"spatialReference",void 0),d([Le("spatialReference")],Zr.prototype,"writeSpatialReference",null),d([m({json:{write:!0}})],Zr.prototype,"transform",void 0),Zr=SR=d([N("esri.rest.support.FeatureSet")],Zr),Zr.prototype.toJSON.isDefaultToJSON=!0;let sf=class extends bm{constructor(){super(...arguments),this.type="geojson",this.refresh=Aw(async e=>{await this.load();const{extent:i,timeExtent:r}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=i,r&&(this.sourceJSON.timeInfo.timeExtent=[r.start,r.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,i)).then(r=>Zr.fromJSON(r))}queryFeaturesJSON(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,i))}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:at.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),i)}_applyEdits(e){if(!this._connection)throw new G("geojson-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField,r=[],s=[],n=[];if(e.addFeatures)for(const a of e.addFeatures)r.push(this._serializeFeature(a));if(e.deleteFeatures)for(const a of e.deleteFeatures)"objectId"in a&&a.objectId!=null?s.push(a.objectId):"attributes"in a&&a.attributes[i]!=null&&s.push(a.attributes[i]);if(e.updateFeatures)for(const a of e.updateFeatures)n.push(this._serializeFeature(a));return this._connection.invoke("applyEdits",{adds:r,updates:n,deletes:s}).then(({extent:a,timeExtent:o,featureEditResults:u})=>(this.sourceJSON.extent=a,o&&(this.sourceJSON.timeInfo.timeExtent=[o.start,o.end]),this._createEditsResult(u)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new G("geojson-layer-source:edit-failure",i.description,{code:i.code}):null}}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e);return r?{geometry:r.toJSON(),attributes:i}:{attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:i.type==="mesh"||i.type==="extent"?pi.fromExtent(i.extent):i}async _startWorker(e){this._connection=await sbe("GeoJSONSourceWorker",{strategy:X("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,hasZ:s,geometryType:n,objectIdField:a,url:o,timeInfo:u,customParameters:h}=this.layer,p=this.layer.originOf("spatialReference")==="defaults",y={url:o,customParameters:h,fields:i&&i.map(b=>b.toJSON()),geometryType:vD.toJSON(n),hasZ:s,objectIdField:a,timeInfo:u?u.toJSON():null,spatialReference:p?null:r&&r.toJSON()},v=await this._connection.invoke("load",y,{signal:e});for(const b of v.warnings)le.getLogger(this.layer).warn("#load()",`${b.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:b});v.featureErrors.length&&le.getLogger(this.layer).warn("#load()",`Encountered ${v.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:v.featureErrors}),this.sourceJSON=v.layerDefinition,this.capabilities=VLe(this.sourceJSON.hasZ,!0)}};d([m()],sf.prototype,"capabilities",void 0),d([m()],sf.prototype,"type",void 0),d([m({constructOnly:!0})],sf.prototype,"layer",void 0),d([m()],sf.prototype,"sourceJSON",void 0),sf=d([N("esri.layers.graphics.sources.GeoJSONSource")],sf);const br=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);let pG=class extends SyntaxError{constructor(e,i,r,s){super(e),this.expected=i,this.found=r,this.location=s,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const s=e.find(u=>u.source===this.location.source);s&&(r=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+a.line+":"+a.column;if(r){const u=this.location.end,h="".padEnd(a.line.toString().length," "),p=r[n.line-1],y=(n.line===u.line?u.column:p.length+1)-n.column||1;i+=`
 --> `+o+`
`+h+` |
`+a.line+" | "+p+`
`+h+" | "+"".padEnd(n.column-1," ")+"".padEnd(y,"^")}else i+=`
 at `+o}return i}static buildMessage(e,i){function r(v){return v.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(v){return s?v.replace(s,b=>"\\u{"+r(b)+"}"):v}function a(v){return n(v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,b=>"\\x0"+r(b)).replace(/[\x10-\x1F\x7F-\x9F]/g,b=>"\\x"+r(b)))}function o(v){return n(v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,b=>"\\x0"+r(b)).replace(/[\x10-\x1F\x7F-\x9F]/g,b=>"\\x"+r(b)))}const u={literal:v=>'"'+a(v.text)+'"',class(v){const b=v.parts.map(w=>Array.isArray(w)?o(w[0])+"-"+o(w[1]):o(w));return"["+(v.inverted?"^":"")+b.join("")+"]"+(v.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:v=>v.description};function h(v){return u[v.type](v)}function p(v){const b=v.map(h);if(b.sort(),b.length>0){let w=1;for(let S=1;S<b.length;S++)b[S-1]!==b[S]&&(b[w]=b[S],w++);b.length=w}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function y(v){return v?'"'+a(v)+'"':"end of input"}return"Expected "+p(e)+" but "+y(i)+" found."}};function jLe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,s={start:m2};let n=m2;const a="none",o=")",u=",",h="(",p="%",y="px",v="cm",b="mm",w="in",S="pt",M="pc",T="deg",I="rad",L="grad",O="turn",R="#",z=".",j="e",U=/^[ \t\n\r]/,B=/^[a-z\-]/,Q=/^[0-9a-fA-F]/,oe=/^[+\-]/,ue=/^[0-9]/,Se=mi("none"),me=ur("none",!1),ke=ur(")",!1),te=ur(",",!1),be=Qc([" ","	",`
`,"\r"],!1,!1,!1),Me=mi("function"),et=ur("(",!1),_t=mi("identifier"),W=Qc([["a","z"],"-"],!1,!1,!1),pe=mi("percentage"),Te=ur("%",!1),Pe=mi("length"),tt=ur("px",!1),ot=ur("cm",!1),Et=ur("mm",!1),lr=ur("in",!1),ci=ur("pt",!1),Wn=ur("pc",!1),uo=mi("angle"),Lv=ur("deg",!1),c2=ur("rad",!1),vu=ur("grad",!1),Av=ur("turn",!1),Pv=mi("number"),TE=mi("color"),h2=ur("#",!1),Pm=Qc([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Om=Qc(["+","-"],!1,!1,!1),wa=Qc([["0","9"]],!1,!1,!1),EE=ur(".",!1),CE=ur("e",!1);function qs(){return[]}function IE(V,ie){return{type:"function",name:V,parameters:ie||[]}}function d2(V,ie){return ie.length>0?zE(V,ie,3):[V]}function p2(V){return{type:"quantity",value:V.value,unit:V.unit}}function km(V){return{type:"color",colorType:V.type,value:V.value}}function hz(V){return V}function f2(){return Xc()}function LE(V){return{value:V,unit:"%"}}function AE(V){return{value:V,unit:"px"}}function tp(V){return{value:V,unit:"cm"}}function Bs(V){return{value:V,unit:"mm"}}function tl(V){return{value:V,unit:"in"}}function Hs(V){return{value:V,unit:"pt"}}function PE(V){return{value:V,unit:"pc"}}function OE(V){return{value:V,unit:"deg"}}function kE(V){return{value:V,unit:"rad"}}function Rm(V){return{value:V,unit:"grad"}}function Dm(V){return{value:V,unit:"turn"}}function Nm(V){return{value:V,unit:null}}function _u(){return{type:"hex",value:Xc()}}function zm(V){return{type:"function",value:V}}function ip(){return{type:"named",value:Xc()}}function RE(){return parseFloat(Xc())}let ae=0|e.peg$currPos,ri=ae;const Sa=[{line:1,column:1}];let rp,fn=ae,sp=e.peg$maxFailExpected||[],Fe=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function Xc(){return t.substring(ri,ae)}function Ov(V=ae){const ie=t.codePointAt(V);return ie===void 0?"":String.fromCodePoint(ie)}function ur(V,ie){return{type:"literal",text:V,ignoreCase:ie}}function Qc(V,ie,xe,Je){return{type:"class",parts:V,inverted:ie,ignoreCase:xe,unicode:Je}}function il(){return{type:"end"}}function mi(V){return{type:"other",description:V}}function ts(V){let ie,xe=Sa[V];if(xe)return xe;if(V>=Sa.length)ie=Sa.length-1;else for(ie=V;!Sa[--ie];);for(xe=Sa[ie],xe={line:xe.line,column:xe.column};ie<V;)t.charCodeAt(ie)===10?(xe.line++,xe.column=1):xe.column++,ie++;return Sa[V]=xe,xe}function bu(V,ie,xe){const Je=ts(V),Pt=ts(ie);return{source:r,start:{offset:V,line:Je.line,column:Je.column},end:{offset:ie,line:Pt.line,column:Pt.column}}}function it(V){ae<fn||(ae>fn&&(fn=ae,sp=[]),sp.push(V))}function DE(V,ie,xe){return new pG(pG.buildMessage(V,ie),V,ie,xe)}function m2(){let V;return V=y2(),V===i&&(V=np()),V}function y2(){let V,ie;return Fe++,V=ae,ki(),t.substr(ae,4)===a?(ie=a,ae+=4):(ie=i,Fe===0&&it(me)),ie!==i?(ki(),ri=V,V=qs()):(ae=V,V=i),Fe--,V===i&&Fe===0&&it(Se),V}function np(){let V,ie;if(V=[],ie=ap(),ie!==i)for(;ie!==i;)V.push(ie),ie=ap();else V=i;return V}function ap(){let V,ie,xe,Je;return V=ae,ki(),ie=eh(),ie!==i?(ki(),xe=Kc(),xe===i&&(xe=null),ki(),t.charCodeAt(ae)===41?(Je=o,ae++):(Je=i,Fe===0&&it(ke)),Je!==i?(ki(),ri=V,V=IE(ie,xe)):(ae=V,V=i)):(ae=V,V=i),V}function Kc(){let V,ie,xe,Je,Pt,$i,Ri,qr;if(V=ae,ie=rl(),ie!==i){for(xe=[],Je=ae,Pt=ki(),t.charCodeAt(ae)===44?($i=u,ae++):($i=i,Fe===0&&it(te)),$i===i&&($i=null),Ri=ki(),qr=rl(),qr!==i?(Pt=[Pt,$i,Ri,qr],Je=Pt):(ae=Je,Je=i);Je!==i;)xe.push(Je),Je=ae,Pt=ki(),t.charCodeAt(ae)===44?($i=u,ae++):($i=i,Fe===0&&it(te)),$i===i&&($i=null),Ri=ki(),qr=rl(),qr!==i?(Pt=[Pt,$i,Ri,qr],Je=Pt):(ae=Je,Je=i);ri=V,V=d2(ie,xe)}else ae=V,V=i;return V}function rl(){let V,ie;return V=ae,ie=g2(),ie===i&&(ie=v2(),ie===i&&(ie=wu(),ie===i&&(ie=th()))),ie!==i&&(ri=V,ie=p2(ie)),V=ie,V===i&&(V=ae,ie=NE(),ie!==i&&(ri=V,ie=km(ie)),V=ie),V}function ki(){let V,ie;for(Fe++,V=[],ie=t.charAt(ae),U.test(ie)?ae++:(ie=i,Fe===0&&it(be));ie!==i;)V.push(ie),ie=t.charAt(ae),U.test(ie)?ae++:(ie=i,Fe===0&&it(be));return Fe--,V}function eh(){let V,ie,xe;return Fe++,V=ae,ie=cr(),ie!==i?(t.charCodeAt(ae)===40?(xe=h,ae++):(xe=i,Fe===0&&it(et)),xe!==i?(ri=V,V=ie):(ae=V,V=i)):(ae=V,V=i),Fe--,V===i&&(ie=i,Fe===0&&it(Me)),V}function cr(){let V,ie,xe;if(Fe++,V=ae,ie=[],xe=t.charAt(ae),B.test(xe)?ae++:(xe=i,Fe===0&&it(W)),xe!==i)for(;xe!==i;)ie.push(xe),xe=t.charAt(ae),B.test(xe)?ae++:(xe=i,Fe===0&&it(W));else ie=i;return ie!==i&&(ri=V,ie=f2()),V=ie,Fe--,V===i&&(ie=i,Fe===0&&it(_t)),V}function g2(){let V,ie,xe;return Fe++,V=ae,ki(),ie=Ws(),ie!==i?(t.charCodeAt(ae)===37?(xe=p,ae++):(xe=i,Fe===0&&it(Te)),xe!==i?(ri=V,V=LE(ie)):(ae=V,V=i)):(ae=V,V=i),Fe--,V===i&&Fe===0&&it(pe),V}function v2(){let V,ie,xe;return Fe++,V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===y?(xe=y,ae+=2):(xe=i,Fe===0&&it(tt)),xe!==i?(ri=V,V=AE(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===v?(xe=v,ae+=2):(xe=i,Fe===0&&it(ot)),xe!==i?(ri=V,V=tp(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===b?(xe=b,ae+=2):(xe=i,Fe===0&&it(Et)),xe!==i?(ri=V,V=Bs(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===w?(xe=w,ae+=2):(xe=i,Fe===0&&it(lr)),xe!==i?(ri=V,V=tl(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===S?(xe=S,ae+=2):(xe=i,Fe===0&&it(ci)),xe!==i?(ri=V,V=Hs(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ki(),ie=Ws(),ie!==i?(t.substr(ae,2)===M?(xe=M,ae+=2):(xe=i,Fe===0&&it(Wn)),xe!==i?(ri=V,V=PE(ie)):(ae=V,V=i)):(ae=V,V=i)))))),Fe--,V===i&&Fe===0&&it(Pe),V}function wu(){let V,ie,xe;return Fe++,V=ae,ie=Ws(),ie!==i?(t.substr(ae,3)===T?(xe=T,ae+=3):(xe=i,Fe===0&&it(Lv)),xe!==i?(ri=V,V=OE(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ie=Ws(),ie!==i?(t.substr(ae,3)===I?(xe=I,ae+=3):(xe=i,Fe===0&&it(c2)),xe!==i?(ri=V,V=kE(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ie=Ws(),ie!==i?(t.substr(ae,4)===L?(xe=L,ae+=4):(xe=i,Fe===0&&it(vu)),xe!==i?(ri=V,V=Rm(ie)):(ae=V,V=i)):(ae=V,V=i),V===i&&(V=ae,ie=Ws(),ie!==i?(t.substr(ae,4)===O?(xe=O,ae+=4):(xe=i,Fe===0&&it(Av)),xe!==i?(ri=V,V=Dm(ie)):(ae=V,V=i)):(ae=V,V=i)))),Fe--,V===i&&(ie=i,Fe===0&&it(uo)),V}function th(){let V,ie;return Fe++,V=ae,ki(),ie=Ws(),ie!==i?(ri=V,V=Nm(ie)):(ae=V,V=i),Fe--,V===i&&Fe===0&&it(Pv),V}function NE(){let V,ie,xe,Je;if(Fe++,V=ae,t.charCodeAt(ae)===35?(ie=R,ae++):(ie=i,Fe===0&&it(h2)),ie!==i){if(xe=[],Je=t.charAt(ae),Q.test(Je)?ae++:(Je=i,Fe===0&&it(Pm)),Je!==i)for(;Je!==i;)xe.push(Je),Je=t.charAt(ae),Q.test(Je)?ae++:(Je=i,Fe===0&&it(Pm));else xe=i;xe!==i?(ri=V,V=_u()):(ae=V,V=i)}else ae=V,V=i;return V===i&&(V=ae,ie=ap(),ie!==i&&(ri=V,ie=zm(ie)),V=ie,V===i&&(V=ae,ie=cr(),ie!==i&&(ri=V,ie=ip()),V=ie)),Fe--,V===i&&(ie=i,Fe===0&&it(TE)),V}function Ws(){let V,ie,xe,Je,Pt,$i,Ri,qr;for(V=ae,ie=t.charAt(ae),oe.test(ie)?ae++:(ie=i,Fe===0&&it(Om)),ie===i&&(ie=null),xe=ae,Je=[],Pt=t.charAt(ae),ue.test(Pt)?ae++:(Pt=i,Fe===0&&it(wa));Pt!==i;)Je.push(Pt),Pt=t.charAt(ae),ue.test(Pt)?ae++:(Pt=i,Fe===0&&it(wa));if(t.charCodeAt(ae)===46?(Pt=z,ae++):(Pt=i,Fe===0&&it(EE)),Pt!==i){if($i=[],Ri=t.charAt(ae),ue.test(Ri)?ae++:(Ri=i,Fe===0&&it(wa)),Ri!==i)for(;Ri!==i;)$i.push(Ri),Ri=t.charAt(ae),ue.test(Ri)?ae++:(Ri=i,Fe===0&&it(wa));else $i=i;$i!==i?(Je=[Je,Pt,$i],xe=Je):(ae=xe,xe=i)}else ae=xe,xe=i;if(xe===i)if(xe=[],Je=t.charAt(ae),ue.test(Je)?ae++:(Je=i,Fe===0&&it(wa)),Je!==i)for(;Je!==i;)xe.push(Je),Je=t.charAt(ae),ue.test(Je)?ae++:(Je=i,Fe===0&&it(wa));else xe=i;if(xe!==i){if(Je=ae,t.charCodeAt(ae)===101?(Pt=j,ae++):(Pt=i,Fe===0&&it(CE)),Pt!==i){if($i=t.charAt(ae),oe.test($i)?ae++:($i=i,Fe===0&&it(Om)),$i===i&&($i=null),Ri=[],qr=t.charAt(ae),ue.test(qr)?ae++:(qr=i,Fe===0&&it(wa)),qr!==i)for(;qr!==i;)Ri.push(qr),qr=t.charAt(ae),ue.test(qr)?ae++:(qr=i,Fe===0&&it(wa));else Ri=i;Ri!==i?(Pt=[Pt,$i,Ri],Je=Pt):(ae=Je,Je=i)}else ae=Je,Je=i;Je===i&&(Je=null),ri=V,V=RE()}else ae=V,V=i;return V}function _2(V,ie){return V.map(function(xe){return xe[ie]})}function zE(V,ie,xe){return[V].concat(_2(ie,xe))}rp=n();const ih=rp!==i&&ae===t.length;function op(){throw rp!==i&&ae<t.length&&it(il()),DE(sp,fn<t.length?Ov(fn):null,fn<t.length?bu(fn,fn+1):bu(fn,fn))}return e.peg$library?{peg$result:rp,peg$currPos:ae,peg$FAILED:i,peg$maxFailExpected:sp,peg$maxFailPos:fn,peg$success:ih,peg$throw:ih?void 0:op}:ih?rp:void op()}function oN(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=fG(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new G("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:fG(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!EX(e[i].effects,e[i+1].effects))throw new G("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});CX(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function fG(t){let e;if(!t)return[];try{e=jLe(t)}catch(i){throw new G("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>ULe(i))}function ULe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return GLe(t);case"opacity":return qLe(t);case"hue-rotate":return BLe(t);case"blur":return HLe(t);case"drop-shadow":return WLe(t);case"bloom":return ZLe(t)}}catch(e){throw e.details.filter=t,e}throw new G("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function GLe(t){let e=1;return $v(t.parameters,1),t.parameters.length===1&&(e=Vo(t.parameters[0])),new pO(t.name,e)}function qLe(t){let e=1;return $v(t.parameters,1),t.parameters.length===1&&(e=Vo(t.parameters[0])),new MX(e)}function BLe(t){let e=0;return $v(t.parameters,1),t.parameters.length===1&&(e=eAe(t.parameters[0])),new xX(e)}function HLe(t){let e=0;return $v(t.parameters,1),t.parameters.length===1&&(e=cN(t.parameters[0]),r2(e,t.parameters[0])),new vX(e)}function WLe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new G("effect:type-error","Accepts only one color",{});i=tAe(r)}else{const s=cN(r);if(Object.isFrozen(e))throw new G("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&r2(s,r)}if(e.length<2||e.length>3)throw new G("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new wX(e[0],e[1],e[2]||0,i||uie("black"))}function ZLe(t){let e=1,i=0,r=0;return $v(t.parameters,3),t.parameters[0]&&(e=Vo(t.parameters[0])),t.parameters[1]&&(i=cN(t.parameters[1]),r2(i,t.parameters[1])),t.parameters[2]&&(r=Vo(t.parameters[2])),new yX(e,i,r)}function $v(t,e){if(t.length>e)throw new G("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function nE(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in uN)return"<length>";if(t.unit in lN)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function r2(t,e){if(t<0)throw new G("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function YLe(t){if(t.type!=="quantity"||t.unit!==null)throw new G("effect:type-error",`Expected <double>, Actual: ${nE(t)}`,{term:t})}function JLe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new G("effect:type-error",`Expected <double> or <percentage>, Actual: ${nE(t)}`,{term:t})}const lN={deg:1,grad:.9,rad:180/Math.PI,turn:360};function XLe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&lN[t.unit]!=null))throw new G("effect:type-error",`Expected <angle>, Actual: ${nE(t)}`,{term:t})}const uN={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function QLe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&uN[t.unit]!=null))throw new G("effect:type-error",`Expected <length>, Actual: ${nE(t)}`,{term:t})}function Vo(t){JLe(t);const e=t.value;return r2(e,t),t.unit==="%"?.01*e:e}function KLe(t){return YLe(t),r2(t.value,t),t.value}function eAe(t){return XLe(t),t.value*lN[t.unit]||0}function cN(t){return QLe(t),t.value*uN[t.unit]||0}function tAe(t){switch(t.colorType){case"hex":return tge(t.value);case"named":return uie(t.value);case"function":return sAe(t.value)}}function uie(t){if(!DY(t))throw new G("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return ege(t)}const iAe=/^rgba?/i,rAe=/^hsla?/i;function sAe(t){if($v(t.parameters,4),iAe.test(t.name))return[Vo(t.parameters[0]),Vo(t.parameters[1]),Vo(t.parameters[2]),t.parameters[3]?Vo(t.parameters[3]):1];if(rAe.test(t.name))return NY(KLe(t.parameters[0]),Vo(t.parameters[1]),Vo(t.parameters[2]),t.parameters[3]?Vo(t.parameters[3]):1);throw new G("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function dw(t,e,i){try{return aAe(t)}catch(r){i?.messages?.push(r)}return null}function pw(t,e,i,r){try{const s=nAe(t);pn(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function nAe(t){const e=oN(t);return e?m1e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function aAe(t){if(!t||t.length===0)return null;if(oAe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:$R(i.value)});return e}return $R(t)}function oAe(t){const e=t[0];return!!e&&"scale"in e}function $R(t){if(!t?.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Bu(i,"amount")];break;case"blur":r=[Bu(i,"radius","pt")];break;case"hue-rotate":r=[Bu(i,"angle","deg")];break;case"drop-shadow":r=[Bu(i,"xoffset","pt"),Bu(i,"yoffset","pt"),Bu(i,"blurRadius","pt"),lAe(i,"color")];break;case"bloom":r=[Bu(i,"strength"),Bu(i,"radius","pt"),Bu(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;oN(s),e.push(s)}return e.join(" ")}function Bu(t,e,i){if(t[e]==null)throw new G("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function lAe(t,e){if(t[e]==null)throw new G("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const uAe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:br}},"portal-item":{read:!0,write:{layerContainerTypes:br}}}}},mG={read:{reader:dw},write:{allowNull:!0,writer:pw,layerContainerTypes:br}},cAe={json:{read:!1,write:!1,origins:{"web-map":mG,"portal-item":mG}}},cie=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return d([m(uAe)],i.prototype,"blendMode",void 0),d([m(cAe)],i.prototype,"effect",void 0),i=d([N("esri.layers.mixins.BlendLayer")],i),i},hAe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return d([m({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=d([N("esri.layers.mixins.CustomParametersMixin")],i),i},hie=96;function AYe(t,e){const i=t.extent,r=t.width,s=ba(i?.spatialReference);return i&&r?i.width/r*s*ZW*hie:0}function PYe(t,e){return t/(ba(e)*ZW*hie)}function dAe(t,e,i){return pAe(t,e)&&fAe(t,i)}function pAe(t,e){return e===0||js(t,e)||t<e}function fAe(t,e){return e===0||js(t,e)||t>e}function mAe(t,e){return js(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const yG={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let yc=class extends yt(ve){constructor(e){super(e),this.id=_v(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};d([m({type:String,json:{write:!0}})],yc.prototype,"id",void 0),d([m({type:Number,json:yG})],yc.prototype,"maxScale",void 0),d([m({type:Number,json:yG})],yc.prototype,"minScale",void 0),d([m({type:String,json:{write:!0}})],yc.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],yc.prototype,"where",void 0),yc=d([N("esri.layers.support.DisplayFilter")],yc);function yAe(t,e){return{...e,filterMode:t.mode}}function gAe(t,e){return die(t,e).next().value??null}function kYe(t,e,i){const r=vAe(t);if(r&&(BY(e,r[0])||WP(i,r[1])))return"";const s=Array.from(die(t,e,i)),n=_Ae(s,e,i)?"1=1":s.map(a=>a.where||"1=1").reduce((a,o)=>zwe(a,o),"");return n&&n!=="1=1"?n:""}function vAe(t){if(pie(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],fw(i)),e[1]=Math.min(e[1],TT(r));return e}function*die(t,e,i){if(pie(t)==="manual"){const r=t.filters.find(s=>s.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)bAe(r.minScale,r.maxScale,e,i)&&(yield r)}}function _Ae(t,e,i){if(t.length===0)return!0;const r=fw(t.at(0)?.minScale),s=TT(t.at(-1)?.maxScale);if(WP(r,e)||BY(s,i))return!0;for(let n=0;n<t.length-1;n++){const a=t[n],o=t[n+1];if(WP(fw(o.minScale),TT(a.maxScale)))return!0}return!1}function bAe(t,e,i,r){return t=fw(t),i=fw(i),e=TT(e),!(!js(i,t)&&(r??i)>t)&&!nge(e,i)&&(r===void 0||!js(r,t))}function pie(t){return"mode"in t?t.mode:t.filterMode}function fw(t){return t||Number.POSITIVE_INFINITY}function TT(t){return t||0}let nf=class extends yt(ve){constructor(e){super(e),this.activeFilterId=null,this.filters=new($e.ofType(yc)),this.mode="manual"}writeFilters(e,i,r,s){const n=e.toArray();this.mode==="scale"&&n.sort((a,o)=>{const u=mAe(o.minScale,a.minScale),h=a.maxScale-o.maxScale;return u===0?h:u}),i[r]=n.map(a=>a.toJSON(s))}write(e,i){return super.write(e,yAe(this,i))}};d([m({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],nf.prototype,"activeFilterId",void 0),d([m({type:$e.ofType(yc),nonNullable:!0,json:{write:!0}})],nf.prototype,"filters",void 0),d([Le("filters")],nf.prototype,"writeFilters",null),d([m({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],nf.prototype,"mode",void 0),nf=d([N("esri.layers.support.DisplayFilterInfo")],nf);const wAe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return d([m(SAe)],i.prototype,"displayFilterEnabled",void 0),d([m(xAe)],i.prototype,"displayFilterInfo",void 0),i=d([N("esri.layers.mixins.DisplayFilteredLayer")],i),i},SAe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:br,writer(t,e,i){pn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},xAe={type:nf,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:br},origins:{"web-scene":{write:!1,read:!1}}}};var MR;const gA=new wt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),vA=new wt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let wl=MR=class extends ve{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:a,distance:o}=this;return new Re({geometry:J(i),objectIds:J(n),spatialRelationship:r,timeExtent:J(s),where:e,units:a,distance:o,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:a}=this;return new MR({geometry:J(e),objectIds:J(s),spatialRelationship:i,timeExtent:J(r),where:t,units:n,distance:a})}};d([m({type:String,json:{write:!0}})],wl.prototype,"where",void 0),d([m({types:Hw,json:{write:!0}})],wl.prototype,"geometry",void 0),d([m({type:gA.apiValues,json:{name:"spatialRel",read:{reader:gA.read},write:{allowNull:!1,writer:gA.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],wl.prototype,"spatialRelationship",void 0),d([m({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],wl.prototype,"distance",void 0),d([m({type:[Number],json:{write:!0}})],wl.prototype,"objectIds",void 0),d([m({type:vA.apiValues,json:{read:vA.read,write:{writer:vA.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],wl.prototype,"units",void 0),d([m({type:vr,json:{write:!0}})],wl.prototype,"timeExtent",void 0),wl=MR=d([N("esri.layers.support.FeatureFilter")],wl);const $Ae=wl;var TR;const gG={read:{reader:dw},write:{writer:pw,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},vG={read:{reader:dw},write:{writer:pw,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},_G={name:"showExcludedLabels",default:!0};let af=TR=class extends ve{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new G("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new G("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new TR({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};d([m({type:$Ae,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t?.write({},r);s&&Object.keys(s).length!==0?pn(i,s,e):pn(i,null,e)}}}})],af.prototype,"filter",void 0),d([m({json:{read:dw,write:{writer:pw,allowNull:!0},origins:{"web-map":gG,"portal-item":gG}}})],af.prototype,"includedEffect",void 0),d([m({json:{read:dw,write:{writer:pw,allowNull:!0},origins:{"web-map":vG,"portal-item":vG}}})],af.prototype,"excludedEffect",void 0),d([m({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":_G,"portal-item":_G}}})],af.prototype,"excludedLabelsVisible",void 0),af=TR=d([N("esri.layers.support.FeatureEffect")],af);const bG={write:{allowNull:!0}},MAe={type:af,json:{origins:{"web-map":bG,"portal-item":bG}}},TAe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return d([m(MAe)],i.prototype,"featureEffect",void 0),i=d([N("esri.layers.mixins.FeatureEffectLayer")],i),i};let EAe=class extends hw{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[Zw](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},fd=class extends yt(ve){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};d([m({type:String,json:{write:!0}})],fd.prototype,"expression",void 0),d([m({type:String,json:{write:!0}})],fd.prototype,"title",void 0),d([m({type:String,json:{write:!0}})],fd.prototype,"returnType",void 0),fd=d([N("esri.layers.support.ExpressionInfo")],fd);var ER,S0;let Is=(S0=class extends ve{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new ER({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:J(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},ER=S0,S0);d([m({type:Boolean,json:{write:!0}})],Is.prototype,"isAutoGenerated",void 0),d([m({type:String,json:{write:!0}})],Is.prototype,"name",void 0),d([m({type:String,json:{write:!0}})],Is.prototype,"alias",void 0),d([m({type:String,json:{write:!0}})],Is.prototype,"onStatisticField",void 0),d([m({type:fd,json:{write:!0}})],Is.prototype,"onStatisticExpression",void 0),d([m({type:String,json:{write:!0}})],Is.prototype,"statisticType",void 0),Is=ER=d([N("esri.layers.support.AggregateField")],Is);let Ld=class extends ve{constructor(){super(...arguments),this.type=null}};d([m({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Ld.prototype,"type",void 0),Ld=d([N("esri.layers.support.FeatureReduction")],Ld);var CR;let z1=CR=class extends ve{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return Gs(t,e,null,this.expression)}clone(){return new CR({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};d([m({type:String,json:{write:{isRequired:!0}}})],z1.prototype,"expression",void 0),d([m({type:String,json:{write:!0}})],z1.prototype,"title",void 0),z1=CR=d([N("esri.symbols.support.FeatureExpressionInfo")],z1);const wG=z1,aE={unknown:1,inches:Qt(1,"meters","inches"),feet:Qt(1,"meters","feet"),"us-feet":Qt(1,"meters","us-feet"),yards:Qt(1,"meters","yards"),miles:Qt(1,"meters","miles"),"nautical-miles":Qt(1,"meters","nautical-miles"),millimeters:Qt(1,"meters","millimeters"),centimeters:Qt(1,"meters","centimeters"),decimeters:Qt(1,"meters","decimeters"),meters:Qt(1,"meters","meters"),kilometers:Qt(1,"meters","kilometers"),"decimal-degrees":1/hpe(1,"meters",Vi.radius)};function FYe(t){return!!t&&aE[t]!=null}function VYe(t){return 1/(aE[t]||1)}function CAe(){const t=Object.keys(aE);return G5(t,"decimal-degrees"),t.sort(),t}const IAe=CAe(),yx=es()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),SG=new wt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let uc=class extends yt(ve){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,s){i[r]=e.write({},s),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Gue(this.featureExpressionInfo,e.featureExpressionInfo)}};d([m({type:wG,json:{write:!0}})],uc.prototype,"featureExpressionInfo",void 0),d([Ge("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],uc.prototype,"readFeatureExpressionInfo",null),d([Le("featureExpressionInfo",{featureExpressionInfo:{type:wG},"featureExpression.value":{type:[0]}})],uc.prototype,"writeFeatureExpressionInfo",null),d([m({type:yx.apiValues,nonNullable:!0,json:{type:yx.jsonValues,read:yx.read,write:{writer:yx.write,isRequired:!0}}})],uc.prototype,"mode",null),d([m({type:Number,json:{write:!0}})],uc.prototype,"offset",void 0),d([m({type:IAe,json:{type:String,read:SG.read,write:SG.write}})],uc.prototype,"unit",null),uc=d([N("esri.symbols.support.ElevationInfo")],uc);let mg=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};d([m({type:String,json:{write:!0}})],mg.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],mg.prototype,"label",void 0),d([m()],mg.prototype,"type",void 0),mg=d([N("esri.tables.elements.AttributeTableElement")],mg);const Mv=mg;let F1=class extends yt(Mv){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};d([m({type:["auto"],json:{write:!0}})],F1.prototype,"displayType",void 0),d([m({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],F1.prototype,"type",void 0),F1=d([N("esri.tables.elements.AttributeTableAttachmentElement")],F1);const fie=F1;let of=class extends yt(Mv){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};d([m({type:String,json:{read:!1,write:!1}})],of.prototype,"description",void 0),d([m({type:String,json:{write:{enabled:!0,isRequired:!0}}})],of.prototype,"fieldName",void 0),d([m({type:String,json:{read:!1,write:!1}})],of.prototype,"label",void 0),d([m({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],of.prototype,"type",void 0),of=d([N("esri.tables.elements.AttributeTableFieldElement")],of);const mie=of;let V1=class extends yt(Mv){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};d([m({type:Number,json:{type:bt,write:{enabled:!0,isRequired:!0}}})],V1.prototype,"relationshipId",void 0),d([m({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],V1.prototype,"type",void 0),V1=d([N("esri.tables.elements.AttributeTableRelationshipElement")],V1);const yie=V1,gie={base:Mv,key:"type",typeMap:{attachment:fie,field:mie,relationship:yie}};function LAe(t){return{typesWithGroup:{base:Mv,key:"type",typeMap:{attachment:fie,field:mie,group:t,relationship:yie}},typesWithoutGroup:gie}}let j1=class extends yt(Mv){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};d([m({types:[gie],json:{name:"attributeTableElements",write:!0}})],j1.prototype,"elements",void 0),d([m({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],j1.prototype,"type",void 0),j1=d([N("esri.tables.elements.AttributeTableGroupElement")],j1);const AAe=j1;let U1=class extends yt(ve){constructor(e){super(e),this.field=null,this.order=null}};d([m({type:String,json:{write:!0}})],U1.prototype,"field",void 0),d([m({type:["asc","desc"],json:{write:!0}})],U1.prototype,"order",void 0),U1=d([N("esri.tables.support.FieldOrder")],U1);const PAe=U1;var IR;const OAe=LAe(AAe);let G1=IR=class extends ve{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new IR({elements:J(this.elements),orderByFields:J(this.orderByFields)})}};d([m({types:[OAe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],G1.prototype,"elements",void 0),d([m({type:[PAe],json:{write:!0}})],G1.prototype,"orderByFields",void 0),G1=IR=d([N("esri.tables.AttributeTableTemplate")],G1);const kAe=G1,RAe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:br}}},oE={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},lE={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:br}}},DAe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:am}}},NAe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:br}}},zAe={value:null,type:uc,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:br}}};function ZYe(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const vie={write:{enabled:!0,layerContainerTypes:br},read:!0},ET={type:Number,json:{origins:{"web-document":vie,"portal-item":{write:{layerContainerTypes:br}}}}},YYe={...ET,json:{...ET.json,origins:{"web-document":{...vie,write:{enabled:!0,layerContainerTypes:br,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Hb(e.layerDefinition.drawingInfo.transparency):void 0:Hb(e.drawingInfo.transparency)}}},JYe={type:at,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=at.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Ee.fromJSON(e.spatialReference)),i}}}},read:!1}},FAe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},XYe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:br}}},QYe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:br}}},VAe={json:{write:{ignoreOrigin:!0,layerContainerTypes:br},origins:{"web-map":{read:!1,write:!1}}}},jAe={type:kAe,json:{name:"attributeTableInfo",write:!0}};async function UAe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=_ie(t));const r=GAe(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let n=null;for(;;){const a=await t.source.queryFeaturesJSON(e,i);if(n==null?n=a:n.features=n.features.concat(a.features),n.exceededTransferLimit=a.exceededTransferLimit,!s||!a.exceededTransferLimit)break;e.start+=r}return n}function GAe(t){return _ie(t)*qAe(t)}function qAe(t){return t.capabilities.query.maxRecordCount||2e3}function _ie(t){return t.capabilities.query.supportsMaxRecordCountFactor?Re.MAX_MAX_RECORD_COUNT_FACTOR:1}var LR;let q1=LR=class extends ve{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new LR({minValue:this.minValue,maxValue:this.maxValue})}};d([m({type:Number,json:{write:!0}})],q1.prototype,"minValue",void 0),d([m({type:Number,json:{write:!0}})],q1.prototype,"maxValue",void 0),q1=LR=d([N("esri.renderers.support.AuthoringInfoClassBreakInfo")],q1);var AR;let ld=AR=class extends ve{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new AR({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:J(this.classBreakInfos)})}};d([m({type:String,json:{write:!0}})],ld.prototype,"field",void 0),d([m({type:String,json:{write:!0}})],ld.prototype,"normalizationField",void 0),d([m({type:String,json:{write:!0}})],ld.prototype,"label",void 0),d([m({type:[q1],json:{write:!0}})],ld.prototype,"classBreakInfos",void 0),ld=AR=d([N("esri.renderers.support.AuthoringInfoFieldInfo")],ld);var PR;let yg=PR=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new PR({label:this.label,value:this.value,size:this.size})}};d([m({type:String,json:{write:!0}})],yg.prototype,"label",void 0),d([m({type:Number,json:{write:!0}})],yg.prototype,"size",void 0),d([m({type:Number,json:{write:!0}})],yg.prototype,"value",void 0),yg=PR=d([N("esri.renderers.support.AuthoringInfoSizeStop")],yg);const BAe=yg;var OR;const gx=new wt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),vx=new wt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),xG={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},$G=["high-to-low","above-and-below","centered-on","extremes"],MG=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],TG=["seconds","minutes","hours","days","months","years"],HAe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],WAe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Or=OR=class extends ve{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new OR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:J(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};d([m({types:xG,json:{write:!0}})],Or.prototype,"endTime",void 0),d([Nt("endTime")],Or.prototype,"castEndTime",null),d([m({type:String,json:{write:!0}})],Or.prototype,"field",void 0),d([m({type:Number,json:{write:!0}})],Or.prototype,"maxSliderValue",void 0),d([m({type:Number,json:{write:!0}})],Or.prototype,"minSliderValue",void 0),d([m({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Or.prototype,"normalizationField",null),d([m({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Or.prototype,"referenceSizeScale",null),d([m({type:HAe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Or.prototype,"referenceSizeSymbolStyle",null),d([m({type:WAe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Or.prototype,"spikeSymbolStyle",null),d([m({types:xG,json:{write:!0}})],Or.prototype,"startTime",void 0),d([Nt("startTime")],Or.prototype,"castStartTime",null),d([m({type:[BAe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Or.prototype,"sizeStops",null),d([m({type:gx.apiValues,value:null,json:{type:gx.jsonValues,read:gx.read,write:gx.write}})],Or.prototype,"style",null),d([m({type:MG,value:null,json:{type:MG,origins:{"web-scene":{type:$G,write:{writer:(t,e)=>{$G.includes(t)&&(e.theme=t)}}}},write:!0}})],Or.prototype,"theme",null),d([m({type:vx.apiValues,json:{type:vx.jsonValues,read:vx.read,write:vx.write}})],Or.prototype,"type",void 0),d([m({type:TG,json:{type:TG,write:!0}})],Or.prototype,"units",void 0),Or=OR=d([N("esri.renderers.support.AuthoringInfoVisualVariable")],Or);const ZAe=Or;let Kg=class extends ve{constructor(e){super(e),this.type=null}};d([m({readOnly:!0,json:{read:!1,write:!0}})],Kg.prototype,"type",void 0),Kg=d([N("esri.rest.support.ColorRamp")],Kg);var kR;let Mc=kR=class extends Kg{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new kR({fromColor:J(this.fromColor),toColor:J(this.toColor),algorithm:this.algorithm})}};d([je({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Mc.prototype,"algorithm",void 0),d([m({type:we,json:{type:[bt],write:{isRequired:!0}}})],Mc.prototype,"fromColor",void 0),d([m({type:we,json:{type:[bt],write:{isRequired:!0}}})],Mc.prototype,"toColor",void 0),d([m({type:["algorithmic"],json:{write:{isRequired:!0}}})],Mc.prototype,"type",void 0),Mc=kR=d([N("esri.rest.support.AlgorithmicColorRamp")],Mc);var RR;let gc=RR=class extends Kg{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const s=t?.map(a=>a.toJSON(r)),{weights:n}=this;if(s&&n?.length&&s.length===n?.length){const a=100/n.reduce((u,h)=>u+h);let o=0;s.forEach((u,h)=>{u.start=o,o+=n[h]*a,u.stop=o})}e.colorRamps=s}readWeights(t,e){const i=e.colorRamps?.map(({start:r,stop:s})=>r==null||s==null?-1:s-r);if(!i?.some(r=>r<0))return i}clone(){return new RR({colorRamps:J(this.colorRamps)})}};d([m({type:[Mc],json:{write:{isRequired:!0}}})],gc.prototype,"colorRamps",void 0),d([Le("colorRamps")],gc.prototype,"writeColorRamps",null),d([m({type:["multipart"],json:{write:{isRequired:!0}}})],gc.prototype,"type",void 0),d([m({type:[Number]})],gc.prototype,"weights",void 0),d([Ge("weights",["colorRamps"])],gc.prototype,"readWeights",null),gc=RR=d([N("esri.rest.support.MultipartColorRamp")],gc);const YAe={key:"type",base:Kg,typeMap:{algorithmic:Mc,multipart:gc}};function JAe(t){return t?.type?t.type==="algorithmic"?Mc.fromJSON(t):t.type==="multipart"?gc.fromJSON(t):null:null}var DR;const Op=new wt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),_x=new wt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),EG=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],XAe=["high-to-low","above-and-below","above","below"],QAe=["flow-line","wave-front"],KAe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Li=DR=class extends ve{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?JAe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new DR({classificationMethod:this.classificationMethod,colorRamp:J(this.colorRamp),fadeRatio:J(this.fadeRatio),fields:this.fields?.slice(),field1:J(this.field1),field2:J(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};d([m({type:Op.apiValues,value:null,json:{type:Op.jsonValues,read:Op.read,write:Op.write,origins:{"web-document":{default:"manual",type:Op.jsonValues,read:Op.read,write:Op.write}}}})],Li.prototype,"classificationMethod",null),d([m({types:YAe,json:{write:!0}})],Li.prototype,"colorRamp",void 0),d([Ge("colorRamp")],Li.prototype,"readColorRamp",null),d([m({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Li.prototype,"fadeRatio",void 0),d([m({type:[String],value:null,json:{write:!0}})],Li.prototype,"fields",null),d([m({type:ld,value:null,json:{write:!0}})],Li.prototype,"field1",null),d([m({type:ld,value:null,json:{write:!0}})],Li.prototype,"field2",null),d([m({type:QAe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Li.prototype,"flowTheme",null),d([m({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Li.prototype,"focus",null),d([m({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Li.prototype,"isAutoGenerated",void 0),d([m({type:Number,value:null,json:{type:bt,write:!0}})],Li.prototype,"numClasses",null),d([m({type:EG,json:{type:EG,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Li.prototype,"lengthUnit",void 0),d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Li.prototype,"maxSliderValue",void 0),d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Li.prototype,"minSliderValue",void 0),d([m({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Li.prototype,"statistics",null),d([m({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Li.prototype,"standardDeviationInterval",null),d([m({type:_x.apiValues,value:null,json:{type:_x.jsonValues,read:_x.read,write:_x.write}})],Li.prototype,"type",null),d([m({type:[ZAe],json:{write:!0}})],Li.prototype,"visualVariables",void 0),d([m({type:KAe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Li.prototype,"univariateSymbolStyle",null),d([m({type:XAe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Li.prototype,"univariateTheme",null),Li=DR=d([N("esri.renderers.support.AuthoringInfo")],Li);const _A=new wt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ma=class extends ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};d([m({type:Li,json:{write:!0}})],ma.prototype,"authoringInfo",void 0),d([m({type:_A.apiValues,readOnly:!0,json:{type:_A.jsonValues,read:!1,write:{writer:_A.write,ignoreOrigin:!0,isRequired:!0}}})],ma.prototype,"type",void 0),ma=d([N("esri.renderers.Renderer")],ma);let B1=class extends yt(ve){constructor(){super(...arguments),this.showLegend=null,this.title=null}};d([m({type:Boolean,json:{write:!0}})],B1.prototype,"showLegend",void 0),d([m({type:String,json:{write:!0}})],B1.prototype,"title",void 0),B1=d([N("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],B1);const bie=B1,bA=new wt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ts=class extends ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(le.getLogger(this).error(".field: field must be a string value"),null):Rw(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};d([m()],Ts.prototype,"index",void 0),d([m({type:bA.apiValues,readOnly:!0,json:{read:bA.read,write:{writer:bA.write,isRequired:!0}}})],Ts.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Ts.prototype,"field",void 0),d([Nt("field")],Ts.prototype,"castField",null),d([m({type:String,json:{write:!0}})],Ts.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],Ts.prototype,"valueExpressionTitle",void 0),d([m({readOnly:!0})],Ts.prototype,"arcadeRequired",null),d([m({type:bie,json:{write:!0}})],Ts.prototype,"legendOptions",void 0),Ts=d([N("esri.renderers.visualVariables.VisualVariable")],Ts);var NR;let lf=NR=class extends ve{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new NR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};d([m({type:we,json:{type:[bt],write:{isRequired:!0}}})],lf.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],lf.prototype,"label",void 0),d([m({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],lf.prototype,"value",void 0),d([Le("value")],lf.prototype,"writeValue",null),lf=NR=d([N("esri.renderers.visualVariables.support.ColorStop")],lf);const ePe=lf;var zR;let ud=zR=class extends Ts{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new zR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([m({readOnly:!0})],ud.prototype,"cache",null),d([m({type:["color"],json:{type:["colorInfo"]}})],ud.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],ud.prototype,"normalizationField",void 0),d([m({type:[ePe],json:{write:!0}})],ud.prototype,"stops",null),ud=zR=d([N("esri.renderers.visualVariables.ColorVariable")],ud);var FR;let Qh=FR=class extends ve{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Hb(e.transparency)}writeOpacity(t,e,i){e[i]=eD(t)}clone(){return new FR({label:this.label,opacity:this.opacity,value:this.value})}};d([m({type:String,json:{write:!0}})],Qh.prototype,"label",void 0),d([m({type:Number,json:{type:bt,write:{target:"transparency",isRequired:!0}}})],Qh.prototype,"opacity",void 0),d([Ge("opacity",["transparency"])],Qh.prototype,"readOpacity",null),d([Le("opacity")],Qh.prototype,"writeOpacity",null),d([m({type:Number,json:{write:{isRequired:!0}}})],Qh.prototype,"value",void 0),Qh=FR=d([N("esri.renderers.visualVariables.support.OpacityStop")],Qh);const tPe=Qh;var VR;let Tc=VR=class extends Ts{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new VR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};d([m({readOnly:!0})],Tc.prototype,"cache",null),d([m({type:["opacity"],json:{type:["transparencyInfo"]}})],Tc.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],Tc.prototype,"normalizationField",void 0),d([m({type:[tPe],json:{write:!0}})],Tc.prototype,"stops",null),Tc=VR=d([N("esri.renderers.visualVariables.OpacityVariable")],Tc);var jR;let cd=jR=class extends Ts{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new jR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};d([m({readOnly:!0})],cd.prototype,"cache",null),d([m({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],cd.prototype,"axis",void 0),d([m({type:["rotation"],json:{type:["rotationInfo"]}})],cd.prototype,"type",void 0),d([m({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],cd.prototype,"rotationType",void 0),cd=jR=d([N("esri.renderers.visualVariables.RotationVariable")],cd);function iPe(t){return gt(t)}var UR;let jo=UR=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new UR({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};d([m({type:String,json:{write:!0}})],jo.prototype,"label",void 0),d([m({type:Number,cast:gt,json:{write:{isRequired:!0}}})],jo.prototype,"size",void 0),d([m({type:Number,json:{write:{isRequired:!0}}})],jo.prototype,"value",void 0),d([m({type:Boolean,json:{write:!1}})],jo.prototype,"useMinValue",void 0),d([m({type:Boolean,json:{write:!1}})],jo.prototype,"useMaxValue",void 0),jo=UR=d([N("esri.renderers.visualVariables.support.SizeStop")],jo);let sM=class extends bie{constructor(){super(...arguments),this.customValues=null}};d([m({type:[Number],json:{write:!0}})],sM.prototype,"customValues",void 0),sM=d([N("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],sM);const wie=sM;function Og(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function mm(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Sie(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function rPe(t,e){const i=e||Sie(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const xie=()=>le.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),uE=t=>xie().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),cE=()=>xie().error("Use of arcade expressions requires an arcade context"),CG=new Fr,nM=Math.PI,$ie=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Mie(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(w=>w.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void uE("ColorVariable");const s=typeof e=="number",n=s?null:e,a=n?.attributes;let o=s?e:null;const u=r.field,{ipData:h,hasExpression:p}=r.cache;let y=r.cache.compiledFunc;if(!u&&!p){const w=r.stops;return w&&w[0]&&w[0].color}if(typeof o!="number")if(p){if(i?.arcade==null)return void cE();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},S=i.arcade.arcadeUtils,M=S.getViewInfo(w),T=S.createExecContext(n,M,i.timeZone);if(!y){const I=S.createSyntaxTree(r.valueExpression);y=S.createFunction(I),r.cache.compiledFunc=y}o=S.executeFunction(y,T)}else a&&(o=a[u]);const v=r.normalizationField,b=a!=null&&v!=null?parseFloat(a[v]):void 0;if(o!=null&&(!v||s||!isNaN(b)&&b!==0)){mm(b)&&!s&&(o/=b);const w=hN(o,h);if(w){const S=w[0],M=w[1],T=S===M?r.stops[S].color:we.blendColors(r.stops[S].color,r.stops[M].color,w[2],i?.color);return new we(T)}}}function Tie(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(w=>w.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void uE("OpacityVariable");const s=typeof e=="number",n=s?null:e,a=n?.attributes;let o=s?e:null;const u=r.field,{ipData:h,hasExpression:p}=r.cache;let y=r.cache.compiledFunc;if(!u&&!p){const w=r.stops;return w&&w[0]&&w[0].opacity}if(typeof o!="number")if(p){if(i?.arcade==null)return void cE();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},S=i.arcade.arcadeUtils,M=S.getViewInfo(w),T=S.createExecContext(n,M,i.timeZone);if(!y){const I=S.createSyntaxTree(r.valueExpression);y=S.createFunction(I),r.cache.compiledFunc=y}o=S.executeFunction(y,T)}else a&&(o=a[u]);const v=r.normalizationField,b=a!=null&&v!=null?parseFloat(a[v]):void 0;if(o!=null&&(!v||s||!isNaN(b)&&b!==0)){mm(b)&&!s&&(o/=b);const w=hN(o,h);if(w){const S=w[0],M=w[1];if(S===M)return r.stops[S].opacity;{const T=r.stops[S].opacity;return T+(r.stops[M].opacity-T)*w[2]}}}}function Eie(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(b=>b.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void uE("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,a=s==="heading"&&r.rotationType==="arithmetic"?-1:1,o=typeof e=="number"?null:e,u=o?.attributes,h=r.field,{hasExpression:p}=r.cache;let y=r.cache.compiledFunc,v=null;if(!h&&!p)return v;if(p){if(i?.arcade==null)return void cE();const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,S=w.getViewInfo(b),M=w.createExecContext(o,S,i.timeZone);if(!y){const T=w.createSyntaxTree(r.valueExpression);y=w.createFunction(T),r.cache.compiledFunc=y}v=w.executeFunction(y,M)}else u&&(v=u[h]);return v=typeof v!="number"||isNaN(v)?null:n+a*v,v}function sPe(t,e,i){const r=typeof e=="number",s=r?null:e,n=s?.attributes;let a=r?e:null;const{isScaleDriven:o}=t.cache;let u=t.cache.compiledFunc;if(o){const p=i?.scale,y=i?.view;a=p==null||y==="3d"?nPe(t):p}else if(!r)switch(t.inputValueType){case"expression":{if(i?.arcade==null)return void cE();const p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},y=i.arcade.arcadeUtils,v=y.getViewInfo(p),b=y.createExecContext(s,v,i.timeZone);if(!u){const w=y.createSyntaxTree(t.valueExpression);u=y.createFunction(w),t.cache.compiledFunc=u}a=y.executeFunction(u,b);break}case"field":n&&(a=n[t.field]);break;case"unknown":a=null}if(!mm(a))return null;if(r||!t.normalizationField)return a;const h=n?parseFloat(n[t.normalizationField]):null;return mm(h)&&h!==0?a/h:null}function nPe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function hE(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(n=>n.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void uE("SizeVariable");const s=Iie(sPe(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?void 0:s}function qn(t,e,i){return t==null?null:Og(t)?hE(t,e,i):mm(t)?t:null}function Cie(t,e,i){return mm(i)&&t>i?i:mm(e)&&t<e?e:t}function aPe(t,e,i,r){const s=qn(e.minSize,i,r)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function oPe(t,e,i){const r=t.stops;let s=r?.length&&r[0].size;return s==null&&(s=t.minSize),qn(s,e,i)}function lPe(t,e,i,r){const s=qn(e.minSize,i,r);if(t==null)return s;const{minDataValue:n,maxDataValue:a}=e;if(n==null||a==null)return null;const o=(t-n)/(a-n),u=qn(e.maxSize,i,r),h=r?.shape;if(t<=n)return s;if(t>=a)return u;if(s==null||u==null)return null;if(e.scaleBy==="area"&&h){const p=h==="circle",y=p?nM*(s/2)**2:s*s,v=y+o*((p?nM*(u/2)**2:u*u)-y);return p?2*Math.sqrt(v/nM):Math.sqrt(v)}return s+o*(u-s)}function uPe(t,e,i,r){const s=qn(e.minSize,i,r);if(t==null||s==null)return s;const n=r?.shape,{minDataValue:a}=e;if(a==null)return null;const o=t/a,u=qn(e.maxSize,i,r);let h=null;return h=n==="circle"?2*Math.sqrt(o*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(o*s**2):o*s,Cie(h,s,u)}function cPe(t,e,i,r,s){if(t==null)return null;const[n,a,o]=hN(t,s);if(n===a)return qn(e.stops?.[n].size,i,r);{const u=qn(e.stops?.[n].size,i,r),h=qn(e.stops?.[a].size,i,r);return u==null||h==null?null:u+(h-u)*o}}function hPe(t,e,i,r){const s=(r?.resolution??1)*aE[e.valueUnit],n=qn(e.minSize,i,r),a=qn(e.maxSize,i,r),{valueRepresentation:o}=e;if(t==null)return n;let u=null;return u=o==="area"?2*Math.sqrt(t/nM)/s:o==="radius"||o==="distance"?2*t/s:t/s,Cie(u,n,a)}function Iie(t,e,i,r,s){switch(e.transformationType){case"additive":return aPe(t,e,i,r);case"constant":return oPe(e,i,r);case"clamped-linear":return lPe(t,e,i,r);case"proportional":return uPe(t,e,i,r);case"stops":return cPe(t,e,i,r,s);case"real-world-size":return hPe(t,e,i,r);case"identity":return t;case"unknown":return null}}function dPe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let n=qn(t.minSize,CG,s),a=qn(t.maxSize,CG,s);if(n!=null||a!=null){if(n>a){const o=a;a=n,n=o}return{minSize:n,maxSize:a}}}function pPe(t,e,i){if(!t.visualVariables)return;const r=[],s=[],n=[],a=[],o=[];for(const u of t.visualVariables)switch(u.type){case"color":s.push(u);break;case"opacity":n.push(u);break;case"rotation":o.push(u);break;case"size":a.push(u)}return s.forEach(u=>{const h=Mie(u,e,i);r.push({variable:u,value:h})}),n.forEach(u=>{const h=Tie(u,e,i);r.push({variable:u,value:h})}),o.forEach(u=>{const h=Eie(u,e,i);r.push({variable:u,value:h})}),a.forEach(u=>{const h=hE(u,e,i);r.push({variable:u,value:h})}),r}function hN(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((s,n)=>t<s?(r=n,!0):(i=n,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function fPe(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":hE(s,e,i)??"proportional";switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const Em=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:fPe,getColor:Mie,getOpacity:Tie,getRotationAngle:Eie,getSize:hE,getSizeForValue:Iie,getSizeFromNumberOrVariable:qn,getSizeRangeAtScale:dPe,getVisualVariableValues:pPe,viewScaleRE:$ie},Symbol.toStringTag,{value:"Module"}));var GR;const bx=new wt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),qR=new wt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function IG(t){if(t!=null)return typeof t=="string"||typeof t=="number"?iPe(t):t.type==="size"?Og(t)?t:(delete(t={...t}).type,new $t(t)):void 0}function LG(t,e,i){if(typeof t!="object")return t;const r=new $t;return r.read(t,i),r}let $t=GR=class extends Ts{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&$ie.test(this.valueExpression)}}set index(t){Og(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Og(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Sie(this)}set maxDataValue(t){t&&this.stops&&(le.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(le.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return IG(t)}readMaxSize(t,e,i){return LG(t,e,i)}set minDataValue(t){t&&this.stops&&(le.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(le.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return IG(t)}readMinSize(t,e,i){return LG(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(le.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return rPe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new G("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?qR.read(t):null}clone(){return new GR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Og(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Og(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};d([m({readOnly:!0})],$t.prototype,"cache",null),d([m({type:bx.apiValues,json:{type:bx.jsonValues,origins:{"web-map":{read:!1}},read:bx.read,write:bx.write}})],$t.prototype,"axis",void 0),d([m()],$t.prototype,"index",null),d([m({type:String,readOnly:!0})],$t.prototype,"inputValueType",null),d([m({type:wie,json:{write:!0}})],$t.prototype,"legendOptions",void 0),d([m({type:Number,value:null,json:{write:!0}})],$t.prototype,"maxDataValue",null),d([m({type:Number,value:null,json:{write:!0}})],$t.prototype,"maxSize",null),d([Nt("maxSize")],$t.prototype,"castMaxSize",null),d([Ge("maxSize")],$t.prototype,"readMaxSize",null),d([m({type:Number,value:null,json:{write:!0}})],$t.prototype,"minDataValue",null),d([m({type:Number,value:null,json:{write:!0}})],$t.prototype,"minSize",null),d([Nt("minSize")],$t.prototype,"castMinSize",null),d([Ge("minSize")],$t.prototype,"readMinSize",null),d([m({type:String,json:{write:!0}})],$t.prototype,"normalizationField",void 0),d([m({readOnly:!0})],$t.prototype,"arcadeRequired",null),d([m({type:String})],$t.prototype,"scaleBy",void 0),d([m({type:[jo],value:null,json:{write:!0}})],$t.prototype,"stops",null),d([m({type:["outline"],json:{write:!0}})],$t.prototype,"target",void 0),d([m({type:String,readOnly:!0})],$t.prototype,"transformationType",null),d([m({type:["size"],json:{type:["sizeInfo"]}})],$t.prototype,"type",void 0),d([m({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],$t.prototype,"useSymbolValue",void 0),d([m({type:String,json:{write:!0}})],$t.prototype,"valueExpression",void 0),d([Ge("valueExpression",["valueExpression","expression"])],$t.prototype,"readValueExpression",null),d([Le("web-scene","valueExpression")],$t.prototype,"writeValueExpressionWebScene",null),d([m({type:["radius","diameter","area","width","distance"],json:{write:!0}})],$t.prototype,"valueRepresentation",void 0),d([m({type:qR.apiValues,json:{write:qR.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],$t.prototype,"valueUnit",void 0),d([Ge("valueUnit")],$t.prototype,"readValueUnit",null),$t=GR=d([N("esri.renderers.visualVariables.SizeVariable")],$t);const mPe={color:ud,size:$t,opacity:Tc,rotation:cd},yPe=new wt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),gPe=/^\[([^\]]+)\]$/i;let aM=class extends Ce{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(i=>!!i),e?.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:n}=i,a=s?.match(gPe),o=a?.[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:o})),e)return e.map(u=>{const h=yPe.read(u.type),p=mPe[h];p||(le.getLogger(this).warn(`Unknown variable type: ${h}`),r?.messages&&r.messages.push(new _a("visual-variable:unsupported",`visualVariable of type '${h}' is not supported`,{definition:u,context:r})));const y=new p;return y.read(u,r),y})}writeVariables(e,i){const r=[];for(const s of e){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};d([m()],aM.prototype,"visualVariables",null),aM=d([N("esri.renderers.visualVariables.VisualVariableFactory")],aM);const vPe={base:Ts,key:"type",typeMap:{opacity:Tc,color:ud,rotation:cd,size:$t}},Tv=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new aM}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,s,n){return this._vvFactory.readVariables(r,s,n)}writeVisualVariables(r,s,n,a){s[n]=this._vvFactory.writeVariables(r,a)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:r})=>r)??!1}hasVisualVariables(r,s){return r?this.getVisualVariablesForType(r,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(r,s){return this.visualVariables?.filter(n=>n.type===r&&(typeof s=="string"?n.target===s:s!==!1||!n.target))??[]}async collectVVRequiredFields(r,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const a of n)a&&(a.field&&Gn(r,s,a.field),a.normalizationField&&Gn(r,s,a.normalizationField),a.valueExpression&&(_Pe(a.valueExpression,r,s)||await Gs(r,s,null,a.valueExpression)))}};return d([m({types:[vPe],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),d([Ge("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),d([Le("visualVariables")],i.prototype,"writeVisualVariables",null),i=d([N("esri.renderers.mixins.VisualVariablesMixin")],i),i};function _Pe(t,e,i){const r=Qwe(t);return r!=null&&(Gn(e,i,r),!0)}const CT=Pi.fromJSON(aie),dE=Ui.fromJSON(oie),Lie=ln.fromJSON(lie),bPe=Xt.fromJSON(kLe);function nJe(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return CT;case"polyline":return dE;case"polygon":case"extent":return Lie}return null}const aJe=Pi.fromJSON(RLe),oJe=Ui.fromJSON(DLe),lJe=ln.fromJSON(NLe),wPe=on.fromSimpleMarkerSymbol(CT),SPe=Yo.fromSimpleLineSymbol(dE),xPe=to.fromSimpleFillSymbol(Lie),$Pe=new Lc({symbolLayers:new $e([new rn({material:{color:aN},edges:new sK({size:Ut(1),color:new we(OLe)})})])}),MPe=new Yo({symbolLayers:new $e([new tn({material:{color:new we([0,0,0])},size:Ut(1)})])}),TPe=new to({symbolLayers:new $e([new rn({outline:{color:new we([0,0,0]),size:Ut(1)}})])});function uJe(t){if(t==null)return null;switch(t.type){case"mesh":return $Pe;case"point":case"multipoint":return wPe;case"polyline":return SPe;case"polygon":case"extent":return xPe}return null}const AG="#useCIMFallbackSymbology()",Ec={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function X0(t,e=Ec){if(!t)return{symbol:null};const{retainId:i=Ec.retainId,ignoreDrivers:r=Ec.ignoreDrivers,hasLabelingContext:s=Ec.hasLabelingContext,retainCIM:n=Ec.retainCIM,cimFallbackEnabled:a=Ec.cimFallbackEnabled}=e;let o=null;if(el(t))o=t.clone();else if(t.type==="web-style")o=t.clone();else if(t.type==="cim"){const u=t.data?.symbol?.type;switch(u){case"CIMPointSymbol":o=n?t.clone():on.fromCIMSymbol(t);break;case"CIMLineSymbol":a&&(o=MPe.clone(),e?.logWarning?.(AG,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":a&&(o=TPe.clone(),e?.logWarning?.(AG,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new G("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${u||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Ui)o=Yo.fromSimpleLineSymbol(t);else if(t instanceof Pi)o=on.fromSimpleMarkerSymbol(t);else if(t instanceof en)o=on.fromPictureMarkerSymbol(t);else if(t instanceof ln)o=e.geometryType&&e.geometryType==="mesh"?Lc.fromSimpleFillSymbol(t):to.fromSimpleFillSymbol(t);else{if(!(t instanceof Xt))return{error:new G("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=s?Fo.fromTextSymbol(t):on.fromTextSymbol(t)}return i&&o&&o.type!=="cim"&&(o.id=t.id),!r||o.type==="cim"||o instanceof ds||o.symbolLayers.forEach(u=>u.ignoreDrivers=!0),{symbol:o}}function IT(t,e,i,r){const s=Aie(t,{},{context:r,isLabelSymbol:!1});s!=null&&pn(i,s,e)}function PG(t,e,i,r){const s=Aie(t,{},{context:r,isLabelSymbol:!0});s!=null&&(e[i]=s)}function OG(t){return el(t)||t instanceof ds}function EPe(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function Aie(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:s}=i,n=r?.origin,a=r?.messages;if(n==="web-scene"&&!OG(t)){const o=X0(t,{retainCIM:!0,hasLabelingContext:s});return o.symbol!=null?o.symbol.write(e,r):(a?.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:o.error})),null)}return HP(r?.layer)&&EPe(t)?(a?.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:t,context:r})),null):(n==="web-map"||n==="portal-item"&&!HP(r?.layer))&&OG(t)?(a?.push(new G("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Pie(t,e){return XSe(t,null,e)}const pE={types:MK,json:{write:{writer:IT},origins:{"web-scene":{types:_U,write:{writer:IT},read:{reader:pv({types:_U})}}}}},dN=Z5({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},pE),pN={types:{base:ar,key:"type",typeMap:{"simple-fill":kf.typeMap["simple-fill"],"picture-fill":kf.typeMap["picture-fill"],"polygon-3d":kf.typeMap["polygon-3d"],cim:kf.typeMap.cim}},json:{write:{writer:IT},origins:{"web-scene":{type:to,write:{writer:IT}}}}},oM={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var BR;let un=BR=class extends Tv(ma){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new BR({description:this.description,label:this.label,symbol:J(this.symbol),visualVariables:J(this.visualVariables),authoringInfo:J(this.authoringInfo)})}};d([m({type:String,json:{write:!0}})],un.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],un.prototype,"label",void 0),d([m(dN)],un.prototype,"symbol",void 0),d([je({simple:"simple"})],un.prototype,"type",void 0),un=BR=d([N("esri.renderers.SimpleRenderer")],un);const CPe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function HR(t){return t instanceof Ce}function kG(t){return t instanceof $e?Object.keys(t.items):HR(t)?Us(t).keys():t?Object.keys(t):[]}function wx(t,e){return t instanceof $e?t.items[e]:t[e]}function IPe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Lb(t){return t?t.declaredClass:null}function Oie(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=kG(t),s=kG(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||IPe(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(y=>!r.includes(y)),a=r.filter(y=>!s.includes(y)),o=r.filter(y=>s.includes(y)&&wx(t,y)!==wx(e,y)).concat(n,a).sort(),u=Lb(t);if(u&&CPe.has(u)&&o.length)return{type:"complete",oldValue:t,newValue:e};let h;const p=HR(t)&&HR(e);for(const y of o){const v=wx(t,y),b=wx(e,y);let w;if((p||typeof v!="function"&&typeof b!="function")&&v!==b&&(v!=null||b!=null)){if(i&&i[y]&&typeof i[y]=="function")w=i[y]?.(v,b);else if(v instanceof Date&&b instanceof Date){if(v.getTime()===b.getTime())continue;w={type:"complete",oldValue:v,newValue:b}}else w=typeof v=="object"&&typeof b=="object"&&Lb(v)===Lb(b)?Oie(v,b):{type:"complete",oldValue:v,newValue:b};w!=null&&(h!=null?h.diff[y]=w:h={type:"partial",diff:{[y]:w}})}}return h}function cJe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function LPe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Lb(t)!==Lb(e)?{type:"complete",oldValue:t,newValue:e}:Oie(t,e)}function Sx(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!Sx(i))return!1;for(const i of e.removed)if(!Sx(i))return!1;for(const i of e.changed)if(!Sx(i))return!1;return!0}case"partial":for(const e in t.diff)if(!Sx(t.diff[e]))return!1;return!0}}var WR;const APe=es()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let H1=WR=class extends yt(ve){static from(t){return dv(WR,t)}constructor(t){super(t),this.title=null,this.order=null}};d([m({type:String,json:{write:!0}})],H1.prototype,"title",void 0),d([je(APe)],H1.prototype,"order",void 0),H1=WR=d([N("esri.renderers.support.RendererLegendOptions")],H1);const fN=H1;let Bo=class extends yt(ve){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};d([m(oM)],Bo.prototype,"value",void 0),d([m(oM)],Bo.prototype,"value2",void 0),d([m(oM)],Bo.prototype,"value3",void 0),Bo=d([N("esri.renderers.support.UniqueValue")],Bo);let vc=class extends yt(ve){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Bo({value:r})):i==="object"?e[0]instanceof Bo?e:e.map(r=>new Bo(r)):null}};d([m({type:String,json:{write:!0}})],vc.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],vc.prototype,"label",void 0),d([m(pE)],vc.prototype,"symbol",void 0),d([m({type:[Bo],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Bo({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(Qr).map(n=>n.toString());i.push(s)}e.values=i}}}})],vc.prototype,"values",void 0),d([Nt("values")],vc.prototype,"castValues",null),vc=d([N("esri.renderers.support.UniqueValueClass")],vc);let zf=class extends yt(ve){constructor(e){super(e),this.heading=null,this.classes=null}};d([m({type:String,json:{write:!0}})],zf.prototype,"heading",void 0),d([m({type:[vc],json:{write:{isRequired:!0}}})],zf.prototype,"classes",void 0),zf=d([N("esri.renderers.support.UniqueValueGroup")],zf);var ZR;let qo=ZR=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new ZR({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};d([m({type:String,json:{write:!0}})],qo.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],qo.prototype,"label",void 0),d([m(dN)],qo.prototype,"symbol",void 0),d([m(oM)],qo.prototype,"value",void 0),qo=ZR=d([N("esri.renderers.support.UniqueValueInfo")],qo);const RG=new Map;async function PPe(t,e){try{return{data:(await mN(t,e)).data,baseUrl:r4(t),styleUrl:t}}catch(i){return zn(i),null}}function OPe(t,e,i){const r=e.portal!=null?e.portal:ge.getDefault();let s;const n=`${r.url} - ${r.user?.username} - ${t}`,a=RG.get(n);if(a)return a;const o=kPe(t,r,i).then(u=>(s=u,u.fetchData())).then(u=>({data:u,baseUrl:s.itemUrl??"",styleName:t}));return RG.set(n,o),o}function kPe(t,e,i){return e.load(i).then(()=>{const r=new er({disableExtraQuery:!0,query:`owner:${DG} AND type:${NG} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(a.typeKeywords?.some(u=>u.toLowerCase()===n)&&a.type===NG&&a.owner===DG){s=a;break}}if(!s)throw new G("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function kie(t,e,i){return t?.styleUrl!=null?PPe(t.styleUrl,i):t?.styleName!=null?OPe(t.styleName,e,i):Promise.reject(new G("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Rie(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function RPe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=wA(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=wA(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=wA(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function wA(t,e){if(!X("enable-feature:force-wosr"))return t.formatInfos?.find(i=>i.type===e)?.href}function mN(t,e){const i={responseType:"json",query:{f:"json"},...e};return Ot(io(t),i)}const DG="esri_en",NG="Style",DPe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var W1;const zG="uvInfos-watcher",FG="uvGroups-watcher",NPe=",",zPe=Ur(qo);function FPe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:a}=t,o=!(!e||!i);return[{classes:(n??[]).map(u=>{const{symbol:h,label:p,value:y,description:v}=u,[b,w,S]=o?y?.toString()?.split(s||"")||[]:[y],M=[];return(e||a)&&M.push(b),i&&M.push(w),r&&M.push(S),{symbol:h,label:p,values:[M],description:v}})}]}function Oy(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let di=W1=class extends Tv(ma){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const a=e.find(o=>o.value===i[n].value);a?LPe(a,i[n])?(s.changed.push({type:"complete",oldValue:a,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:a,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<e.length;n++)i.find(a=>a.value===e[n].value)||(s.removed.push(e[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Rw(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r?.messages?r.messages.push(new G("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):le.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ge.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Vc(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=nm(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?le.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?le.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void le.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?zPe(t):new qo({value:t,symbol:TK(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[Oy(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void le.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[Oy(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Gd()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void le.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&i?.arcade==null){const s=await Gd(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}return this._getUniqueValueInfo(t,i)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,s)=>r+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new W1({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:J(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:J(this.visualVariables),legendOptions:J(this.legendOptions),authoringInfo:J(this.authoringInfo),backgroundFillSymbol:J(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=J(this.uniqueValueInfos),i=J(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(J(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Gs(t,e,null,this.valueExpression)];Gn(t,e,this.field),Gn(t,e,this.field2),Gn(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return kie(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new ds({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new qo({value:i.name,symbol:r});e.push(s),this._valueInfoMap[Oy(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",NPe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[Oy(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(zG);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(_e(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,zG)}}_watchUniqueValueGroups(){this.removeHandles(FG);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(_e(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(_e(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,FG)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:a}=this;if(!e&&!a)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const o=!(!e||!i);for(const u of n)for(const h of u.classes??[]){const{symbol:p,label:y,values:v,description:b}=h;for(const w of v??[]){const{value:S,value2:M,value3:T}=w,I=[S];i&&I.push(M),r&&I.push(T);const L=o?I.join(s||""):I[0]??void 0;t.push(new qo({symbol:p,label:y,value:L,description:b}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const a=!(!e||!i),o=n.map(h=>{const{symbol:p,label:y,value:v,description:b}=h,[w,S,M]=a?v?.toString()?.split(s||"")||[]:[v];return new vc({symbol:p,label:y,description:b,values:[new Bo({value:w,value2:S,value3:M})]})}),u=[new zf({classes:o})];t&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:a}=e??{};let o=this._cache.compiledFunc;const u=n.arcadeUtils;if(!o){const p=u.createSyntaxTree(this.valueExpression);o=u.createFunction(p),this._cache.compiledFunc=o}const h=u.executeFunction(o,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),a));return this._valueInfoMap[Oy(h)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,a=[];e&&a.push(i[e]),s&&a.push(i[s]),n&&a.push(i[n]),r=a.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[Oy(r)]}static fromPortalStyle(t,e){const i=new W1(e?.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e?.portal||ge.getDefault());const r=i.populateFromStyle();return r.catch(s=>{le.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(t,e){const i=new W1(e?.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(s=>{le.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};d([m({readOnly:!0})],di.prototype,"_cache",null),d([je({uniqueValue:"unique-value"})],di.prototype,"type",void 0),d([m(pN)],di.prototype,"backgroundFillSymbol",void 0),d([m({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],di.prototype,"field",null),d([Nt("field")],di.prototype,"castField",null),d([Le("field")],di.prototype,"writeField",null),d([m({type:String,value:null,json:{write:!0}})],di.prototype,"field2",null),d([m({type:String,value:null,json:{write:!0}})],di.prototype,"field3",null),d([m({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"orderByClassesEnabled",void 0),d([m({type:String,value:null,json:{write:!0}})],di.prototype,"valueExpression",null),d([m({type:String,json:{write:!0}})],di.prototype,"valueExpressionTitle",void 0),d([m({type:fN,json:{write:!0}})],di.prototype,"legendOptions",void 0),d([m({type:String,json:{write:!0}})],di.prototype,"defaultLabel",void 0),d([m(Z5({...pE},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],di.prototype,"defaultSymbol",null),d([m({type:String,value:null,json:{write:!0}})],di.prototype,"fieldDelimiter",null),d([m({type:ge,readOnly:!0})],di.prototype,"portal",void 0),d([Ge("portal",["styleName"])],di.prototype,"readPortal",null),d([m({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],di.prototype,"styleOrigin",void 0),d([Ge("styleOrigin",["styleName","styleUrl"])],di.prototype,"readStyleOrigin",null),d([Le("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],di.prototype,"writeStyleOrigin",null),d([m({type:[zf],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||FPe(e)).map(r=>zf.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],di.prototype,"uniqueValueGroups",null),d([m({type:[qo],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],di.prototype,"uniqueValueInfos",null),di=W1=d([N("esri.renderers.UniqueValueRenderer")],di);var YR,x0;let kr=(x0=class extends ve{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new YR(J({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},YR=x0,x0);d([m({type:[String],json:{write:!0}})],kr.prototype,"attachmentTypes",void 0),d([m({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],kr.prototype,"attachmentsWhere",void 0),d([m({type:Boolean,json:{write:!0}})],kr.prototype,"cacheHint",void 0),d([m({type:[String],json:{write:!0}})],kr.prototype,"keywords",void 0),d([m({type:[String],json:{write:!0}})],kr.prototype,"globalIds",void 0),d([m({json:{write:!0}})],kr.prototype,"name",void 0),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],kr.prototype,"num",void 0),d([m({type:[Number],json:{write:!0}})],kr.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],kr.prototype,"orderByFields",void 0),d([m({type:Boolean,json:{default:!1,write:!0}})],kr.prototype,"returnMetadata",void 0),d([m({type:[Number],json:{write:!0}})],kr.prototype,"size",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],kr.prototype,"start",void 0),d([Le("start"),Le("num")],kr.prototype,"writeStart",null),d([m({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],kr.prototype,"where",void 0),kr=YR=d([N("esri.rest.support.AttachmentQuery")],kr),kr.from=Ur(kr);const Die=es()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),VG="percent-of-total",jG="field",fJe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const s=!!this.normalizationField,n=this.normalizationTotal!=null;return s||n?(r=s&&jG||n&&VG||null,s&&n&&le.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==jG&&r!==VG||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return d([m({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),d([m({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),d([m({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),d([m({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),d([je(Die,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=d([N("esri.rest.support.NormalizationBinParametersMixin")],i),i};var JR,$0;let _i=($0=class extends ve{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new JR(J({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},JR=$0,$0);d([m({type:Boolean,json:{write:!0}})],_i.prototype,"cacheHint",void 0),d([m({type:El,json:{write:!0}})],_i.prototype,"dynamicDataSource",void 0),d([m({type:String,json:{write:!0}})],_i.prototype,"gdbVersion",void 0),d([m({type:Number,json:{write:!0}})],_i.prototype,"geometryPrecision",void 0),d([m({type:Date})],_i.prototype,"historicMoment",void 0),d([Le("historicMoment")],_i.prototype,"_writeHistoricMoment",null),d([m({type:Number,json:{write:!0}})],_i.prototype,"maxAllowableOffset",void 0),d([m({json:{write:!0}})],_i.prototype,"objectIds",void 0),d([m({type:[String],json:{write:!0}})],_i.prototype,"orderByFields",void 0),d([m({type:[String],json:{write:!0}})],_i.prototype,"outFields",void 0),d([m({type:Ee,json:{read:{source:"outSR"},write:{target:"outSR"}}})],_i.prototype,"outSpatialReference",void 0),d([m({json:{write:!0}})],_i.prototype,"relationshipId",void 0),d([m({type:Number,json:{read:{source:"resultOffset"}}})],_i.prototype,"start",void 0),d([Le("start"),Le("num")],_i.prototype,"writeStart",null),d([m({type:Number,json:{read:{source:"resultRecordCount"}}})],_i.prototype,"num",void 0),d([m({json:{write:!0}})],_i.prototype,"returnGeometry",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],_i.prototype,"returnM",void 0),d([m({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],_i.prototype,"returnZ",void 0),d([m({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],_i.prototype,"where",void 0),_i=JR=d([N("esri.rest.support.RelationshipQuery")],_i),_i.from=Ur(_i);const mJe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return _i}},Symbol.toStringTag,{value:"Module"})),yJe=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function gJe(t,e,i,r){const s=await ep(t);if(await yN(t,e,r),!s.addAttachment)throw new G(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function yN(t,e,i){const{attributes:r}=e,{objectIdField:s}=t;return t.capabilities?.data?.supportsAttachment?e?r?s&&r[s]?Promise.resolve():Promise.reject(new G(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new G(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new G(i,"A feature is required to add/delete/update attachments")):Promise.reject(new G(i,"this layer doesn't support attachments"))}async function vJe(t,e,i,r,s){const n=await ep(t);if(await yN(t,e,s),!n.updateAttachment)throw new G(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,i,r)}async function _Je(t,e,i){const{applyEdits:r}=await K(()=>import("./editingSupport-CZkQuNl9.js"),__vite__mapDeps([300,163,169]),import.meta.url),s=await t.load();let n=i;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await BPe(s,e.deleteFeatures,s.globalIdField)}),r(s,s.source,e,i)}async function bJe(t,e,i){const{uploadAssets:r}=await K(()=>import("./editingSupport-CZkQuNl9.js"),__vite__mapDeps([300,163,169]),import.meta.url),s=await t.load();return r(s,s.source,e,i)}async function wJe(t,e,i,r){const s=await ep(t);if(await yN(t,e,r),!s.deleteAttachments)throw new G(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function SJe(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new G(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function xJe(t,e,i,r){e=kr.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new G(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:o,globalIds:u,num:h,size:p,start:y,where:v}=e;if(!n?.operations?.supportsQueryAttachments&&(a?.length>0||u?.length>0||p?.length>0||h||y||v))throw new G(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(o?.length||u?.length||v))throw new G(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new G(r,"Layer source does not support queryAttachments capability",e);return!n?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function $Je(t,e,i,r){const s=await ep(t);if(!s.queryObjectIds)throw new G(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Re.from(e)??t.createQuery(),i)}async function MJe(t,e,i,r){const s=await ep(t);if(!s.queryFeatureCount)throw new G(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Re.from(e)??t.createQuery(),i)}async function TJe(t,e,i,r){const s=await ep(t);if(!s.queryExtent)throw new G(r,"Layer source does not support queryExtent capability");return s.queryExtent(Re.from(e)??t.createQuery(),i)}async function EJe(t,e,i,r){const s=await ep(t);if(!s.queryRelatedFeatures)throw new G(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(_i.from(e),i)}async function CJe(t,e,i,r){const s=await ep(t);if(!s.queryRelatedFeaturesCount)throw new G(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(_i.from(e),i)}async function IJe(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await $D(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function LJe(t){const e=new Re;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=t.capabilities?.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function AJe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function PJe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function OJe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function kJe(t,e,i,r){const s=i?.feature,n=!!t.subtypes?.length;if(n&&!i?.excludeImpliedDomains){const u=jPe(t,e);if(u)return u}const a=n&&VPe(t,s);if(a){const u=a?.domains?.[e];return u?.type==="inherited"?r:u}const o=HPe(t.types,t.typeIdField,s);if(o){const u=o.domains&&o.domains[e];if(u&&u?.type!=="inherited")return u}if(r)return r;if(!i?.excludeImpliedDomains){const u=UPe(t,e);if(u)return u}return null}function VPe(t,e){const{subtypes:i,subtypeField:r}=t;if(!e?.attributes||!i?.length||!r)return null;const s=e.attributes[r];return s==null?null:i.find(n=>n.code===s)}function jPe(t,e){const{fieldsIndex:i,subtypeField:r}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if((r&&i.get(r)?.name)===s&&t.subtypes?.length){const a=t.subtypes.map(o=>new Rf({code:Nie(o.code,n),name:o.name}));if(a?.length)return new wd({codedValues:a})}return null}function UPe(t,e){const{fieldsIndex:i}=t,{name:r,type:s}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?i.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const n=t.types.map(a=>new Rf({code:Nie(a.id,s),name:a.name}));return new wd({codedValues:n})}return null}function Nie(t,e){return e?CQ({type:e})&&typeof t=="number"?`${t}`:E2e({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function ep(t){return(await t.load()).source}async function RJe(t,e){if(!pt)return;const i=pt.findCredential(t);if(i)return i.userId;let r;try{const s=await J4(t,e);s&&(r=await pt.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function zie(t,e){if(!pt||pt.findCredential(t))return;let i;try{const r=await J4(t,e);r&&(i=await pt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await pt.getCredential(t,{signal:r})}catch{}}async function DJe(t,e,i){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await zie(r,i)}async function NJe(t){const e=t.parsedUrl?.path;e&&GPe(t)&&await zie(e)}function GPe(t){return qPe(t)&&("serviceDefinitionExpression"in t&&UG(t.serviceDefinitionExpression)||"definitionExpression"in t&&UG(t.definitionExpression))}function qPe(t){return!(!kY(t)||!t.capabilities?.query.supportsCurrentUser)}function UG(t){return!!t?.toLowerCase().includes("current_user")}function zJe(t){return!WPe(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const SA=pv({types:MK});function Fie(t,e){if(t.defaultSymbol)return t.types?.length?new di({defaultSymbol:SA(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:SA(i.symbol,i,e)}))}):new un({symbol:SA(t.defaultSymbol,t,e)})}function FJe(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const i=t.editingInfo?.lastEditDate?.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function BPe(t,e,i){if(e==null)return null;const r=[],{objectIdField:s}=t;if(e.forEach(h=>{let p=null;if("attributes"in h){const{attributes:y}=h;p={globalId:y[i],objectId:y[s]!=null&&y[s]!==-1?y[s]:null}}else p={globalId:h.globalId,objectId:h.objectId!=null&&h.objectId!==-1?h.objectId:null};p.globalId!=null&&(p.objectId!=null&&p.objectId!==-1||r.push(p.globalId))}),r.length===0)return null;const n=t.createQuery();n.where=r.map(h=>`${i}='${h}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const a=await Tde(UAe(t,n));if(!a.ok)return null;const o=new Map,u=a.value.features;for(const h of u){const p=h.attributes[i],y=h.attributes[s];p!=null&&y!=null&&y!==-1&&o.set(hge(p),y)}return o}function HPe(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function WPe(t){return t.sourceJSON?.isMultiServicesView||ZPe(t)}function ZPe(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function YPe(t,e,i){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new G(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new G(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!GG(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new G(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new G(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new G(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new G(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new G(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new G(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!GG(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new G(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new G(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new G(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new G(i,"Layer source does not support firstDayOfWeek binning");const s=r?.supportedStatistics;if(t.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const o=n.get(a);if(o&&!s[o])throw new G(i,`Layer source does not support ${a} statistic type`)}}}function GG(t,e){return t!=null&&!!e?.[Die.toJSON(t)]}const gN="__begin__",vN="__end__",JPe=new RegExp(gN,"ig"),XPe=new RegExp(vN,"ig"),qG=new RegExp("^"+gN,"i"),BG=new RegExp(vN+"$","i"),LT='"',QPe=LT+" + ",KPe=" + "+LT;function eOe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function tOe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function _N(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=eOe(t.labelExpression),e.type="conventional"),e}function iOe(t){const e=_N(t);if(!e)return null;switch(e.type){case"conventional":return XR(e.expression);case"arcade":return e.expression}return null}function rOe(t){const e=_N(t);if(!e)return null;switch(e.type){case"conventional":return nOe(e.expression);case"arcade":return Vie(e.expression)}return null}function XR(t){let e;return t?(e=Hd(t,i=>gN+'$feature["'+i+'"]'+vN),e=qG.test(e)?e.replace(qG,""):LT+e,e=BG.test(e)?e.replace(BG,""):e+LT,e=e.replaceAll(JPe,QPe).replaceAll(XPe,KPe)):e='""',e}const sOe=/^\s*\{([^}]+)\}\s*$/i;function nOe(t){return t?.match(sOe)?.[1].trim()||null}const aOe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,oOe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,lOe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Vie(t){if(!t)return null;let e=aOe.exec(t)||oOe.exec(t);return e?e[1]||e[3]:(e=lOe.exec(t),e?e[2]:null)}var QR,M0;let _c=(M0=class extends ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?XR(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=XR(this.value)),e!=null&&(i[r]=e)}clone(){return new QR({expression:this.expression,title:this.title,value:this.value})}},QR=M0,M0);d([m({type:String,json:{write:{writerEnsuresNonNull:!0}}})],_c.prototype,"expression",void 0),d([Ge("expression",["expression","value"])],_c.prototype,"readExpression",null),d([Le("expression")],_c.prototype,"writeExpression",null),d([m({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],_c.prototype,"title",void 0),d([m({json:{read:!1,write:!1}})],_c.prototype,"value",void 0),_c=QR=d([N("esri.layers.support.LabelExpressionInfo")],_c);var KR;const xx=new wt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function $x(t,e,i){return{enabled:!HP(i?.layer)}}function jie(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function uOe(t){return t?.type==="map-image"}function Uie(t){return!!uOe(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function cOe(t){return jie(t)||Uie(t?.layer)}var T0;let wi=(T0=class extends ve{static evaluateWhere(e,i){const r=(s,n,a)=>{switch(n){case"=":return s==a;case"<>":return s!=a;case">":return s>a;case">=":return s>=a;case"<":return s<a;case"<=":return s<=a}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(i[s[0]],s[1],s[2]);if(s.length===7){const n=r(i[s[0]],s[1],s[2]),a=s[3],o=r(i[s[4]],s[5],s[6]);switch(a){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=bPe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=tOe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Vie(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,s){if(e==null&&this.labelExpression!=null&&jie(s))e=new _c({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(i[r]=n)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return _N(this)}getLabelExpressionArcade(){return iOe(this)}getLabelExpressionSingleField(){return rOe(this)}hash(){return JSON.stringify(this)}clone(){return new KR({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:J(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:J(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},KR=T0,T0);d([m({type:String,json:{write:!0}})],wi.prototype,"name",void 0),d([m({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:$x}}}}})],wi.prototype,"allowOverrun",void 0),d([m({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:$x}}}}})],wi.prototype,"deconflictionStrategy",void 0),d([m({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&Uie(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],wi.prototype,"labelExpression",void 0),d([Ge("labelExpression")],wi.prototype,"readLabelExpression",null),d([Le("labelExpression")],wi.prototype,"writeLabelExpression",null),d([m({type:_c,json:{write:{overridePolicy:(t,e,i)=>cOe(i)?{allowNull:!0}:{enabled:!1}}}})],wi.prototype,"labelExpressionInfo",void 0),d([Le("labelExpressionInfo")],wi.prototype,"writeLabelExpressionInfo",null),d([m({type:xx.apiValues,json:{type:xx.jsonValues,read:xx.read,write:xx.write}})],wi.prototype,"labelPlacement",void 0),d([m({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],wi.prototype,"labelPosition",void 0),d([m({type:Number})],wi.prototype,"maxScale",void 0),d([Le("maxScale")],wi.prototype,"writeMaxScale",null),d([m({type:Number})],wi.prototype,"minScale",void 0),d([Le("minScale")],wi.prototype,"writeMinScale",null),d([m({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:$x}}}}})],wi.prototype,"repeatLabel",void 0),d([m({type:Number,cast:gt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:$x}}}}})],wi.prototype,"repeatLabelDistance",void 0),d([m({types:QSe,json:{origins:{"web-scene":{types:KSe,write:PG,default:null}},write:PG,default:null}})],wi.prototype,"symbol",void 0),d([m({type:Boolean,json:{write:!0}})],wi.prototype,"useCodedValues",void 0),d([m({type:String,json:{write:!0}})],wi.prototype,"where",void 0),wi=KR=d([N("esri.layers.support.LabelClass")],wi);var e5;let Uo=e5=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new e5({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};d([m({type:String,json:{write:!0}})],Uo.prototype,"description",void 0),d([m({type:String,json:{write:!0}})],Uo.prototype,"label",void 0),d([m({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Uo.prototype,"minValue",void 0),d([m({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Uo.prototype,"maxValue",void 0),d([m(dN)],Uo.prototype,"symbol",void 0),Uo=e5=d([N("esri.renderers.support.ClassBreakInfo")],Uo);var t5;const Gie="log",lM="percent-of-total",uM="field",Mx=new wt({esriNormalizeByLog:Gie,esriNormalizeByPercentOfTotal:lM,esriNormalizeByField:uM}),hOe=Ur(Uo);let fr=t5=class extends Tv(ma){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(s=>{const n=new Uo;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(t,e,i,r){const s=t.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(le.getLogger(this).error(".field: field must be a string value"),null):Rw(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&uM||i&&lM||null,e&&i&&le.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==uM&&t!==lM||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Uo({minValue:t,maxValue:e,symbol:TK(i)}):hOe(J(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&le.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Gd()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void le.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&e?.arcade==null){const s=await Gd(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new t5({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:J(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:J(this.visualVariables),legendOptions:J(this.legendOptions),authoringInfo:J(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Gs(t,e,null,this.valueExpression)];Gn(t,e,this.field),Gn(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:a}=e??{},{valueExpression:o}=this;let u=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const h=n.arcadeUtils;if(!u){const y=h.createSyntaxTree(o);u=h.createFunction(y),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=o;const p=h.executeFunction(u,h.createExecContext(t,h.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),a));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const n=this.normalizationTotal,a=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Gie)s=Math.log(s)*Math.LOG10E;else if(r!==lM||n==null||isNaN(n)){if(r===uM&&!isNaN(a)){if(isNaN(s)||isNaN(a))return-1;s/=a}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};d([m(pN)],fr.prototype,"backgroundFillSymbol",void 0),d([m({type:[Uo],json:{write:{isRequired:!0}}})],fr.prototype,"classBreakInfos",void 0),d([Ge("classBreakInfos")],fr.prototype,"readClassBreakInfos",null),d([Le("classBreakInfos")],fr.prototype,"writeClassBreakInfos",null),d([m({type:String,json:{write:!0}})],fr.prototype,"defaultLabel",void 0),d([m(pE)],fr.prototype,"defaultSymbol",void 0),d([m({type:String,json:{write:!0}})],fr.prototype,"field",void 0),d([Nt("field")],fr.prototype,"castField",null),d([m({type:Boolean})],fr.prototype,"isMaxInclusive",void 0),d([m({type:fN,json:{write:!0}})],fr.prototype,"legendOptions",void 0),d([m({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],fr.prototype,"minValue",null),d([m({type:String,json:{write:!0}})],fr.prototype,"normalizationField",void 0),d([m({type:Number,json:{write:!0}})],fr.prototype,"normalizationTotal",void 0),d([m({type:Mx.apiValues,value:null,json:{type:Mx.jsonValues,read:Mx.read,write:Mx.write}})],fr.prototype,"normalizationType",null),d([je({classBreaks:"class-breaks"})],fr.prototype,"type",void 0),d([m({type:String,json:{write:!0}})],fr.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],fr.prototype,"valueExpressionTitle",void 0),fr=t5=d([N("esri.renderers.ClassBreaksRenderer")],fr);const i5=-3,dOe=i5-1,pOe=!!X("esri-tests-disable-gpu-memory-measurements");let fOe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){return this._db.get(e.id+i)?.size??0}put(e,i,r,s,n){i=e.id+i;const a=this._db.get(i);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(i),a.entry!==r&&this._notifyRemove(i,a.entry,a.size,0)),s>this._maxSize)return void this._notifyRemove(i,r,s,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return pOe||console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,0);const o=1+Math.max(n,dOe)-i5;this._db.set(i,new mOe(r,s,o)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let s=r.entry.usedMemory;for(;s>this._maxSize;){const n=this._notifyRemove(i,r.entry,s,1);if(!(n!=null&&n>0))return void this._db.delete(i);s=n}r.size=s,this._size+=s,e.size+=s,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((a,o)=>{const u=a.lifetime;r[u]=(r[u]||0)+a.size,this._users.forEach(h=>{const{id:p,name:y}=h;if(o.startsWith(p)){const v=i[y]||0;i[y]=v+a.size}})});const s={};this._users.forEach(a=>{const o=a.name;if("hitRate"in a&&typeof a.hitRate=="number"&&!isNaN(a.hitRate)&&a.hitRate>0){const u=i[o]||0;i[o]=u,s[o]=Math.round(100*a.hitRate)+"%"}else s[o]="0%"});const n=Object.keys(i);n.sort((a,o)=>i[o]-i[a]),n.forEach(a=>e[a]=Math.round(i[a]/2**20)+"MB / "+s[a]);for(let a=r.length-1;a>=0;--a){const o=r[a];o&&(e["Priority "+(a+i5-1)]=Math.round(o/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,s){const n=this._users.get(e.split(xA)[0])?.removeFunc,a=n?.(i,s,r);return typeof a=="number"?a:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const s=i?.id;let n=!0;for(;n;){n=!1;for(const[a,o]of this._db)if(o.lifetime===0&&(!s||a.startsWith(s))){const u=i??this._users.get(a.split(xA)[0]);if(this._purgeItem(a,o,u),r.size<=.9*e)return;n||=this._db.has(a)}}for(const[a,o]of this._db)if(!s||a.startsWith(s)){const u=i??this._users.get(a.split(xA)[0]);if(this._purgeItem(a,o,u),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(e,i.entry,i.size,1);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},mOe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const xA=":";let qie=class{constructor(e,i){this.removeFunc=i,this._storage=new fOe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},HG=class Bie{static parse(e,i,r){const s=[],n=[],a=e.split(";");for(let o=0;o<a.length;o++){const u=a[o];if(u){if(u.includes("po:")){const h=u.slice(3).split("|");if(h.length===3){const[p,y,v]=h,b=gOe(p,y,v);b&&n.push(b)}continue}if(u.includes("|")){for(const h of u.split("|"))if(i.has(h)){s.push(h);break}}else if(i.has(u))s.push(u);else if(o===0){s.length=0,s.push(vOe(r));break}}}return new Bie(s,n)}constructor(e,i){this.partNames=e,this.overrides=i}};function yOe(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new we(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function gOe(t,e,i){return{primitiveName:t,propertyName:e,value:yOe(e,i),defaultValue:null}}function vOe(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var E0;let Al=(E0=class{},E0.instance=new Bn("Etc/UTC"),E0);function _Oe(t){return t instanceof xm?t===Al.instance:t?.toString().toLowerCase()==="unknown"}function GJe(t){return _Oe(t)?Al.instance:t}function bOe(t){return"timeZone"in t}function wOe(t){return"timeZone"in t}function SOe(t){return"dateFieldsTimeZone"in t}const xOe=new Map;let mw=class cM{static fromJSON(e){return new cM(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new cM(e.fields??[],ZG(e))}static fromLayerJSON(e){return new cM(e.fields??[],ZG(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const n=s?.name,a=WG(n);if(n&&a){const o=$f(n);this._fieldsMap.set(n,s),this._fieldsMap.set(o,s),this._normalizedFieldsMap.set(a,s),r.push(`${o}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),V3(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):TD(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),sU(s)||nU(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)sU(e)||nU(e)||e.nullable||g2e(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get($f(e))??this._normalizedFieldsMap.get(WG(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(le.getLogger("esri.layers.support.FieldsIndex").errorOnce(new G("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),mu):Hie.has(i.type)?jd:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===jd?Al.instance:i===mu?Ir.utcInstance:av(xOe,i,()=>Bn.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return AQ(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>Fb(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function $f(t){return t.trim().toLowerCase()}function WG(t){return i2e(t)?.toLowerCase()??""}const Hie=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function ZG(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=t,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",a=(r?"endField"in r?r.endField:r.endTimeField:"")??"",o=SOe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?h$(t.dateFieldsTimeReference):null,u=s?bOe(s)?s.timeZone??o:s.dateFieldsTimeReference?h$(s.dateFieldsTimeReference):o??mu:null,h=r?wOe(r)?r.timeZone??o:r.timeReference?h$(r.timeReference):o:null,p=new Map([[$f(s?.creationDateField??""),u],[$f(s?.editDateField??""),u],[$f(n),h],[$f(a),h]]);for(const{name:y,type:v}of t.fields)if(Hie.has(v))e.set(y,jd);else if(v!=="date"&&v!=="esriFieldTypeDate")e.set(y,null);else if(i)e.set(y,jd);else{const b=p.get($f(y??""))??o;e.set(y,b)}return e}const Wie={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let $Oe=class extends Error{constructor(...e){super(...e)}},YG=class Zie extends $Oe{constructor(e,i){super(bN(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Zie),i?.loc&&(this.loc=i.loc)}},MOe=class Yie extends Error{constructor(e,i,r,s){super("Execution error - "+bN(r)+Hd(Wie[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Yie),r?.loc&&(this.loc=r.loc)}};function bN(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let BJe=class Jie extends Error{constructor(e,i,r,s){super("Compilation error - "+bN(r)+Hd(Wie[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,Jie),r?.loc&&(this.loc=r.loc)}},HJe=class Xie extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,Xie)}};function WJe(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e?.loc?new YG(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e?.loc?new YG(i,{cause:i}):i)}const TOe={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let ZJe=class Qie extends Error{constructor(e,i){super(Hd(TOe[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,Qie)}};function hM(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let YJe=class{constructor(e,i){const r=new Map;for(const s of e){const n=hM(s);if(r.has(n))throw new Error(`${s} already added as ${r.get(n)}`);r.set(n,s)}if(i!=null)for(const[s,n]of i){const a=hM(s);if(r.has(a))throw new Error(`${s} already associated with ${r.get(a)}`);r.set(a,n)}this._enumMap=r}lookup(e){return this._enumMap.get(hM(e))}get(e){const i=this.lookup(e);if(i==null)throw new MOe(null,"InvalidParameter",null);return i}};const EOe={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let COe=class Kie extends Error{constructor(e,i){super(Hd(EOe[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Kie)}};function ky(t,e,i){return t<e?t-e:t>i?t-i:0}function Ry(t,e,i){return t<e?e:t>i?i:t}let Ac=class pr{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,s=0,n=0,a=0,o=0,u){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(a)||isNaN(o))return null;const h=Ae.local(e,i).daysInMonth;let p=Ae.fromObject({day:Ry(r,1,h),year:e,month:Ry(i,1,12),hour:Ry(s,0,23),minute:Ry(n,0,59),second:Ry(a,0,59),millisecond:Ry(o,0,999)},{zone:Cl(u)});return p=p.plus({months:ky(i,1,12),days:ky(r,1,h),hours:ky(s,0,23),minutes:ky(n,0,59),seconds:ky(a,0,59),milliseconds:ky(o,0,999)}),new pr(p)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Cl(i);return e.isUnknownTimeZone||r===Al.instance?pr.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new pr(e._date.setZone(r))}static dateJSToArcadeDate(e){return new pr(Ae.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Cl(i);return new pr(Ae.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new pr(Ae.fromMillis(e,{zone:Al.instance}))}static unknownDateJSToArcadeDate(e){return new pr(Ae.fromMillis(e.getTime(),{zone:Al.instance}))}static epochToArcadeDate(e,i="system"){const r=Cl(i);return new pr(Ae.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new pr(e)}clone(){return new pr(this._date)}changeTimeZone(e){const i=Cl(e);return pr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Cl(i);return e.zone===Al.instance||r===Al.instance?pr.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new pr(e.setZone(r))}static nowToArcadeDate(e){const i=Cl(e);return new pr(Ae.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new pr(Ae.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===pr.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Al.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new pr(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new pr(this._date.toUTC())}toLocal(){return new pr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=Ae.fromISO(e,{setZone:!0});return new pr(i)}};function Cl(t,e=!0){if(t instanceof xm)return t;switch(hM(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Al.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=Ir.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Bn.create(t);if(!i.isValid){if(e)throw new COe("TimeZoneNotRecognized");return null}return i}function JG(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const XG="esri.core.sql.dateonly";let IOe=class la{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=XG}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===XG}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return la.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new la(this._year,this._month,this._day)}toDateTime(e){return Ae.fromObject({day:this.day,month:this.month,year:this.year},{zone:Cl(e)})}toDateTimeLuxon(e){return Ae.fromObject({day:this.day,month:this.month,year:this.year},{zone:Cl(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=JG(e)),!e)return"";const r=this.toDateTime("unknown");return Ac.dateTimeToArcadeDate(r).toFormat(e,{locale:Un(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Ac.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return la.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return Ae.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=Ae.fromMillis(e,{zone:Ir.utcInstance});return i.isValid?la.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=Ae.fromSeconds(e,{zone:Ir.utcInstance});return i.isValid?la.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new la(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const s=new la(e,i,r);return s.isValid===!1?null:s}static fromDateJS(e){return la.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return la.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=JG(i))&&r.push(i);else if(i===null||i===""){const s=Ae.fromISO(e,{setZone:!0});return s.isValid?la.fromParts(s.year,s.month,s.day):null}for(const s of r){const n=Ae.fromFormat(e,i??s);if(n.isValid)return new la(n.year,n.month,n.day)}return null}static fromNow(e="system"){const i=Ae.fromJSDate(new Date).setZone(Cl(e));return new la(i.year,i.month,i.day)}};function XJe(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new at({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function QJe(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function Tx(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function QG(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const KG="esri.core.sql.timeonly";let LOe=class Sl{constructor(e,i,r,s){this._hour=e,this._minute=i,this._second=r,this._millisecond=s,this.declaredRootClass=KG}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===KG}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Sl.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Sl(this.hour,this.minute,this.second,this.millisecond)}isValid(){return Tx(this.hour)&&Tx(this.minute)&&Tx(this.second)&&Tx(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=QG(e))?Ae.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Un(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,s){const n=new Sl(e,i,r,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Sl(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new Sl(s,r,i,n)}static fromDateJS(e){return new Sl(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Sl(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=QG(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const s of r){const n=Ae.fromFormat(e,s);if(n.isValid)return new Sl(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Sl.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return Ae.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const AOe=["geometry","scale","timeProperties"];function KJe(t,e){if(e!=null)for(const i of AOe)e.hasArcadeDependency(i)&&t.add(i);return t}function POe(t,e){return ere.create(t,e,null,["$feature","$view"])}function OOe(t,e,i){return ere.create(t,e,i,["$feature","$view","$config"])}let ere=class tre{static async create(e,i,r,s){const{arcade:n,Dictionary:a}=await Gd();let o;try{o=n.parseScript(e)}catch(b){throw new G("arcade-bad-expression","Failed to parse arcade script",{script:e,error:b})}const u=n.scriptUsesGeometryEngine(o);u&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,o,null,!1,u);const h={vars:s.reduce((b,w)=>({...b,[w]:null}),{}),spatialReference:i,useAsync:!1},p=n.compileScript(o,h);let y=null;r!=null&&(y=new a(r),y.immutable=!0);const v=new a;return v.immutable=!1,v.setField("scale",0),new tre(e,n,o,p,i,v,y,a)}constructor(e,i,r,s,n,a,o,u){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=s,this._spatialReference=n,this._viewDict=a,this._configDict=o,this._dictionaryCtor=u,this._dependencies=new Map,this._featureReader=new ire,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){const r=i.$view?.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:n,currentEnd:a}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:n!=null?r!=null?Ac.epochToArcadeDate(n,r):Ac.unknownEpochToArcadeDate(n):void 0,currentEnd:a!=null?r!=null?Ac.epochToArcadeDate(a,r):Ac.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},ire=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const s=i??new mw(rre(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Ud(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===jd}field(e,i=!0){const r=this._getField(e);if(r){const s=this._boundTarget.attributes[r.name];if(s==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return IOe.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return LOe.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Ac.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Ac.unknownEpochToArcadeDate(s):Ac.epochToArcadeDate(s,this.contextTimeZone??Qo);default:return s}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function rre(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let kOe=class sre{static async from(e,i,r){const s=e.dictionary_version?Jte.parse(e.dictionary_version):null,n=new Set(e.itemsNames),a={};if(i)for(const y in i)a[y]=i[y];if(e.authoringInfo.configuration)for(const y of e.authoringInfo.configuration)a.hasOwnProperty(y.name)||(a[y.name]=y.value);const o=new Set(e.authoringInfo.symbol);for(const y of Object.keys(r))o.delete(y);o.size&&le.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:o});const u=await OOe(e.expression,null,a);if(!u)throw new G("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const h=!s||!s.greaterEqual(4,0);h&&le.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const p=new ROe(r,h);return new sre(h,n,u,p)}constructor(e,i,r,s){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,i,r,s){try{return this._reader.bind(e,r,s),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(n){le.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new mw(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new mw(i)}},ROe=class extends ire{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const eq={Relative:0,Absolute:1},DOe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},or={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:eq.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:eq.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function NOe(t){return typeof t=="function"}function iXe(t,e,i,r){return NOe(t)?t(e,i,r):t}function rXe(t){return[t.r,t.g,t.b,t.a]}const zOe=` /-,
`;function tq(t){let e=t.length;for(;e--;)if(!zOe.includes(t.charAt(e)))return!1;return!0}function FOe(t,e){const i=[];let r=0,s=-1;do if(s=t.indexOf("[",r),s>=r){if(s>r){const n=t.slice(r,s);i.push([n,null,tq(n)])}if(r=s+1,s=t.indexOf("]",r),s>=r){if(s>r){const n=e[t.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<t.length){const n=t.slice(r);i.push([n,null,tq(n)])}return i}function sXe(t,e,i){let r="",s=null;for(const n of e){const[a,o,u]=n;if(a!=null&&a!=="")u?s=a:(s!=null&&(r+=s,s=null),r+=a);else{const h=t.readAttribute(o);h!=null&&h!==""&&(s!==null&&(r+=s,s=null),r+=h)}}return nre(r,i)}function VOe(t,e,i,r){let s="",n=null;for(const a of e){const[o,u,h]=a;if(o!=null&&o!=="")h?n=o:(n!=null&&(s+=n,n=null),s+=o);else{let p=u;i!=null&&(p=KOe(u,i));const y=t.attributes[p];y!=null&&y!==""&&(n!=null&&(s+=n,n=null),s+=y)}}return nre(s,r)}function nre(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nXe(t,e,i,r,s,n,a=!0){const o=e/s,u=i/n,h=Math.ceil(o/2),p=Math.ceil(u/2);for(let y=0;y<n;y++)for(let v=0;v<s;v++){const b=4*(v+(a?n-y-1:y)*s);let w=0,S=0,M=0,T=0,I=0,L=0,O=0;const R=(y+.5)*u;for(let z=Math.floor(y*u);z<(y+1)*u;z++){const j=Math.abs(R-(z+.5))/p,U=(v+.5)*o,B=j*j;for(let Q=Math.floor(v*o);Q<(v+1)*o;Q++){let oe=Math.abs(U-(Q+.5))/h;const ue=Math.sqrt(B+oe*oe);ue>=-1&&ue<=1&&(w=2*ue*ue*ue-3*ue*ue+1,w>0&&(oe=4*(Q+z*e),O+=w*t[oe+3],M+=w,t[oe+3]<255&&(w=w*t[oe+3]/250),T+=w*t[oe],I+=w*t[oe+1],L+=w*t[oe+2],S+=w))}}r[b]=T/S,r[b+1]=I/S,r[b+2]=L/S,r[b+3]=O/M}}function are(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function wN(t){return t.data?.symbol??null}function SN(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function ore(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function jOe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function fE(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Qe=(t,e=0)=>t==null||isNaN(t)?e:t,aXe=(t,e)=>t??e,oXe=(t,e)=>t??e,lXe=t=>t.tintColor?are(t.tintColor):[255,255,255,1];let UOe=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function Cm(t){return new UOe(t)}function GOe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function qOe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function lre(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function ure(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function Ab(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=Ab(e);if(i!=null)return i}break;case"CIMTextSymbol":return Ab(t.symbol);case"CIMSolidFill":return t.color}return null}function AT(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=AT(i);if(r!=null)return r}break}case"CIMTextSymbol":return AT(t.symbol);case"CIMSolidStroke":return t.color}}function cXe(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function PT(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=PT(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return PT(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function BOe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function HOe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function WOe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Dy=t=>t.includes("data:image/svg+xml");function OT(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function s2(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function hXe(t,e,i,r,s,n,a=!0){const{infos:o}=n;let u=1,h=0,p=0,y=0,v=1;for(const{absoluteAnchorPoint:S,offsetX:M,offsetY:T,rotation:I,size:L,frameHeight:O,rotateClockWise:R,scaleSymbolsProportionally:z}of o)v=S?1:u,p=sq(M,T,h,v,p),y=rq(M,T,h,v,y),O&&(z||a)&&(u*=L/O),h=nq(I,R,h);const b=sq(r,s,h,v,p),w=rq(r,s,h,v,y);return{size:t*u,rotation:nq(e,i,h),offsetX:b,offsetY:w}}function ZOe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>ZOe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function YOe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...DOe[e]];const i=or[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function JOe(t){return t.split(" ").map(e=>Number(e))}function XOe(t){return typeof t=="string"?JOe(t):t}function cre(t){return t?.dashTemplate&&(t.dashTemplate=XOe(t.dashTemplate)),t}function r5(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return r5(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return r5(i.symbol)}}return"Normal"}function QOe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??or.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&fE(i.markerPlacement)){const r=i.size??or.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function KOe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function eke(t){return t.map(e=>({...e,propertyName:s2(e.propertyName)}))}function iq(t){const e={};for(const i in t){const r=t[i];e[s2(i)]=r}return e}function rq(t,e,i,r,s){const n=i*Math.PI/180;if(n){const a=Math.cos(n);return(Math.sin(n)*t+a*e)*r+s}return e*r+s}function sq(t,e,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*r+s:t*r+s}function nq(t,e,i){return e?i-t:i+t}function dXe(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=e[s2(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=YOe(e.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const a=t[e.primitiveName];if(a!=null){const o=a[i];o==null||(typeof o=="string"||typeof o=="number"||Array.isArray(o)?(n=o,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:o,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function pXe(t,e,i){if(e[s2(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function Y_(t,e){return Math.max(Math.min((t??e)/100,1),0)}const tke={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let hre=class{constructor(e,i,r,s){this.url=e,this.fieldMap=r,this.dictionaryInfo=s,this._symbolPartCache=new qie(100);const n=async()=>kOe.from(await s,i,r);this._evaluator=n()}async getSymbolAsync(e,i,r=!0){const s=await this._evaluator,n=i?.fields??rre(e.attributes),a=s.createDictionaryFieldsIndex(n),o=s.evaluate(e,i?.scale??0,a,i?.spatialReference);if(o==null)return null;const u=D3(e.geometry),h=HG.parse(o,s.itemNames,u),p=u==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,h.partNames,h.overrides,p,i,r,a)}async getSymbolForControlString(e,i,r){const s=await this._evaluator,n=HG.parse(e,s.itemNames,i),a=i==="esriGeometryPoint"&&!r,o=aq(await Promise.all(n.partNames.map(u=>this._getSymbolPart(u))),n.overrides,a);return new Ls({data:o})}async _cimPartsToCIMSymbol(e,i,r,s,n,a,o){const u=i.map(y=>this._getSymbolPart(y,n));let h=await Promise.all(u);if(a&&this.fieldMap&&h.length>0){const{OverrideHelper:y}=await K(()=>Promise.resolve().then(()=>PFe),void 0,import.meta.url);h=J(h);for(const v of h)y.applyDictionaryTextOverrides(v,e,this.fieldMap,o,r5(v))}const p=aq(h,r,s);return new Ls({data:p})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,s=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await Ot(s,{responseType:"json",query:{f:"json"},...i});return n}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function aq(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const a of n.symbolLayers)a.effects==null?a.effects=n.effects:a.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=tke),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var s5;let Ao=s5=class extends Tv(ma){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new hre(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new s5({config:J(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:J(this.fieldMap),url:J(this.url),visualVariables:J(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Gs(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Ot(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};d([m({type:hre})],Ao.prototype,"_loader",null),d([m({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ao.prototype,"config",void 0),d([m({type:Object,json:{write:!0}})],Ao.prototype,"fieldMap",void 0),d([m({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ao.prototype,"scaleExpression",void 0),d([Le("scaleExpression")],Ao.prototype,"writeData",null),d([m({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Ao.prototype,"scaleExpressionTitle",void 0),d([m({type:String,json:{write:!0}})],Ao.prototype,"url",void 0),d([Le("visualVariables")],Ao.prototype,"writeVisualVariables",null),Ao=s5=d([N("esri.renderers.DictionaryRenderer")],Ao);var n5;let cc=n5=class extends ve{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(le.getLogger(this).error(".field: field must be a string value"),null):Rw(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new n5({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([m({type:we,json:{type:[Number],write:!0}})],cc.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],cc.prototype,"field",void 0),d([Nt("field")],cc.prototype,"castField",null),d([m({type:String,json:{write:!0}})],cc.prototype,"label",void 0),d([m({type:String,json:{write:!0}})],cc.prototype,"valueExpression",void 0),d([m({type:String,json:{write:!0}})],cc.prototype,"valueExpressionTitle",void 0),cc=n5=d([N("esri.renderers.support.AttributeColorInfo")],cc);const dre=cc;var a5;let dM=a5=class extends ve{constructor(){super(...arguments),this.unit=null}clone(){return new a5({unit:this.unit})}};d([m({type:String,json:{write:!0}})],dM.prototype,"unit",void 0),dM=a5=d([N("esri.renderers.support.DotDensityLegendOptions")],dM);const ike=dM;var o5;let Mn=o5=class extends Tv(ma){constructor(t){super(t),this.attributes=null,this.backgroundColor=new we([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ui,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new ln({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new o5({attributes:J(this.attributes),backgroundColor:J(this.backgroundColor),dotBlendingEnabled:J(this.dotBlendingEnabled),dotShape:J(this.dotShape),dotSize:J(this.dotSize),dotValue:J(this.dotValue),legendOptions:J(this.legendOptions),outline:J(this.outline),referenceScale:J(this.referenceScale),seed:J(this.seed),visualVariables:J(this.visualVariables),authoringInfo:J(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Gs(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};d([m({type:[dre],json:{write:!0}})],Mn.prototype,"attributes",void 0),d([m({type:we,json:{write:!0}})],Mn.prototype,"backgroundColor",void 0),d([m({type:Boolean,json:{write:!0}})],Mn.prototype,"dotBlendingEnabled",void 0),d([m({type:String,json:{write:!1}})],Mn.prototype,"dotShape",void 0),d([m({type:Number,json:{write:!0}})],Mn.prototype,"dotSize",void 0),d([m({type:ike,json:{write:!0}})],Mn.prototype,"legendOptions",void 0),d([m({type:Ui,json:{default:null,write:!0}})],Mn.prototype,"outline",void 0),d([m({type:Number,json:{write:!0}})],Mn.prototype,"dotValue",void 0),d([m({type:Number,json:{write:!0}})],Mn.prototype,"referenceScale",void 0),d([m({type:Number,json:{write:!0}})],Mn.prototype,"seed",void 0),d([je({dotDensity:"dot-density"})],Mn.prototype,"type",void 0),Mn=o5=d([N("esri.renderers.DotDensityRenderer")],Mn);var l5;let Pc=l5=class extends ve{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new l5({color:this.color&&this.color.clone(),ratio:this.ratio})}};d([m({type:we,json:{type:[bt],default:null,write:{isRequired:!0}}})],Pc.prototype,"color",void 0),d([m({type:Number,json:{write:{isRequired:!0}}})],Pc.prototype,"ratio",void 0),Pc=l5=d([N("esri.renderers.support.HeatmapColorStop")],Pc);let gg=class extends yt(ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};d([m({type:String,json:{write:!0}})],gg.prototype,"minLabel",void 0),d([m({type:String,json:{write:!0}})],gg.prototype,"maxLabel",void 0),d([m({type:String,json:{write:!0}})],gg.prototype,"title",void 0),gg=d([N("esri.renderers.support.HeatmapLegendOptions")],gg);function rke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ske(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function nke(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function ake(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function pre(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function fre(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function mre(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function oke(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function lke(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function uke(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function cke(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function hke(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function dke(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function pke(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function yre(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function gre(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n}function vre(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function _re(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function fke(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function mke(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function yke(t,e){const i=e[0],r=e[1],s=e[2],n=e[3];let a=i*i+r*r+s*s+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=s*a,t[3]=n*a),t}function gke(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function bre(t,e,i,r){const s=e[0],n=e[1],a=e[2],o=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=a+r*(i[2]-a),t[3]=o+r*(i[3]-o),t}function vke(t,e=1){const i=I3;let r,s,n,a,o,u;do r=2*i()-1,s=2*i()-1,o=r*r+s*s;while(o>=1);do n=2*i()-1,a=2*i()-1,u=n*n+a*a;while(u>=1);const h=Math.sqrt((1-o)/u);return t[0]=e*r,t[1]=e*s,t[2]=e*n*h,t[3]=e*a*h,t}function _ke(t,e,i){const r=e[0],s=e[1],n=e[2],a=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*a,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*a,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*a,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*a,t}function bke(t,e,i){const r=e[0],s=e[1],n=e[2],a=i[0],o=i[1],u=i[2],h=i[3],p=h*r+o*n-u*s,y=h*s+u*r-a*n,v=h*n+a*s-o*r,b=-a*r-o*s-u*n;return t[0]=p*h+b*-a+y*-u-v*-o,t[1]=y*h+b*-o+v*-a-p*-u,t[2]=v*h+b*-u+p*-o-y*-a,t[3]=e[3],t}function wke(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Ske(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function xke(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],a=e[0],o=e[1],u=e[2],h=e[3],p=dn();return Math.abs(i-a)<=p*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(n-h)<=p*Math.max(1,Math.abs(n),Math.abs(h))}const $ke=pre,Mke=fre,Tke=mre,Eke=yre,Cke=gre,Ike=vre,Lke=_re;Object.freeze(Object.defineProperty({__proto__:null,add:ake,ceil:oke,copy:rke,copyVec3:ske,dist:Eke,distance:yre,div:Tke,divide:mre,dot:gke,equals:xke,exactEquals:Ske,floor:lke,inverse:mke,len:Ike,length:vre,lerp:bre,max:cke,min:uke,mul:Mke,multiply:fre,negate:fke,normalize:yke,random:vke,round:hke,scale:dke,scaleAndAdd:pke,set:nke,sqrDist:Cke,sqrLen:Lke,squaredDistance:gre,squaredLength:_re,str:wke,sub:$ke,subtract:pre,transformMat4:_ke,transformQuat:bke},Symbol.toStringTag,{value:"Module"}));function mE(){return[0,0,0,0]}function Ake(t){return[t[0],t[1],t[2],t[3]]}function Im(t,e,i,r){return[t,e,i,r]}function Pke(t,e,i,r){return[t,e,i,r]}function Oke(t,e=mE()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function wre(){return mE()}function Sre(){return Im(1,1,1,1)}function xre(){return Im(1,0,0,0)}function $re(){return Im(0,1,0,0)}function Mre(){return Im(0,0,1,0)}function Tre(){return Im(0,0,0,1)}const kke=wre(),Rke=Sre(),Dke=xre(),Nke=$re(),zke=Mre(),Fke=Tre();Object.freeze(Object.defineProperty({__proto__:null,ONES:Rke,UNIT_W:Fke,UNIT_X:Dke,UNIT_Y:Nke,UNIT_Z:zke,ZEROS:kke,clone:Ake,create:mE,freeze:Pke,fromArray:Oke,fromValues:Im,ones:Sre,unitW:Tre,unitX:xre,unitY:$re,unitZ:Mre,zeros:wre},Symbol.toStringTag,{value:"Module"}));const xN=2.4;function Vke(t){return Ut(t*xN)}function jke(t){return lt(t)/xN}function Uke(t,e,i,r){let{color:s,ratio:n}=e,{color:a,ratio:o}=i;o===n&&(o===1?n-=1e-6:o+=1e-6);const u=ys((r-n)/(o-n),0,1);bre(t,s.toArray(),a.toArray(),u)}function yXe(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:o})=>o>=0&&o<=1).sort((o,u)=>o.ratio-u.ratio).map(({color:o,ratio:u})=>({color:o,ratio:Math.max(u,.001)})),t.length<1)return i;let r=t[0],s=t[0],n=1;const a=mE();for(let o=0;o<512;o++){const u=(o+.5)/512;for(;u>s.ratio&&n<t.length;)r=s,s=t[n++];Uke(a,r,s,u),i.set(a,4*o)}return i}function gXe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function vXe(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var u5;function oq(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:a,...o}=t;return o}}return t}let Dr=u5=class extends ma{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Pc({ratio:0,color:new we("rgba(255, 140, 0, 0)")}),new Pc({ratio:.75,color:new we("rgba(255, 140, 0, 1)")}),new Pc({ratio:.9,color:new we("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return oq(t)}get blurRadius(){return jke(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Vke(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(xN**2*this.blurRadius**4)}read(t,e){t=oq(t),super.read(t,e)}getSymbol(){return new Pi}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Gn(t,e,i),r&&typeof r=="string"&&await Gs(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new u5({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:J(this.colorStops),field:this.field,legendOptions:J(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([m({type:Li,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Dr.prototype,"authoringInfo",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Dr.prototype,"blurRadius",null),d([m({type:[Pc],json:{write:{isRequired:!0}}})],Dr.prototype,"colorStops",void 0),d([m({type:String,json:{write:!0}})],Dr.prototype,"field",void 0),d([m({type:gg,json:{write:!0}})],Dr.prototype,"legendOptions",void 0),d([m({type:Number,json:{write:!0}})],Dr.prototype,"maxDensity",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Dr.prototype,"maxPixelIntensity",null),d([m({type:Number,json:{write:!0}})],Dr.prototype,"minDensity",void 0),d([m({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Dr.prototype,"minPixelIntensity",null),d([m({type:Number,cast:gt,json:{write:!0}})],Dr.prototype,"radius",void 0),d([m({type:Number,range:{min:0},json:{default:0,write:!0}})],Dr.prototype,"referenceScale",void 0),d([je({heatmap:"heatmap"})],Dr.prototype,"type",void 0),d([m({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Dr.prototype,"valueExpression",void 0),d([m({type:String})],Dr.prototype,"valueExpressionTitle",void 0),d([m({readOnly:!0})],Dr.prototype,"_pixelIntensityToDensity",null),Dr=u5=d([N("esri.renderers.HeatmapRenderer")],Dr);let Mf=class extends yt(ve){constructor(){super(...arguments),this.color=new we([0,0,0,0]),this.label=null,this.threshold=0}};d([m({type:we,json:{write:!0}})],Mf.prototype,"color",void 0),d([m({type:String,json:{write:!0}})],Mf.prototype,"label",void 0),d([m({type:Number,range:{min:0,max:1},json:{write:!0}})],Mf.prototype,"threshold",void 0),Mf=d([N("esri.renderers.support.OthersCategory")],Mf);const Gke={base:Ts,key:"type",typeMap:{size:$t,opacity:Tc}};let Tn=class extends Tv(yt(ma)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new we([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Mf,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new Pi({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Qr)}getAttributeHash(){return this.visualVariables?.reduce((e,i)=>e+i.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Gs(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};d([m({type:[dre],json:{write:!0}})],Tn.prototype,"attributes",void 0),d([m(pN)],Tn.prototype,"backgroundFillSymbol",void 0),d([m({type:we,json:{write:!0}})],Tn.prototype,"defaultColor",void 0),d([m({type:String,json:{write:!0}})],Tn.prototype,"defaultLabel",void 0),d([m({type:Number,range:{min:0,max:1},json:{write:!0}})],Tn.prototype,"holePercentage",void 0),d([m({type:Mf,json:{write:!0}})],Tn.prototype,"othersCategory",void 0),d([m({type:fN,json:{write:!0}})],Tn.prototype,"legendOptions",void 0),d([m({type:Ui,json:{default:null,write:!0}})],Tn.prototype,"outline",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],Tn.prototype,"size",void 0),d([je({pieChart:"pie-chart"})],Tn.prototype,"type",void 0),d([m({types:[Gke]})],Tn.prototype,"visualVariables",void 0),Tn=d([N("esri.renderers.PieChartRenderer")],Tn);const n2={key:"type",base:ma,typeMap:{heatmap:Dr,simple:un,"unique-value":di,"class-breaks":fr,"dot-density":Mn,dictionary:Ao,"pie-chart":Tn},errorContext:"renderer"},qke={key:"type",base:ma,typeMap:{simple:un,"unique-value":di,"class-breaks":fr,heatmap:Dr},errorContext:"renderer",validate:Bke};function Bke(t){switch(t.type){case"simple":return Hke(t);case"unique-value":return Wke(t);case"class-breaks":return Zke(t);case"heatmap":return t}}function Hke(t){if(t.symbol)return t;le.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Wke(t){const e=t.uniqueValueInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||le.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.uniqueValueInfos=i),t}function Zke(t){const e=t.classBreakInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||le.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.classBreakInfos=i),t}function Yke(t,e){return kT(t,null,e)}const Jke=pv({types:n2});function kT(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i?.messages&&i.messages.push(new _a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Jke(t,e,i):null}var c5;let cs=c5=class extends Ld{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=gt("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());pn(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?kT(r,e,i)??void 0:Fie(e,i)}clone(){return new c5({fields:J(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:J(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:J(this.popupTemplate),renderer:J(this.renderer),binType:J(this.binType),size:this.size})}};d([je({binning:"binning"})],cs.prototype,"type",void 0),d([je({geohash:"geohash",square:"square"}),m({type:["geohash","square"]})],cs.prototype,"binType",void 0),d([m({type:Number,json:{write:!0}})],cs.prototype,"fixedBinLevel",void 0),d([m({type:[wi],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],cs.prototype,"labelingInfo",void 0),d([m(lE)],cs.prototype,"labelsVisible",void 0),d([m({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],cs.prototype,"maxScale",void 0),d([m(oE)],cs.prototype,"popupEnabled",void 0),d([m({type:wv,json:{name:"popupInfo",write:!0}})],cs.prototype,"popupTemplate",void 0),d([m({cast:t=>t==="auto"?t:an(gt(t))})],cs.prototype,"size",void 0),d([m({type:[Is],json:{write:!0}})],cs.prototype,"fields",void 0),d([Le("fields")],cs.prototype,"writeFields",null),d([m({types:n2,json:{write:{target:"drawingInfo.renderer"}}})],cs.prototype,"renderer",void 0),d([Ge("renderer",["drawingInfo.renderer"])],cs.prototype,"readRenderer",null),cs=c5=d([N("esri.layers.support.FeatureReductionBinning")],cs);var h5;function lq(t){return t.type==="simple"&&!t.visualVariables?.length}let mr=h5=class extends ve{constructor(t){super(t),this.type="cluster",this.clusterRadius=gt("80px"),this.clusterMinSize=gt("12px"),this.clusterMaxSize=gt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?lq(r)?null:kT(r,e,i)??void 0:Fie(e,i)}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&lq(r)?kT(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new un({symbol:t});e.drawingInfo={renderer:n.write({},r)}}}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());pn(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Is.fromJSON(r))}clone(){return new h5({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:J(this.labelingInfo),labelsVisible:this.labelsVisible,fields:J(this.fields),maxScale:this.maxScale,renderer:J(this.renderer),symbol:J(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:J(this.popupTemplate)})}};d([m({type:["cluster"],readOnly:!0,json:{write:!0}})],mr.prototype,"type",void 0),d([m({cast:t=>t==="auto"?t:an(gt(t)),json:{write:!0}})],mr.prototype,"clusterRadius",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],mr.prototype,"clusterMinSize",void 0),d([m({type:Number,cast:gt,json:{write:!0}})],mr.prototype,"clusterMaxSize",void 0),d([m({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],mr.prototype,"maxScale",void 0),d([m(oE)],mr.prototype,"popupEnabled",void 0),d([m({type:wv,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],mr.prototype,"popupTemplate",void 0),d([m({types:n2,json:{write:{target:"drawingInfo.renderer"}}})],mr.prototype,"renderer",void 0),d([Ge("renderer",["drawingInfo.renderer"])],mr.prototype,"readRenderer",null),d([m({types:JSe})],mr.prototype,"symbol",void 0),d([Ge("symbol",["drawingInfo.renderer"])],mr.prototype,"readSymbol",null),d([Le("symbol")],mr.prototype,"writeSymbol",null),d([m({type:[wi],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],mr.prototype,"labelingInfo",void 0),d([m(lE)],mr.prototype,"labelsVisible",void 0),d([m({type:[Is],json:{write:!0}})],mr.prototype,"fields",void 0),d([Le("fields")],mr.prototype,"writeFields",null),d([Ge("fields")],mr.prototype,"readFields",null),mr=h5=d([N("esri.layers.support.FeatureReductionCluster")],mr);var d5;let Pb=d5=class extends Ld{constructor(t){super(t),this.type="selection"}clone(){return new d5}};d([m({type:["selection"]})],Pb.prototype,"type",void 0),Pb=d5=d([N("esri.layers.support.FeatureReductionSelection")],Pb);const uq={key:"type",base:Ld,typeMap:{cluster:mr,binning:cs}},Xke={types:{key:"type",base:Ld,typeMap:{selection:Pb,cluster:mr,binning:cs}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:uq},"portal-item":{types:uq},"web-scene":{types:{key:"type",base:Ld,typeMap:{selection:Pb}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:br}}}}},Qke=()=>le.getLogger("esri.views.2d.layers.support.clusterUtils");X.add("esri-cluster-arcade-enabled",!0);const Kke=X("esri-cluster-arcade-enabled"),eRe=new Set(["simple-line","simple-fill","picture-fill"]);function cq(t,e){let i=e.clone();if(!tRe(i))return i;if(e.symbols.some(r=>eRe.has(r.type))&&(i=new un({symbol:new Pi})),i.authoringInfo||(i.authoringInfo=new Li),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=kp(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=J_(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=kp(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=kp(t,s.field,"avg","number"):s.valueExpression&&(s.field=J_(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=kp(t,r.field,"sum","number"):r.valueExpression&&(r.field=J_(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=kp(t,i.field,"mode","string"):i.valueExpression&&(i.field=J_(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=kp(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=kp(t,i.field,"avg","number"):i.valueExpression&&(i.field=J_(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const tRe=t=>{const e=i=>Qke().error(new G("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Kke){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function iRe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",n=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+iD(n)}}}function J_(t,e,i,r){const s=iD(e),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(a=>a.name===n)||t.push(new Is({name:n,isAutoGenerated:!0,onStatisticExpression:new fd({expression:e,returnType:r}),statisticType:i})),n}function kp(t,e,i,r,s){if(e==="cluster_count"||t.some(a=>a.name===e))return e;const n=iRe(i,e,s);return t.some(a=>a.name===n)||(i==="avg_norm"?t.push(new Is({name:n,isAutoGenerated:!0,onStatisticExpression:new fd({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new Is({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),n}const rRe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new EAe(this),this.addHandles(_e(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},no))}set featureReduction(r){const s=this._normalizeFeatureReduction(r);this._set("featureReduction",s)}set renderer(r){}_withClusterVariable(r,s,n){const a=r.clone();return"visualVariables"in a&&(a.visualVariables||(a.visualVariables=[]),a.visualVariables.some(o=>o.type==="size")||a.visualVariables.push(new $t({field:"cluster_count",stops:[new jo({value:1}),new jo({useMinValue:!0,size:s}),new jo({useMaxValue:!0,size:n})]}))),a}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const s=r.clone(),n=[new Is({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],a=(s.fields??[]).filter(v=>!v.isAutoGenerated),o=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:u,clusterMaxSize:h}=s;if(o){s.fields=[...n,...a];const v=this._withClusterVariable(s.renderer,u,h);return s.effectiveFeatureRenderer=v,s.effectiveClusterRenderer=v,s}if(r.symbol){if(s.fields=[...n,...a],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const v=cq(n,this.renderer),b=this._withClusterVariable(v,u,h),w="visualVariables"in b&&b.visualVariables?b.visualVariables:[],S=new un({symbol:r.symbol,visualVariables:w});return s.fields=[...n,...a],s.effectiveFeatureRenderer=b,s.effectiveClusterRenderer=S,s}if(!this.renderer)return r;const p=cq(n,this.renderer);s.fields=[...n,...a],s.renderer=p;const y=this._withClusterVariable(p,u,h);return s.effectiveFeatureRenderer=y,s.effectiveClusterRenderer=y,s}};return d([m({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),d([m(Xke)],i.prototype,"featureReduction",null),i=d([N("esri.layers.mixins.FeatureReductionLayer")],i),i},hq={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},dq={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},pq={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},sRe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":hq,"web-map/basemap-base-layers":dq,"web-map/tables":pq,"link-chart/operational-layers":{...hq,LinkChartLayer:!0},"link-chart/basemap-base-layers":dq,"link-chart/tables":pq,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Ere=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,s,n){return n?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,s,n,a){(a&&a.layerContainerType==="ground"||r&&yde(this,n,{},a))&&(s[n]=r)}writeOperationalLayerType(r,s,n){r&&(s[n]=r)}writeTitle(r,s){s.title=r??"Layer"}readVisibilityTimeExtent(r){return r?vr.fromArray(r):null}writeVisibilityTimeExtent(r,s,n,a){r&&a.layerContainerType!=="tables"&&(r.isEmpty?a?.messages&&a.messages.push(new G("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=r.toArray())}read(r,s){s&&(s.layer=this),pde(this,r,n=>super.read(r,n),s)}write(r,s){if(!this.persistenceEnabled&&!s?.ignorePersistenceEnabled)return null;if(s?.origin){const o=`${s.origin}/${s.layerContainerType||"operational-layers"}`;let h=!!sRe[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(h=!1),!h)return s.messages?.push(new G("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const n=super.write(r,{...s,layer:this}),a=!!s&&!!s.messages&&!!s.messages.filter(o=>o instanceof G&&o.name==="web-document-write:property-required").length;return nv(n?.url)?(s?.messages?.push(new G("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:n}beforeSave(){}};return d([m({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),d([Ge("id",["id"])],i.prototype,"readId",null),d([m(VAe)],i.prototype,"listMode",void 0),d([Le("listMode")],i.prototype,"writeListMode",null),d([m({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:br,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),d([Le("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),d([m(ET)],i.prototype,"opacity",void 0),d([m({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),d([m({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),d([Le("title"),Le(["web-scene"],"title")],i.prototype,"writeTitle",null),d([m({type:vr,json:{origins:{"web-scene":{write:{layerContainerTypes:br}}}}})],i.prototype,"visibilityTimeExtent",void 0),d([Ge("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),d([Le(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[bt,l3]]}})],i.prototype,"writeVisibilityTimeExtent",null),d([m({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:br}}})],i.prototype,"visible",void 0),i=d([N("esri.layers.mixins.OperationalLayer")],i),i};var p5;const Ex=new wt({asc:"ascending",desc:"descending"});var C0;let Tf=(C0=class extends ve{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new p5({field:this.field,valueExpression:this.valueExpression,order:this.order})}},p5=C0,C0);d([m({type:String,json:{write:!0}})],Tf.prototype,"field",void 0),d([m({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Tf.prototype,"valueExpression",void 0),d([m({type:Ex.apiValues,json:{type:Ex.jsonValues,read:Ex.read,write:Ex.write}})],Tf.prototype,"order",void 0),Tf=p5=d([N("esri.layers.support.OrderByInfo")],Tf);function nRe(t,e,i){if(!t)return null;const r=t.find(n=>!!n.field);if(!r)return null;const s=new Tf;return s.read(r,i),[s]}function aRe(t,e,i,r){const s=t.find(n=>!!n.field);s&&pn(i,[s.toJSON()],e)}const oRe={type:[Tf],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:nRe},write:{writer:aRe}}},lRe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return d([m(oRe)],i.prototype,"orderBy",void 0),i=d([N("esri.layers.mixins.OrderedLayer")],i),i};async function uRe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return If(t);const i=Ee.WGS84;return await gD(e,i),Jd(t,i)}function cRe(t,e){if(!Ob(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function Ob(t,e){return!!t.typeKeywords?.includes(e)}function wXe(t){return Ob(t,dRe.HOSTED_SERVICE)}function hRe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function SXe(t,e,i){i?cRe(t,e):hRe(t,e)}async function xXe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return uRe(i)}const dRe={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function pRe(t){const{portal:e,isOrgItem:i,itemControl:r}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),a=!!i&&!!s?.includes("features:user:fullEdit");const o=r==="update"||r==="admin";return o?a=n=!0:a&&(n=!0),{features:{edit:n,fullEdit:a},content:{updateItem:o}}}const Cre=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=xi(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,s,n){if(s.itemId)return new He({id:s.itemId,portal:n?.portal})}writePortalItem(r,s){r?.id&&(s.itemId=r.id)}async loadFromPortal(r,s){if(this.portalItem?.id)try{const{load:n}=await K(()=>import("./layersLoader-C7KQLO-f.js"),__vite__mapDeps([301,302]),import.meta.url);return Wt(s),await n({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},s)}catch(n){throw jr(n)||le.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(s=>(zn(s),!0)))}async setUserPrivileges(r,s){if(!Tt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:a},content:{updateItem:o}}=await this._fetchUserPrivileges(r,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",a),this._set("userHasUpdateItemPrivileges",o)}catch(n){zn(n)}}async _fetchUserPrivileges(r,s){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const a=!pt?.findCredential(this.url),o=r===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,a);let u,h;if(o)u=n.portal.url;else try{u=await J4(this.url,s)}catch(b){zn(b)}if(!u||!gue(u,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const b=s!=null?s.signal:null;h=await pt?.getCredential(`${u}/sharing`,{prompt:!1,signal:b})}catch(b){zn(b)}const p=!0,y=!1,v=!1;if(!h)return{features:{edit:p,fullEdit:y},content:{updateItem:v}};try{if(o?await n.reload():(n=new He({id:r,portal:{url:u}}),await n.load(s)),n.portal.user)return this._getUserPrivileges(n,a)}catch(b){zn(b)}return{features:{edit:p,fullEdit:y},content:{updateItem:v}}}_getUserPrivileges(r,s){const n=pRe(r);return s&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(r){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(r)}catch(n){zn(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const s=this.url?pt?.findCredential(this.url):null;if(!s)return!0;const n=Cx.credential===s?Cx.user:await this._fetchEditingUser(r);return Cx.credential=s,Cx.user=n,n?.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const s=this.portalItem?.portal?.user;if(s)return s;const n=pt?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const a=`${n.owningSystemUrl}/sharing/rest`,o=ge.getDefault();if(o&&o.loaded&&io(o.restUrl)===io(a))return o.user;const u=`${a}/community/self`,h=r!=null?r.signal:null,p=await c3(Ot(u,{authMode:"no-prompt",query:{f:"json"},signal:h}));return p.ok?Jt.fromJSON(p.value.data):null}read(r,s){s&&(s.layer=this),super.read(r,s)}write(r,s){const n=s?.portal,a=this.portalItem?.id&&(this.portalItem.portal||ge.getDefault());return n&&a&&!yH(a.restUrl,n.restUrl)?(s.messages&&s.messages.push(new G("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...s,layer:this})}};return d([m({type:He})],i.prototype,"portalItem",null),d([Ge("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),d([Le("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),d([m({clonable:!1})],i.prototype,"resourceReferences",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),d([m({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=d([N("esri.layers.mixins.PortalLayer")],i),i},Cx={credential:null,user:null},Sd=new $e,kb=new WeakMap;function fRe(t){yRe(t)&&Sd.push(new WeakRef(t))}function mRe(t){const e=Sd.find(i=>i.deref()===t);e&&Sd.remove(e)}function yRe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Ire(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Ire(e,t%e):0}let $A=0,Ix=0;function gRe(){const t=Date.now();let e=!1;for(const i of Sd){const r=i.deref();r?r.refreshInterval&&t-(kb.get(r)??0)+5>=6e4*r.refreshInterval&&(kb.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Sd.length-1;i>=0;i--)Sd.at(i).deref()||Sd.removeAt(i)}lW(()=>{const t=Date.now();let e=0;for(const i of Sd){const r=i.deref();r&&(e=Ire(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?kb.get(r)||kb.set(r,t):kb.delete(r))}if(e!==Ix){if(Ix=e,clearInterval($A),Ix===0)return void($A=0);$A=setInterval(gRe,Ix)}},no);const fq=.1,vRe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Aw(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||fRe(this)},()=>{})}destroy(){mRe(this)}castRefreshInterval(r){return r>=fq?r:r<=0?0:fq}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){L0(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:s})},s=>{le.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return d([m({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:br}}}}})],i.prototype,"refreshInterval",void 0),d([Nt("refreshInterval")],i.prototype,"castRefreshInterval",null),d([m({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),d([m({readOnly:!0})],i.prototype,"refreshParameters",null),i=d([N("esri.layers.mixins.RefreshableLayer")],i),i},Lre=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s?.effectiveScaleRange!==void 0&&_Re(r,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return d([m({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),d([m({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),d([m({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=d([N("esri.layers.mixins.ScaleRangeLayer")],i),i};function _Re(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const Are=es()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Oc=class extends yt(ve){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return IY(this.value,this.unit,"milliseconds")}};d([je(Are,{nonNullable:!0})],Oc.prototype,"unit",void 0),d([m({type:Number,json:{write:!0},nonNullable:!0})],Oc.prototype,"value",void 0),Oc=d([N("esri.time.TimeInterval")],Oc);function mq(t,e){return Oc.fromJSON({value:t,unit:e})}let ls=class extends yt(ve){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?vr.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){e?.start!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?mq(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?mq(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};d([m({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ls.prototype,"cumulative",void 0),d([m({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ls.prototype,"endField",void 0),d([m({type:vr,json:{write:{enabled:!0,allowNull:!0}}})],ls.prototype,"fullTimeExtent",void 0),d([Ge("fullTimeExtent",["timeExtent"])],ls.prototype,"readFullTimeExtent",null),d([Le("fullTimeExtent")],ls.prototype,"writeFullTimeExtent",null),d([m({type:Boolean,json:{write:!0}})],ls.prototype,"hasLiveData",void 0),d([m({type:Oc,json:{write:{enabled:!0,allowNull:!0}}})],ls.prototype,"interval",void 0),d([Ge("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ls.prototype,"readInterval",null),d([Le("interval")],ls.prototype,"writeInterval",null),d([m({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ls.prototype,"startField",void 0),d([m(gY("timeReference",!0))],ls.prototype,"timeZone",void 0),d([m({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ls.prototype,"trackIdField",void 0),d([m({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ls.prototype,"useTime",void 0),d([m({type:[Date],json:{read:!1}})],ls.prototype,"stops",void 0),ls=d([N("esri.layers.support.TimeInfo")],ls);const bRe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:br}}},wRe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,s){const n=s.timeInfo.exportOptions;if(!n)return null;const a=n.timeOffset,o=Are.fromJSON(n.timeOffsetUnits);return a&&o?new Oc({value:a,unit:o}):null}set timeInfo(r){bQ(r,this.fieldsIndex),this._set("timeInfo",r)}};return d([m({type:vr,json:{write:!1}})],i.prototype,"timeExtent",void 0),d([m({type:Oc})],i.prototype,"timeOffset",void 0),d([Ge("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),d([m({value:null,type:ls,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),d([m(bRe)],i.prototype,"useViewTime",void 0),i=d([N("esri.layers.mixins.TemporalLayer")],i),i};let SRe=class extends hw{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[Zw](){return this.trackInfoProvider.trackInfo}},Ya=class extends yt(ve){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};d([m({type:[wi],json:{write:!0}})],Ya.prototype,"labelingInfo",void 0),d([m(lE)],Ya.prototype,"labelsVisible",void 0),d([m({types:n2,json:{write:!0}})],Ya.prototype,"renderer",void 0),d([m({type:Boolean,json:{write:!0}})],Ya.prototype,"visible",void 0),Ya=d([N("esri.layers.support.TrackPartInfo")],Ya);let En=class extends yt(ve){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Ya({renderer:new un({symbol:CT.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Ya({renderer:new un({symbol:CT.clone()})}),this.trackLines=new Ya({renderer:new un({symbol:dE.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const s=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());pn(r,s,i)}};d([m({type:Boolean,json:{write:!0}})],En.prototype,"enabled",void 0),d([m({type:[Is],json:{write:!0}})],En.prototype,"fields",void 0),d([Le("fields")],En.prototype,"writeFields",null),d([m({type:Ya,json:{write:!0}})],En.prototype,"latestObservations",void 0),d([m({type:Oc,json:{write:!0}})],En.prototype,"maxDisplayDuration",void 0),d([m({type:Number,json:{write:!0}})],En.prototype,"maxDisplayObservationsPerTrack",void 0),d([m(oE)],En.prototype,"popupEnabled",void 0),d([m({type:wv,json:{name:"popupInfo",write:!0}})],En.prototype,"popupTemplate",void 0),d([m({type:Ya,json:{write:!0}})],En.prototype,"previousObservations",void 0),d([m({type:Ya,json:{write:!0}})],En.prototype,"trackLines",void 0),d([m({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],En.prototype,"timeField",void 0),En=d([N("esri.layers.support.TrackInfo")],En);const xRe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new SRe(this),this.trackInfo=null}};return d([m({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),d([m({type:En})],i.prototype,"trackInfo",void 0),i=d([N("esri.layers.mixins.TrackableLayer")],i),i},yq=new wt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Kh=class extends yt(ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};d([m({json:{write:!0}})],Kh.prototype,"name",void 0),d([m({json:{write:!0}})],Kh.prototype,"description",void 0),d([m({json:{read:yq.read,write:yq.write}})],Kh.prototype,"drawingTool",void 0),d([m({json:{write:!0}})],Kh.prototype,"prototype",void 0),d([m({json:{write:!0}})],Kh.prototype,"thumbnail",void 0),Kh=d([N("esri.layers.support.FeatureTemplate")],Kh);function $Re(){return{fields:{type:[Nr],value:null,set:function(t){if(t&&X("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");le.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return mw.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||le.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return F3(this.fieldsIndex,t)}}}}const MA=()=>le.getLogger("esri.layers.support.labelingInfo"),MRe=/\[([^[\]]+)\]/gi;function TRe(t,e,i){return t?t.map(r=>{const s=new wi;if(s.read(r,i),s.labelExpression){const n=e.fields||e.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(MRe,(a,o)=>`[${ERe(o,n)}]`)}return s}):null}function ERe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const gq=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],CRe={esriGeometryPoint:gq,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:gq,esriGeometryEnvelope:null};function LXe(t,e){const i=[];for(const r of t){const s=r.labelPlacement,n=CRe[e];if(!r.symbol)return MA().warn("No ILabelClass symbol specified."),[];if(!n)return MA().error(new G("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))i.push(r);else{const a=n[0];s&&MA().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${a}`);const o=r.clone();o.labelPlacement=a,i.push(o)}}return i}function IRe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},n){if(!i)return null;const a=ORe({editFieldsInfo:e,fields:i,objectIdField:r},n);if(!a.length)return null;const o=DRe({titleBase:s,fields:i,displayField:t}),u=RRe();return new wv({title:o,content:u,fieldInfos:a})}const LRe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):y2e(t,e);function ARe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(PRe),t}function PRe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:vq(t)?-1:vq(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function ORe(t,e){const i=e?.visibleFieldNames;return ARe({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||NRe,sortDisabled:e?.sortDisabled}).map(r=>new CD({fieldName:r.name,isEditable:m2e(r,t),label:r.alias,format:kRe(r),visible:LRe(r,{...t,visibleFieldNames:i})}))}function kRe(t){switch(t.type){case"small-integer":case"integer":return new hu({digitSeparator:!0,places:0});case"single":case"double":return new hu({digitSeparator:!0,places:2});case"string":return D2e(t.name)?new hu({digitSeparator:!0,places:0}):void 0;default:return}}function RRe(){return[new Y0,new Z0]}function DRe(t){const e=n2e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function vq(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const NRe=["geometry","blob","raster","guid","xml"],_q=$Re();let mt=class extends lRe(wAe(hAe(rRe(TAe(cie(wRe(xRe(Lre(vRe(Ere(Cre(nN(bi))))))))))))){constructor(e){super(e),this.attributeTableTemplate=null,this.copyright=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new LLe(this),this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new sf({layer:this}),this.spatialReference=Ee.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson"}destroy(){this.source?.destroy()}load(e){const i=this.loadFromPortal({supportedTypes:["GeoJson"],supportsData:!1},e).catch(zn).then(()=>this.source.load(e)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),iU(this.renderer,this.fieldsIndex),bQ(this.timeInfo,this.fieldsIndex)});return this.addResolvingPromise(i),Promise.resolve(this)}set portalItem(e){super.portalItem=e}set timeInfo(e){super.timeInfo=e}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return Lr(this.url)}set renderer(e){iU(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const i=Lr(e);this._set("url",i.path),i.query&&(this.customParameters={...this.customParameters,...i.query})}async applyEdits(e,i){const{applyEdits:r}=await K(()=>import("./editingSupport-CZkQuNl9.js"),__vite__mapDeps([300,163,169]),import.meta.url);await this.load();const s=await r(this,this.source,e,i);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),s}createPopupTemplate(e){return IRe(this,e)}createQuery(){const e=new Re,i=this.capabilities?.data;e.returnGeometry=!0,i&&i.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:s}=this;return e.timeExtent=r!=null&&s!=null?s.offset(-r.value,r.unit):s||null,e}getFieldDomain(e,i){return this.getField(e)?.domain}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,i){return this.load().then(()=>this.source.queryFeatures(Re.from(e)||this.createQuery(),i)).then(r=>{if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=this,s.origin=this.graphicOrigin;return r})}queryObjectIds(e,i){return this.load().then(()=>this.source.queryObjectIds(Re.from(e)||this.createQuery(),i))}queryFeatureCount(e,i){return this.load().then(()=>this.source.queryFeatureCount(Re.from(e)||this.createQuery(),i))}queryExtent(e,i){return this.load().then(()=>this.source.queryExtent(Re.from(e)||this.createQuery(),i))}async queryAttributeBins(e,i){const{source:r,capabilities:s}=await this.load();YPe(e,s,"GeoJSONLayer");const n=await K(()=>import("./AttributeBinsQuery-DLbLEKO_.js"),__vite__mapDeps([228,29,35]),import.meta.url),a=await r.queryAttributeBins(n.default.from(e),i);if(a.features)for(const o of a.features)o.layer=o.sourceLayer=this;return a}async hasDataChanged(){try{const{dataChanged:e,updates:i}=await this.source.refresh(this.customParameters);return i!=null&&this.read(i,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}};d([m(jAe)],mt.prototype,"attributeTableTemplate",void 0),d([m({readOnly:!0,json:{read:!1,write:!1}})],mt.prototype,"capabilities",null),d([m({type:String})],mt.prototype,"copyright",void 0),d([m({readOnly:!0})],mt.prototype,"createQueryVersion",null),d([m(gY("dateFieldsTimeReference"))],mt.prototype,"dateFieldsTimeZone",void 0),d([m({readOnly:!0})],mt.prototype,"defaultPopupTemplate",null),d([m({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],mt.prototype,"definitionExpression",void 0),d([m({type:String})],mt.prototype,"displayField",void 0),d([m({type:Boolean})],mt.prototype,"editingEnabled",void 0),d([m(zAe)],mt.prototype,"elevationInfo",void 0),d([m({type:[Nr],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],mt.prototype,"fields",void 0),d([m(_q.fieldsIndex)],mt.prototype,"fieldsIndex",void 0),d([m({type:at,json:{name:"extent"}})],mt.prototype,"fullExtent",void 0),d([m({type:["point","polygon","polyline","multipoint"],json:{read:{reader:vD.read}}})],mt.prototype,"geometryType",void 0),d([m({readOnly:!0,clonable:!1})],mt.prototype,"graphicOrigin",void 0),d([m({type:Boolean})],mt.prototype,"hasZ",void 0),d([m(FAe)],mt.prototype,"id",void 0),d([m({type:Boolean,readOnly:!0})],mt.prototype,"isTable",null),d([m(lE)],mt.prototype,"labelsVisible",void 0),d([m({type:[wi],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:TRe},write:!0}})],mt.prototype,"labelingInfo",void 0),d([m(NAe)],mt.prototype,"legendEnabled",void 0),d([m({type:["show","hide"]})],mt.prototype,"listMode",void 0),d([m({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],mt.prototype,"objectIdField",void 0),d([m(ET)],mt.prototype,"opacity",void 0),d([m({type:["GeoJSON"]})],mt.prototype,"operationalLayerType",void 0),d([m(_q.outFields)],mt.prototype,"outFields",void 0),d([m({readOnly:!0})],mt.prototype,"parsedUrl",null),d([m(oE)],mt.prototype,"popupEnabled",void 0),d([m({type:wv,json:{name:"popupInfo",write:!0}})],mt.prototype,"popupTemplate",void 0),d([m({types:n2,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:qke}}}})],mt.prototype,"renderer",null),d([m(RAe)],mt.prototype,"screenSizePerspectiveEnabled",void 0),d([m({readOnly:!0})],mt.prototype,"source",void 0),d([m({type:Ee})],mt.prototype,"spatialReference",void 0),d([m({type:[Kh]})],mt.prototype,"templates",void 0),d([m()],mt.prototype,"title",void 0),d([m({json:{read:!1},readOnly:!0})],mt.prototype,"type",void 0),d([m(DAe)],mt.prototype,"url",null),mt=d([N("esri.layers.GeoJSONLayer")],mt);const hc=mt,zRe=Object.freeze(Object.defineProperty({__proto__:null,default:hc},Symbol.toStringTag,{value:"Module"})),Va="esri-layer-list",Hu=`${Va}__item`,X_={base:Va,actionMenu:`${Va}__action-menu`,actionGroup:`${Va}__action-group`,filterNoResults:`${Va}__filter-no-results`,item:Hu,itemActive:`${Hu}--active`,itemContentBottom:`${Hu}-content-bottom`,itemMessage:`${Hu}-message`,itemActionIcon:`${Hu}-action-icon`,itemActionImage:`${Hu}-action-image`,itemTemporaryIcon:`${Hu}-temporary-icon`,itemTableIcon:`${Hu}-table-icon`,itemCatalogIcon:`${Hu}-catalog-icon`,statusIndicator:`${Va}__status-indicator`,publishing:`${Va}__publishing`,updating:`${Va}__updating`,connectionStatus:`${Va}__connection-status`,connectionStatusConnected:`${Va}__connection-status--connected`,visibleToggle:`${Va}__visible-toggle`,visibleIcon:`${Va}__visible-icon`},PXe=()=>Yc({action:()=>K(()=>import("./index-ARj2DFlA.js"),__vite__mapDeps([303,287,288,289,290,291,292,293,304,294,297,299,296]),import.meta.url)});function OXe(t,e,i){const{title:r,textEnabled:s}=e,{type:n,active:a,uid:o,disabled:u,indicator:h}=t;return t.visible?F("calcite-action",{...e,active:n==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":o,disabled:u,icon:f5(t),indicator:h,loading:a,scale:"s",text:r??"",title:s?void 0:r},i):null}function f5(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function FRe(t){return t?{backgroundImage:`url(${t})`}:{}}function kXe({action:t,feature:e}){const i=e?.attributes,r="image"in t?t.image:void 0;return r&&i?Gc(r,i):r??""}const Pre={hide:"hide",hideChildren:"hide-children"},VRe=10,jRe=2;function URe({exclusive:t,visible:e,visibilityAppearance:i}){const r=i==="checkbox";return e?t?"circle-f":r?"check-square-f":"view-visible":t?"circle":r?"square":"view-hide"}function GRe({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function qRe(t){return t?.listMode===Pre.hideChildren}function RT(t){return t?.listMode??void 0}function BRe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function HRe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function WRe(t){if(!t)return"inherited";const e=e5e($N(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function ZRe(t){t?.removeMany(t.filter(e=>e?.destroyed))}function Ore(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function YRe(t,e){t&&(t.filterPredicate=e?i=>e(Ro(i)):void 0)}function JRe(t){const e=(t?.layer&&$N(t.layer)?t.layer.layer:void 0)??t?.layer;return!!e&&e.type!=="catalog"&&(t5e(e)??!0)}function XRe(t){return RT(t)!==Pre.hide}function QRe(t,e){if(!t||e==null||isNaN(e))return!1;const i=BRe(t),r=HRe(t),s=i!=null&&!isNaN(i)&&i>0&&e>i,n=r!=null&&!isNaN(r)&&r>0&&e<r;return s||n}function kre(t,e){t?.sort((i,r)=>{const s="uid"in i?e.indexOf(i.uid):-1,n="uid"in r?e.indexOf(r.uid):-1;return s>n?-1:s<n?1:0})}function KRe(t,e){const i=t?.layer;if(!i)return;const r=Ore(i);if(!r)return;let s;r==="layers"&&"layers"in i?s=i.layers:r==="sublayers"&&"sublayers"in i&&(s=i.sublayers),kre(s,e)}function bq(t){const e=t?.layer;return e&&"layers"in e?e.layers:null}function $N(t){return t!=null&&"layer"in t&&t.layer!=null}function e5e(t){const e=Rre(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function t5e(t){const e=Rre(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function Rre(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function Ro(t){return t?.["data-item"]}function wq(t){return t?.getAttribute("data-layer-type")}function i5e(t){const{children:e,error:i}=t,r="incompatible"in t&&t.incompatible;return!!e?.filter(s=>!s.hidden).length&&!i&&!r}function r5e(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}var m5,im;let rt=(im=class extends Wi{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=i=>{this.item.actionsOpen=i.currentTarget.open},this._setTooltipReference=i=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,i)},this._removeTooltipReference=()=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,null)}}loadDependencies(){return Yc({"action-group":()=>K(()=>import("./index-DCCUQuut.js").then(e=>e.i),__vite__mapDeps([305,287,288,289,290,291,292,293,303,304,294,297,299,296,306,307,308,309,295,310,311,312,313,314]),import.meta.url),"action-menu":()=>K(()=>import("./index-_yu3e8mG.js").then(e=>e.i),__vite__mapDeps([313,287,288,289,290,291,292,293,303,304,294,297,299,296,306,307,308,309,295,310,311,312,314]),import.meta.url),action:()=>K(()=>import("./index-ARj2DFlA.js"),__vite__mapDeps([303,287,288,289,290,291,292,293,304,294,297,299,296]),import.meta.url),icon:()=>K(()=>import("./index-CgzgUqVR.js").then(e=>e.i),__vite__mapDeps([291,292,288,293]),import.meta.url),"list-item":()=>K(()=>import("./index-DDSQx9he.js"),__vite__mapDeps([315,291,292,288,293,316,294,307,308,297,312,309,317,299,290,287,289,303,304,296,318,319,320,321,322]),import.meta.url),list:()=>K(()=>import("./index-CgKu5SLQ.js"),__vite__mapDeps([323,287,288,289,290,324,294,293,292,304,291,325,326,327,295,296,297,312,298,299,328,308,321]),import.meta.url),notice:()=>K(()=>import("./index-cQFjWTJj.js"),__vite__mapDeps([329,291,292,288,293,294,309,299,290,289]),import.meta.url)})}render(){const e=this.parentTitles??[],{_title:i,item:r,activeItem:s,selectionMode:n,selectedItems:a,messages:o,parent:u,css:h,dragDisabled:p}=this,y="visibleAtCurrentTimeExtent"in r&&"layerInvisibleAtTime"in o&&!r.visibleAtCurrentTimeExtent?`${i} (${o.layerInvisibleAtTime})`:"visibleAtCurrentScale"in r&&"layerInvisibleAtScale"in o&&!r.visibleAtCurrentScale?`${i} (${o.layerInvisibleAtScale})`:i,v="parent"in r&&r.parent?.layer?.type==="catalog",{layer:b}=r,w="visibleAtCurrentScale"in r&&!r.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in r&&!r.visibleAtCurrentTimeExtent;return F("calcite-list-item",{afterCreate:S=>this._focusSelectedDragEl(S,r),afterUpdate:S=>this._focusSelectedDragEl(S,r),class:this.classes(h.item,"itemActive"in h&&{[h.itemActive]:s===r}),"data-item":r,"data-layer-id":b?.id,dragDisabled:!r.sortable||v||p,expanded:"open"in r&&r.open,id:b?.uid,key:`list-item-${b?.uid}`,label:i,metadata:{parentTitles:e,_title:i},selected:n!=="none"&&a.includes(r),title:y,unavailable:w,value:b?.uid,onCalciteListItemSelect:S=>"visible"in r&&this._handleCalciteListItemSelect(S,r,u),onCalciteListItemToggle:S=>"open"in r&&this._handleCalciteListItemToggle(S,r)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:i,visibleElements:r,css:s}=this;if(!r.statusIndicators)return null;const{publishing:n}=e,a="updating"in e&&e.updating&&!i,o="connectionStatus"in e?e.connectionStatus:void 0,u=!!o;return F("calcite-icon",{class:this.classes(s.statusIndicator,{[s.publishing]:n},"updating"in s&&{[s.updating]:a},"connectionStatus"in s&&{[s.connectionStatus]:u},"connectionStatusConnected"in s&&{[s.connectionStatusConnected]:u&&o==="connected"}),icon:GRe({connectionStatus:o,publishing:n}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:i,css:r}=this,{layer:s}=e,n="temporaryLayerIndicators"in i&&i.temporaryLayerIndicators,a="temporaryTableIndicators"in i&&i.temporaryTableIndicators,o=s&&"persistenceEnabled"in s&&(Y4(s)||!s.persistenceEnabled);return(n||a)&&o?F("calcite-icon",{class:r.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{_title:e,item:i,parent:r,messages:s,visibilityAppearance:n,css:a}=this;if(!("visible"in i&&"layerVisibility"in s&&"showLayer"in s&&"hideLayer"in s&&"visibleToggle"in a&&n))return null;const{visible:o}=i,u=this._getParentVisibilityMode(r);if(u==="inherited")return null;const h=URe({visible:o,exclusive:u==="exclusive",visibilityAppearance:n}),p=n==="checkbox",y=s.layerVisibility,v=Gc(o?s.hideLayer:s.showLayer,{layerName:e});return F("calcite-action",{appearance:"transparent",class:a.visibleToggle,icon:p?h:void 0,key:"visibility-toggle",label:v,onclick:()=>this._toggleVisibility(i,r),scale:"s",slot:p?"actions-start":"actions-end",text:y,title:v},p?null:F("calcite-icon",{class:this.classes({[a.visibleIcon]:u!=="exclusive"&&o}),icon:h,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!e?.open||e.disabled||e.flowEnabled?null:F("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!e?.visible)return null;const{open:i,title:r,disabled:s}=e;return F("calcite-action",{active:i,appearance:"transparent",disabled:s,icon:f5(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:r??"",title:r??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:i}=this,r=i.options;return F("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:i.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},F("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:r,title:r}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>F("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(i=>this._renderAction({action:i,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,i=this.item.layer,r=i?.type==="catalog-footprint",s=i?.type==="sublayer"&&Kj(i,"footprints");return"itemCatalogIcon"in e&&(r||s)?F("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,i=this.item.layer,r=i?.type==="catalog-dynamic-group",s=i?.type==="sublayer"&&Kj(i,"layers-in-view");return"itemCatalogIcon"in e&&(r||s)?F("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:i,visibleElements:r}=this;if(!("visible"in i))return;const{layer:s}=i,n=s?.type==="catalog-dynamic-group";return"catalogLayerList"in r&&r.catalogLayerList&&n?F("calcite-action",{appearance:"transparent",disabled:!s.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(i),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:i,rootGroupUid:r,listModeDisabled:s,selectionMode:n,displayMode:a}=this;if(!("children"in i))return;const o=[...this.parentTitles??[],i.title],{children:u,layer:h}=i,p=h?.type!=="catalog-dynamic-group"&&i5e(i),y=!s&&qRe(h),v=h?.type==="group",b=!y&&!p&&e&&v,w=!!e&&"childrenSortable"in i&&i.childrenSortable&&JRe(i);return p||b?F("calcite-list",{canPull:S=>!!this.canMove&&this.canMove(S,"pull"),canPut:S=>!!this.canMove&&this.canMove(S,"put"),"data-item":i,"data-layer-type":r,displayMode:a,dragEnabled:w,group:v?r:`${r}-${h?.uid}`,key:`child-list-${h?.uid}`,label:i.title,selectionAppearance:"border",selectionMode:n},u?.filter(S=>!S.hidden&&(this.visibleElements.errors||!S.error)).toArray().map(S=>this._renderItem(S,i,o)),this._renderedTablesItem):null}get _hasTables(){const{layerTablesEnabled:e}=this,i=this.item.layer;if(!e||!i)return!1;switch(i.type){case"knowledge-graph":return e.includes(i.type)&&"tables"in i&&!!i.tables?.length;case"map-image":case"tile":return e.includes(i.type)&&"subtables"in i&&!!i.subtables?.length;default:return!1}}get _renderedTablesItem(){const{item:e,messages:i,css:r}=this,{layer:s}=e;return"itemTableIcon"in r&&"visible"in e&&"tables"in i&&this._hasTables?F("calcite-list-item",{class:r.item,"data-layer-id":s?.id,dragDisabled:!0,key:`list-item-table-list-tables-${s?.uid}`,label:i.tables,title:i.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},F("calcite-icon",{class:r.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),F("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:i,css:r}=this;return e.error?F("div",{class:r.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},F("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},F("div",{slot:"message"},"tableError"in i?i.tableError:i.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in i?F("div",{class:r.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},F("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},F("div",{slot:"message"},i.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:r5e(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(i=>i.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,i)=>e+i.length,0)}_renderAction(e){const{item:i}=this,{action:r,textEnabled:s}=e;if(!r)return null;const{active:n,disabled:a,title:o,type:u,indicator:h}=r;return F("calcite-action",{active:u==="toggle"&&r.value,appearance:"transparent","data-action-id":r.id,disabled:a,icon:f5(r),indicator:h,key:`action-${r.uid}`,loading:n,onclick:()=>this._triggerAction(i,r),scale:"s",slot:s?void 0:"actions-end",text:o??"",textEnabled:s,title:o??void 0},this._renderFallbackIcon(r))}_renderFallbackIcon(e){const{css:i}=this,{icon:r}=e,s="className"in e?e.className:void 0;if(r)return null;const n="image"in e?e.image:void 0,a={[i.itemActionIcon]:!!s,[i.itemActionImage]:!!n};return s&&(a[s]=!0),n||s?F("span",{"aria-hidden":"true",class:this.classes(i.itemActionIcon,a),key:"icon",styles:FRe(n)}):null}_renderItem(e,i,r=[]){return F(m5,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,i){i&&e&&(i.type==="toggle"&&(i.value=!i.value),this.onAction(i,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){e&&this.onCatalogOpen?.(e)}_focusSelectedDragEl(e,i){this.selectedDragItemLayerUid===i.layer?.uid&&(Eb(e),this.onSelectedDragItemLayerUidChange?.(null))}_handleCalciteListItemToggle(e,i){e.stopPropagation(),i.open=e.target.expanded}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,i,r){if(Ro(e.target)!==i)return;const s=this._getParentVisibilityMode(r);this.selectionMode==="none"&&s!=="inherited"&&this._toggleVisibility(i,r)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,i){!e||!("visible"in e)||this._getParentVisibilityMode(i)==="exclusive"&&e.visible||(e.visible=!e.visible)}},m5=im,im.vnodeSelector="calcite-list-item",im);d([m()],rt.prototype,"activeItem",void 0),d([m()],rt.prototype,"canMove",void 0),d([m()],rt.prototype,"css",void 0),d([m()],rt.prototype,"displayMode",void 0),d([m()],rt.prototype,"dragEnabled",void 0),d([m()],rt.prototype,"dragDisabled",void 0),d([m()],rt.prototype,"item",void 0),d([m()],rt.prototype,"layerTablesEnabled",void 0),d([m()],rt.prototype,"listModeDisabled",void 0),d([m()],rt.prototype,"messages",void 0),d([m()],rt.prototype,"messagesCommon",void 0),d([m()],rt.prototype,"onAction",void 0),d([m()],rt.prototype,"onPanelOpen",void 0),d([m()],rt.prototype,"onCatalogOpen",void 0),d([m()],rt.prototype,"onTablesOpen",void 0),d([m()],rt.prototype,"onSelectedDragItemLayerUidChange",void 0),d([m()],rt.prototype,"onTooltipReferenceChange",void 0),d([m()],rt.prototype,"parent",void 0),d([m()],rt.prototype,"parentTitles",void 0),d([m()],rt.prototype,"rootGroupUid",void 0),d([m()],rt.prototype,"selectionMode",void 0),d([m()],rt.prototype,"selectedItems",void 0),d([m()],rt.prototype,"selectedDragItemLayerUid",void 0),d([m()],rt.prototype,"visibleElements",void 0),d([m()],rt.prototype,"visibilityAppearance",void 0),d([m()],rt.prototype,"_title",null),d([m()],rt.prototype,"_renderedItemStatus",null),d([m()],rt.prototype,"_renderedItemTemporaryIcon",null),d([m()],rt.prototype,"_renderedItemToggle",null),d([m()],rt.prototype,"_renderedPanel",null),d([m()],rt.prototype,"_renderedPanelAction",null),d([m()],rt.prototype,"_renderedActions",null),d([m()],rt.prototype,"_renderedActionMenu",null),d([m()],rt.prototype,"_renderedActionMenuContent",null),d([m()],rt.prototype,"_renderedCatalogFootprintIcon",null),d([m()],rt.prototype,"_renderedCatalogDynamicIcon",null),d([m()],rt.prototype,"_renderedCatalogSelectNode",null),d([m()],rt.prototype,"_renderedChildList",null),d([m()],rt.prototype,"_hasTables",null),d([m()],rt.prototype,"_renderedTablesItem",null),d([m()],rt.prototype,"_renderedItemMessage",null),d([m()],rt.prototype,"_singleAction",null),d([m()],rt.prototype,"_filteredSections",null),d([m()],rt.prototype,"_actionsCount",null),rt=m5=d([N("esri.widgets.LayerList.LayerListItem")],rt);const s5e=rt;function DT(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}function n5e(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames;t=Array.isArray(t)?t:a5e(t),i.push(...t)}}function a5e(t){return t.split(",").map(e=>e.trim())}function y5(t){return t&&typeof t.render=="function"}function o5e(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let xs=class extends $m(Wi){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([_e(()=>this._canCreateLegend,()=>this._createLegend(),Lt),_e(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Lt)])}destroy(){this._legend=xi(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e?.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const i=$N(e)?e:null,r=e?.parent,s=r!=null&&"type"in r&&r.type==="map-image"?i?.source:null,n="";return s&&r?{layer:r,title:n,sublayerIds:[s.mapLayerId]}:{layer:e,title:n}}get disabled(){const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!i.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return F("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:s}=this;return e&&!r&&s?e==="legend"&&i?F("div",{key:"legend-widget"},i.render()):typeof e=="string"?F("div",{innerHTML:e,key:e}):y5(e)?F("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?F("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(xi(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await K(()=>Promise.resolve().then(()=>G8e),void 0,import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:y5(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};d([m()],xs.prototype,"_legend",void 0),d([m()],xs.prototype,"_canCreateLegend",null),d([m()],xs.prototype,"_legendOptions",null),d([m()],xs.prototype,"_legendLayerInfo",null),d([m()],xs.prototype,"content",void 0),d([m()],xs.prototype,"disabled",null),d([m()],xs.prototype,"flowEnabled",void 0),d([m()],xs.prototype,"icon",null),d([m()],xs.prototype,"image",void 0),d([m()],xs.prototype,"listItem",void 0),d([m()],xs.prototype,"open",void 0),d([m()],xs.prototype,"title",null),d([m()],xs.prototype,"visible",void 0),xs=d([N("esri.widgets.LayerList.ListItemPanel")],xs);const Dre=xs;var Z1;const l5e=$e.ofType({key:"type",defaultKeyValue:"button",base:B3,typeMap:{button:tK,toggle:iK}}),Nre=$e.ofType(l5e),TA="layer",Lx="child-list-mode",u5e="hide";let Yt=Z1=class extends $m(Ce){constructor(t){super(t),this.actionsSections=new Nre,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new($e.ofType(Z1)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([_e(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),Lt),_e(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Lt),_e(()=>this.view,t=>this._updateChildrenView(t),Lt),_e(()=>this.panel,t=>this._setListItemOnPanel(t),Lt)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}set panel(t){const e=this._get("panel");t!==e&&t&&e?.destroy(),this._set("panel",t)}castPanel(t){return this.panel?.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new Dre(t):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=Rs(this,"layer.layer");return(!t||t&&Rs(this,"layer.layer.loaded"))&&Rs(this,"layer.title")||Rs(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&t.publishingInfo?.status==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:i?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!QRe(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return WRe(this.layer)}clone(){return new Z1({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){this.children?.forEach(e=>e.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(s=>!i.some(n=>n.layer===s));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!!r.layer&&!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(Lx),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(Lx),this.listModeDisabled||this.addHandles(t.toArray().map(e=>_e(()=>e.listMode,()=>this._compileChildren(t))),Lx)}_compileChildren(t){const e=this.listModeDisabled?t:t?.filter(i=>RT(i)!==u5e);t?.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),TA)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||XRe(i)?new Z1({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Qr)}_watchLayerProperties(t){if(this.removeHandles(TA),this.removeHandles(Lx),!t)return;if((!this.listModeDisabled&&RT(t))==="hide-children")return void this.children.destroyAll();const e=Ore(t);e&&this.addHandles(_e(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Lt),TA)}};d([m({type:Nre})],Yt.prototype,"actionsSections",void 0),d([m()],Yt.prototype,"actionsOpen",void 0),d([m()],Yt.prototype,"checkPublishStatusEnabled",void 0),d([m({type:$e.ofType(Yt)})],Yt.prototype,"children",void 0),d([m()],Yt.prototype,"childrenSortable",void 0),d([m({readOnly:!0})],Yt.prototype,"connectionStatus",null),d([m({readOnly:!0})],Yt.prototype,"error",null),d([m()],Yt.prototype,"hidden",void 0),d([m({readOnly:!0})],Yt.prototype,"incompatible",null),d([m()],Yt.prototype,"layer",void 0),d([m({readOnly:!0})],Yt.prototype,"layerView",null),d([m()],Yt.prototype,"listItemCreatedFunction",void 0),d([m({nonNullable:!0})],Yt.prototype,"listModeDisabled",void 0),d([m()],Yt.prototype,"open",void 0),d([m({type:Dre})],Yt.prototype,"panel",null),d([Nt("panel")],Yt.prototype,"castPanel",null),d([m()],Yt.prototype,"parent",void 0),d([m({value:!0})],Yt.prototype,"sortable",null),d([m()],Yt.prototype,"title",null),d([m({readOnly:!0})],Yt.prototype,"publishing",null),d([m({readOnly:!0})],Yt.prototype,"updating",null),d([m()],Yt.prototype,"view",void 0),d([m()],Yt.prototype,"visible",null),d([m({readOnly:!0})],Yt.prototype,"visibleAtCurrentScale",null),d([m({readOnly:!0})],Yt.prototype,"visibleAtCurrentTimeExtent",null),d([m({readOnly:!0})],Yt.prototype,"visibilityMode",null),Yt=Z1=d([N("esri.widgets.LayerList.ListItem")],Yt);const MN=Yt,xo={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},c5e="hide",zre=$e.ofType(MN);let xl=class extends fv{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new zre,this.view=null}initialize(){this.addHandles([_e(()=>this.view?.ready===!0,()=>this._viewHandles(),Lt),_e(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),_e(()=>DT(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],xo.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,s){const n=e?.layer;if(!n||n.type==="subtype-sublayer"||n.type==="sublayer")return;const a=this.view?.map?.layers,o=i?bq(i):a,u=r?bq(r):a;if(!o||!u)return;const{operationalItems:h}=this,p=i?.children||h,y=r?.children||h,v=u.length-s;e.parent=r||null,p.remove(e),o.remove(n),y.includes(e)||y.add(e,v),u.includes(n)||u.add(n,v),this._compileList()}_createLayerViewHandles(e){this.removeHandles(xo.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),xo.layerViews)}_createMapLayerHandles(e){this.removeHandles(xo.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),xo.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:s,listModeDisabled:n}=this;return new MN({checkPublishStatusEnabled:s,listModeDisabled:n,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>RT(i)!==c5e):void 0}_watchLayersListMode(e){this.removeHandles(xo.layerListMode),e&&!this.listModeDisabled&&this.addHandles(_e(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),xo.layerListMode)}_compileList(){const e=this.view?.map?.layers,i=DT(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:s})=>s==="link-chart"):e;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r?.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.some(s=>s.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(s=>{s&&e&&e.includes(s.layer)||r.push(s)}),i.destroyMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,s)=>{const n=e.indexOf(r.layer),a=e.indexOf(s.layer);return n>a?-1:n<a?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([xo.mapLayers,xo.layerViews,xo.viewLayers]),e?.ready?this.addHandles([_e(()=>this.view?.map?.allLayers,i=>this._createMapLayerHandles(i),Lt),_e(()=>this.view?.allLayerViews,i=>this._createLayerViewHandles(i),Lt)],xo.viewLayers):this._removeAllItems()}};d([m()],xl.prototype,"checkPublishStatusEnabled",void 0),d([m()],xl.prototype,"listItemCreatedFunction",void 0),d([m({nonNullable:!0})],xl.prototype,"listModeDisabled",void 0),d([m({type:zre})],xl.prototype,"operationalItems",void 0),d([m({readOnly:!0})],xl.prototype,"state",null),d([m()],xl.prototype,"totalItems",null),d([m()],xl.prototype,"view",void 0),xl=d([N("esri.widgets.LayerList.LayerListViewModel")],xl);const Fre=xl;let ja=class extends Ce{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};d([m({type:Boolean,nonNullable:!0})],ja.prototype,"catalogLayerList",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"closeButton",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"collapseButton",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"errors",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"filter",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"flow",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"heading",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"statusIndicators",void 0),d([m({type:Boolean,nonNullable:!0})],ja.prototype,"temporaryLayerIndicators",void 0),ja=d([N("esri.widgets.LayerList.LayerListVisibleElements")],ja);const Vre=ja,h5e=["label","description","metadata"],d5e=$e.ofType(MN),Sq="nested";let st=class extends $m(Wi){constructor(e,i){super(e,i),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new Cd,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new Cd,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new $e(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=jRe,this.minFilterItems=VRe,this.openedLayers=new $e,this.openedLayerLists=new $e,this.selectedItems=new d5e,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new Fre,this.visibilityAppearance="default",this.visibleElements=new Vre,this._canMove=({dragEl:r,fromEl:s,toEl:n},a)=>{const o=a==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,u=Ro(r);if(!u?.sortable)return!1;const h=Ro(s),p=wq(s),y=Ro(n),v=wq(n),b=!!p&&!!v&&p===v,w={selected:u,from:h,to:y},S=s.group,M=n.group,T=h?.layer?.type??"",I=y?.layer?.type??"",L=new Set(["map-image","catalog","knowledge-graph"]);return S&&M&&typeof o=="function"?o.call(null,w):b&&!L.has(T)&&!L.has(I)&&u?.layer?.type!=="sublayer"},this._onCatalogOpen=r=>{this.openedLayers.push(r.layer?.parent),this._focusLayerFlowItem=r.layer?.uid},this._onTablesOpen=r=>{this.openedLayers.push(r.layer),this._focusLayerFlowItem=r.layer?.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(r,s)=>{s?this._tooltipReferenceMap.set(r,s):this._tooltipReferenceMap.delete(r)},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTriggerAction=(r,s)=>{this.triggerAction(r,s)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const s=Array.from(r.composedPath()).find(n=>n.classList?.contains(X_.item));this._activeItem=Ro(s)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:s}=this,{toEl:n,fromEl:a,dragEl:o,newIndex:u}=r;if(a&&n&&!(s?.newIndex===u&&s?.dragEl===o&&s?.toEl===n&&s?.fromEl===a)){if(this._lastDragDetail=r,this._selectedDragItemLayerUid=o.value,a===n){const h=Array.from(a.children).filter(p=>p?.matches("calcite-list-item")).map(p=>p.value);return void this._sortLayers(a,h)}this._moveLayerFromChildList({toEl:n,fromEl:a,dragEl:o,newIndex:u})}}}initialize(){this.addHandles([Vs(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),Lt),Vs(()=>this.viewModel.operationalItems,"change",()=>ZRe(this.selectedItems),Lt),_e(()=>[this.filterPredicate,this._rootListEl],()=>YRe(this._rootListEl,this.filterPredicate))])}loadDependencies(){return Yc({button:()=>K(()=>import("./index-Bwf2GSA2.js"),__vite__mapDeps([286,287,288,289,290,291,292,293,294,295,296,297,298,299]),import.meta.url),flow:()=>K(()=>import("./index-BcvZaUoN.js"),__vite__mapDeps([330,294,293,292,288,299,290]),import.meta.url),"flow-item":()=>K(()=>import("./index-B9lyc2O_.js"),__vite__mapDeps([331,287,288,289,290,291,292,293,303,304,294,297,299,296,306,307,308,309,295,310,311,312,313,314,324,332]),import.meta.url),list:()=>K(()=>import("./index-CgKu5SLQ.js"),__vite__mapDeps([323,287,288,289,290,324,294,293,292,304,291,325,326,327,295,296,297,312,298,299,328,308,321]),import.meta.url),notice:()=>K(()=>import("./index-cQFjWTJj.js"),__vite__mapDeps([329,291,292,288,293,294,309,299,290,289]),import.meta.url),tooltip:()=>K(()=>import("./index-BstpI9Ps.js"),__vite__mapDeps([333,294,307,292,288,308,309,310,304]),import.meta.url)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(e=>e.children.filter(i=>i.layer?.type!=="catalog-dynamic-group")).length}get _visibleItems(){return this.operationalItems?.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.flatten(e=>e.children).filter(({hidden:e,panel:i})=>!e&&i?.open&&!i.disabled&&i.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((i,r)=>this._renderLayerFlowItem(i,r===e.length-1))}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){const e=this.viewModel?.state,i={[ui.hidden]:e==="loading",[ui.disabled]:e==="disabled"};return F("div",{class:this.classes(X_.base,ui.widget,ui.panel,i)},this._renderItemTooltips(),this._renderItems())}async _createFlowList(e,i){const{_layerListMap:r}=this,s=r.get(e);if(s)return s;const n=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return i.aborted||r.set(e,n),n}async _handleOpenedLayersChange(){const{_layerListMap:e,openedLayers:i,openedLayerLists:r}=this;this._openedLayersController?.abort();const s=new AbortController,{signal:n}=s;this._openedLayersController=s,e.forEach((u,h)=>{i.includes(h)||(u.destroy(),e.delete(h))});const a=await Promise.all(i.map(u=>this._createFlowList(u,n)));if(n.aborted)return;r.removeAll(),r.addMany(a);const o=r.at(-1);o?"catalogLayer"in o?(this._set("catalogLayerList",o),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",o)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?F("calcite-tooltip",{key:`tooltip-${e.layer?.uid}`,overlayPositioning:"fixed",referenceElement:i.get(e.layer?.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(){return this._visibleItems?.toArray().map(e=>this._renderItemTooltipNodes(e))}_renderNoItemsMessage(){return F("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return F("div",{class:X_.itemMessage,key:"esri-layer-list__no-items"},F("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(e){const{default:i}=await K(()=>import("./CatalogLayerList-CkY3GdsO.js"),[],import.meta.url),{headingLevel:r,catalogOptions:s,view:n,filterPlaceholder:a,listItemCreatedFunction:o,minFilterItems:u,selectionMode:h,visibilityAppearance:p,_onCatalogOpen:y,_onTablesOpen:v,layerTablesEnabled:b}=this;return new i({headingLevel:r,view:n,filterPlaceholder:a,listItemCreatedFunction:o,minFilterItems:u,selectionMode:h,visibilityAppearance:p,...s,catalogLayer:e,layerTablesEnabled:b,onCatalogOpen:y,onTablesOpen:v})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:i}=await K(()=>import("./TableList-D7G0-uiE.js"),[],import.meta.url),{headingLevel:r,selectionMode:s,dragEnabled:n}=this;return new i({headingLevel:r,selectionMode:s,dragEnabled:n,...this._getTableListParams(e)})}_renderLayerFlowItem(e,i){const{messages:r,openedLayers:s}=this,n=e.title||this.messages.untitledLayer;return F("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:n,heading:r[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:i,onCalciteFlowItemBack:a=>{a.preventDefault(),s.pop();const o=s.at(-1);o?this._focusLayerFlowItem=o.uid:this._focusRootFlowItem=!0}},this._layerListMap.get(e)?.render())}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:i}=this;return e.toArray().map(({title:r,panel:s},n)=>{const a=()=>this._handlePanelFlowItemBack(s);return F("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:r,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:!i.length&&n===e.length-1,onCalciteFlowItemBack:o=>{o.preventDefault(),a()}},s.render(),F("calcite-button",{appearance:"transparent",onclick:a,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,Eb(e))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,Eb(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,Eb(e))}_renderItems(){const{visible:e,collapsed:i,_visibleItems:r,_openedPanelItems:s,_filterEnabled:n,_rootGroupUid:a,visibleElements:{closeButton:o,collapseButton:u,heading:h,flow:p},_dragEnabled:y,selectionMode:v,filterText:b,openedLayers:w,filterPlaceholder:S,messages:M}=this,T=[F("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:o,closed:!e,collapsed:i,collapsible:u,heading:h?M.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!w.length&&!s.length,onCalciteFlowItemClose:()=>this.visible=!1},r?.length?null:this._renderNoItems(),F("calcite-list",{afterCreate:I=>{this._rootListEl=I,I.addEventListener("focusin",this._setActiveItem),I.addEventListener("focusout",this._clearActiveItem)},afterRemoved:I=>{this._rootListEl=null,I.removeEventListener("focusin",this._setActiveItem),I.removeEventListener("focusout",this._clearActiveItem)},canPull:I=>this._canMove(I,"pull"),canPut:I=>this._canMove(I,"put"),"data-layer-type":a,displayMode:Sq,dragEnabled:y,filterEnabled:n,filterPlaceholder:S,filterProps:h5e,filterText:n?b:"",group:a,key:"root-list",label:M.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:v,onCalciteListChange:I=>this._handleCalciteListChange(I),onCalciteListDragEnd:I=>this._handleCalciteListDragEnd(I.detail),onCalciteListFilter:I=>this.filterText=I.currentTarget?.filterText??"",onCalciteListOrderChange:I=>this._onCalciteListOrderChange(I.detail)},r.toArray().map(I=>this._renderItem(I)),n?F("div",{class:X_.filterNoResults,slot:"filter-no-results"},F("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?p?F("calcite-flow",{key:"root-flow"},T):T:null}_renderItem(e,i,r){return F(s5e,{activeItem:this._activeItem,canMove:this._canMove,css:X_,displayMode:Sq,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:i,dragEl:r,newIndex:s}){const n=Ro(r),a=Ro(e),o=Ro(i);this.viewModel.moveListItem(n,o,a,s)}_handleCalciteListDragEnd(e){const{fromEl:i,dragEl:r,oldIndex:s}=e;i.insertBefore(r,i.children[s])}_sortLayers(e,i){if(e)if(e===this._rootListEl)kre(this.view?.map?.layers,i);else{const r=Ro(e);if(!r)return;KRe(r,i)}}_handleCalciteListChange(e){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const s=e.target.selectedItems.map(n=>Ro(n)).filter(Boolean);r.removeAll(),r.addMany(s)}};d([m()],st.prototype,"_rootListEl",void 0),d([m()],st.prototype,"_activeItem",void 0),d([m()],st.prototype,"_tooltipReferenceMap",void 0),d([m()],st.prototype,"_focusRootFlowItem",void 0),d([m()],st.prototype,"_focusPanelFlowItem",void 0),d([m()],st.prototype,"_focusLayerFlowItem",void 0),d([m()],st.prototype,"_layerListMap",void 0),d([m()],st.prototype,"_totalItems",null),d([m()],st.prototype,"_visibleItems",null),d([m()],st.prototype,"_openedPanelItems",null),d([m()],st.prototype,"_dragEnabled",null),d([m()],st.prototype,"_filterEnabled",null),d([m()],st.prototype,"_renderedOpenLayerFlowItems",null),d([m({readOnly:!0})],st.prototype,"catalogLayerList",void 0),d([m()],st.prototype,"catalogOptions",void 0),d([m()],st.prototype,"collapsed",void 0),d([m()],st.prototype,"dragEnabled",void 0),d([m()],st.prototype,"filterPlaceholder",void 0),d([m()],st.prototype,"filterPredicate",void 0),d([m()],st.prototype,"filterText",void 0),d([m()],st.prototype,"headingLevel",void 0),d([m()],st.prototype,"icon",null),d([m()],st.prototype,"knowledgeGraphOptions",void 0),d([m()],st.prototype,"label",null),d([m()],st.prototype,"layerTablesEnabled",void 0),d([m()],st.prototype,"listItemCanGiveFunction",void 0),d([m()],st.prototype,"listItemCanReceiveFunction",void 0),d([m()],st.prototype,"listItemCreatedFunction",null),d([m()],st.prototype,"mapImageOptions",void 0),d([m(),Hn("esri/widgets/LayerList/t9n/LayerList")],st.prototype,"messages",void 0),d([m(),Hn("esri/t9n/common")],st.prototype,"messagesCommon",void 0),d([m()],st.prototype,"minDragEnabledItems",void 0),d([m()],st.prototype,"minFilterItems",void 0),d([m({readOnly:!0})],st.prototype,"openedLayers",void 0),d([m({readOnly:!0})],st.prototype,"openedLayerLists",void 0),d([m()],st.prototype,"operationalItems",null),d([m()],st.prototype,"selectedItems",void 0),d([m()],st.prototype,"selectionMode",void 0),d([m({readOnly:!0})],st.prototype,"tableList",void 0),d([m()],st.prototype,"tileOptions",void 0),d([m()],st.prototype,"view",null),d([n5e("trigger-action"),m({type:Fre})],st.prototype,"viewModel",void 0),d([m()],st.prototype,"visibilityAppearance",void 0),d([m({type:Vre,nonNullable:!0})],st.prototype,"visibleElements",void 0),st=d([N("esri.widgets.LayerList")],st);const p5e=st;function xq(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const yw=-1;let Po=class extends Ce{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=X("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo($q(e))}catch(i){this._transitionTo([]),le.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&Mq(this._current,$q(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&Mq(this._current,e,this.scale)?(this._final=e,this._to=J(e),f5e(this._current,this._to,this.scale),this._from=J(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?J(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const s=this._current[r],n=this._from[r],a=this._to[r];s.scale=m5e(n.scale,a.scale,i);for(let o=0;o<s.effects.length;o++){const u=s.effects[o],h=n.effects[o],p=a.effects[o];u.interpolate(h,p,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?J(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let s,n,a=1;if(i.length===1||e>=i[0].scale)n=s=i[0].effects;else if(e<=i[r].scale)n=s=i[r].effects;else for(let o=0;o<r;o++){const u=i[o],h=i[o+1];if(u.scale>=e&&h.scale<=e){a=(e-u.scale)/(h.scale-u.scale),s=u.effects,n=h.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(s[o],n[o],a)}};function $q(t){const e=oN(t)||[];return y5e(e)?[{scale:yw,effects:e}]:e}function Mq(t,e,i){return!t[0]?.effects||!e[0]?.effects?!0:!((t[0]?.scale===yw||e[0]?.scale===yw)&&(t.length>1||e.length>1)&&i<=0)&&EX(t[0].effects,e[0].effects)}function f5e(t,e,i){const r=t.length>e.length?t:e,s=t.length>e.length?e:t,n=s[s.length-1],a=n?.scale??i,o=n?.effects??[];for(let u=s.length;u<r.length;u++)s.push({scale:a,effects:[...o]});for(let u=0;u<r.length;u++)s[u].scale=s[u].scale===yw?i:s[u].scale,r[u].scale=r[u].scale===yw?i:r[u].scale,CX(s[u].effects,r[u].effects)}function m5e(t,e,i){return t+(e-t)*i}function y5e(t){const e=t[0];return!!e&&"type"in e}d([m()],Po.prototype,"_to",void 0),d([m()],Po.prototype,"duration",void 0),d([m({value:""})],Po.prototype,"effect",null),d([m({readOnly:!0})],Po.prototype,"effects",void 0),d([m({readOnly:!0})],Po.prototype,"final",null),d([m({readOnly:!0})],Po.prototype,"hasEffects",null),d([m({value:0})],Po.prototype,"scale",null),d([m({readOnly:!0})],Po.prototype,"transitioning",null),Po=d([N("esri.layers.effects.EffectView")],Po);function VXe(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?jre(t.view.floors,e.floorInfo.floorField):null}function Tq(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?jre(t,e.floorInfo.floorField):null}function jre(t,e){if(!t?.length)return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function jXe(t,e,i){return e.flatten(({sublayers:s})=>s).length!==t.length?!0:!!t.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!Ure(t,e)}function g5e(t,e,i){return!!t.some(r=>{const s=r.source,n=!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(s.gdbVersion==null||s.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const a=r.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!n||r.originIdOf("renderer")>2||r.originIdOf("labelingInfo")>2||r.originIdOf("opacity")>2||r.originIdOf("labelsVisible")>2||a&&r.originIdOf("orderBy")>2})||!Ure(t,e)}function Ure(t,e){if(!t?.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(t.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of t){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function UXe(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition?.minScale!=null)}const v5e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ua=class extends Ce{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=Tq(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&g5e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(v5e[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,s)=>{const n=Tq(this.floors,s),a=Nwe(n,s.definitionExpression);return a!=null&&(r[s.id]=a),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,s=a=>{a.visible&&(r===0||dAe(r,a.minScale,a.maxScale))&&(a.sublayers?a.sublayers.forEach(s):e.unshift(a))};i?.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((a,o)=>e[o]!==a)?e:n}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};d([m({readOnly:!0})],Ua.prototype,"dynamicLayers",null),d([m()],Ua.prototype,"floors",void 0),d([m({readOnly:!0})],Ua.prototype,"hasDynamicLayers",null),d([m()],Ua.prototype,"layer",null),d([m({readOnly:!0})],Ua.prototype,"layers",null),d([m({readOnly:!0})],Ua.prototype,"layerDefs",null),d([m({type:Number})],Ua.prototype,"scale",void 0),d([m({readOnly:!0})],Ua.prototype,"version",null),d([m({readOnly:!0})],Ua.prototype,"visibleSublayers",null),Ua=d([N("esri.layers.support.ExportImageParameters")],Ua);const _5e=9999999e31,b5e=2e-7,w5e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function NT(t){return w5e[t]??[-34028234663852886e22,34028234663852886e22]}const S5e={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function x5e(t){return S5e[t]}function qXe(t){return x5e(t.pixelType)*t.bandCount}function BXe(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function $5e(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}function HXe(t,e,i,r){let[s,n]=NT(i);const a=$5e(i);return a&&(s-=1e-5,n+=1e-5),a?i.startsWith("u")?M5e(t,e,r,[s,n]):T5e(t,e,r,[s,n]):E5e(t,e,r,[s,n])}function WXe(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function M5e(t,e,i,r){const[s,n]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<s||o>n?e[a]=0:i[a]=o+.5|0}}function T5e(t,e,i,r){const[s,n]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<s||o>n?e[a]=0:i[a]=o+(o>0?.5:-.5)|0}}function E5e(t,e,i,r){const[s,n]=r;for(let a=0;a<e.length;a++)if(e[a]){const o=t[a];o<s||o>n?e[a]=0:i[a]=o}}function ZXe(t,e,i){if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=t,a=r[0].length,o=t.bandMasks??[],u=t.mask??new Uint8Array(a).fill(255),h=n==="f32"||n==="f64",p=NT(n);let y=!1;for(let b=0;b<r.length;b++){const w=typeof e=="number"?e:e[b];if(w==null)continue;const S=s?.[b]?.minValue??p[0],M=s?.[b]?.maxValue??p[1];if(S>w+Number.EPSILON||M<w-Number.EPSILON)continue;const T=o[b]||u.slice(),I=r[b],L=i?.customFloatTolerance;if(h&&L!==0){let O=L;O||(O=Math.abs(w)>=_5e?b5e*Math.abs(w):n==="f32"?2**-23:Number.EPSILON);for(let R=0;R<I.length;R++)T[R]&&Math.abs(I[R]-w)<O&&(I[R]=0,T[R]=0,u[R]=0,y=!0)}else for(let O=0;O<I.length;O++)T[O]&&I[O]===w&&(I[O]=0,T[O]=0,u[O]=0,y=!0);o[b]=T}if(y){const b=t.bandMasks||t.pixels.length>1?o:null;i?.matchAllNoData?t.mask=b&&b.length>1?v(b):u:(t.bandMasks=b,t.mask=u)}function v(b){if(b.length<2)return b[0];const w=b[0].length,S=new Uint8Array(w).fill(0);for(let M=0;M<b.length;M++){const T=b[M];for(let I=0;I<w;I++)T[I]&&(S[I]=255)}return S}y&&"updateStatistics"in t&&t.updateStatistics()}function Gre(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function YXe(t,e){if(t==null)return null;if(!Gre(t))return new G("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type}'`,{renderer:t});switch(t.type){case"simple":return C5e(t,e);case"unique-value":return I5e(t,e);case"class-breaks":return L5e(t,e);case"dictionary":case"heatmap":return null}return null}function TN(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(s=>s.details.symbol.type||s.details.symbol.declaredClass).filter(s=>!!s);i.sort();const r=new Array;return i.forEach((s,n)=>{n!==0&&s===i[n-1]||r.push(s)}),new G("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function C5e(t,e){const i={...Ec,...e,cimFallbackEnabled:!0};return TN(t,X0(t.symbol,i).error)}function I5e(t,e){const i={...Ec,...e,cimFallbackEnabled:!0},r=t.uniqueValueInfos?.map(n=>X0(n.symbol,i).error).filter(Qr),s=X0(t.defaultSymbol,i);return s.error&&r?.unshift(s.error),TN(t,r)}function L5e(t,e){const i={...Ec,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(n=>X0(n.symbol,i).error).filter(Qr),s=X0(t.defaultSymbol,i);return s.error&&r.unshift(s.error),TN(t,r)}function A5e(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function EN(t){return t?.type==="CIMVectorMarker"?t.markerGraphics?.[0]:void 0}function qre(t){return t?.symbol?.type==="CIMPolygonSymbol"?t.symbol.symbolLayers?.[0]:void 0}function P5e(t,e){t?.type==="CIMVectorMarker"&&e!=null&&(t.size=e)}function O5e(t,e){const i=EN(t);i&&e!=null&&(i.geometry=A5e(e))}function k5e(t,e){const i=qre(EN(t));i&&e!=null&&(i.color=e.toArray())}function R5e(t,e,i){const r=qre(EN(t));r&&e!=null&&i&&(r.colorLocked=e)}function CN(t,e){const{outerRingSize:i,innerDotSize:r,type:s,color:n,colorLocked:a,primitiveOverrides:o}=e,u=t.data.symbol?.type==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if(u?.length===2)for(const h of u){const p=h.primitiveName==="reference-size-outer-ring";P5e(h,p?i:r),O5e(h,s),k5e(h,n),R5e(h,a,p)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),o!==void 0&&(t.data.primitiveOverrides=J(o)),t}function Bre(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const s of t.effects)Eq(s,e);if(t.symbolLayers)for(const s of t.symbolLayers){switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":D5e(s,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&s.width&&(s.width*=e);break;case"CIMPictureFill":s.height&&(s.height*=e),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e);break;case"CIMHatchFill":Bre(s.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e),s.separation&&(s.separation*=e)}if(s.effects)for(const n of s.effects)Eq(n,e)}}else t.height!=null&&(t.height*=e)}function D5e(t,e,i){if(t&&(t.markerPlacement&&N5e(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||Bre(r.symbol,e,!0,i)}function N5e(t,e){switch(fE(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function Eq(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function Hre(t){const e=[];return g5(wN(t),e),e.length?new we(are(e[0])):null}function g5(t,e){if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i?.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(ore(s)||SN(s)&&s.markerPlacement&&fE(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&zT(e,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach(n=>{g5(n.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":zT(e,s.color);break;case"CIMGradientFill":z5e(e,s);break;case"CIMHatchFill":g5(s.lineSymbol,e)}}}function zT(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function z5e(t,e){switch(e.colorRamp?.type){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&Cq(t,r)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Cq(t,e.colorRamp)}}function Cq(t,e){e&&(e.fromColor&&zT(t,e.fromColor),e.toColor&&zT(t,e.toColor))}function Wre(t,e,i){e instanceof we||(e=new we(e));const r=wN(t);r&&v5(r,e)}function v5(t,e,i){if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const s=r?.type==="CIMPolygonSymbol";if(r?.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked||s&&(ore(n)||SN(n)&&n.markerPlacement&&fE(n.markerPlacement)))continue;const a=e.toArray();switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor=a;break;case"CIMVectorMarker":n.markerGraphics?.forEach(o=>{v5(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":n.color=a;break;case"CIMGradientFill":F5e(n,e);break;case"CIMHatchFill":v5(n.lineSymbol,e)}}}function F5e(t,e){switch(t.colorRamp?.type){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&Iq(r,e)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Iq(t.colorRamp,e)}}function Iq(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function V5e(t,e,i=!1){const r=wN(t);if(i&&(e=360-e),r?.type!=="CIMTextSymbol"){if(r?.type==="CIMPointSymbol"&&r.symbolLayers){const s=e-(r.angle||0);for(const n of r.symbolLayers)if(SN(n)){let a=n.rotation||0;n.rotateClockwise?a-=s:a+=s,n.rotation=a}r.angle=e}}else r.angle=e}function Zre(t){return"r"in t&&"g"in t&&"b"in t}function Yre(t){return"h"in t&&"s"in t&&"v"in t}function Jre(t){return"l"in t&&"a"in t&&"b"in t}function Xre(t){return"l"in t&&"c"in t&&"h"in t}function j5e(t){return"x"in t&&"y"in t&&"z"in t}const U5e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],G5e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Qre(t,e){const i=[];let r,s;if(t[0].length!==e.length)throw new Error("dimensions do not match");const n=t.length,a=t[0].length;let o=0;for(r=0;r<n;r++){for(o=0,s=0;s<a;s++)o+=t[r][s]*e[s];i.push(o)}return i}function Kre(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Qre(U5e,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function IN(t){const e=Qre(G5e,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function ese(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function tse(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function q5e(t){const e=t.l,i=t.a,r=t.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:e,c:s,h:n}}function B5e(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function H5e(t){return ese(Kre(t))}function W5e(t){return IN(tse(t))}function Z5e(t){return q5e(ese(Kre(t)))}function Y5e(t){return IN(tse(B5e(t)))}function J5e(t){const e=t.r,i=t.g,r=t.b,s=Math.max(e,i,r),n=s-Math.min(e,i,r);let a=s,o=n===0?0:s===e?(i-r)/n%6:s===i?(r-e)/n+2:(e-i)/n+4,u=n===0?0:n/a;return o<0&&(o+=6),o*=60,u*=100,a*=100/255,{h:o,s:u,v:a}}function X5e(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,s=r*i,n=s*(1-Math.abs(e%2-1));let a;switch(Math.floor(e)){case 0:a={r:s,g:n,b:0};break;case 1:a={r:n,g:s,b:0};break;case 2:a={r:0,g:s,b:n};break;case 3:a={r:0,g:n,b:s};break;case 4:a={r:n,g:0,b:s};break;case 5:case 6:a={r:s,g:0,b:n};break;default:a={r:0,g:0,b:0}}return a.r=Math.round(a.r+r-s),a.g=Math.round(a.g+r-s),a.b=Math.round(a.b+r-s),a}function Lm(t){return Zre(t)?t:Xre(t)?Y5e(t):Jre(t)?W5e(t):j5e(t)?IN(t):Yre(t)?X5e(t):t}function yE(t){return Yre(t)?t:J5e(Lm(t))}function Q5e(t){return Jre(t)?t:H5e(Lm(t))}function JXe(t){return Xre(t)?t:Z5e(Lm(t))}function K5e(t){let{r:e,g:i,b:r,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),i=Math.round(s*i+255*(1-s)),r=Math.round(s*r+255*(1-s))),new we({r:e,g:i,b:r})}function ise(t,e){const{r:i,g:r,b:s}=e?.ignoreAlpha?t:K5e(t);return .2126*i+.7152*r+.0722*s}function XXe(t,e=225){return ise(t,{ignoreAlpha:!0})>e?new we([0,0,0,t.a]):new we([255,255,255,t.a])}function QXe(t,e){const i=Q5e(t);i.l*=1-e;const r=Lm(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function KXe(t,e){const i=t.clone();return i.a*=e,i}function eQe(t,e){const i=yE(t);i.s*=e;const r=Lm(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function tQe(t){return we.toUnitRGBA(t)}function iQe(t){return Im(t[0],t[1],t[2],t.length>3?t[3]:1)}function rQe(t,e){const i=we.toUnitRGBA(t);return i[3]*=e,i}function sQe(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new we(r):r)).length===1||e===1){const r=[],s=t[0];for(let n=0;n<e;n++)r.push(s.clone());return r}if(i.shuffle&&(t=HB(J(t),i.seed)),t.length>=e){const r=[],s=(t.length-1)/(e-1);for(let n=0;n<e;n++){const a=Math.round(n*s);r.push(t[a].clone())}return r}return e4e(t,e,i)}function e4e(t,e,i={}){const r=[],s=t.length-1,n=Math.ceil((e-t.length)/s);e:for(let a=0;a<s;a++){const o=t[a],u=t[a+1];for(let h=1;h<=n;h++){const p=h/(n+1);if(r.push(t4e(o,u,p,i)),r.length+t.length===e)break e}}return[...t.map(a=>a.clone()),...HB(r,i.seed??1)]}const EA=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function t4e(t,e,i,r={}){const s=t.r,n=t.g,a=t.b,o=e.r,u=e.g,h=e.b,p=Math.round(s+(o-s)*i),y=Math.round(n+(u-n)*i),v=Math.round(a+(h-a)*i);if(!r.offset)return new we([p,y,v]);const b=U5(r.seed);return new we([EA(p,b),EA(y,b),EA(v,b)])}const rse="picture-fill",sse="simple-fill",i4e="simple-line",nse="simple-marker",r4e="text",s4e="cim",Lq=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),Aq=new qie(1e3);function n4e(t){const e=t.style;let i=null;if(t)switch(t.type){case nse:e!=="cross"&&e!=="x"&&(i=t.color);break;case sse:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Si(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case rse:i={type:"pattern",src:t.url,width:lt(t.width)*t.xscale,height:lt(t.height)*t.yscale,x:lt(t.xoffset),y:lt(t.yoffset)};break;case r4e:i=t.color;break;case s4e:i=Hre(t)}return i}function a4e(t,e){const i=t+"-"+e,r=Aq.get(i);return r!=null?Promise.resolve(r):Ot(t,{responseType:"image"}).then(s=>{const n=s.data,a=n.naturalWidth,o=n.naturalHeight,u=document.createElement("canvas");u.width=a,u.height=o;const h=u.getContext("2d");h.fillStyle=e,h.fillRect(0,0,a,o),h.globalCompositeOperation="destination-in",h.drawImage(n,0,0);const p=u.toDataURL();return Aq.put(i,p),p})}function gw(t){if(!t)return null;let e=null;switch(t.type){case sse:case rse:case nse:e=gw(t.outline);break;case i4e:{const i=lt(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:LN(t.style),width:i,cap:t.cap,join:t.join==="miter"?lt(t.miterLimit):t.join},e.dashArray=ase(e).join(",")||"none");break}default:e=null}return e}function ase(t){if(!t?.style)return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(a=>Number(a));const s=r??0,n=Lq.has(i)?Lq.get(i).map(a=>a*s):[];if(t.cap!=="butt")for(const[a,o]of n.entries())n[a]=a%2==1?o+s:Math.max(o-s,1);return n}const LN=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),o4e=new we([128,128,128]);let l4e=0;function u4e(){return l4e++}let c4e=0;function h4e(){return c4e++}let d4e=0;function p4e(){return d4e++}const f4e="http://www.w3.org/2000/svg",Pq=X("android"),m4e=X("chrome")||Pq&&Pq>=4?"auto":"optimizeLegibility",y4e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},g4e=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let zi={},jt={};const v4e=Math.PI;function xd(t,e){const i=t*(v4e/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function ose(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function AN(t,e,i,r,s){if(t){if(t.type==="circle")return F("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return F("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return F("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return F("image",{alt:s||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const n=typeof t.path!="string"?ose(t.path):t.path;return F("path",{d:n,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return Iw(r),F("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":m4e,x:t.x,y:t.y},t.text)}return null}function PN(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new we(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${u4e()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${h4e()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new we(i.color).toString()}))}}}function ON(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new we(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=ase(t).join(",")||"none")),e}function lse(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Iw(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function use(t){const{pattern:e,linearGradient:i}=t;if(e)return F("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},F("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((s,n)=>F("stop",{key:`${n}-stop`,offset:s.offset,"stop-color":s.color}));return F("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function _4e(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:s,fill:n,stroke:a,font:o}=r,u=PN(n),h=ON(a),p=s.type==="text"?lse(s,o):null,y=AN(s,u.fill,h,p);y&&i.push(y)}return F("mask",{id:e,maskUnits:"userSpaceOnUse"},F("g",null,i))}function Oq(t,e,i){return du(t,t2(t),[e,i])}function kq(t,e,i,r,s){return i2(t,t2(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-s*i+s,t}function b4e(t,e,i,r){const s=e%360*Math.PI/180;qd(t,t2(t),s);const n=Math.cos(s),a=Math.sin(s),o=t[4],u=t[5];return t[4]=o*n-u*a+r*a-i*n+i,t[5]=u*n+o*a-i*a-r*n+r,t}function Ys(t,e){zi&&"left"in zi?(zi.left!=null&&zi.left>t&&(zi.left=t),(zi.right==null||zi.right<t)&&(zi.right=t),(zi.top==null||zi.top>e)&&(zi.top=e),(zi.bottom==null||zi.bottom<e)&&(zi.bottom=e)):zi={left:t,bottom:e,right:t,top:e}}function Rq(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Ys(e[r],e[r+1]);jt.x=e[i-2],jt.y=e[i-1];break;case"H":for(r=0;r<i;++r)Ys(e[r],jt.y);jt.x=e[i-1];break;case"V":for(r=0;r<i;++r)Ys(jt.x,e[r]);jt.y=e[i-1];break;case"m":{let s=0;for(("x"in jt)||(Ys(jt.x=e[0],jt.y=e[1]),s=2),r=s;r<i;r+=2)Ys(jt.x+=e[r],jt.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Ys(jt.x+=e[r],jt.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Ys(jt.x+=e[r],jt.y);break;case"v":for(r=0;r<i;++r)Ys(jt.x,jt.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Ys(jt.x+e[r],jt.y+e[r+1]),Ys(jt.x+e[r+2],jt.y+e[r+3]),Ys(jt.x+=e[r+4],jt.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Ys(jt.x+e[r],jt.y+e[r+1]),Ys(jt.x+=e[r+2],jt.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Ys(e[r+5],e[r+6]);jt.x=e[i-2],jt.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Ys(jt.x+=e[r+5],jt.y+=e[r+6])}}function Dq(t,e,i){const r=y4e[t.toLowerCase()];let s;typeof r=="number"&&(r?e.length>=r&&(s={action:t,args:e.slice(0,e.length-e.length%r)},i.push(s),Rq(s)):(s={action:t,args:[]},i.push(s),Rq(s)))}function w4e(t){const e=(typeof t.path!="string"?ose(t.path):t.path).match(g4e),i=[];if(zi={},jt={},!e)return null;let r="",s=[];const n=e.length;for(let o=0;o<n;++o){const u=e[o],h=parseFloat(u);isNaN(h)?(r&&Dq(r,s,i),s=[],r=u):s.push(h)}Dq(r,s,i);const a={x:0,y:0,width:0,height:0};return zi&&"left"in zi&&(a.x=zi.left,a.y=zi.top,a.width=zi.right-zi.left,a.height=zi.bottom-zi.top),a}function cse(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=w4e(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function hse(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),s=Math.max(s,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,r=n.x+n.width,s=n.y+n.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function _5(t,e,i,r,s,n,a,o,u){let h=(a&&n?xd(n,e):e)/2,p=(a&&n?xd(n,i):i)/2;if(u){const I=u[0],L=u[1];h=(a&&n?xd(n,I):I)/2,p=(a&&n?xd(n,L):L)/2}const y=t.width+r,v=t.height+r,b=zc(),w=zc();let S=!1;if(s&&y!==0&&v!==0){const I=e!==i?e/i:y/v,L=e>i?e:i;let O=1,R=1;isNaN(L)||(I>1?(O=L/y,R=L/I/v):(R=L/v,O=L*I/y)),Pl(w,w,kq(b,O,R,h,p)),S=!0}const M=t.x+(y-r)/2,T=t.y+(v-r)/2;if(Pl(w,w,Oq(b,h-M,p-T)),!S&&(y>e||v>i)){const I=y/e>v/i,L=(I?e:i)/(I?y:v);Pl(w,w,kq(b,L,L,M,T))}return o&&Pl(w,w,Oq(b,o[0],o[1])),n&&Pl(w,w,b4e(b,n,M,T)),`matrix(${w[0]},${w[1]},${w[2]},${w[3]},${w[4]},${w[5]})`}function dse(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,r,s]=e;return{strength:Number(i),radius:lt(gt(r)),threshold:Number(s)}}function S4e(t,e,i){const r=dse(t);if(!r)return null;const{strength:s,radius:n}=r,a=s>0?n:0,o=(s+a)*e,u=4*s+1;return F("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},F("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(s+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),F("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:o/25}),F("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:o/50}),F("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},F("feFuncR",{slope:u,type:"linear"}),F("feFuncG",{slope:u,type:"linear"}),F("feFuncB",{slope:u,type:"linear"})),F("feMerge",null,F("feMergeNode",{in:"intensityBlur"}),F("feMergeNode",{in:"intensityBrightness"}),F("feGaussianBlur",{stdDeviation:s/10})))}function pse(t,e,i,r={}){const s=[],n=[],a=p4e(),o=S4e(r.cssEffectFilter,e,a);let u=null;if(o){const v=dse(r.cssEffectFilter),b=r.clipBloomEffect||!v?.strength?0:(v.strength+v.radius/2)/3,w=e+e*b,S=i+i*b;u=[Math.max(w,10),Math.max(S,10)]}let h=e,p=i;if(r.useRotationSize)for(let v=0;v<t.length;v++){const b=r.rotations?.[v]??0;h=Math.max(xd(b,e),h),p=Math.max(xd(b,i),p)}for(let v=0;v<t.length;v++){const b=t[v],w=[],S=[];let M=0,T=0,I=0;for(const z of b){const{shape:j,fill:U,stroke:B,font:Q,offset:oe}=z;r.ignoreStrokeWidth||j.type==="text"||(M+=B?.width||0);const ue=PN(U),Se=ON(B),me=j.type==="text"?lse(j,Q):null;s.push(use(ue)),w.push(AN(j,ue.fill,Se,me,r.ariaLabel)),S.push(cse(j)),oe&&(T+=oe[0],I+=oe[1])}const L=r.rotations?.[v]??0;r.useRotationSize&&(T+=(h-xd(L,e))/2,I+=(p-xd(L,i))/2);const O=_5(hse(S),e,i,M,r.scale??!1,L,r.useRotationSize??!1,[T,I],u);let R=null;if(r.masking){const z=`mask-${v}`,j=r.masking[v];s.push(_4e(j,z)),R=`url(#${z})`}n.push(R?F("g",{mask:R},F("g",{transform:O},w)):F("g",{transform:O},w))}return o&&(Iw(u),h=u[0],p=u[1]),F("svg",{"aria-label":r.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:h,xmlns:f4e},o,F("defs",null,s),o?F("g",{filter:`url(#bloom${a})`},n):n)}const Nq=aT();function x4e(t,e){Nq.append(t,e),Nq.detach(e)}function Ev(t,e,i){const r=Math.ceil(e[0]),s=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;const n=i?.node||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(n.style.filter=i.cssEffectFilter),x4e(n,()=>pse(t,r,s,i)),n}function $4e(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function M4e(t,e,i){return t?Ot(t,{responseType:"image"}).then(r=>{const s=r.data,n=s.width,a=s.height,o=n/a;let u=e;if(i){const h=Math.max(n,a);u=Math.min(u,h)}return{image:s,width:o<=1?Math.ceil(u*o):u,height:o<=1?u:Math.ceil(u/o)}}):Promise.reject(new G("renderUtils: imageDataSize","href not provided."))}function T4e(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function E4e(t,e,i,r,s){switch(s){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const n=yE({r:t[e],g:t[e+1],b:t[e+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const a=Lm(n);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function C4e(t,e,i,r,s){return M4e(t,e,s).then(n=>{const a=n.width??e,o=n.height??e;if(n.image&&T4e(i,r)){let u=n.image.width,h=n.image.height;X("edge")&&/\.svg$/i.test(t)&&(u-=1,h-=1);const p=$4e(a,o);p.drawImage(n.image,0,0,u,h,0,0,a,o);const y=p.getImageData(0,0,a,o),v=[i.r/255,i.g/255,i.b/255,i.a],b=yE(i);for(let w=0;w<y.data.length;w+=4)E4e(y.data,w,v,b,r);p.putImageData(y,0,0),t=p.canvas.toDataURL("image/png")}else{const u=pt?.findCredential(t);if(u?.token){const h=t.includes("?")?"&":"?";t=`${t}${h}token=${u.token}`}}return{url:t,width:a,height:o}}).catch(()=>({url:t,width:e,height:e}))}function I4e(t){const e=t.symbolLayers?.at(-1);if(e&&"outline"in e)return e?.outline?.size}function L4e(t){if(!t)return 0;if(el(t)){const e=I4e(t);return e??0}return Ut(gw(t)?.width)}function gE(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function A4e(t){return t.resource?.href??""}function nQe(t,e){if(!t)return null;let i=null;return el(t)?i=P4e(t):H3(t)&&(i=t.type==="cim"?Hre(t):t.color?new we(t.color):null),i?e0(i,e):null}function P4e(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{r.type==="object"&&r.resource?.href||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new we(i):null}function e0(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new we(i)}function O4e(t,e,i){const r=t.symbolLayers;if(!r)return;const s=(n,a=!1)=>{let o=e??n??null;return i?.override!=null&&(!o&&a&&(o=new we([255,255,255])),o&&(o.a=i.override)),e0(o,i?.add)};r.forEach(n=>{if(n.type==="water")return void(n.color=e0(n.color,i?.add));const a=n.material!=null?n.material.color:null,o=s(a,n.type==="icon"&&n.resource?.href!=null);n.material==null?n.material=new Vn({color:o}):n.material.color=o,"outline"in n&&n.outline?.color&&i?.add!=null&&(n.outline.color=e0(n.outline.color,i.add)),"marker"in n&&n.marker!=null&&(n.marker.color=s(n.marker.color))})}function k4e(t,e,i){e=e??t.color,i?.override!=null&&e&&(e.a=i.override),e&&(t.color=e0(e,i?.add)),"outline"in t&&t.outline?.color&&(t.outline.color=e0(t.outline.color,i?.add))}function CA(t,e,i){t&&(e||i!=null)&&(e&&(e=new we(e)),el(t)?O4e(t,e,i):H3(t)&&k4e(t,e,i))}async function R4e(t,e){const i=t.symbolLayers;i&&await Sde(i,async r=>D4e(r,e))}async function D4e(t,e){switch(t.type){case"extrude":z4e(t,e);break;case"icon":case"line":case"text":N4e(t,e);break;case"path":V4e(t,e);break;case"object":await F4e(t,e)}}function N4e(t,e){const i=fse(e);i!=null&&(t.size=i)}function fse(t){for(const e of t)if(typeof e=="number")return e;return null}function z4e(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function F4e(t,e){const{resourceSize:i,symbolSize:r}=await j4e(t),s=mse(e,i,r);s!=null&&(t.width=Rb(e[0],r[0],i[0],s),t.depth=Rb(e[1],r[1],i[1],s),t.height=Rb(e[2],r[2],i[2],s))}function V4e(t,e){const i=mse(e,ZJ,[t.width,void 0,t.height]);i!=null&&(t.width=Rb(e[0],t.width,1,i),t.height=Rb(e[2],t.height,1,i))}function mse(t,e,i){for(let r=0;r<3;r++){const s=t[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/e[r]:1}case"proportional":break;default:if(s&&e[r])return s/e[r]}}return null}async function j4e(t){const{computeObjectLayerResourceSize:e}=await K(()=>import("./symbolLayerUtils-CYniXiSA.js"),[],import.meta.url),i=await e(t,10),{width:r,height:s,depth:n}=t,a=[r,n,s];let o=1;for(let u=0;u<3;u++){const h=a[u];if(h!=null){o=h/i[u];break}}for(let u=0;u<3;u++)a[u]==null&&(a[u]=i[u]*o);return{resourceSize:i,symbolSize:a}}function Rb(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function U4e(t,e){const i=fse(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function G4e(t,e){if(t&&e)return el(t)?R4e(t,e):void(H3(t)&&U4e(t,e))}function q4e(t,e,i){if(t&&e!=null){if(el(t)){const r=t.symbolLayers;r&&r.forEach(s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+e;break;case"roll":s.roll=(s.roll??0)+e;break;default:s.heading=(s.heading??0)+e}s.type==="icon"&&(s.angle+=e)})}else if(H3(t))switch(t.type){case"simple-marker":case"picture-marker":case"text":t.angle+=e;break;case"cim":V5e(t,e,!0)}}}function B4e(t,e){if(!t)return null;const i=t.effects.map(r=>r.toJSON());return $R(i)}function aQe(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const yse="esri-relationship-ramp",Ny=`${yse}--diamond`,Dh=`${yse}--square`,H4e="http://www.w3.org/2000/svg",li={diamondContainer:`${Ny}__container`,diamondLeftCol:`${Ny}__left-column`,diamondRightCol:`${Ny}__right-column`,diamondMidCol:`${Ny}__middle-column`,diamondMidColLabel:`${Ny}__middle-column--label`,diamondMidColRamp:`${Ny}__middle-column--ramp`,squareTable:`${Dh}__table`,squareTableRow:`${Dh}__table-row`,squareTableCell:`${Dh}__table-cell`,squareTableLabel:`${Dh}__table-label`,squareTableLabelLeftBottom:`${Dh}__table-label--left-bottom`,squareTableLabelRightBottom:`${Dh}__table-label--right-bottom`,squareTableLabelLeftTop:`${Dh}__table-label--left-top`,squareTableLabelRightTop:`${Dh}__table-label--right-top`};function gse(t,e,i={}){const{focus:r,labels:s}=t,n=!!r,a=W4e(t,e,i),o={justifyContent:"center"},u=K3(),h=i.key??e;return n?F("div",{class:li.diamondContainer,key:`${h}-container`,styles:o},F("div",{class:li.diamondLeftCol},u?s.right:s.left),F("div",{class:li.diamondMidCol},F("div",{class:li.diamondMidColLabel},s.top),a,F("div",{class:li.diamondMidColLabel},s.bottom)),F("div",{class:li.diamondRightCol},u?s.left:s.right)):F("div",{class:li.squareTable,key:`${h}-container`},F("div",{class:li.squareTableRow},F("div",{class:Lg(li.squareTableCell,li.squareTableLabel,li.squareTableLabelRightBottom)},u?s.top:s.left),F("div",{class:li.squareTableCell}),F("div",{class:Lg(li.squareTableCell,li.squareTableLabel,li.squareTableLabelLeftBottom)},u?s.left:s.top)),F("div",{class:li.squareTableRow},F("div",{class:li.squareTableCell}),a,F("div",{class:li.squareTableCell})),F("div",{class:li.squareTableRow},F("div",{class:Lg(li.squareTableCell,li.squareTableLabel,li.squareTableLabelRightTop)},u?s.right:s.bottom),F("div",{class:li.squareTableCell}),F("div",{class:Lg(li.squareTableCell,li.squareTableLabel,li.squareTableLabelLeftTop)},u?s.bottom:s.right)))}function zq(t,e,i){const r=`${i}_arrowStart`,s=`${i}_arrowEnd`,n=t==="left",a={markerStart:null,markerEnd:null};switch(e){case"HL":n?a.markerStart=`url(#${s})`:a.markerEnd=`url(#${r})`;break;case"LL":a.markerStart=`url(#${s})`;break;case"LH":n?a.markerEnd=`url(#${r})`:a.markerStart=`url(#${s})`;break;default:a.markerEnd=`url(#${r})`}return a}function W4e(t,e,i={}){const{focus:r,numClasses:s,colors:n,rotation:a}=t,{opacity:o,cssEffectFilter:u,ariaLabel:h}=i,p=i.size??60,y=!!r,v=Math.sqrt(p**2+p**2)+(y?0:5),b=[],w=[],S=[],M=(p||75)/s;for(let oe=0;oe<s;oe++){const ue=oe*M;for(let Se=0;Se<s;Se++){const me=Se*M,ke=PN(n[oe][Se]),te=ON(null),be={type:"rect",x:me,y:ue,width:M,height:M},Me=use(ke);Me&&b.push(Me);const et=AN(be,ke.fill,te,null);et&&w.push(et),S.push(cse(be))}}const T=15,I=15,L=10;let O=null;y||(O="margin: -15px -15px -18px -15px");const R=zq("left",r,e),z=zq("right",r,e),j=hse(S),U=_5(j,v,v,0,!1,a,!1),B=_5(j,v,v,0,!1,y?-45:null,!1),Q={filter:u??void 0,opacity:o==null?"":`${o}`};return F("div",{class:y?li.diamondMidColRamp:li.squareTableCell,styles:Q},F("svg",{"aria-label":h,focusable:!1,height:v,role:"image",style:O,width:v,xmlns:H4e},F("defs",null,F("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},F("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),F("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},F("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),b),F("g",{transform:U},w),F("g",{transform:B},F("line",{fill:"none","marker-end":R.markerEnd,"marker-start":R.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:p-T,y2:T}),F("line",{fill:"none","marker-end":z.markerEnd,"marker-start":z.markerStart,stroke:"#555555","stroke-width":"1",x1:I,x2:p-I,y1:p+L,y2:p+L}))))}const Db={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function Z4e(t,e,i){let s=22,n=22;t<1?s*=.75:t>1&&(n*=1.25);const a=0,o=0;let u=22,h=22;return e&&i&&(s=n=u=h=0),[{type:"path",path:[{command:"M",values:[u,a]},{command:"L",values:[i?u:.875*u,a]},{command:"L",values:[i?s-.5*u:o,n-.5*h]},{command:"L",values:[s-.5*u,n-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[u,a]},{command:"L",values:[u,e?a:.125*h]},{command:"L",values:[s-.5*u,e?n-.5*h:h]},{command:"L",values:[s-.5*u,n-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*u,n-.5*h]},{command:"L",values:[i?s-.5*u:o,n-.5*h]},{command:"L",values:[i?s-.5*u:o,e?n-.5*h:h]},{command:"L",values:[s-.5*u,e?n-.5*h:h]},{command:"Z",values:[]}]}]}function Y4e(t){const i=.5*t,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*22*.5]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[s,.7*22+i-.7*22*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[22,i]},{command:"L",values:[22,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,r]},{command:"L",values:[22,r]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[s,.7*22*.5]},{command:"Z",values:[]}]}]}function J4e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function X4e(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=0,n=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[n,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[n,t-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,t]},{command:"L",values:[i,t-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function Q4e(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=.5*i,n=.15*i,a=0,o=t-n;return[{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:n},{type:"path",path:[{command:"M",values:[a,n]},{command:"L",values:[a,o]},{command:"L",values:[i,o]},{command:"L",values:[i,n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:n,rx:s,ry:n}]}function K4e(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=.15*i,n=t-s;return[{type:"ellipse",cx:.5*i,cy:n,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,n]},{command:"L",values:[0,n]},{command:"Z",values:[]}]}]}function eDe(t){let e=t;const i=6;e-=e<22?.5*i:i;const r=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,t-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:r}]}function tDe(t){let e=t;const i=t,r=4;e-=e<22?.5*r:r;const s=0,n=0,a=e,o=i,u=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*a,s]},{command:"L",values:[a,.5*o-u]},{command:"L",values:[.45*a-u,.5*o+u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,s]},{command:"L",values:[.45*a-u,.5*o+u]},{command:"L",values:[n,.5*o-u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*o-u]},{command:"L",values:[.45*a-u,.5*o+u]},{command:"L",values:[.45*a,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,i]},{command:"L",values:[a,.5*o-u]},{command:"L",values:[.45*a-u,.5*o+u]},{command:"Z",values:[]}]}]}function iDe(t){let i=t;i-=i<22?.5*2:2;const r=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function Ad(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function oQe(t,e){if(t==null)return new we;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new we(t);return new we([Ad(i.r,e),Ad(i.g,e),Ad(i.b,e),i.a])}function rDe(t){return t=t||globalThis.location.hostname,sDe.some(e=>t?.match(e)!=null)}function Fq(t,e){return t?(e=e||globalThis.location.hostname)?e.match(vse)!=null||e.match(bse)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(_se)!=null||e.match(wse)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const vse=/^devext\.arcgis\.com$/,_se=/^qaext\.arcgis\.com$/,bse=/^[\w-]*\.mapsdevext\.arcgis\.com$/,wse=/^[\w-]*\.mapsqa\.arcgis\.com$/,sDe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,vse,_se,/^jsapps\.esri\.com$/,bse,wse],nDe=["web-gltf","web","cim"];function Sse(t,e,i){const r=t.name;return r==null?Promise.reject(new G("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?aDe(r,e,i):kie(t,e,i).then(s=>$se(s,r,e,RPe,i))}function xse(t,e){return e.items.find(i=>i.name===t)}async function $se(t,e,i,r,s){const n=i?.portal!=null?i.portal:ge.getDefault(),a={portal:n,url:Lr(t.baseUrl)},o=xse(e,t.data);if(!o)throw new G("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const u=s?.acceptedFormats??nDe,h=r(o,u);if(!h)throw new G("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${u})`,{symbolName:e});const{url:p,format:y}=h;let v=Vc(p,a),b=o.thumbnail?.href??null;const w=o.thumbnail?.imageData;rDe()&&(v=Fq(v)??"",b=Fq(b));const S={portal:n,url:Lr(r4(v)),origin:"portal-item"};return mN(v,s).then(M=>{const T=y==="cim"?Rie(M.data):M.data,I=Pie(T,S);if(I&&el(I)){if(b){const L=Vc(b,a);I.thumbnail=new Zf({url:L})}else w&&(I.thumbnail=new Zf({url:`data:image/png;base64,${w}`}));t.styleUrl?I.styleOrigin=new Go({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(I.styleOrigin=new Go({portal:i.portal,styleName:t.styleName,name:e}))}return I})}function aDe(t,e,i){const r=DPe.replaceAll(/\{SymbolName\}/gi,t),s=e.portal!=null?e.portal:ge.getDefault();return mN(r,i).then(n=>{const a=Rie(n.data);return Pie(a,{portal:s,url:Lr(r4(r)),origin:"portal-item"})})}const oDe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:$se,getStyleItemFromStyle:xse,resolveWebStyleSymbol:Sse},Symbol.toStringTag,{value:"Module"})),Ef=22,pM=120,vE=80,Vq=50,b5=20;function kg(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=lt(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(s,vE),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?LN(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function lDe(t,e){if(t.thumbnail?.url)return t.thumbnail.url;if(e.type==="icon"&&e?.resource?.href)return A4e(e);const i=Si("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const r=await Sse(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(r&&"thumbnail"in r&&r.thumbnail?.url)return r.thumbnail.url}return i}function IA(t,e=1){const i=t.a,r=yE(t),s=r.h,n=r.s/e,a=100-(100-r.v)/e,{r:o,g:u,b:h}=Lm({h:s,s:n,v:a});return[o,u,h,i]}function FT(t){return t.type==="water"?t.color==null?null:t.color:t.material?.color==null?null:t.material.color}function Rt(t,e=0){const i=FT(t);if(!i){if(t.type==="fill")return null;const s=o4e.r,n=Ad(s,e);return[n,n,n,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=Ad(r[s],e);return r}async function Mse(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await a4e(Si(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function jq(t){return t.outline?kg(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function kN(t,e){const i=FT(t);if(!i)return null;let r="rgba(";return r+=Ad(i.r,e)+",",r+=Ad(i.g,e)+",",r+=Ad(i.b,e)+",",r+i.a+");"}function Uq(t,e){const i=t.edges;return!i||!i.color||!i.size?null:{color:i.color.toCss(!0),width:Math.min(lt(i.size),e,vE),join:"round"}}function w5(t,e){const i=kN(t,e);if(!i||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return null;const r={color:i,width:Math.min(t.size?lt(t.size):.75,vE)};return"pattern"in t&&t.pattern?.type==="style"&&(r.style=LN(t.pattern.style)),"cap"in t&&t.cap&&(r.cap=t.cap),"join"in t&&t.join&&(r.join=t.join==="miter"?lt(2):t.join),r}function Ax(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function uDe(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function cDe(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const a=e,o=e;switch(t.resource?.primitive??LSe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Rt(t,0),stroke:kg(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[0,0]},{command:"L",values:[a,0]},{command:"L",values:[a,o]},{command:"Z",values:[]}]},fill:Rt(t,0),stroke:kg(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[.5*a,0]},{command:"L",values:[a,o]},{command:"Z",values:[]}]},fill:Rt(t,0),stroke:kg(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[.5*a,o]},{command:"M",values:[0,.5*o]},{command:"L",values:[a,.5*o]}]},stroke:jq(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[a,o]},{command:"M",values:[a,0]},{command:"L",values:[0,o]}]},stroke:jq(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*a,0]},{command:"L",values:[a,.5*o]},{command:"L",values:[.5*a,o]},{command:"Z",values:[]}]},fill:Rt(t,0),stroke:kg(t)})}break}case"object":switch(t.resource?.primitive??RSe){case"cone":{const s=Ax(Rt(t,0),Rt(t,-.6),i?b5:e),n=K4e(e,i);r.push({shape:n[0],fill:s},{shape:n[1],fill:s});break}case"inverted-cone":{const s=Rt(t,0),n=Ax(s,Rt(t,-.6),e),a=eDe(e);r.push({shape:a[0],fill:n},{shape:a[1],fill:s});break}case"cube":{const s=X4e(e,i);r.push({shape:s[0],fill:Rt(t,0)},{shape:s[1],fill:Rt(t,-.3)},{shape:s[2],fill:Rt(t,-.5)});break}case"cylinder":{const s=Ax(Rt(t,0),Rt(t,-.6),i?b5:e),n=Q4e(e,i);r.push({shape:n[0],fill:s},{shape:n[1],fill:s},{shape:n[2],fill:Rt(t,0)});break}case"diamond":{const s=tDe(e);r.push({shape:s[0],fill:Rt(t,-.3)},{shape:s[1],fill:Rt(t,0)},{shape:s[2],fill:Rt(t,-.3)},{shape:s[3],fill:Rt(t,-.7)});break}case"sphere":{const s=Ax(Rt(t,0),Rt(t,-.6));s.x1=0,s.y1=0,s.x2=.25*e,s.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:s});break}case"tetrahedron":{const s=iDe(e);r.push({shape:s[0],fill:Rt(t,-.3)},{shape:s[1],fill:Rt(t,0)},{shape:s[2],fill:Rt(t,-.6)});break}}break}return r}function _E(t){const e=typeof t?.size=="number"?t?.size:null;return e?lt(e):null}function hDe(t){return t.type==="icon"?"multiply":"tint"}async function dDe(t,e){const i=_E(e),r=e?.maxSize?lt(e.maxSize):null,s=e?.disableUpsampling??!1,n=t.symbolLayers,a=[],o=[];let u=!1,h=0,p=0,y=0;n.forEach(w=>{if(w.type!=="icon"&&w.type!=="object")return;w&&w.type==="icon"&&(y=Math.max(w.size&&lt(w.size),y));const S=w.type==="icon"?w.size&&lt(w.size):0,M=i||S?Math.ceil(Math.min(i||S,r||pM)):Ef;let T=w.type==="icon"?w.angle:null;if(e?.rotation!=null&&(T=(T??0)+e.rotation),o.push(T),w?.resource?.href){const I=lDe(t,w).then(L=>{const O=w?.material?.color,R=hDe(w);return C4e(L,M,O,R,s)}).then(L=>{const O=L.width,R=L.height;return h=Math.max(h,O),p=Math.max(p,R),T&&(u=!0),[{shape:{type:"image",x:0,y:0,width:O,height:R,src:L.url},fill:null,stroke:null}]});a.push(I)}else{let I=M;w.type==="icon"&&i&&(I=M*(S/y));const L=e?.symbolConfig==="tall"||e?.symbolConfig?.isTall||w.type==="object"&&uDe(w);h=Math.max(h,L?b5:I),p=Math.max(p,I),T&&w.resource?.primitive&&["square","triangle","x"].includes(w.resource?.primitive)&&(u=!0),a.push(Promise.resolve(cDe(w,I,L)))}});const v=await Promise.allSettled(a),b=[];return v.forEach(w=>{w.status==="fulfilled"?b.push(w.value):w.reason&&le.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",w.reason)}),Ev(b,[h,p],{node:e?.node,scale:!1,opacity:e?.opacity,ariaLabel:e?.ariaLabel,rotations:o,useRotationSize:u})}function pDe(t,e){const i=t.symbolLayers,r=[],s=gE(t),n=_E(e),a=(e?.maxSize?lt(e.maxSize):null)||vE;let o,u=0,h=0;return i.forEach((p,y)=>{if(!p||p.type!=="line"&&p.type!=="path")return;const v=[];switch(p.type){case"line":{const b=w5(p,0);if(b==null)break;const w=b?.width||0;y===0&&(o=w);const S=Math.min(n||w,a),M=y===0?S:n?S*(w/o):S,T=M>Vq/2?2*M:Vq;h=Math.max(h,M),u=Math.max(u,T),b.width=M,v.push({shape:{type:"path",path:[{command:"M",values:[0,.5*h]},{command:"L",values:[u,.5*h]}]},stroke:b});break}case"path":{const b=Math.min(n||Ef,a),w=Rt(p,0),S=Rt(p,-.2),M=kN(p,-.4),T=M?{color:M,width:1}:{};if(p.profile==="quad"){const I=p.width,L=p.height,O=Z4e(I&&L?I/L:1,L===0,I===0),R={...T,join:"bevel"};v.push({shape:O[0],fill:S,stroke:R},{shape:O[1],fill:S,stroke:R},{shape:O[2],fill:w,stroke:R})}else v.push({shape:Db.pathSymbol3DLayer[0],fill:S,stroke:T},{shape:Db.pathSymbol3DLayer[1],fill:w,stroke:T});h=Math.max(h,b),u=h}}r.push(v)}),Promise.resolve(Ev(r,[u,h],{node:e?.node,scale:s,opacity:e?.opacity,ariaLabel:e?.ariaLabel}))}async function fDe(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,s=_E(e),n=e?.maxSize?lt(e.maxSize):null,a=s||Ef,o=[];let u=0,h=0,p=!1;for(let y=0;y<r.length;y++){const v=r.at(y),b=[];if(!i||v.type==="fill"){switch(v.type){case"fill":{const w=Math.min(a,n||pM);if(u=Math.max(u,w),h=Math.max(h,w),p=!0,i){const S=Db.meshSymbol3DFill,M=kN(v,-.4),T=Uq(v,.05*w)??(M?{join:"round",color:M,width:1}:null);b.push({shape:S[0],fill:Rt(v,0),stroke:T},{shape:S[1],fill:Rt(v,-.2),stroke:T},{shape:S[2],fill:Rt(v,-.6),stroke:T})}else{let S=Rt(v,0);const M="pattern"in v?v.pattern:null,T=kg(v),I=FT(v);M!=null&&M.type==="style"&&M.style!=="solid"&&I&&(S=await Mse(M,I)),b.push({shape:Db.fill[0],fill:S,stroke:T})}break}case"line":{const w=w5(v,0);if(w==null)break;const S={stroke:w,shape:Db.fill[0]};u=Math.max(u,Ef),h=Math.max(h,Ef),b.push(S);break}case"extrude":{const w=Rt(v,0),S=Rt(v,-.2),M=Math.min(a,n||pM),T=Y4e(M),I=Ef,L=.7*Ef+.5*M,O=Uq(v,.1*Math.min(I,L))??{join:"round",...w5(v,-.4),width:1};b.push({shape:T[0],fill:S,stroke:O},{shape:T[1],fill:S,stroke:O},{shape:T[2],fill:w,stroke:O}),u=Math.max(u,I),h=Math.max(h,L);break}case"water":{const w=FT(v),S=IA(w),M=IA(w,2),T=IA(w,3),I=J4e();p=!0,b.push({shape:I[0],fill:S},{shape:I[1],fill:M},{shape:I[2],fill:T});const L=Math.min(a,n||pM);u=Math.max(u,L),h=Math.max(h,L);break}}o.push(b)}}return Ev(o,[u,h],{node:e?.node,scale:p,opacity:e?.opacity,ariaLabel:e?.ariaLabel})}function mDe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new G("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return dDe(t,e);case"line-3d":return pDe(t,e);case"polygon-3d":case"mesh-3d":return fDe(t,e)}return Promise.reject(new G("symbolPreview: swatchInfo3D","symbol not supported."))}const yDe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Mse,getSizeFromOptions:_E,getSymbolLayerFill:Rt,previewSymbol3D:mDe},Symbol.toStringTag,{value:"Module"})),Gq={HH:315,HL:45,LL:135,LH:225},gDe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function vDe(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Rt(t.symbolLayers.at(0));if(e==="simple-line"){const i=gw(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=gw(t);return i&&i.color}return n4e(t)}function _De(t,e){const i=e.HH.label,r=e.LL.label,s=e.HL.label,n=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:s,right:n};case"HL":return{top:s,bottom:n,left:r,right:i};case"LL":return{top:r,bottom:i,left:n,right:s};case"LH":return{top:n,bottom:s,left:i,right:r}}}function bDe(t){const{focus:e,infos:i,numClasses:r}=t,s=gDe[r],n={};i.forEach(o=>{n[o.value]={label:o.label,fill:vDe(o.symbol)}});const a=[];for(let o=0;o<r;o++){const u=[];for(let h=0;h<r;h++){const p=n[s[o][h]];u.push(p.fill)}a.push(u)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:a,labels:_De(e,n),rotation:Tse(e)}}function Tse(t){let e=Gq[t];return t&&e==null&&(e=Gq.HH),e||0}let zy=null;const qq=[255,255,255];function Bq(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function wDe(t,e,i){const{backgroundColor:r,outline:s,dotSize:n}=t,a=22,o=.8,u=Math.round(a*a/Math.max(n,.5)**2*o),h=window.devicePixelRatio,p=document.createElement("canvas"),y=a*h;p.width=y,p.height=y,p.style.width=p.width/h+"px",p.style.height=p.height/h+"px";const v=p.getContext("2d");if(r&&(v.fillStyle=r.toCss(!0),v.fillRect(0,0,y,y),v.fill()),v.fillStyle=e?.toCss(!0)??"",zy&&zy.length/2===u)for(let w=0;w<2*u;w+=2){const S=zy[w],M=zy[w+1];v.fillRect(S,M,n*h,n*h),v.fill()}else{zy=[];for(let w=0;w<2*u;w+=2){const S=Bq(0,y),M=Bq(0,y);zy.push(S,M),v.fillRect(S,M,n*h,n*h),v.fill()}}s&&(s.color&&(v.strokeStyle=s.color.toCss(!0)),v.lineWidth=s.width,v.strokeRect(0,0,y,y));const b=new Image(a,a);return b.src=p.toDataURL(),b.ariaLabel=null,b.alt="",b}function SDe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,s=t.length,n=r/s,a=[],o=gw(e.outline);o?.width!=null&&(o.width*=2),(o||e.backgroundColor)&&a.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:o,offset:[0,0]});const u=e.values,h=u&&u.length===s&&u.reduce((w,S)=>w+S,0)===100,p=[0];for(let w=0;w<s;w++){let S=null;h&&(S=u[w]*r/100,p.push(S+p[w])),a.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(S??n)/2} ${r}`,dashoffset:"-"+(h?p[w]/2:w*(n/2)),color:t[w]},offset:[0,0]})}let y=null;const v=2*i+(o?.width||0),b=e.holePercentage;if(b){o&&a.push({shape:{type:"circle",cx:i,cy:i,r:i*b},fill:null,stroke:o,offset:[0,0]});const w=v/2;y=[[{shape:{type:"circle",cx:w,cy:w,r:w},fill:qq,stroke:o?{...o,color:qq}:null,offset:[0,0]},{shape:{type:"circle",cx:w,cy:w,r:i*b},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return Ev([a],[v,v],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:y,rotations:[-90],ariaLabel:e.ariaLabel})}function uf(t,e={}){const s=e.align==="horizontal",n=s?75:24,a=s?24:75,o=e.width??n,u=e.height??a,h=e.gradient??!0,p=window.devicePixelRatio,y=o*p,v=u*p,b=document.createElement("canvas");b.width=y,b.height=v,b.ariaLabel=e.ariaLabel??null,b.style.width=`${o}px`,b.style.height=`${u}px`;const w=b.getContext("2d"),S=s?y:0,M=s?0:v;if(h){const I=w.createLinearGradient(0,0,S,M),L=t.length,O=L===1?0:1/(L-1);t.forEach((R,z)=>I.addColorStop(z*O,R.toString())),w.fillStyle=I,w.fillRect(0,0,y,v)}else{const I=s?y/t.length:y,L=s?v:v/t.length;let O=0,R=0;for(const z of t)w.fillStyle=z.toString(),w.fillRect(O,R,I,L),O=s?O+I:0,R=s?0:R+L}const T=document.createElement("div");return T.style.width=`${o}px`,T.style.height=`${u}px`,$De(T,e?.cssEffectFilter),T.appendChild(b),T}function xDe(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function $De(t,e){if(!e)return;t.style.filter=e;const i=xDe(e);if(i){const r=lt(gt(i));r<0?t.style.marginLeft=`${Math.abs(r)}px`:t.style.marginRight=`${r}px`}}async function Ese(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await K(()=>import("./previewWebStyleSymbol-D308Bl8s.js"),[],import.meta.url);return i(t,Ese,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await K(()=>Promise.resolve().then(()=>yDe),void 0,import.meta.url);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await K(()=>import("./previewSymbol2D-DdSe73XZ.js"),__vite__mapDeps([334,207]),import.meta.url);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await K(()=>Promise.resolve().then(()=>zFe),void 0,import.meta.url);return i(t,e)}default:return}}function Cse(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?Cse(t.parent):1):1}async function lQe(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,s=e?.ignoreOpacity?1:Cse(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const O=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):t.symbol.clone();return CA(O,null,{add:s}),O}const n=e?.renderer??TDe(r);let a=n&&"getSymbolAsync"in n?await n.getSymbolAsync(t,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):a.clone(),!(n&&"visualVariables"in n&&n.visualVariables?.length&&MDe(a)))return CA(a,null,{add:s}),a;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&e?.arcade==null){const O={...e};O.arcade=await Gd(),e=O}const{getColor:o,getOpacity:u,getAllSizes:h,getRotationAngle:p}=await K(()=>Promise.resolve().then(()=>Em),void 0,import.meta.url),y=[],v=[],b=[],w=[];for(const O of n.visualVariables)switch(O.type){case"color":y.push(O);break;case"opacity":v.push(O);break;case"rotation":w.push(O);break;case"size":O.target||b.push(O)}const S=!!y.length&&y[y.length-1],M=S?o(S,t,e):null,T=!!e?.ignoreOpacity,I=!!v.length&&v[v.length-1],L=I?u(I,t,e):null;if(CA(a,M,T?void 0:{override:L,add:s}),b.length&&e?.ignoreSizeVariables!==!0){const O=h(b,t,e);await G4e(a,O)}if(e?.ignoreRotationVariables!==!0)for(const O of w)q4e(a,p(O,t,e),O.axis);return a}function MDe(t){return!el(t)||t.symbolLayers.at(0)?.type!=="water"}function TDe(t){if(t)return"renderer"in t?t.renderer:void 0}function EDe(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const s=r.visualVariables.find(p=>p.type==="size");if(!("stops"in s)||!s.stops)return null;const n=s.stops.find(p=>p.useMinValue),a=s.stops.find(p=>p.useMaxValue);if(n==null||a==null)return null;const o=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,u=s.field,h=e.getDisplayStatistics(o,u);return h?new $t({field:s.field,minSize:t.clusterMinSize,minDataValue:h.minValue,maxSize:t.clusterMaxSize,maxDataValue:h.maxValue}):null}const CDe=/^-?(\d+)(\.(\d+))?$/i;function IDe(t,e){return t-e}function LDe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function ADe(t,e,i,r,s){const n=fM(t,e,i,r),a=n.previous==null||n.previous<=s,o=n.next==null||n.next<=s;return a&&o||n.previous+n.next<=2*s}function VT(t){const e=String(t),i=e.match(CDe);if(i?.[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),s=r[0],n=r[1];if(s&&n){const a=Number(s);let o=Number(n);const u=o>0;u||(o=Math.abs(o));const h=VT(a);return u?(h.integer+=o,o>h.fractional?h.fractional=0:h.fractional-=o):(h.fractional+=o,o>h.integer?h.integer=1:h.integer-=o),h}}return{integer:0,fractional:0}}function fM(t,e,i,r){const s={previous:null,next:null};if(i!=null){const n=t-i,a=e-i-n;s.previous=Math.floor(Math.abs(100*a/n))}if(r!=null){const n=r-t,a=r-e-n;s.next=Math.floor(Math.abs(100*a/n))}return s}function jT(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:s=!1,indexes:n=i.map((a,o)=>o)}=e;n.sort(IDe);for(let a=0;a<n.length;a++){const o=n[a],u=i[o],h=o===0?null:i[o-1],p=o===i.length-1?null:i[o+1],y=VT(u).fractional;if(y){let v,b=0,w=!1;for(;b<=y&&!w;){const S=LDe(u,b);v=s&&a===0?S[1]:S[0],w=ADe(u,v,h,p,r),b++}w&&(i[o]=v)}}return i}const PDe={maximumFractionDigits:20};function ODe(t){return Uc(t,PDe)}const uQe=",",kDe={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},RDe=new Set(["integer","small-integer"]);let LA=null;function cQe(t){return V3(t)||IQ(t)||LQ(t)}async function hQe(t){const{field:e,field2:i,field3:r,normalizationField:s,valueExpression:n,fields:a}=t;let o=[];if(n){if(!LA){const{arcadeUtils:u}=await Gd();LA=u}o=LA.extractFieldNames(n)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),s&&o.push(s),a&&o.push(...a),o}function Q_(t){return String(t).padStart(2,"0")}function Hq(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${Q_((i?t.getMonth():t.getUTCMonth())+1)}-${Q_(i?t.getDate():t.getUTCDate())} ${Q_(i?t.getHours():t.getUTCHours())}:${Q_(i?t.getMinutes():t.getUTCMinutes())}:${Q_(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function dQe(t,e,i,r){const{hasQueryEngine:s}=t,n=`(${Hq(i,Wq(t,i),s)} - ${Hq(e,Wq(t,e),s)})`;let a=kDe[r],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:a===1?n:`(${n} ${o} ${a})`,sqlWhere:null}}function Wq(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(V3(i))return"field"}}function pQe(t,e){const i=e&&t.getField(e);return!!i&&RDe.has(i.type)}function fQe(t){return`cast(${t} as float)`}function DDe(t,e){const{format:i,fieldFormat:r,timeZoneOptions:s,fieldType:n}=e??{},a=r?dye(r):null;let o,u;if(s&&({timeZone:o,timeZoneName:u}=sye(s.layerTimeZone,s.datesInUnknownTimezone,s.viewTimeZone,a||O_(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const h=a||O_(i||"short-date");return typeof t=="string"?pye(t,{...h}):Wo(t,{...h,timeZone:mu})}case"time-only":{const h=a||O_(i||"short-time");return typeof t=="string"?fye(t,h):Wo(t,{...h,timeZone:mu})}case"timestamp-offset":{if(!o&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const h=i||a||s?a||O_(i||"short-date-short-time"):void 0,p=h?{...h,timeZone:o,timeZoneName:u}:void 0;return typeof t=="string"?mye(t,p):Wo(t,p)}default:{const h=i||a||s?a||O_(i||"short-date-short-time"):void 0;return Wo(typeof t=="string"?new Date(t):t,h?{...h,timeZone:o,timeZoneName:u}:void 0)}}}const Ise="<",Lse=">";function Ase(t,e,i,r){let s="";e===0?s=`${Ise} `:e===i&&(s=`${Lse} `);const n=mM(t,r);return n==null?"":s+n}function NDe(t){const{format:e,fieldFormat:i}=t||{};return i?.type==="number"||!!e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)}function mM(t,e){if(t==null)return t;const{fieldType:i,format:r,fieldFormat:s,timeZoneOptions:n}=e||{};if(RN(i))return DDe(t,{fieldType:i,format:r?.dateFormat,fieldFormat:s?.type==="date-time"?s:void 0,timeZoneOptions:n});if(typeof t=="string"&&NDe(e)){const o=Number(t);isNaN(o)||(t=o)}if(typeof t=="string")return t;const a=s?.type==="number"?vye(s):r?gye(r):void 0;return a?Uc(t,a):ODe(t)}const zDe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function S5(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(a=>a.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const s=i!=null&&r!=null?i+(r-i)/2:0,{getColor:n}=await K(async()=>{const{getColor:a}=await Promise.resolve().then(()=>Em);return{getColor:a}},void 0,import.meta.url);return n(e,s)??null}async function Pse(t,e){const i=t.trailCap,r=t.trailWidth||1,s=e||await S5(t)||t.color;return new Ui({cap:i,color:s,width:r})}function FDe(t,e){if(!e)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const i=t.featureReduction.fields.find(({name:r})=>r.toLowerCase()===e.toLowerCase());return i&&"getField"in t?t.getField(i.onStatisticField):null}}return"getField"in t?t.getField?.(e):null}function VDe(t,e){const i="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(i?.length&&e)return i.find(r=>r.fieldName?.toLowerCase()===e.toLowerCase())}function Zq(t){let e=0,i=0;return t.stops?(e=t.stops?.at(0)?.value??e,i=t.stops?.at(-1)?.value??i):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,i=t.maxDataValue??i),i-e>2*BP.days?"short-date":"short-date-short-time"}function RN(t){return["date","date-only","time-only","timestamp-offset"].includes(t||"")}function Ose(t){return OY(t)&&!("featureReduction"in t&&t.featureReduction)}function jDe(t,e,i){const r=yM(t,e.field,i);return r?(RN(r.fieldType)&&(Ose(t)?r.fieldFormat??=new Ed({dateStyle:"short",timeStyle:Zq(e)==="short-date-short-time"?"short":null}):r.format??=new hu({dateFormat:Zq(e)})),r):null}function yM(t,e,i){const r=FDe(t,e),s=r?.name;if(!s)return null;const n=r?.type,a=Ose(t);return{fieldType:n,format:a?null:VDe(t,s)?.format,fieldFormat:a?t.getFieldConfiguration(s)?.fieldFormat:null,timeZoneOptions:RN(n)?{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}:null}}function ou(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find(({theme:i})=>i===e)}function UDe(t,e){let i=t??"";return e!=null&&e&&(i=i?"("+i+") AND ("+e+")":e),i}const GDe=new we([64,64,64]);function kse(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((s,n)=>i.includes(n)?Ase(s,n,r,e):null)}async function Yq(t,e,i){let r=!1,s=[],n=[];if(t.stops){const h=t.stops;s=h.map(p=>p.value),r=h.some(p=>!!p.label),r&&(n=h.map(p=>p.label))}const a=s[0],o=s[s.length-1];if(a==null&&o==null)return null;const u=r?null:kse(s,i);return(await Promise.all(s.map(async(h,p)=>{const y=t.type==="opacity"?await qDe(h,t,e):(await K(async()=>{const{getColor:b}=await Promise.resolve().then(()=>Em);return{getColor:b}},void 0,import.meta.url)).getColor(t,h),v=r?n[p]:u?.[p]??"";return y==null?null:{value:h,color:y,label:v}}))).filter(Qr).reverse()}async function qDe(t,e,i){const r=new we(i??GDe),s=(await K(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>Em);return{getOpacity:n}},void 0,import.meta.url)).getOpacity(e,t);return s!=null&&(r.a=s),r}function BDe(t){let e=!1,i=[],r=[];i=t.map(o=>o.value),e=t.some(o=>!!o.label),e&&(r=t.map(o=>o.label??""));const s=i[0],n=i[i.length-1];if(s==null&&n==null)return null;const a=e?null:kse(i);return i.map((o,u)=>({value:o,color:Rse(o,t),label:e?r[u]:a?.[u]??""})).reverse()}function Rse(t,e){const{startIndex:i,endIndex:r,weight:s}=HDe(t,e);if(i===r)return e[i].color;const n=we.blendColors(e[i].color,e[r].color,s);return new we(n)}function HDe(t,e){let i=0,r=e.length-1;return e.some((s,n)=>t<s.value?(r=n,!0):(i=n,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function WDe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,s)=>{s===0?i.push({value:e.max,color:new we(r.toColor),label:"high"}):i.push({value:null,color:new we(r.toColor),label:""}),s===t.colorRamps.length-1?i.push({value:e.min,color:new we(r.fromColor),label:"low"}):i.push({value:null,color:new we(r.fromColor),label:""})});else{let r,s;t&&t.type==="algorithmic"?(r=t.fromColor,s=t.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:e.max,color:new we(s),label:"high"},{value:e.min,color:new we(r),label:"low"}]}return i}function ZDe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>r.color?.a>0);let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new Pc({ratio:1,color:r.color})),i++)}return e.map((r,s)=>{let n="";return s===0?n=t.legendOptions?.minLabel||"low":s===i&&(n=t.legendOptions?.maxLabel||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}const YDe="spike-height-override";function JDe(t){const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,s=r?.includes("solid-fill")||r?.includes("gradient-fill");let n=e?.toArray(),a=!1;return r?.includes("outline")&&s?a=!0:n=t.color?.toArray(),{type:"CIMSolidStroke",effects:XDe(r),enable:!0,colorLocked:a,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:4,width:i??Ut(1),color:n}}function XDe(t){if(!t?.includes("closed"))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function Jq(t){const{color:e,symbolStyle:i}=t,r=i?.includes("solid-fill"),s=i?.includes("gradient-fill");if(!r&&!s||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e?.toArray()};const n=e.clone();return n.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:n.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function Dse(t,e){const{defaultHeight:i,baseWidth:r,color:s,strokeColor:n,primitiveOverrides:a,symbolStyle:o,strokeWidth:u}=e,h=t.data.symbol?.type==="CIMPointSymbol"?t.data.symbol:null,p=h?.symbolLayers;if(!p)return t;const y=h.effects,v=y?.find(I=>I.type==="CIMGeometricEffectTaperedPolygon"),b=y?.find(I=>I.type==="CIMGeometricEffectRadial"&&I.primitiveName===YDe);r!=null&&v&&(v.fromWidth=r),i!=null&&b&&(b.length=i);const w=p?.find(I=>I.type==="CIMSolidStroke"),S=p?.find(I=>I.type==="CIMSolidFill"),M=p?.find(I=>I.type==="CIMGradientFill"),T=M?.colorRamp?.type==="CIMMultipartColorRamp"&&M.colorRamp.colorRamps[0]?.type==="CIMLinearContinuousColorRamp"?M.colorRamp.colorRamps[0]:null;if(o){const I=S?.color??T?.fromColor??w?.color,L=s??(I?new we(I):void 0),O=w?.color??I,R=n??(O?new we(O):void 0),z=o.includes("solid-fill"),j=o.includes("gradient-fill");if(z||j||AA(p,S??M),L){if(z)AA(p,M),S?S.color=L?.toArray():p.push(Jq({...e,color:L}));else if(j)if(AA(p,S),M){if(T&&s){const U=L.clone();U.a=0,T.fromColor=L.toArray(),T.toColor=U.toArray()}}else p.push(Jq({...e,color:L}))}if(w){const U=JDe({...e,strokeColor:R,color:L});w.effects=U.effects,w.color=U.color,w.width=U.width,w.colorLocked=U.colorLocked}}else if(w&&(n&&(w.color=n.toArray()),u!=null&&(w.width=u)),S&&s&&(S.color=s.toArray()),T&&s){const I=s.clone();I.a=0,T.fromColor=s.toArray(),T.toColor=I.toArray()}return a!==void 0&&(t.data.primitiveOverrides=J(a)),t}function AA(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const Px=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Q0=["","","",""],QDe=["","","",""],KDe=["","","",""],UT=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],eNe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],tNe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],iNe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],rNe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Xq=["","","","","","","","","","","","",""],sNe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Qq=["",""],nNe=["",""],aNe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],oNe=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P=0,he=1,qe=2,Ki=3,E=4,Il=5,gM=6,C=7,$s=8,Js=9,$o=10,Xe=11,H=12,lNe=13,uNe=14,cNe=15,hNe=16,dNe=17,Oe=18,pNe=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],Tl=100,fNe=[Tl+0,P,P,P,P,Tl+1,Tl+2,Tl+3,he,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Tl+4,E,E,E,P,E,P,E,P,E,E,E,P,P,E,E,P,P,P,P,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,P,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,P,P,E,E,P,P,E,E,P,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,P,P,P,Tl+5,C,C,Tl+6,Tl+7],mNe=[[Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,gM,Il,gM,$s,Il,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Il,Il,Il,gM,$s,E,E,Xe,Xe,Xe,E,E,E,E,E,$o,Js,$o,Js,Js,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Js,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,Oe,Oe,Oe,Oe,Oe,Oe,Il,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Js,E,Xe,Xe,Xe,Xe,E,E,E,E,P,E,E,Oe,E,E,Xe,Xe,qe,qe,E,P,E,E,E,qe,P,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,P,P,P,P,P,P,P,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,P,E,E,E,E,E,E,E,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,he,H,he,H,H,he,H,H,he,H,E,E,E,E,E,E,E,E,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,E,E,E,E,E,he,he,he,he,he,E,E,E,E,E,E,E,E,E,E,E],[Ki,Ki,Ki,Ki,E,E,E,E,C,Xe,Xe,C,Js,C,E,E,H,H,H,H,H,H,H,H,H,H,H,C,E,E,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,Ki,Ki,Ki,Ki,Ki,Ki,Ki,Ki,Ki,Ki,Xe,Ki,Ki,C,C,C,H,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,H,H,H,H,H,H,H,Ki,E,H,H,H,H,H,H,C,C,H,H,E,H,H,H,H,C,C,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,C,C,H,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,E,E,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,H,H,H,H,H,H,H,H,H,H,H,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,H,H,H,H,H,H,H,H,H,he,he,E,E,E,E,he,E,E,E,E,E],[$s,$s,$s,$s,$s,$s,$s,$s,$s,$s,$s,Oe,Oe,Oe,P,he,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,$s,Il,lNe,uNe,cNe,hNe,dNe,Js,Xe,Xe,Xe,Xe,Xe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,Js,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,$s,Oe,Oe,Oe,Oe,Oe,E,E,E,E,E,Oe,Oe,Oe,Oe,Oe,Oe,qe,P,E,E,qe,qe,qe,qe,qe,qe,$o,$o,E,E,E,P,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,$o,$o,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,Xe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[P,P,P,P,P,P,P,E,E,E,E,E,E,E,E,E,E,E,E,P,P,P,P,P,E,E,E,E,E,he,H,he,he,he,he,he,he,he,he,he,he,$o,he,he,he,he,he,he,he,he,he,he,he,he,he,E,he,he,he,he,he,E,he,E,he,he,E,he,he,E,he,he,he,he,he,he,he,he,he,he,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,H,H,H,H,H,H,H,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,Js,E,Js,E,E,Js,E,E,E,E,E,E,E,E,E,Xe,E,E,$o,$o,E,E,E,E,E,Xe,Xe,E,E,E,E,E,C,C,C,C,C,E,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,E,Oe],[E,E,E,Xe,Xe,Xe,E,E,E,E,E,$o,Js,$o,Js,Js,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Js,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,E,E,E,E,E,E,E,E,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,E,E,E,P,P,P,P,P,P,E,E,P,P,P,P,P,P,E,E,P,P,P,P,P,P,E,E,P,P,P,E,E,E,Xe,Xe,E,E,E,Xe,Xe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];let yNe=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(ONe(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let s=e;const n=RNe,a=tB(i.charAt(1)),o=tB(r.charAt(1)),u=(i.startsWith("I")?"L":i.charAt(0))+a,h=(r.startsWith("I")?"L":r.charAt(0))+o,p=i.charAt(2)+r.charAt(2);n.defInFormat=u,n.defOutFormat=h,n.defSwap=p;const y=Y1(e,u,h,p,n);let v=!1;return r.charAt(1)==="R"?v=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(v=this.checkContextual(y)==="rtl"),this.sourceToTarget=fa,this.targetToSource=kNe(this.sourceToTarget),qT=this.targetToSource,s=i.charAt(3)===r.charAt(3)?y:r.charAt(3)==="S"?vNe(v,y):wNe(y,v,!0),this.sourceToTarget=fa,this.targetToSource=qT,this.levels=bE,s}_inputFormatSetter(e){if(!iB.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!iB.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=GT(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return zNe.test(e)}};function Y1(t,e,i,r,s){const n=gNe(t,{inFormat:e,outFormat:i,swap:r},s);if(n.inFormat===n.outFormat)return t;e=n.inFormat,i=n.outFormat,r=n.swap;const a=e.slice(0,1),o=e.slice(1,4),u=i.slice(0,1),h=i.slice(1,4);if(s.inFormat=e,s.outFormat=i,s.swap=r,a==="L"&&i==="VLTR"){if(o==="LTR")return s.dir=Fy,Nh(t,s);if(o==="RTL")return s.dir=J1,Nh(t,s)}if(a==="V"&&u==="V")return s.dir=o==="RTL"?J1:Fy,PA(t,s);if(a==="L"&&i==="VRTL")return o==="LTR"?(s.dir=Fy,t=Nh(t,s)):(s.dir=J1,t=Nh(t,s)),PA(t);if(e==="VLTR"&&i==="LLTR")return s.dir=Fy,Nh(t,s);if(a==="V"&&u==="L"&&o!==h)return t=PA(t),o==="RTL"?Y1(t,"LLTR","VLTR",r,s):Y1(t,"LRTL","VRTL",r,s);if(e==="VRTL"&&i==="LRTL")return Y1(t,"LRTL","VRTL",r,s);if(a==="L"&&u==="L"){const p=s.swap;return s.swap=p.slice(0,1)+"N",o==="RTL"?(s.dir=J1,t=Nh(t,s),s.swap="N"+p.slice(1,3),s.dir=Fy,t=Nh(t,s)):(s.dir=Fy,t=Nh(t,s),s.swap="N"+p.slice(1,3),t=Y1(t,"VLTR","LRTL",s.swap,s)),t}return t}function gNe(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),s=e.outFormat.slice(0,1);let n,a=e.inFormat.slice(1,4),o=e.outFormat.slice(1,4);return a.startsWith("C")&&(n=GT(t),a=n==="ltr"||n==="rtl"?n.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+a),o.startsWith("C")&&(n=GT(t),n==="rtl"?o="RTL":n==="ltr"?(n=bNe(t),o=n.toUpperCase()):o=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=s+o),e}function vNe(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let s=0,n=1,a=r.length;t||(s=r.length-1,n=-1,a=1);const o=_Ne(r,s,n,a);let u="";for(let h=0;h<r.length;h++)MNe(o,o.length,h)>-1?(Fse(qT,h,!t,-1),fa.splice(h,1)):u+=r[h];return u}function _Ne(t,e,i,r,s){let n=0;const a=[];let o=0;for(let u=e;u*i<r;u+=i)if(zse(t[u])||vw(t[u])){if(t[u]===""&&TNe(t,u+i,i,r)){t[u]=PNe(t[u+i],n===0?QDe:KDe),u+=i,ANe(t,u,i,r),a[o]=u,o++,n=0;continue}const h=t[u];n===1?t[u]=Kq(t,u+i,i,r)?LNe(t[u]):OA(t[u],tNe):Kq(t,u+i,i,r)===!0?t[u]=OA(t[u],rNe):t[u]=OA(t[u],eNe),vw(h)||(n=1),INe(h)===!0&&(n=0)}else n=0;return a}function GT(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function bNe(t){const e=t.split("");return e.reverse(),GT(e.join(""))}function wNe(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const s=(t=String(t)).split("");for(let n=0;n<t.length;n++){let a=!1;if(s[n]>=""&&s[n]<"\uFEFF"){const o=t.charCodeAt(n);s[n]>=""&&s[n]<=""?(e?(n>0&&i&&s[n-1]===" "?r=r.slice(0,-1)+"":(r+="",a=!0),r+=Q0[(o-65269)/2]):(r+=Q0[(o-65269)/2],r+="",n+1<t.length&&i&&s[n+1]===" "?n++:a=!0),a&&(Fse(qT,n,!0,1),fa.splice(n,0,fa[n]))):r+=sNe[o-65136]}else r+=s[n]}return r}function Nh(t,e){const i=t.split(""),r=[];return Nse(i,r,e),xNe(i,r,e),eB(2,i,r,e),eB(1,i,r,e),bE=r,i.join("")}function Nse(t,e,i){const r=t.length,s=i.dir?oNe:aNe;let n=0,a=-1;const o=[],u=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let h=0;h<r;h++)o[h]=$Ne(t[h]);for(let h=0;h<r;h++){const p=n,y=ENe(t,o,u,h,i);u[h]=y,n=s[p][y];const v=240&n;n&=15;const b=s[n][DNe];if(e[h]=b,v>0)if(v===16){for(let w=a;w<h;w++)e[w]=1;a=-1}else a=-1;if(s[n][NNe])a===-1&&(a=h);else if(a>-1){for(let w=a;w<h;w++)e[w]=b;a=-1}o[h]===Il&&(e[h]=0),i.hiLevel|=b}i.hasUbatS&&SNe(o,e,r,i)}function SNe(t,e,i,r){for(let s=0;s<i;s++)if(t[s]===gM){e[s]=r.dir;for(let n=s-1;n>=0&&t[n]===$s;n--)e[n]=r.dir}}function xNe(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=CNe(t[r]))}function $Ne(t){const e=t.charCodeAt(0),i=fNe[e>>8];return i<Tl?i:mNe[i-Tl][255&e]}function PA(t,e){const i=t.split("");if(e){const r=[];Nse(i,r,e),bE=r}return i.reverse(),fa.reverse(),i.join("")}function MNe(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function zse(t){for(let e=0;e<Qq.length;e++)if(t>=Qq[e]&&t<=nNe[e])return!0;return!1}function Kq(t,e,i,r){for(;e*i<r&&vw(t[e]);)e+=i;return!!(e*i<r&&zse(t[e]))}function TNe(t,e,i,r){for(;e*i<r&&vw(t[e]);)e+=i;let s=" ";if(!(e*i<r))return!1;s=t[e];for(let n=0;n<Q0.length;n++)if(Q0[n]===s)return!0;return!1}function eB(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===J1&&!r.hasUbatB)return e.reverse(),void fa.reverse();const s=e.length;let n,a,o,u,h,p=0;for(;p<s;){if(i[p]>=t){for(n=p+1;n<s&&i[n]>=t;)n++;for(a=p,o=n-1;a<o;a++,o--)u=e[a],e[a]=e[o],e[o]=u,h=fa[a],fa[a]=fa[o],fa[o]=h;p=n}p++}}function ENe(t,e,i,r,s){const n=e[r];return{UBAT_L:()=>(s.lastArabic=!1,P),UBAT_R:()=>(s.lastArabic=!1,he),UBAT_ON:()=>E,UBAT_AN:()=>Ki,UBAT_EN:()=>s.lastArabic?Ki:qe,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,he),UBAT_WS:()=>E,UBAT_CS:()=>{let a,o;return r<1||r+1>=e.length||(a=i[r-1])!==qe&&a!==Ki||(o=e[r+1])!==qe&&o!==Ki?E:(s.lastArabic&&(o=Ki),o===a?o:E)},UBAT_ES:()=>(r>0?i[r-1]:Il)===qe&&r+1<e.length&&e[r+1]===qe?qe:E,UBAT_ET:()=>{if(r>0&&i[r-1]===qe)return qe;if(s.lastArabic)return E;let a=r+1;const o=e.length;for(;a<o&&e[a]===Xe;)a++;return a<o&&e[a]===qe?qe:E},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const a=e.length;let o=r+1;for(;o<a&&e[o]===H;)o++;if(o<a){const u=t[r].charCodeAt(0),h=u>=1425&&u<=2303||u===64286,p=e[o];if(h&&(p===he||p===C))return he}}return r<1||e[r-1]===Il?E:i[r-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,E),UBAT_LRE:()=>(s.lastArabic=!1,E),UBAT_RLE:()=>(s.lastArabic=!1,E),UBAT_LRO:()=>(s.lastArabic=!1,E),UBAT_RLO:()=>(s.lastArabic=!1,E),UBAT_PDF:()=>(s.lastArabic=!1,E),UBAT_BN:()=>E}[pNe[n]]()}function CNe(t){let e,i=0,r=Px.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<Px[e][0])r=e-1;else{if(!(t>Px[e][0]))return Px[e][1];i=e+1}return t}function INe(t){for(let e=0;e<Xq.length;e++)if(Xq[e]===t)return!0;return!1}function LNe(t){for(let e=0;e<UT.length;e++)if(t===UT[e])return iNe[e];return t}function OA(t,e){for(let i=0;i<UT.length;i++)if(t===UT[i])return e[i];return t}function vw(t){return t>=""&&t<=""}function tB(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function ANe(t,e,i,r){for(;e*i<r&&vw(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function PNe(t,e){for(let i=0;i<Q0.length;i++)if(t===Q0[i])return e[i];return t}function ONe(t,e,i){fa=[],bE=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,fa[r]=r}function kNe(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function Fse(t,e,i,r){for(let s=0;s<t.length;s++)(t[s]>e||!i&&t[s]===e)&&(t[s]+=r)}let fa=[],qT=[],bE=[];const RNe={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},DNe=5,NNe=6,Fy=0,J1=1,iB=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,zNe=/[\u0591-\u06ff\ufb1d-\ufefc]/,kA=new yNe;function FNe(t){if(t==null)return["",!1];if(!kA.hasBidiChar(t))return[t,!1];let e;return e=kA.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[kA.bidiTransform(t,e,"VLYSN"),!0]}function VNe(t){return 32+t.length}const Vse=16;function yQe(t){if(!t)return 0;let e=NN;for(const i in t)t.hasOwnProperty(i)&&(e+=DN(t[i],!1));return e}function jNe(t){if(!t)return 0;if(typeof t[0]=="number")return jse(t);if(Array.isArray(t))return UNe(t);let e=NN;for(const i in t)t.hasOwnProperty(i)&&(e+=DN(t[i]));return e}function UNe(t){const e=t.length;if(e===0||typeof t[0]=="number")return Use(t,8);let i=Gse;for(let r=0;r<e;r++)i+=DN(t[r]);return i}function DN(t,e=!0){switch(typeof t){case"object":return e?jNe(t):NN;case"string":return VNe(t);case"number":return Vse;case"boolean":return 4;default:return 8}}function jse(...t){return t.reduce((e,i)=>e+(i?XB(i)?i.byteLength+GNe:Array.isArray(i)?Use(i,Vse):0:0),0)}function Use(t,e){return Gse+t.length*e}const NN=32,Gse=16,GNe=145,Rp=2;let BT=class vg{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new vg(e.lengths,e.coords)}static fromRect(e){const[i,r,s,n]=e,a=s-i,o=n-r;return new vg([5],[i,r,a,0,0,o,-a,0,0,-o])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}get usedMemory(){return 64+jse(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];if(s<3)continue;let n=this.coords[Rp*i],a=this.coords[Rp*i+1];for(let o=1;o<s;o+=1){const u=this.coords[Rp*(o+i)],h=this.coords[Rp*(o+i)+1];e+=-.5*(u-n)*(h+a),n=u,a=h}i+=s}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)e(this.coords[Rp*(n+i)],this.coords[Rp*(n+i)+1]);i+=s}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let s=0;for(const n of r){for(let a=1;a<n;a++)i[2*(s+a)]+=i[2*(s+a)-2],i[2*(s+a)+1]+=i[2*(s+a)-1];s+=n}return e}clone(e){if(this.lengths.length===0)return new vg([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*Rp,r=this.coords.slice(0,i);return e?(e.set(r),new vg(this.lengths,e)):new vg(Array.from(this.lengths),Array.from(r))}},Gt=class{static fromOptimized(e,i,r=!1,s=!1,n=1){return new x5().initialize(e,i,r,s,n)}static fromJSON(e,i=!1,r=!1){const[s,n]=rB(e);return new M5().initialize(s,n,i,r,1)}static fromOptimizedCIM(e,i,r=!1,s=!1,n=1){return new sB().initialize(e,i,r,s,n)}static fromJSONCIM(e,i=!1,r=!1,s=1){const[n,a]=rB(e);return new nB().initialize(n,a,i,r,s)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,s=1){return new x5().initialize(new BT,e,i,r,s)}static createEmptyJSON(e,i=!1,r=!1){return new M5().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,s=1){return new sB().initialize(new BT,e,i,r,s)}static createEmptyJSONCIM(e,i=!1,r=!1,s=1){return new nB().initialize([],e,i,r,s)}asJSON(){const e=M3(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const s=e,n=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-s)*(i+n),-.5*r}invertY(){this.yFactor*=-1}},x5=class $5 extends Gt{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,s,n){return this.hasZ=r,this.hasM=s,this.geometryType=i,this._stride=2+Number(r)+Number(s),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=n,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new $5().initialize(new BT([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let s=0;for(let n=this._pathOffset+i;n<e;n+=i){const a=r[n-i],o=r[n-i+1],u=r[n]-a,h=r[n+1]-o;s+=Math.sqrt(u*u+h*h)}return s}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let s=0;s<this._stride;s++)if(e[i+s]!==e[r+s])return!1;return!0}clone(){return new $5().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((e,i)=>e+i)}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function qNe(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function rB(t){return sr(t)?[t.rings,"esriGeometryPolygon"]:fs(t)?[t.paths,"esriGeometryPolyline"]:Xg(t)?[[t.points],"esriGeometryMultipoint"]:sn(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:ew(t)?[[[qNe(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let M5=class T5 extends Gt{initialize(e,i,r,s,n){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=s,this._pathIndex=this._pointIndex=-1,this.yFactor=n,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let s=1;s<e;s++){const n=i[s-1],a=i[s],o=n[0],u=n[1],h=a[0]-o,p=a[1]-u;r+=Math.sqrt(h*h+p*p)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new T5().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=M3(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new BT;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new T5().initialize(J(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(e=>e.length).reduce((e,i)=>e+i)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const Ox=4,kx=1;let sB=class qse extends x5{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(a=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new qse().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},nB=class Bse extends M5{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n)}clone(){return new Bse().initialize(J(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][Ox]=kx}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][Ox]===kx}setControlPointAt(e){this._paths[this.pathIndex][e][Ox]=kx}getControlPointAt(e){return this._paths[this.pathIndex][e][Ox]===kx}};const BNe=512;let Mt=class X1{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new X1(e[0],e[1])}clone(){return new X1(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,s=this.y;return this.x=r*e-s*i,this.y=r*i+s*e,this}rotateReverse(e,i){const r=this.x,s=this.y;return this.x=r*e+s*i,this.y=-r*i+s*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,s=i.y-e.y;return Math.sqrt(r*r+s*s)}static add(e,i){return new X1(e.x+i.x,e.y+i.y)}static sub(e,i){return new X1(e.x-i.x,e.y-i.y)}},Rx=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},HNe=class{constructor(e,i,r,s=8,n=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=s,this._pixelMargin=n,this._tileSize=BNe*s,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new Mt(e,i),this._firstPt=new Mt(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),s=new Mt(e,i),n=Mt.distance(this._prevPt,s);let a,o,u,h,p,y,v,b;if(r)this._prevIsIn?this._lineTo(e,i,!0):(a=this._prevPt,o=s,u=this._intersect(o,a),this._start=this._dist+n*(1-this._r),this._lineTo(u.x,u.y,!0),this._lineTo(o.x,o.y,!0));else if(this._prevIsIn)o=this._prevPt,a=s,u=this._intersect(o,a),this._lineTo(u.x,u.y,!0),this._lineTo(a.x,a.y,!1);else{const w=this._prevPt,S=s;if(w.x<=this._xmin&&S.x<=this._xmin||w.x>=this._xmax&&S.x>=this._xmax||w.y<=this._ymin&&S.y<=this._ymin||w.y>=this._ymax&&S.y>=this._ymax)this._lineTo(S.x,S.y,!1);else{const M=[];if((w.x<this._xmin&&S.x>this._xmin||w.x>this._xmin&&S.x<this._xmin)&&(h=(this._xmin-w.x)/(S.x-w.x),b=w.y+h*(S.y-w.y),b<=this._ymin?y=!1:b>=this._ymax?y=!0:M.push(new Rx(h,this._xmin,b))),(w.x<this._xmax&&S.x>this._xmax||w.x>this._xmax&&S.x<this._xmax)&&(h=(this._xmax-w.x)/(S.x-w.x),b=w.y+h*(S.y-w.y),b<=this._ymin?y=!1:b>=this._ymax?y=!0:M.push(new Rx(h,this._xmax,b))),(w.y<this._ymin&&S.y>this._ymin||w.y>this._ymin&&S.y<this._ymin)&&(h=(this._ymin-w.y)/(S.y-w.y),v=w.x+h*(S.x-w.x),v<=this._xmin?p=!1:v>=this._xmax?p=!0:M.push(new Rx(h,v,this._ymin))),(w.y<this._ymax&&S.y>this._ymax||w.y>this._ymax&&S.y<this._ymax)&&(h=(this._ymax-w.y)/(S.y-w.y),v=w.x+h*(S.x-w.x),v<=this._xmin?p=!1:v>=this._xmax?p=!0:M.push(new Rx(h,v,this._ymax))),M.length===0)p?y?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):y?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(M.length>1&&M[0].ratio>M[1].ratio)this._start=this._dist+n*M[1].ratio,this._lineTo(M[1].x,M[1].y,!0),this._lineTo(M[0].x,M[0].y,!0);else{this._start=this._dist+n*M[0].ratio;for(let T=0;T<M.length;T++)this._lineTo(M[T].x,M[T].y,!0)}this._lineTo(S.x,S.y,!1)}}this._dist+=n,this._prevIsIn=r,this._prevPt=s}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let s=r.length;for(;s>=4&&(r[0].x===r[1].x&&r[0].x===r[s-2].x||r[0].y===r[1].y&&r[0].y===r[s-2].y);)r.pop(),r[0].x=r[s-2].x,r[0].y=r[s-2].y,--s}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===3&&e&&WNe.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==2)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let s=0;s<i;s++)r.push({line:e[s],start:this._starts[s]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,s,n;if(i.x>=this._xmin&&i.x<=this._xmax)s=i.y<=this._ymin?this._ymin:this._ymax,n=(s-e.y)/(i.y-e.y),r=e.x+n*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,n=(r-e.x)/(i.x-e.x),s=e.y+n*(i.y-e.y);else{s=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const a=(r-e.x)/(i.x-e.x),o=(s-e.y)/(i.y-e.y);a<o?(n=a,s=e.y+a*(i.y-e.y)):(n=o,r=e.x+o*(i.x-e.x))}return this._r=n,new Mt(r,s)}_pushLine(){this._line&&(this._type===1?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===2?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===3&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==3?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Mt(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Mt(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let s,n;if(this._type!==3)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(s=this._line[this._line.length-1],s.equals(e,i)))return;this._line.push(new Mt(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){s=this._line[this._line.length-1];const a=s.x===e,o=s.y===i;if(a&&o)return;this._isH&&a||this._isV&&o?(s.x=e,s.y=i,n=this._line[this._line.length-2],n.x===e&&n.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(n=this._line[this._line.length-2],this._isH=n.x===e,this._isV=n.y===i)):(this._isH=n.x===e,this._isV=n.y===i)):(this._line.push(new Mt(e,i)),this._isH=a,this._isV=o)}else this._line.push(new Mt(e,i))}},bQe=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new Mt(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new Mt(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}},WNe=class ed{static simplify(e,i,r){if(!r)return;const s=-i,n=e+i,a=-i,o=e+i,u=[],h=[],p=r.length;for(let v=0;v<p;++v){const b=r[v];if(!b||b.length<2)continue;let w,S=b[0];const M=b.length;for(let T=1;T<M;++T)w=b[T],S.x===w.x&&(S.x<=s&&(S.y>w.y?(u.push(v),u.push(T),u.push(0),u.push(-1)):(h.push(v),h.push(T),h.push(0),h.push(-1))),S.x>=n&&(S.y<w.y?(u.push(v),u.push(T),u.push(1),u.push(-1)):(h.push(v),h.push(T),h.push(1),h.push(-1)))),S.y===w.y&&(S.y<=a&&(S.x<w.x?(u.push(v),u.push(T),u.push(2),u.push(-1)):(h.push(v),h.push(T),h.push(2),h.push(-1))),S.y>=o&&(S.x>w.x?(u.push(v),u.push(T),u.push(3),u.push(-1)):(h.push(v),h.push(T),h.push(3),h.push(-1)))),S=w}if(u.length===0||h.length===0)return;ed.fillParent(r,h,u),ed.fillParent(r,u,h);const y=[];ed.calcDeltas(y,h,u),ed.calcDeltas(y,u,h),ed.addDeltas(y,r)}static fillParent(e,i,r){const s=r.length,n=i.length;for(let a=0;a<n;a+=4){const o=i[a],u=i[a+1],h=i[a+2],p=e[o][u-1],y=e[o][u];let v=8092,b=-1;for(let w=0;w<s;w+=4){if(r[w+2]!==h)continue;const S=r[w],M=r[w+1],T=e[S][M-1],I=e[S][M];switch(h){case 0:case 1:if(Dx(p.y,T.y,I.y)&&Dx(y.y,T.y,I.y)){const L=Math.abs(I.y-T.y);L<v&&(v=L,b=w)}break;case 2:case 3:if(Dx(p.x,T.x,I.x)&&Dx(y.x,T.x,I.x)){const L=Math.abs(I.x-T.x);L<v&&(v=L,b=w)}}}i[a+3]=b}}static calcDeltas(e,i,r){const s=i.length;for(let n=0;n<s;n+=4){const a=[],o=ed.calcDelta(n,i,r,a);e.push(i[n]),e.push(i[n+1]),e.push(i[n+2]),e.push(o)}}static calcDelta(e,i,r,s){const n=i[e+3];if(n===-1)return 0;const a=s.length;return a>1&&s[a-2]===n?0:(s.push(n),ed.calcDelta(n,r,i,s)+1)}static addDeltas(e,i){const r=e.length;let s=0;for(let n=0;n<r;n+=4){const a=e[n+3];a>s&&(s=a)}for(let n=0;n<r;n+=4){const a=i[e[n]],o=e[n+1],u=s-e[n+3];switch(e[n+2]){case 0:a[o-1].x-=u,a[o].x-=u,o===1&&(a[a.length-1].x-=u),o===a.length-1&&(a[0].x-=u);break;case 1:a[o-1].x+=u,a[o].x+=u,o===1&&(a[a.length-1].x+=u),o===a.length-1&&(a[0].x+=u);break;case 2:a[o-1].y-=u,a[o].y-=u,o===1&&(a[a.length-1].y-=u),o===a.length-1&&(a[0].y-=u);break;case 3:a[o-1].y+=u,a[o].y+=u,o===1&&(a[a.length-1].y+=u),o===a.length-1&&(a[0].y+=u)}}}};const Dx=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,zN=Cm(()=>K(()=>import("./bufferOperator-BTdbO6uM.js"),__vite__mapDeps([335,336,10,270,272,273,274,275,337,338,339,340,277]),import.meta.url)),Hse=Cm(()=>K(()=>import("./convexHullOperator-CsVVLanh.js"),__vite__mapDeps([341,342,10,270,272,273,274,275,277]),import.meta.url)),Wse=Cm(()=>K(()=>import("./lengthOperator-0IuoD1XH.js"),__vite__mapDeps([343,277,270,272,273,274,10,275]),import.meta.url)),Zse=Cm(()=>K(()=>import("./generalizeOperator-CG9KIxFy.js"),__vite__mapDeps([344,345,10,340,270,272,273,274,275,277]),import.meta.url)),Yse=Cm(()=>K(()=>import("./graphicBufferOperator-zG_HWIzA.js"),__vite__mapDeps([346,10,270,272,273,274,275,337,338,339,340,277]),import.meta.url)),Jse=Cm(()=>K(()=>import("./offsetOperator-B4N7CdG2.js"),__vite__mapDeps([347,348,10,272,270,273,274,275,277]),import.meta.url)),Xse=Cm(()=>K(()=>import("./simplifyOperator-nhHgnq51.js"),__vite__mapDeps([349,279,10,270,272,273,274,275,277]),import.meta.url)),ZNe=512;let Wu;function aB(t){switch(t.type){case"CIMGeometricEffectDonut":case"CIMGeometricEffectBuffer":return zN.getImportPromise();case"CIMGeometricEffectEnclosingPolygon":return Hse.getImportPromise();case"CIMGeometricEffectOffset":return Promise.all([Jse.getImportPromise(),Yse.getImportPromise()]);case"CIMGeometricEffectTaperedPolygon":return Promise.all([Xse.getImportPromise(),Wse.getImportPromise(),Zse.getImportPromise()]);default:return Promise.resolve()}}let YNe=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function FN(t,e,i){if(!t)return null;Wu||(Wu=new HNe(0,0,0,1));const r=i?-1:1,s=t.geometryType==="esriGeometryPolygon",n=s?3:2,a=s?3:2;let o,u;for(Wu.reset(n),Wu.setPixelMargin(e+1),Wu.setExtent(ZNe);t.nextPath();)if(!(t.pathSize<a)){for(t.nextPoint(),o=t.x,u=r*t.y,Wu.moveTo(o,u);t.nextPoint();)o=t.x,u=r*t.y,Wu.lineTo(o,u);s&&Wu.close()}const h=Wu.result(!1);if(h){const p=Gt.createEmptyOptimizedCIM(t.geometryType);for(const y of h){p.startPath();for(const v of y)p.pushXY(v.x,r*v.y)}return p.reset(),p}return null}let Cv=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const VN="arial-unicode-ms",oB="woff2",lB=new Map,Qse=new Set;let JNe=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function XNe(t){const e=eze(t),i=KNe(t),r=lB.get(e);if(r)return r.promise;const s=new FontFace(t.family,`url('${Tt.fontsUrl}/woff2/${i}.${oB}') format('${oB}')`,{style:t.style,weight:t.weight}),n=document.fonts;if(n.has(s)&&s.status==="loading")return s.loaded;const a=s.load().then(()=>(n.add(s),s));return lB.set(e,new JNe(s,a)),Qse.add(s),a}function MQe(t){return Qse.has(t)}function QNe(t){if(!t)return VN;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function KNe(t){const e=Kse(t)+ene(t);return QNe(t.family)+(e.length>0?e:"-regular")}function eze(t){const e=Kse(t)+ene(t);return(t.family||VN)+(e.length>0?e:"-regular")}function Kse(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function ene(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}let tze=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,a=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,a.drawImage(e,0,0,r,s));const o=a.getImageData(0,0,r,s).data;if(i){for(const h of i)if(h&&h.oldColor&&h.oldColor.length===4&&h.newColor&&h.newColor.length===4){const[p,y,v,b]=h.oldColor,[w,S,M,T]=h.newColor;if(p===w&&y===S&&v===M&&b===T)continue;for(let I=0;I<o.length;I+=4)p===o[I]&&y===o[I+1]&&v===o[I+2]&&b===o[I+3]&&(o[I]=w,o[I+1]=S,o[I+2]=M,o[I+3]=T)}}const u=new ImageData(o,r,s);return a.putImageData(u,0,0),n}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,a=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,a.drawImage(e,0,0,r,s));const o=a.getImageData(0,0,r,s),u=new Uint8Array(o.data),h=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let y=0;y<u.length;y+=4)u[y]*=h[0],u[y+1]*=h[1],u[y+2]*=h[2],u[y+3]*=h[3];const p=new ImageData(new Uint8ClampedArray(u.buffer),r,s);return a.putImageData(p,0,0),n}};var Rl;let ize=(Rl=class{static local(){return Rl.instance===null&&(Rl.instance=new Rl),Rl.instance}execute(e,i){return new rze(e,i)}},Rl.instance=null,Rl),rze=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let s=i,n=r,a=e.pathSize,o=0,u=0,h=0,p=0,y=0,v=0;this._isClosed&&++a;for(let b=1;e.nextPoint()||b<a;++b){let w,S;this._isClosed&&b===a-1?(w=i,S=r):(w=e.x,S=e.y);const M=w-s,T=S-n,I=Math.sqrt(M*M+T*T);b>1&&I>0&&h>0&&(o*M+u*T)/I/h<=this._maxCosAngle&&e.setControlPointAt(b-1),b===1&&(p=M,y=T,v=I),I>0&&(s=w,n=S,o=M,u=T,h=I)}this._isClosed&&h>0&&v>0&&(o*p+u*y)/v/h<=this._maxCosAngle&&e.setControlPointAt(0)}}};function K_(t,e){t[4]=e}let a2=class{constructor(e,i=!0,r=!0,s=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=s,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new Cv}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},Iv=class{constructor(e,i,r,s=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const _w=.03;let Jc=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,s,n;for(i=e.x,r=e.y;e.nextPoint();i=r,r=n)if(s=e.x,n=e.y,s!==i||n!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,s){const n=r-e,a=s-i;return Math.sqrt(n*n+a*a)}getSegLength(e){const[[i,r],[s,n]]=e;return this.getLength(i,r,s,n)}getCoord2D(e,i,r,s,n){return[e+(r-e)*n,i+(s-i)*n]}getSegCoord2D(e,i){const[[r,s],[n,a]]=e;return this.getCoord2D(r,s,n,a,i)}getAngle(e,i,r,s,n){const a=r-e,o=s-i;return Math.atan2(o,a)}getAngleCS(e,i,r,s,n,a){e==null&&(e=[0,0]);const o=s-i,u=n-r,h=Math.sqrt(o*o+u*u);return h!==0?(e[0]=o/h,e[1]=u/h,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[s,n],[a,o]]=i;return this.getAngleCS(e,s,n,a,o,r)}cut(e,i,r,s,n,a){return[n<=0?[e,i]:this.getCoord2D(e,i,r,s,n),a>=1?[r,s]:this.getCoord2D(e,i,r,s,a)]}getSubCurve(e,i,r){const s=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(s,e,i,r)?s:null}appendSubCurve(e,i,r,s){e.startPath(),i.seekPathStart();let n=0,a=!0;if(!i.nextPoint())return!1;let o=i.x,u=i.y;for(;i.nextPoint();){const h=this.getLength(o,u,i.x,i.y);if(h!==0){if(a){if(n+h>r){const p=(r-n)/h;let y=1,v=!1;n+h>=s&&(y=(s-n)/h,v=!0);const b=this.cut(o,u,i.x,i.y,p,y);if(b&&e.pushPoints(b),v)break;a=!1}}else{if(n+h>s){const p=this.cut(o,u,i.x,i.y,0,(s-n)/h);p&&e.pushPoint(p[1]);break}e.pushXY(i.x,i.y)}n+=h,o=i.x,u=i.y}else o=i.x,u=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,s,n,a,o=0;for(r=e.x,s=e.y;e.nextPoint();r=n,s=a){n=e.x,a=e.y;const u=this.getLength(r,s,n,a);if(u!==0){if(o+u>i){const h=(i-o)/u;return this.getCoord2D(r,s,n,a,h)}o+=u}}return null}offset(e,i,r,s,n){if(!e||e.length<2)return null;let a=0,o=e[a++],u=a;for(;a<e.length;){const v=e[a];v[0]===o[0]&&v[1]===o[1]||(a!==u&&(e[u]=e[a]),o=e[u++]),a++}const h=e[0][0]===e[u-1][0]&&e[0][1]===e[u-1][1];if(h&&--u,u<(h?3:2))return null;const p=[];o=h?e[u-1]:null;let y=e[0];for(let v=0;v<u;v++){const b=v===u-1?h?e[0]:null:e[v+1];if(o)if(b){const w=[b[0]-y[0],b[1]-y[1]];this.normalize(w);const S=[y[0]-o[0],y[1]-o[1]];this.normalize(S);const M=S[0]*w[1]-S[1]*w[0],T=S[0]*w[0]+S[1]*w[1];if(M===0&&T===1){y=b;continue}if(M>=0==i<=0){if(T<1){const I=[w[0]-S[0],w[1]-S[1]];this.normalize(I);const L=Math.sqrt((1+T)/2);if(L>1/s){const O=-Math.abs(i)/L;p.push([y[0]-I[0]*O,y[1]-I[1]*O])}}}else switch(r){case"Mitered":{const I=Math.sqrt((1+T)/2);if(I>0&&1/I<s){const L=[w[0]-S[0],w[1]-S[1]];this.normalize(L);const O=Math.abs(i)/I;p.push([y[0]-L[0]*O,y[1]-L[1]*O]);break}}case"Bevelled":p.push([y[0]+S[1]*i,y[1]-S[0]*i]),p.push([y[0]+w[1]*i,y[1]-w[0]*i]);break;case"Rounded":if(T<1){p.push([y[0]+S[1]*i,y[1]-S[0]*i]);const I=Math.floor(2.5*(1-T));if(I>0){const L=1/I;let O=L;for(let R=1;R<I;R++,O+=L){const z=[S[1]*(1-O)+w[1]*O,-S[0]*(1-O)-w[0]*O];this.normalize(z),p.push([y[0]+z[0]*i,y[1]+z[1]*i])}}p.push([y[0]+w[1]*i,y[1]-w[0]*i])}break;default:if(M<0)p.push([y[0]+(S[1]+S[0])*i,y[1]+(S[1]-S[0])*i]),p.push([y[0]+(w[1]-w[0])*i,y[1]-(w[0]+w[1])*i]);else{const I=Math.sqrt((1+Math.abs(T))/2),L=[w[0]-S[0],w[1]-S[1]];this.normalize(L);const O=i/I;p.push([y[0]-L[0]*O,y[1]-L[1]*O])}}}else{const w=[y[0]-o[0],y[1]-o[1]];this.normalize(w),p.push([y[0]+w[1]*i,y[1]-w[0]*i])}else{const w=[b[0]-y[0],b[1]-y[1]];this.normalize(w),p.push([y[0]+w[1]*i,y[1]-w[0]*i])}o=y,y=b}return p.length<(h?3:2)?null:(h&&p.push([p[0][0],p[0][1]]),p)}};const RA=1.7320508075688772,sze=5,nze="OpenEnded";var Dl;let aze=(Dl=class{static local(){return Dl.instance===null&&(Dl.instance=new Dl),Dl.instance}execute(e,i,r){return new oze(e,i,r)}},Dl.instance=null,Dl),oze=class extends Iv{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Jc,this._width=(i.width!==void 0?i.width:sze)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:nze,this._offsetFlattenError=_w*r}processPath(e){const i=Gt.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case"OpenEnded":default:this._constructSimpleArrow(i,e,!0);break;case"Block":this._constructSimpleArrow(i,e,!1);break;case"Crossed":this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const s=i.pathLength();let n=this._width;s<2*n&&(n=s/2);const a=this._curveHelper.getSubCurve(i,0,s-n);if(!a||!a.nextPath())return;a.seekPathStart();const o=n/2;if(this._curveHelper.isEmpty(a))return;const u=Td(a),h=this._constructOffset(u,-o);if(!h)return;const p=this._constructOffset(u,o);if(!p)return;const y=this._constructArrowBasePoint(h,-o/2);if(!y)return;const v=this._constructArrowBasePoint(p,o/2);if(!v)return;i.seekInPath(i.pathSize-1);const b=[i.x,i.y];e.pushPath(p),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(b),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoints(h.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(p[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let s=this._width;r<s*(1+RA+1)&&(s=r/(1+RA+1)),i.seekPathStart();const n=this._curveHelper.getSubCurve(i,0,r-s*(1+RA));if(!n)return;n.nextPath();const a=s/2;if(this._curveHelper.isEmpty(n))return;const o=Td(n),u=this._constructOffset(o,a);if(!u)return;const h=this._constructOffset(o,-a);if(!h)return;const p=this._curveHelper.getSubCurve(i,0,r-s);if(!p||(p.nextPath(),this._curveHelper.isEmpty(p)))return;const y=Td(p),v=this._constructOffset(y,a);if(!v)return;const b=this._constructOffset(y,-a);if(!b)return;const w=v[v.length-1],S=this._constructArrowBasePoint(v,a/2);if(!S)return;const M=b[b.length-1],T=this._constructArrowBasePoint(b,-a/2);if(!T)return;i.seekInPath(i.pathSize-1);const I=[i.x,i.y];e.pushPath(u),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(M),e.nextPoint(),e.setControlPoint(),e.pushPoint(T),e.nextPoint(),e.setControlPoint(),e.pushPoint(I),e.nextPoint(),e.setControlPoint(),e.pushPoint(S),e.nextPoint(),e.setControlPoint(),e.pushPoint(w),e.nextPoint(),e.setControlPoint(),e.pushPoints(h.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,"Rounded",4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],s=e[e.length-1],n=[s[0]-r[0],s[1]-r[1]];return this._curveHelper.normalize(n),[s[0]+n[1]*i,s[1]-n[0]*i]}};var Nl;let lze=(Nl=class{static local(){return Nl.instance===null&&(Nl.instance=new Nl),Nl.instance}execute(e,i,r,s,n,a){return new uze(e,i,r,s,n,a)}},Nl.instance=null,Nl),uze=class{constructor(e,i,r,s,n,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._curveHelper=new Jc,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=n*r,this._offsetFlattenError=_w*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const a=Gt.createEmptyOptimizedCIM(e.geometryType),o=M3(e)[0],u=this._curveHelper.offset(o,this._size,"Rounded",4,this._offsetFlattenError);if(u)return a.pushPath(u),a}else if(this._size<0){const a=e.asJSON();if(Math.min(a.xmax-a.xmin,a.ymax-a.ymin)+2*this._size>0)return Gt.fromJSONCIM({xmin:a.xmin-this._size,xmax:a.xmax+this._size,ymin:a.ymin-this._size,ymax:a.ymax+this._size})}}const i=!this._preventClipping&&this._tileKey?FN(e,this._maxInflateSize,!0):e;if(!i)continue;const r=zN.module,s={...i.asJSON(),spatialReference:{wkid:Ee.WebMercator.wkid}},n=r.execute(s,this._size);return n?Gt.fromJSONCIM(n):null}return null}};var zl;let cze=(zl=class{static local(){return zl.instance===null&&(zl.instance=new zl),zl.instance}execute(e,i,r){return new hze(e,i,r)}},zl.instance=null,zl),hze=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??"FullGeometry",this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(M3(e));if(i?.length)return Gt.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,s){return[e[0]*i+r[0]*s,e[1]*i+r[1]*s]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const s=e[0]*i-e[1]*r,n=e[0]*r+e[1]*i;e[0]=s,e[1]=n}_makeCtrlPt(e){const i=[e[0],e[1]];return K_(i,1),i}_addAngledTicks(e,i,r,s){const n=this._sub(r,i);this._normalize(n);const a=this._crossProduct(n,this._sub(s,i));let o;o=a>0?this._rightPerp(n):this._leftPerp(n);const u=Math.abs(a)/2,h=[];h.push([i[0]+(o[0]-n[0])*u,i[1]+(o[1]-n[1])*u]),h.push(i),h.push(r),h.push([r[0]+(o[0]+n[0])*u,r[1]+(o[1]+n[1])*u]),e.push(h)}_addBezier2(e,i,r,s,n){if(n--===0)return void e.push(s);const a=this._mid(i,r),o=this._mid(r,s),u=this._mid(a,o);this._addBezier2(e,i,a,u,n),this._addBezier2(e,u,o,s,n)}_addBezier3(e,i,r,s,n,a){if(a--===0)return void e.push(n);const o=this._mid(i,r),u=this._mid(r,s),h=this._mid(s,n),p=this._mid(o,u),y=this._mid(u,h),v=this._mid(p,y);this._addBezier3(e,i,o,p,v,a),this._addBezier3(e,v,y,h,n,a)}_add90DegArc(e,i,r,s,n){const a=n??this._crossProduct(this._sub(r,i),this._sub(s,i))>0,o=this._mid(i,r),u=this._sub(o,i);a?this._leftPerpendicular(u):this._rightPerpendicular(u),o[0]+=u[0],o[1]+=u[1],this._addBezier3(e,i,this._mix(i,.33333,o,.66667),this._mix(r,.33333,o,.66667),r,4)}_addArrow(e,i,r){const s=i[0],n=i[1],a=i[i.length-1],o=this._sub(s,n),u=this._norm(o);this._normalize(o);const h=Math.abs(this._crossProduct(o,this._sub(a,n)));let p=this._dotProduct(o,this._sub(a,n));p<.05*u?p=.05*u:p>.95*u&&(p=.95*u);const y=.5*h,v=this._leftPerp(o),b=[n[0]+o[0]*p,n[1]+o[1]*p],w=i.length-1,S=[];S.push(r?[-v[0],-v[1]]:v);let M=[-o[0],-o[1]];for(let T=1;T<w-1;T++){const I=this._sub(i[T+1],i[T]);this._normalize(I);const L=this._dotProduct(I,M),O=this._crossProduct(I,M),R=Math.sqrt((1+L)/2),z=this._sub(I,M);this._normalize(z),z[0]/=R,z[1]/=R,S.push(O<0?[-z[0],-z[1]]:z),M=I}S.push(this._rightPerp(M));for(let T=S.length-1;T>0;T--)e.push([i[T][0]+S[T][0]*y,i[T][1]+S[T][1]*y]);e.push([b[0]+S[0][0]*y,b[1]+S[0][1]*y]),e.push([b[0]+S[0][0]*h,b[1]+S[0][1]*h]),e.push(s),e.push([b[0]-S[0][0]*h,b[1]-S[0][1]*h]),e.push([b[0]-S[0][0]*y,b[1]-S[0][1]*y]);for(let T=1;T<S.length;T++)e.push([i[T][0]-S[T][0]*y,i[T][1]-S[T][1]*y])}_addDash(e,i,r){const s=this._norm(r)/7;this._normalize(r);let n=[];for(let a=0;a<=7;a++)n.push([i[0]+r[0]*a*s,i[1]+r[1]*a*s]),1&a&&(e.push(n),n=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,s){if(e.length>=3)return e[2];const n=this._mix(e[0],1-r,i,r),a=this._sub(i,e[0]);return this._normalize(a),this._rightPerpendicular(a),[n[0]+a[0]*s*this._defaultSize,n[1]+a[1]*s*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),s=this._sub(i,r);this._normalize(s);const n=this._rightPerp(s);return[i,r,[i[0]+(n[0]-s[0])*this._defaultSize,i[1]+(n[1]-s[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let s;if(e.length>=3)s=e[e.length-1];else{const n=this._sub(i,r);this._normalize(n);const a=this._rightPerp(n);s=[i[0]+(a[0]-n[0])*this._defaultSize,i[1]+(a[1]-n[1])*this._defaultSize]}return[r,s]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const s=r.length>1&&Pge(r)<this._defaultSize;if(!r||r.length===0||s)continue;const n=r.length;let a=r[0];switch(this._rule){case"PerpendicularFromFirstSegment":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,4),h=[];h.push(u),h.push(this._mid(a,o)),i.push(h);break}case"ReversedFirstSegment":{const o=this._cp2(r,0,-1);i.push([o,a]);break}case"PerpendicularToSecondSegment":{if(r.length<3)return[];const o=this._cp2(r,-4,1),u=this._cp3(r,o,.882353,-1.94),h=[];h.push(this._mid(o,u)),h.push(a),i.push(h);break}case"SecondSegmentWithTicks":{if(r.length<3)return[];const o=this._cp2(r,-4,1),u=this._cp3(r,o,.882353,-1.94),h=this._sub(u,o);let p;p=this._crossProduct(h,this._sub(a,o))>0?this._rightPerp(h):this._leftPerp(h);const y=[];y.push([o[0]+(p[0]-h[0])/3,o[1]+(p[1]-h[1])/3]),y.push(o),y.push(u),y.push([u[0]+(p[0]+h[0])/3,u[1]+(p[1]+h[1])/3]),i.push(y);break}case"DoublePerpendicular":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,3),h=this._mid(a,o),p=this._sub(h,u);this._normalize(p);const y=this._crossProduct(p,this._sub(a,u));this._leftPerpendicular(p);const v=[];v.push(a),v.push([u[0]+p[0]*y,u[1]+p[1]*y]),i.push(v);const b=[];b.push([u[0]-p[0]*y,u[1]-p[1]*y]),b.push(o),i.push(b);break}case"OppositeToFirstSegment":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,3),h=this._mid(a,o),p=this._sub(h,u);this._normalize(p);const y=this._crossProduct(p,this._sub(a,u));this._leftPerpendicular(p);const v=[];v.push([u[0]+p[0]*y,u[1]+p[1]*y]),v.push([u[0]-p[0]*y,u[1]-p[1]*y]),i.push(v);break}case"TriplePerpendicular":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,4),h=this._mid(a,o),p=this._sub(h,u);this._normalize(p);const y=this._crossProduct(p,this._sub(a,u));this._leftPerpendicular(p);const v=[];v.push([u[0]+p[0]*y*.8,u[1]+p[1]*y*.8]),v.push([h[0]+.8*(a[0]-h[0]),h[1]+.8*(a[1]-h[1])]),i.push(v),i.push([u,h]);const b=[];b.push([u[0]-p[0]*y*.8,u[1]-p[1]*y*.8]),b.push([h[0]+.8*(o[0]-h[0]),h[1]+.8*(o[1]-h[1])]),i.push(b);break}case"HalfCircleFirstSegment":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,4),h=this._mid(a,o);let p=this._sub(o,a);const y=Math.cos(Math.PI/18),v=Math.sin(Math.PI/18),b=Math.sqrt((1+y)/2),w=Math.sqrt((1-y)/2),S=[];let M;this._crossProduct(p,this._sub(u,a))>0?(S.push(a),p=this._sub(a,h),M=o):(S.push(o),p=this._sub(o,h),M=a),this._rotateDirect(p,b,w),p[0]/=b,p[1]/=b;for(let T=1;T<=18;T++)S.push(this._add(h,p)),this._rotateDirect(p,y,v);S.push(M),i.push(S);break}case"HalfCircleSecondSegment":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,1,-1);let h=this._sub(a,o);this._normalize(h);const p=this._crossProduct(h,this._sub(u,o))/2;this._leftPerpendicular(h);const y=[o[0]+h[0]*p,o[1]+h[1]*p];h=this._sub(o,y);const v=Math.cos(Math.PI/18);let b=Math.sin(Math.PI/18);p>0&&(b=-b);const w=[o];for(let S=1;S<=18;S++)this._rotateDirect(h,v,b),w.push(this._add(y,h));i.push(w);break}case"HalfCircleExtended":{const o=this._cp2(r,0,-2),u=this._cp3(r,o,1,-1);let h;if(n>=4)h=r[3];else{const S=this._sub(a,o);h=this._add(u,S)}const p=this._dist(o,u)/2/.75,y=this._sub(o,a);this._normalize(y,p);const v=this._sub(u,h);this._normalize(v,p);const b=[h,u];i.push(b);const w=[this._clone(u)];this._addBezier3(w,u,this._add(u,v),this._add(o,y),o,4),w.push(a),i.push(w);break}case"OpenCircle":{const o=this._cp2(r,-2,0),u=this._sub(o,a),h=Math.cos(Math.PI/18),p=-Math.sin(Math.PI/18),y=[o];for(let v=1;v<=33;v++)this._rotateDirect(u,h,p),y.push(this._add(a,u));i.push(y);break}case"CoverageEdgesWithTicks":{const o=this._cp2(r,0,-1);let u,h;if(n>=3)u=r[2];else{const b=this._sub(o,a),w=this._leftPerp(b);u=[a[0]+w[0]-.25*b[0],a[1]+w[1]-.25*b[1]]}if(n>=4)h=r[3];else{const b=this._mid(a,o),w=this._sub(a,o);this._normalize(w),this._leftPerpendicular(w);const S=this._crossProduct(w,this._sub(u,b));this._rightPerpendicular(w),h=[u[0]+w[0]*S*2,u[1]+w[1]*S*2]}const p=this._sub(o,a);let y,v;y=this._crossProduct(p,this._sub(u,a))>0?this._rightPerp(p):this._leftPerp(p),v=[],v.push(u),v.push(a),v.push([a[0]+(y[0]-p[0])/3,a[1]+(y[1]-p[1])/3]),i.push(v),y=this._crossProduct(p,this._sub(h,o))>0?this._rightPerp(p):this._leftPerp(p),v=[],v.push([o[0]+(y[0]+p[0])/3,o[1]+(y[1]+p[1])/3]),v.push(o),v.push(h),i.push(v);break}case"GapExtentWithDoubleTicks":{const o=this._cp2(r,0,2),u=this._cp3(r,o,0,1);let h;if(n>=4)h=r[3];else{const p=this._sub(o,a);h=this._add(u,p)}this._addAngledTicks(i,a,o,this._mid(u,h)),this._addAngledTicks(i,u,h,this._mid(a,o));break}case"GapExtentMidline":{const o=this._cp2(r,2,0),u=this._cp3(r,o,0,1);let h;if(n>=4)h=r[3];else{const y=this._sub(o,a);h=this._add(u,y)}const p=[];p.push(this._mid(a,u)),p.push(this._mid(o,h)),i.push(p);break}case"Chevron":{const o=this._cp2(r,-1,-1);let u;if(n>=3)u=r[2];else{const h=this._sub(o,a);this._leftPerpendicular(h),u=this._add(a,h)}i.push([o,this._makeCtrlPt(a),u]);break}case"PerpendicularWithArc":{const o=this._cp2(r,0,-2),u=this._cp3(r,o,.5,-1),h=this._sub(o,a),p=this._norm(h);h[0]/=p,h[1]/=p;const y=this._crossProduct(h,this._sub(u,a));let v=this._dotProduct(h,this._sub(u,a));v<.05*p?v=.05*p:v>.95*p&&(v=.95*p);const b=[a[0]+h[0]*v,a[1]+h[1]*v];let w=this._leftPerp(h),S=[];if(S.push([b[0]-w[0]*y,b[1]-w[1]*y]),S.push([b[0]+w[0]*y,b[1]+w[1]*y]),i.push(S),n>=4){const L=r[3];let O=this._dotProduct(h,this._sub(L,a));O<.1*p?O=.1*p:O>.9*p&&(O=.9*p);const R=[a[0]+h[0]*O,a[1]+h[1]*O],z=this._crossProduct(h,this._sub(L,a)),j=[];j.push([R[0]-w[0]*z,R[1]-w[1]*z]),j.push([R[0]+w[0]*z,R[1]+w[1]*z]),i.push(j)}const M=[o[0]+w[0]*y,o[1]+w[1]*y];w=this._sub(o,M);const T=Math.cos(Math.PI/18);let I=Math.sin(Math.PI/18);y<0&&(I=-I),S=[a,o];for(let L=1;L<=9;L++)this._rotateDirect(w,T,I),S.push(this._add(M,w));i.push(S);break}case"ClosedHalfCircle":{const o=this._cp2(r,2,0),u=this._mid(a,o),h=this._sub(o,u),p=Math.cos(Math.PI/18),y=Math.sin(Math.PI/18),v=[a,o];for(let b=1;b<=18;b++)this._rotateDirect(h,p,y),v.push(this._add(u,h));i.push(v);break}case"TripleParallelExtended":{const o=this._cp2(r,0,-2),u=this._cp3(r,o,1,-2),h=this._mid(a,o),p=this._sub(u,o);this._normalize(p);const y=Math.abs(this._crossProduct(p,this._sub(h,o)))/2,v=this._dist(o,u),b=[o,a];b.push([a[0]+p[0]*v*.5,a[1]+p[1]*v*.5]),i.push(b);const w=[];w.push([h[0]-p[0]*y,h[1]-p[1]*y]),w.push([h[0]+p[0]*v*.375,h[1]+p[1]*v*.375]),K_(w[w.length-1],1),w.push([h[0]+p[0]*v*.75,h[1]+p[1]*v*.75]),i.push(w);const S=[o,u];i.push(S);break}case"ParallelWithTicks":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._sub(u,o);this._normalize(h);const p=this._crossProduct(h,this._sub(u,a));this._leftPerpendicular(h),this._addAngledTicks(i,a,o,u),this._addAngledTicks(i,this._mix(a,1,h,p),this._mix(o,1,h,p),this._mid(a,o));break}case"Parallel":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._sub(o,a);this._normalize(h);const p=this._leftPerp(h),y=this._crossProduct(h,this._sub(u,a));let v=[a,o];i.push(v),v=[],v.push([a[0]+p[0]*y,a[1]+p[1]*y]),v.push([o[0]+p[0]*y,o[1]+p[1]*y]),i.push(v);break}case"PerpendicularToFirstSegment":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._mid(a,o),p=this._sub(o,a);this._normalize(p);const y=this._crossProduct(p,this._sub(u,a));this._leftPerpendicular(p);const v=[];v.push([h[0]-p[0]*y*.25,h[1]-p[1]*y*.25]),v.push([h[0]+p[0]*y*1.25,h[1]+p[1]*y*1.25]),i.push(v);break}case"ParallelOffset":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._sub(o,a);this._normalize(h);const p=this._crossProduct(h,this._sub(u,a));this._leftPerpendicular(h);const y=[];y.push([a[0]-h[0]*p,a[1]-h[1]*p]),y.push([o[0]-h[0]*p,o[1]-h[1]*p]),i.push(y);const v=[];v.push([a[0]+h[0]*p,a[1]+h[1]*p]),v.push([o[0]+h[0]*p,o[1]+h[1]*p]),i.push(v);break}case"OffsetOpposite":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._sub(o,a);this._normalize(h);const p=this._crossProduct(h,this._sub(u,a));this._leftPerpendicular(h);const y=[];y.push([a[0]-h[0]*p,a[1]-h[1]*p]),y.push([o[0]-h[0]*p,o[1]-h[1]*p]),i.push(y);break}case"OffsetSame":{const o=this._cp2(r,3,0),u=this._cp3(r,o,.5,-1),h=this._sub(o,a);this._normalize(h);const p=this._crossProduct(h,this._sub(u,a));this._leftPerpendicular(h);const y=[];y.push([a[0]+h[0]*p,a[1]+h[1]*p]),y.push([o[0]+h[0]*p,o[1]+h[1]*p]),i.push(y);break}case"CircleWithArc":{let o=this._cp2(r,3,0);const u=this._cp3(r,o,.5,-1);let h,p;if(n>=4)h=r[3],p=this._crossProduct(this._sub(h,o),this._sub(u,o))>0;else{h=o,p=this._crossProduct(this._sub(h,a),this._sub(u,a))>0;const S=24*this._geomUnitsPerPoint,M=this._sub(h,a);this._normalize(M,S);const T=Math.sqrt(2)/2;this._rotateDirect(M,T,p?T:-T),o=this._add(a,M)}const y=this._sub(o,a),v=Math.cos(Math.PI/18),b=Math.sin(Math.PI/18),w=[o];for(let S=1;S<=36;S++)this._rotateDirect(y,v,b),w.push(this._add(a,y));this._add90DegArc(w,o,h,u,p),K_(w[w.length-8],1),i.push(w);break}case"DoubleJog":{let o,u=this._cp2(r,-3,1),h=this._cp3(r,u,-1,-.5);if(n>=4)o=r[3];else{const I=a;a=u,o=h;const L=this._dist(a,I),O=this._dist(o,I);let R=30*this._geomUnitsPerPoint;.5*L<R&&(R=.5*L),.5*O<R&&(R=.5*O),u=this._mix(a,R/L,I,(L-R)/L),h=this._mix(o,R/O,I,(O-R)/O)}const p=this._mid(a,u),y=this._mid(o,h),v=this._dist(a,u),b=this._dist(h,o);let w=Math.min(v,b)/8;w=Math.min(w,24*this._geomUnitsPerPoint);const S=Math.cos(Math.PI/4);let M=this._sub(a,u);this._normalize(M,w),this._crossProduct(M,this._sub(o,u))>0?this._rotateDirect(M,S,-S):this._rotateDirect(M,S,S);let T=[];T.push(u),T.push(this._add(p,M)),T.push(this._sub(p,M)),T.push(a),i.push(T),M=this._sub(o,h),this._normalize(M,w),this._crossProduct(M,this._sub(a,h))<0?this._rotateDirect(M,S,S):this._rotateDirect(M,S,-S),T=[],T.push(h),T.push(this._add(y,M)),T.push(this._sub(y,M)),T.push(o),i.push(T);break}case"PerpendicularOffset":{const o=this._cp2(r,-4,1),u=this._cp3(r,o,.882353,-1.94),h=this._sub(u,o);this._crossProduct(h,this._sub(a,o))>0?this._rightPerpendicular(h):this._leftPerpendicular(h);const p=[h[0]/8,h[1]/8],y=this._sub(this._mid(o,u),p);i.push([y,a]);break}case"LineExcludingLastSegment":{const o=this._arrowPath(r),u=[];let h=o.length-2;for(;h--;)u.push(o[h]);i.push(u);break}case"MultivertexArrow":{const o=this._arrowPath(r),u=[];this._addArrow(u,o,!1),i.push(u);break}case"CrossedArrow":{const o=this._arrowPath(r),u=[];this._addArrow(u,o,!0),i.push(u);break}case"ChevronArrow":{const[o,u]=this._arrowLastSeg(r),h=10*this._geomUnitsPerPoint,p=this._sub(a,o),y=this._norm(p);this._normalize(p);const v=this._crossProduct(p,this._sub(u,o));let b=this._dotProduct(p,this._sub(u,o));b<.05*y?b=.05*y:b>.95*y-h&&(b=.95*y-h);const w=[o[0]+p[0]*b,o[1]+p[1]*b],S=this._leftPerp(p),M=[];M.push([w[0]+S[0]*v+p[0]*h,w[1]+S[1]*v+p[1]*h]),M.push(a),M.push([w[0]-S[0]*v+p[0]*h,w[1]-S[1]*v+p[1]*h]),i.push(M);break}case"ChevronArrowOffset":{const[o,u]=this._arrowLastSeg(r),h=this._sub(a,o),p=this._norm(h);this._normalize(h);const y=this._crossProduct(h,this._sub(u,o));let v=this._dotProduct(h,this._sub(u,o));v<.05*p?v=.05*p:v>.95*p&&(v=.95*p);const b=[o[0]+h[0]*v,o[1]+h[1]*v];this._leftPerpendicular(h);const w=[];w.push([b[0]+h[0]*y*.5,b[1]+h[1]*y*.5]),w.push(this._mid(b,a)),w.push([b[0]-h[0]*y*.5,b[1]-h[1]*y*.5]),i.push(w);break}case"PartialFirstSegment":{const[o,u]=this._arrowLastSeg(r),h=this._sub(a,o),p=this._norm(h);this._normalize(h);let y=this._dotProduct(h,this._sub(u,o));y<.05*p?y=.05*p:y>.95*p&&(y=.95*p);const v=[o[0]+h[0]*y,o[1]+h[1]*y];i.push([o,v]);break}case"Arch":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,1),h=this._sub(a,o),p=this._mix(u,1,h,.55),y=this._mix(u,1,h,-.55),v=[a];this._addBezier2(v,a,p,u,4),this._addBezier2(v,u,y,o,4),i.push(v);break}case"CurvedParallelTicks":{const o=this._cp2(r,-4,1),u=this._cp3(r,o,.882353,-1.94),h=this._sub(u,o);this._crossProduct(h,this._sub(a,o))>0?this._rightPerpendicular(h):this._leftPerpendicular(h);const p=[h[0]/8,h[1]/8],y=this._sub(this._mid(o,u),p),v=this._sub(this._mix(o,.75,u,.25),p),b=this._sub(this._mix(o,.25,u,.75),p),w=[o];this._addBezier2(w,o,v,y,3),this._addBezier2(w,y,b,u,3),i.push(w);for(let S=0;S<8;S++){const M=w[2*S+1],T=[this._clone(M)];T.push(this._add(M,[h[0]/4,h[1]/4])),i.push(T)}break}case"Arc90Degrees":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,1),h=[o];this._add90DegArc(h,o,a,u),i.push(h);break}case"TipWithPerpendicularAndTicks":{const[o,u]=this._arrowLastSeg(r),h=10*this._geomUnitsPerPoint,p=this._sub(a,o),y=this._norm(p);this._normalize(p);let v=this._crossProduct(p,this._sub(u,o)),b=this._dotProduct(p,this._sub(u,o));b<.05*y?b=.05*y:b>.95*y-h&&(b=.95*y-h);const w=this._leftPerp(p),S=[a[0]-p[0]*h,a[1]-p[1]*h],M=.5*Math.max(y-b-h,h);v=Math.abs(v);const T=[];T.push([S[0]+w[0]*(v+M)-p[0]*M,S[1]+w[1]*(v+M)-p[1]*M]),T.push([S[0]+w[0]*v,S[1]+w[1]*v]),T.push([S[0]-w[0]*v,S[1]-w[1]*v]),T.push([S[0]-w[0]*(v+M)-p[0]*M,S[1]-w[1]*(v+M)-p[1]*M]),i.push(T),i.push([S,a]);break}case"ConcentricCircles":{const o=this._cp2(r,1,0),u=this._cp3(r,o,2,0),h=Math.cos(Math.PI/18),p=Math.sin(Math.PI/18);let y=this._dist(o,a),v=[y,0],b=[];for(let w=0;w<=36;w++)b.push(this._add(a,v)),this._rotateDirect(v,h,p);if(i.push(b),n>=4){b=[];const w=r[3];y=this._dist(w,a),v=[y,0];for(let S=0;S<=36;S++)b.push(this._add(a,v)),S===0&&(b.push(this._add(a,v)),K_(b[1],1)),this._rotateDirect(v,h,p);i.push(b)}b=[],y=this._dist(u,a),v=[y,0];for(let w=0;w<=36;w++)b.push(this._add(a,v)),this._rotateDirect(v,h,p);i.push(b);break}case"DoubleJogArrow":{a=this._arrowPath(r)[0];const[o,u]=this._arrowLastSeg(r),h=this._sub(a,o),p=this._norm(h);this._normalize(h);const y=Math.abs(this._crossProduct(h,this._sub(u,a)));let v=Math.abs(this._dotProduct(h,this._sub(u,a)));v<.05*p?v=.05*p:v>.95*p&&(v=.95*p);const b=Math.max(y,v),w=this._leftPerp(h);let S=[];const M=[a[0]-h[0]*v*.5+w[0]*y*.5,a[1]-h[1]*v*.5+w[1]*y*.5];S.push([M[0],M[1]]),M[0]+=h[0]*b*.5+w[0]*b*.4,M[1]+=h[1]*b*.5+w[1]*b*.4,S.push([M[0],M[1]]),M[0]-=w[0]*b*.25,M[1]-=w[1]*b*.25,S.push([M[0],M[1]]),M[0]+=h[0]*b*.5+w[0]*b*.4,M[1]+=h[1]*b*.5+w[1]*b*.4,S.push([M[0],M[1]]),i.push(S),S=[],M[0]=a[0]-h[0]*v*.5-w[0]*y*.5,M[1]=a[1]-h[1]*v*.5-w[1]*y*.5,S.push([M[0],M[1]]),M[0]+=h[0]*b*.5-w[0]*b*.4,M[1]+=h[1]*b*.5-w[1]*b*.4,S.push([M[0],M[1]]),M[0]+=w[0]*b*.25,M[1]+=w[1]*b*.25,S.push([M[0],M[1]]),M[0]+=h[0]*b*.5-w[0]*b*.4,M[1]+=h[1]*b*.5-w[1]*b*.4,S.push([M[0],M[1]]),i.push(S);break}case"LinkedChevrons":{const o=this._cp2(r,-5,0),u=this._cp3(r,o,-.2,1),h=this._sub(a,o);this._normalize(h);const p=this._leftPerp(h),y=Math.abs(this._crossProduct(h,this._sub(u,o)));i.push([o,a]);const v=[];v.push([a[0]-h[0]*y+p[0]*y,a[1]-h[1]*y+p[1]*y]),v.push(a),v.push([a[0]-h[0]*y-p[0]*y,a[1]-h[1]*y-p[1]*y]),i.push(v),this._addDash(i,o,[-h[0]*y+p[0]*y,-h[1]*y+p[1]*y]),this._addDash(i,o,[-h[0]*y-p[0]*y,-h[1]*y-p[1]*y]);break}case"SegmentThenHalfCircle":{const o=this._cp2(r,2,0),u=this._cp3(r,o,1.5,0);let h;h=n>=4?r[3]:this._cp3(r,o,1.25,-.5);const p=this._sub(o,a);this._normalize(p);const y=.5*this._dist(o,u),v=this._crossProduct(p,this._sub(h,a))>0,b=Math.cos(Math.PI/18);let w=Math.sin(Math.PI/18);v&&(w=-w);const S=[a,o];p[0]*=y,p[1]*=y;const M=this._add(o,p);p[0]=-p[0],p[1]=-p[1];for(let T=1;T<=18;T++)this._rotateDirect(p,b,w),S.push(this._add(M,p));i.push(S);break}case"LineWithStraightTicks":{const o=this._cp2(r,-2,1),u=this._cp3(r,o,-1,-.5),h=this._sub(u,o);this._normalize(h);const p=this._dotProduct(h,this._sub(o,a)),y=this._dotProduct(h,this._sub(u,a));let v=[a];v.push([a[0]+h[0]*p,a[1]+h[1]*p]),v.push(o),i.push(v),v=[a],v.push([a[0]+h[0]*y,a[1]+h[1]*y]),v.push(u),i.push(v);break}case"DoubleCurve":{const o=this._cp2(r,-5,-1),u=this._cp3(r,o,2,0),h=Math.atan2(1,5),p=Math.cos(h),y=Math.sin(h),v=this._sub(o,a),b=this._dist(a,o);this._normalize(v),this._rotateDirect(v,p,-y);const w=[a];w.push([a[0]+v[0]*b*.5,a[1]+v[1]*b*.5]),K_(w[1],1),w.push([a[0]+v[0]*b*.8,a[1]+v[1]*b*.8]),this._addBezier2(w,w[2],[a[0]+v[0]*b,a[1]+v[1]*b],o,3);const S=this._sub(u,o),M=this._dist(o,u);this._normalize(S),this._rotateDirect(S,p,-y),this._addBezier2(w,o,[u[0]-S[0]*M,u[1]-S[1]*M],[u[0]-S[0]*M*.8,u[1]-S[1]*M*.8],3),w.push(u),i.push(w);break}case"ParallelWithTicksByWidth":{const o=this._cp2(r,0,-1),u=this._cp3(r,o,.5,3),h=this._sub(o,a);this._normalize(h);const p=this._crossProduct(h,this._sub(u,a));this._leftPerpendicular(h),p>0?(this._addAngledTicks(i,a,[a[0]+h[0]*p,a[1]+h[1]*p],o),this._addAngledTicks(i,o,[o[0]+h[0]*p,o[1]+h[1]*p],a)):(this._addAngledTicks(i,[a[0]+h[0]*p,a[1]+h[1]*p],a,o),this._addAngledTicks(i,[o[0]+h[0]*p,o[1]+h[1]*p],a,o));break}case"EnclosingRoundedRectangle":{const o=this._cp2(r,3,-2),u=[Math.min(a[0],o[0]),Math.max(a[1],o[1])],h=[Math.max(a[0],o[0]),Math.min(a[1],o[1])],p=h[0]-u[0],y=u[1]-h[1],v=Math.min(p,y)/10,b=[];b.push([u[0]+v+.75*(p-2*v),u[1]]),b.push([h[0]-v,u[1]]),this._add90DegArc(b,[h[0]-v,u[1]],[h[0],u[1]-v],[h[0],u[1]]),b.push([h[0],h[1]+v]),this._add90DegArc(b,[h[0],h[1]+v],[h[0]-v,h[1]],h),b.push([u[0]+v,h[1]]),this._add90DegArc(b,[u[0]+v,h[1]],[u[0],h[1]+v],[u[0],h[1]]),b.push([u[0],u[1]-v]),this._add90DegArc(b,[u[0],u[1]-v],[u[0]+v,u[1]],u),b.push([u[0]+v+.75*(p-2*v),u[1]]);break}default:i.push(r)}}return i}};var Fl;let dze=(Fl=class{static local(){return Fl.instance===null&&(Fl.instance=new Fl),Fl.instance}execute(e,i,r){return new pze(e,i,r)}},Fl.instance=null,Fl),pze=class extends Iv{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new Jc,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:s}=this,n=e.pathLength(),a=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||s!==0)if(i+r+s>=n)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(a,e,0,i),this._curveHelper.appendSubCurve(a,e,.5*(n-s),.5*(n+s)),this._curveHelper.appendSubCurve(a,e,n-r,r)}else if(i===0&&r===0&&s===0)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else i+r+s<n&&(s===0?this._curveHelper.appendSubCurve(a,e,i,n-r):(this._curveHelper.appendSubCurve(a,e,i,.5*(n-s)),this._curveHelper.appendSubCurve(a,e,.5*(n+s),n-r)));return a.totalSize===0?null:a}};const uB=1e-7;let wE=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let s=0;s<e.length;s++){let n=Math.abs(e[s]);r&&n<uB&&(n=uB),this._values.push(n),this._length+=n}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},bc=class{constructor(){this.pt=null,this.ca=0,this.sa=0}},Nx=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},SE=class extends Jc{constructor(e=0,i=!1){super(e,i),this._tempPos=new Nx,this._tempPt=[0,0],this._tolerance=_w,this._currentPosition=new Nx}updateTolerance(e){this._tolerance=_w*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=0){const r=new Nx;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=0){const s=this._tempPos;if(!this._nextPosition(e,s,null,r))return!1;s.copyTo(this._currentPosition),i.pt=this._getPoint(s);const[n,a]=this._getAngleCS(this._tempPt,s);return i.ca=n,i.sa=a,!0}nextCurve(e){if(e===0)return null;const i=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new Nx;return this._nextPosition(e,r,i,1)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,s){if(this._currentPosition.isPathEnd)return!1;let n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(n===0){const o=i.segment[0];r.pushXY(o[0],o[1])}else r.pushPoint(this.getSegCoord2D(i.segment,n));const a=i.segment[1];r.pushXY(a[0],a[1])}if(n=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return s!==0&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,s===1?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(n===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,n)));const a=i.abscissa/i.segmentLength;a===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,a))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const s=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let a=Math.round((this._partLength-(s+n))/this._patternLength);a<=0&&(a=s+n>0?0:1),this._partLengthRatio=this._partLength/(s+n+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var Vl;let fze=(Vl=class{static local(){return Vl.instance===null&&(Vl.instance=new Vl),Vl.instance}execute(e,i,r){return new mze(e,i,r)}},Vl.instance=null,Vl),mze=class extends Iv{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new SE,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let s=cre(i).dashTemplate;s==null&&(s=[]),s.length%2&&(s=[...s,...s]),this._pattern=new wE,this._pattern.init(s,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const s=Td(e);return Gt.fromJSONCIM({paths:[s]})}if(!this.iteratePath){let s=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(s=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const n=e.pathLength();if(this._pattern.isEmpty()||n<.1*this._pattern.length()){const a=Td(e);return Gt.fromJSONCIM({paths:[a]})}if(!this._walker.init(e,this._pattern,s)){const a=Td(e);return Gt.fromJSONCIM({paths:[a]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let s;switch(this._endings){case"HalfPattern":default:s=.5*this._pattern.firstValue();break;case"HalfGap":s=.5*-this._pattern.lastValue();break;case"FullGap":s=-this._pattern.lastValue();break;case"FullPattern":s=0;break;case"NoConstraint":case"Custom":s=-this._customDashPos}let n=s/this._pattern.length();n-=Math.floor(n),s=n*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let a=!1;for(;s>=i;)s-=i,i=this._pattern.nextValue(),a=!a;i-=s,a?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r?.reset(),r}};var jl;let yze=(jl=class{static local(){return jl.instance===null&&(jl.instance=new jl),jl.instance}execute(e,i,r,s,n,a){return new gze(e,i,r,s,n,a)}},jl.instance=null,jl),gze=class{constructor(e,i,r,s,n,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._maxInflateSize=n*r,this._width=(i.width!==void 0?i.width:2)*r,i.method,this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Gt.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=zN.module,r=!this._preventClipping&&this._tileKey?FN(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const s={...r.asJSON(),spatialReference:{wkid:Ee.WebMercator.wkid}},n=i.execute(s,-this._width);if(n){for(const a of n.rings)if(a){r.startPath();for(const o of a.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var Ul;let vze=(Ul=class{static local(){return Ul.instance===null&&(Ul.instance=new Ul),Ul.instance}execute(e,i){return new _ze(e,i)}},Ul.instance=null,Ul),_ze=class{constructor(e,i){this._inputGeometries=e,this._medhod=i.method}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case"RectangularBox":return bze(e);case"ConvexHull":return this._constructConvexHull(e);default:return wze(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=Hse.module,r={...e.asJSON(),spatialReference:{wkid:Ee.WebMercator.wkid}},s=i.execute(r);return s?Gt.fromJSONCIM(s):null}case"esriGeometryEnvelope":return e;default:return null}}};function bze(t){const e=qw(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Gt.fromJSONCIM(i)}function wze(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)Sze(t,e);return Gt.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function Sze(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,s=[[i,r]];for(e.push(s);t.nextPoint();)s.push([t.x,t.y]);s.push([i,r])}var Gl;let xze=(Gl=class{static local(){return Gl.instance===null&&(Gl.instance=new Gl),Gl.instance}execute(e,i,r){return new $ze(e,i,r)}},Gl.instance=null,Gl),$ze=class extends Iv{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Jc,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,s=e.y;e.seekInPath(e.pathSize-1);const n=e.x,a=e.y,o=[n-r,a-s];this._curveHelper.normalize(o);const u=r+(n-r)*this._position/100,h=s+(a-s)*this._position/100,p=Math.cos((90-this._angle)/180*Math.PI);let y=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(y=-y),this._mirror=!this._mirror;const v=[u-this._length/2*p,h-this._length/2*y],b=[u+this._length/2*p,h+this._length/2*y];return i.pushPath([[r,s],v,b,[n,a]]),i}};var ql;let Mze=(ql=class{static local(){return ql.instance===null&&(ql.instance=new ql),ql.instance}execute(e,i,r){return new Tze(e,i,r)}},ql.instance=null,ql),Tze=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const Eze=10;var Bl;let Cze=(Bl=class{static local(){return Bl.instance===null&&(Bl.instance=new Bl),Bl.instance}execute(e,i,r,s,n,a){return new Ize(e,i,r,s,n,a)}},Bl.instance=null,Bl),Ize=class{constructor(e,i,r,s,n,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._curveHelper=new Jc,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(n*r),Eze),this._option=i.option,this._offsetFlattenError=_w*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method==="Rounded"&&this._offset>0){const h=Td(e),p=this._curveHelper.offset(h,-this._offset,this._method,4,this._offsetFlattenError);if(p){const y=Gt.createEmptyOptimizedCIM(e.geometryType);return y.pushPath(p),y}return null}const u=e.asJSON();if(sn(u)&&Math.min(u.xmax-u.xmin,u.ymax-u.ymin)+2*this._offset>0)return Gt.fromJSONCIM({xmin:u.xmin-this._offset,xmax:u.xmax+this._offset,ymin:u.ymin-this._offset,ymax:u.ymax+this._offset})}const i=!this._preventClipping&&this._tileKey?FN(e,this._maxInflateSize,!0):e.clone();if(!i)continue;const r=Jse.module,s=Yse.module,n={...i.asJSON(),spatialReference:{wkid:Ee.WebMercator.wkid}};let a,o=Lze(this._method);return e.geometryType==="esriGeometryPolygon"&&this._offset>0?(o==="square"&&(o="bevel"),a=s.executeMany([n],[this._offset],o,"round")[0]):a=r.execute(n,-this._offset,{joins:o,flattenError:this._offsetFlattenError,miterLimit:4}),a?Gt.fromJSONCIM(a):null}return null}};function Lze(t){switch(t){case"Rounded":return"round";case"Bevelled":return"bevel";case"Mitered":return"miter";case"Square":return"square"}}var Hl;let Aze=(Hl=class{static local(){return Hl.instance===null&&(Hl.instance=new Hl),Hl.instance}execute(e,i,r){return new Pze(e,i,r)}},Hl.instance=null,Hl),Pze=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:or.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:or.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=aJ(e);if(!i)return null;const r=Gt.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var Wl;let Oze=(Wl=class{static local(){return Wl.instance===null&&(Wl.instance=new Wl),Wl.instance}execute(e,i,r){return new kze(e,i,r)}},Wl.instance=null,Wl),kze=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return Rze(e.clone());e=this._inputGeometries.next()}return null}};function Rze(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const s=t.x,n=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=s,t.y=n}return t.reset(),t}var Zl;let Dze=(Zl=class{static local(){return Zl.instance===null&&(Zl.instance=new Zl),Zl.instance}execute(e,i,r){return new Nze(e,i,r)}},Zl.instance=null,Zl),Nze=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=qw(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,s)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const s=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const a=e.x-i,o=e.y-r;e.x=i+a*s-o*n,e.y=r+a*n+o*s}return e.reset(),e}};var Yl;let zze=(Yl=class{static local(){return Yl.instance===null&&(Yl.instance=new Yl),Yl.instance}execute(e,i,r){return new Fze(e,i,r)}},Yl.instance=null,Yl),Fze=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=qw(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,s)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},E5=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce((e,i)=>e+i.length,0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var Jl;let Vze=(Jl=class{static local(){return Jl.instance===null&&(Jl.instance=new Jl),Jl.instance}execute(e,i,r){return new jze(e,i,r)}},Jl.instance=null,Jl),jze=class extends Iv{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const b=Gt.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)b.pushXY(e.x,e.y);return b}const i=[],r=new Array(e.pathSize);let s=0;for(e.seekPathStart();e.nextPoint();)r[s++]=e.getControlPoint(),i.push([e.x,e.y]);let n=!0,a=!0,o=!1,u=!this._invert;s=0;const h=new E5;let p=i[0];for(;s<i.length;){const b=i[s+1],w=r[s],S=r[s+1];s++,a&&(u=w||S?this._invert:!this._invert,a=!1),u?(h.addSegment(p,b,n),n=!1):o=!0,p=b,S&&(u?(u=!1,n=!0):u=!0)}const y=h.getGeometry();if(y.length===0)return null;if(!o&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const b=y[y.length-1];return b[0][0]===b[b.length-1][0]&&b[0][1]===b[b.length-1][1]||b.push([b[0][0],b[0][1]]),Gt.fromJSONCIM({paths:y})}const v=y[y.length-1];return h.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&v[0][0]===v[v.length-1][0]&&v[0][1]===v[v.length-1][1]&&y.length>1&&(y[y.length-1].push(...y[0]),y.splice(0,1)),Gt.fromJSONCIM({paths:y})}};const e1=()=>le.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var Xl;let Uze=(Xl=class{static local(){return Xl.instance===null&&(Xl.instance=new Xl),Xl.instance}execute(e,i,r){return new Gze(e,i,r)}},Xl.instance=null,Xl),Gze=class extends Iv{constructor(e,i,r){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new Mt(NaN,NaN),this._lastWidth=0,this._geomUnitsPerPoint=r,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0}processPath(e){if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const h=Gt.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)h.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)h.pushXY(e.x,e.y);return h}const i=e.getCurrentPath().asJSON(),r=Zse.module.execute(i,.25*this._geomUnitsPerPoint,{removeDegenerateParts:!0}),s=r==null?null:sr(r)?r.rings:fs(r)?r.paths:null;if(!s)return e1().error(new G("mapview-bad-resource","Unable to process geometry")),null;const n=Wse.module.execute(r);if((this._originalLength===0||this._originalLength>n)&&n>0){this._length=n;const h=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(h)<1){const p=h*h;this._slopeC=Math.sqrt(1/(1+p)),this._slopeS=Math.sqrt(p/(1+p)),h<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;const a=[];for(const h of s){const p=new E5,y=new E5;let v=0;this._setFromOffset(h.slice(0,2),p,y);for(let S=0,M=3;M<=h.length;++S,++M)v=this._setOffset(h.slice(S,M),v,p,y);this._setToOffset(h.slice(-2),v,p,y);const[b]=p.getGeometry(),[w]=y.getGeometry();a.push([...b,...w.reverse()])}const o={rings:a,spatialReference:{wkid:Ee.WebMercator.wkid}},u=Xse.module.execute(o);return Gt.fromJSONCIM(u)}_setFromOffset([[e,i],[r,s]],n,a){const o=this._halfFromWidth,u=new Mt(r-e,s-i).normalize().scale(o);n.beginPath([e-u.y,i+u.x]),a.beginPath([e+u.y,i-u.x])}_setToOffset([[e,i],[r,s]],n,a,o){let u;u=(n+=Math.sqrt((r-e)**2+(s-i)**2))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*n/this._length;const h=new Mt(r-e,s-i).normalize().scale(u);a.lineTo([r-h.y,s+h.x]),o.lineTo([r+h.y,s-h.x])}_setOffset([[e,i],[r,s],[n,a]],o,u,h){const p=Math.sqrt((r-e)**2+(s-i)**2);let y;y=o+p>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(o+p)/this._length,o+=p;const v=new Mt(r,s),b=new Mt(r-e,s-i).normalize(),w=new Mt(n-r,a-s).normalize(),S=Mt.sub(w,b),M=u.getPointCount(),T=h.getPointCount();b.leftPerpendicular(),w.leftPerpendicular();const I=b.x*w.x+b.y*w.y;if(I>.99){const L=Mt.add(b,w).scale(y/2),O=L.clone().rotate(this._slopeC,this._slopeS);u.lineTo([v.x+O.x,v.y+O.y]);const R=L.rotateReverse(this._slopeC,this._slopeS);h.lineTo([v.x-R.x,v.y-R.y])}else{const L=b.x*w.y-b.y*w.x;if(S.scale(1/L),L<0){S.scale(-y).rotateReverse(this._slopeC,this._slopeS);const B=h.getXY(T-1);B||e1().error(new G("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Mt.add(v,S).sub(Mt.fromArray(B));if(b.x*Q.y-b.y*Q.x>0){const oe=b.clone().scale(-y).rotateReverse(this._slopeC,this._slopeS),ue=w.clone().scale(-y).rotateReverse(this._slopeC,this._slopeS);h.lineTo([v.x+oe.x,v.y+oe.y]),h.lineTo([v.x,v.y]),h.lineTo([v.x+ue.x,v.y+ue.y])}else h.lineTo([v.x+S.x,v.y+S.y])}else{S.scale(y).rotate(this._slopeC,this._slopeS);const B=u.getXY(M-1);B||e1().error(new G("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Mt.add(v,S).sub(Mt.fromArray(B));if(b.x*Q.y-b.y*Q.x>0){const oe=b.clone().scale(y).rotate(this._slopeC,this._slopeS),ue=w.clone().scale(y).rotate(this._slopeC,this._slopeS);u.lineTo([v.x+oe.x,v.y+oe.y]),u.lineTo([v.x,v.y]),u.lineTo([v.x+ue.x,v.y+ue.y])}else u.lineTo([v.x+S.x,v.y+S.y])}const O=Math.acos(I);let R=1;if(y>.25){const B=2*Math.acos(1-.25/y);B<O&&(R=Math.round(O/B))}const z=Math.cos(O/R),j=Math.sin(O/R),U=b.clone();if(L<0){U.rotate(this._slopeC,this._slopeS);const B=u.getXY(M-1);B||e1().error(new G("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Mt.add(v,U.clone().scale(this._lastWidth)),oe=Mt.sub(Q,Mt.fromArray(B)),ue=b.x*oe.y-b.y*oe.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ue>0){const Se=new Mt(e,i),me=this._lastTangent1.clone().scale(this._lastWidth);me.rotate(this._slopeC,this._slopeS);const ke=b.clone().scale(this._lastWidth);ke.rotate(this._slopeC,this._slopeS),u.lineTo([Se.x+me.x,Se.y+me.y]),u.lineTo([Se.x,Se.y]),u.lineTo([Se.x+ke.x,Se.y+ke.y])}}else{U.scale(-1).rotateReverse(this._slopeC,this._slopeS);const B=h.getXY(T-1);B||e1().error(new G("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=Mt.add(v,U.clone().scale(this._lastWidth)),oe=Mt.sub(Q,Mt.fromArray(B)),ue=b.x*oe.y-b.y*oe.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&ue>0){const Se=new Mt(e,i),me=this._lastTangent1.clone().scale(-this._lastWidth);me.rotateReverse(this._slopeC,this._slopeS);const ke=b.clone().scale(-this._lastWidth);ke.rotateReverse(this._slopeC,this._slopeS),h.lineTo([Se.x+me.x,Se.y+me.y]),h.lineTo([Se.x,Se.y]),h.lineTo([Se.x+ke.x,Se.y+ke.y])}}U.scale(y);for(let B=0;B<=R;B++)L<0?(u.lineTo([v.x+U.x,v.y+U.y]),U.rotateReverse(z,j)):(h.lineTo([v.x+U.x,v.y+U.y]),U.rotate(z,j))}return this._lastTangent1.setCoords(b.x,b.y),this._lastWidth=y,o}};var Ql;let qze=(Ql=class{static local(){return Ql.instance===null&&(Ql.instance=new Ql),Ql.instance}execute(e,i,r){return new Bze(e,i,r)}},Ql.instance=null,Ql),Bze=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new wE,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new SE,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Gt.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case"Sinus":default:this._constructCurve(i,r,!1);break;case"Square":this._constructSquare(i,r);break;case"Triangle":this._constructTriangle(i,r);break;case"Random":this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let s=Math.round(i/this._period);s===0&&(s=1);const n=s*16+1,a=i/s,o=this._period/16,u=1/n,h=2*Math.PI*i/a,p=2*Math.PI*Math.random(),y=2*Math.PI*Math.random(),v=2*Math.PI*Math.random(),b=.75-Math.random()/2,w=.75-Math.random()/2,S=new bc;this._walker.curPointAndAngle(S),e.pushPoint(S.pt);let M=0;for(;;){if(!this._walker.nextPointAndAngle(o,S)){e.pushPoint(this._walker.getPathEnd());break}{const T=M;let I;if(M+=u,r){const L=this._height/2*(1+.3*Math.sin(b*h*T+p));I=L*Math.sin(h*T+y),I+=L*Math.sin(w*h*T+v),I/=2}else I=.5*this._height*Math.sin(.5*h*T);e.pushXY(S.pt[0]-I*S.sa,S.pt[1]+I*S.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new bc;this._walker.curPointAndAngle(n);const a=new bc;if(this._walker.nextPointAndAngle(this._period,a)){const o=new bc;this._walker.nextPointAndAngle(this._period,o)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new bc;this._walker.curPointAndAngle(n);const a=new bc;if(this._walker.nextPointAndAngle(this._period/2,a)){const o=new bc;this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca)),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}};var Kl;let Hze=(Kl=class{static local(){return Kl.instance===null&&(Kl.instance=new Kl),Kl.instance}execute(e,i,r){return new Wze(e,i,r)}},Kl.instance=null,Kl),Wze=class extends a2{constructor(e,i,r){super(e),this._geometryWalker=new SE,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new wE,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings==="WithFullGap"&&this.isClosed?this._endings="WithMarkers":this._endings=this._originalEndings,this._pattern.extPtGap=0;let s,n=!0;switch(this._endings){case"NoConstraint":s=-this._position,s=this._adjustPosition(s),n=!1;break;case"WithHalfGap":default:s=-this._pattern.lastValue()/2;break;case"WithFullGap":s=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case"WithMarkers":s=0;break;case"Custom":s=-this._position,s=this._adjustPosition(s),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,n))return null;this._pattern.reset();let a=0;for(;s>a;)s-=a,a=this._pattern.nextValue();a-=s,i=a,this.iteratePath=!0}const r=new bc;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings==="WithFullGap"&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings==="WithMarkers"&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var eu;let Zze=(eu=class{static local(){return eu.instance===null&&(eu.instance=new eu),eu.instance}execute(e,i,r){return new Yze(e,i,r)}},eu.instance=null,eu),Yze=class extends a2{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Jc,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case"Both":default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case"JustBegin":i=this._atExtremities(e,this._position,!0);break;case"JustEnd":i=this._atExtremities(e,this._position,!1);case"None":}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let s=0,[n,a]=[0,0],[o,u]=[e.x,e.y];const h=[0,0];for(;r?e.nextPoint():e.prevPoint();){n=o,a=u,o=e.x,u=e.y;const p=this._curveHelper.getLength(n,a,o,u);if(s+p>i){const y=(i-s)/p,[v,b]=this._curveHelper.getAngleCS(h,n,a,o,u,y),w=this._curveHelper.getCoord2D(n,a,o,u,y);return this.internalPlacement.setTranslate(w[0]-this._offset*b,w[1]+this._offset*v),this._angleToLine&&this.internalPlacement.setRotateCS(-v,-b),this.internalPlacement}s+=p}}return null}};var tu;let Jze=(tu=class{static local(){return tu.instance===null&&(tu.instance=new tu),tu.instance}execute(e,i,r){return new Xze(e,i,r)}},tu.instance=null,tu),Xze=class extends a2{constructor(e,i,r){super(e),this._walker=new SE,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new wE,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const o=this._pattern.nextValue()*this._subPathLen,u=this._beginGap+o;i=u-this._prevPos,this._prevPos=u}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const o=this._pattern.nextValue()*this._subPathLen,u=this._beginGap+o;i=u-this._prevPos,this._prevPos=u,this.iteratePath=!0}const r=new bc;if(!this._walker.nextPointAndAngle(i,r,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const s=this._isFirst&&this._flipFirst;let n,a;return this._angleToLine?(n=r.ca,a=r.sa):(n=1,a=0),s&&(n=-n,a=-a),this.internalPlacement.setRotateCS(n,a),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const zh=512,Qze=10,cl=24,HT=1e-6;var iu;let Kze=(iu=class{static local(){return iu.instance===null&&(iu.instance=new iu),iu.instance}execute(e,i,r,s){return new e6e(e,i,r,s)}},iu.instance=null,iu),e6e=class cf{constructor(e,i,r,s){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??"Fixed",this._gridType==="Random"){const n=i.seed??13,a=1;this._randomLCG=new j5(n*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,s!=null){const[n,a,o,u]=s.split("/"),h=parseFloat(n),p=parseFloat(a),y=parseFloat(o),v=parseFloat(u);this._graphicOriginX=-(v*2**h+y)*zh,this._graphicOriginY=p*zh,this._testInsidePolygon=!0}this._internalPlacement=new Cv,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!cf._randValues){cf._randValues=[];for(let e=0;e<cl;e++)for(let i=0;i<cl;i++)cf._randValues.push(this._randomLCG.getFloat()),cf._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,s,n,a,o,u,h,p,y,v,b,w,S;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,u=h=w=v=Number.MAX_VALUE,p=y=S=b=-Number.MAX_VALUE;const M=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)o=e.x,a=e.y,i=o-this._graphicOriginX-this._offsetX,r=a-this._graphicOriginY-this._offsetY,M?(s=this._cosAngle*i-this._sinAngle*r,n=this._sinAngle*i+this._cosAngle*r):(s=i,n=r),u=Math.min(u,s),p=Math.max(p,s),h=Math.min(h,n),y=Math.max(y,n),v=Math.min(v,a),b=Math.max(b,a),w=Math.min(w,o),S=Math.max(S,o);v=v!==Number.MAX_VALUE?v:-zh-this._stepY,b=b!==-Number.MAX_VALUE?b:this._stepY,w=w!==Number.MAX_VALUE?w:-this._stepX,S=S!==-Number.MAX_VALUE?S:zh+this._stepX;const T=b-v,I=S-w;if(this._verticalSubdivision=T>=I,this._polygonMin=this._verticalSubdivision?v:w,this._testInsidePolygon){let L=0-this._graphicOriginX-this._offsetX-this._stepX,O=zh-this._graphicOriginX-this._offsetX+this._stepX,R=-zh-this._graphicOriginY-this._offsetY-this._stepY,z=0-this._graphicOriginY-this._offsetY+this._stepY;if(M){const j=[[L,R],[L,z],[O,R],[O,z]];L=R=Number.MAX_VALUE,O=z=-Number.MAX_VALUE;for(const U of j){const B=this._cosAngle*U[0]-this._sinAngle*U[1],Q=this._sinAngle*U[0]+this._cosAngle*U[1];L=Math.min(L,B),O=Math.max(O,B),R=Math.min(R,Q),z=Math.max(z,Q)}}u=u!==Number.MAX_VALUE?Math.max(u,L):L,h=h!==Number.MAX_VALUE?Math.max(h,R):R,p=p!==-Number.MAX_VALUE?Math.min(p,O):O,y=y!==-Number.MAX_VALUE?Math.min(y,z):z}this._xMin=Math.round(u/this._stepX),this._xMax=Math.round(p/this._stepX),this._yMin=Math.round(h/this._stepY),this._yMax=Math.round(y/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,w,S,v,b)}_buildAccelerationMap(e,i,r,s,n){e.reset();const a=new Map,o=this._verticalSubdivision,u=o?n-s:r-i;let h=Math.ceil(u/Qze);if(h<=1)return;const p=Math.floor(u/h);let y,v,b,w,S,M,T,I,L,O,R;for(h++,this._delta=p,o?(L=-zh-2*this._stepY,O=2*this._stepY,R=s):(L=-2*this._stepX,O=zh+2*this._stepX,R=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(y=e.x,v=e.y;e.nextPoint();y=b,v=w){if(b=e.x,w=e.y,o){if(v===w||v<L&&w<L||v>O&&w>O)continue;S=Math.min(v,w),M=Math.max(v,w)}else{if(y===b||y<L&&b<L||y>O&&b>O)continue;S=Math.min(y,b),M=Math.max(y,b)}for(;S<M;)T=Math.floor((S-R)/p),cB(T,y,v,b,w,a),S+=p;I=Math.floor((M-R)/p),I>T&&cB(I,y,v,b,w,a)}this._accelerationMap=a}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,s;if(this._currentX++,this._gridType==="Random"){const n=(this._currentX%cl+cl)%cl,a=(this._currentY%cl+cl)%cl;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-cf._randValues[a*cl+n])*2/3,s=this._graphicOriginY+i+this._stepY*this._randomness*(.5-cf._randValues[a*cl+n+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,s=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,s,this._geometryCursor))return this._internalPlacement.setTranslate(r,s),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return t6e(e,i,r);e+=HT,i+=HT;const s=this._verticalSubdivision,n=s?i:e,a=Math.floor((n-this._polygonMin)/this._delta),o=this._accelerationMap.get(a);if(!o)return!1;let u,h,p,y=0;for(const v of o){if(u=v[0],h=v[1],s){if(u[1]>i==h[1]>i)continue;p=(h[0]-u[0])*(i-u[1])-(h[1]-u[1])*(e-u[0])}else{if(u[0]>e==h[0]>e)continue;p=(h[1]-u[1])*(e-u[0])-(h[0]-u[0])*(i-u[1])}p>0?y++:y--}return y!==0}};function t6e(t,e,i){let r,s,n,a,o=0;for(t+=HT,e+=HT,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,s=i.y;i.nextPoint();r=n,s=a)n=i.x,a=i.y,s>e!=a>e&&((n-r)*(e-s)-(a-s)*(t-r)>0?o++:o--);return o!==0}function cB(t,e,i,r,s,n){let a=n.get(t);a||(a=[],n.set(t,a)),a.push([[e,i],[r,s]])}const i6e=.001;var ru;let r6e=(ru=class{static local(){return ru.instance===null&&(ru.instance=new ru),ru.instance}execute(e,i,r){return new s6e(e,i,r)}},ru.instance=null,ru),s6e=class extends a2{constructor(e,i,r){super(e),this._curveHelper=new Jc,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=i6e*r}processPath(e){const i=this._position;if(this._relativeTo==="SegmentMidpoint"){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[s,n]=[e.x,e.y],[a,o]=[0,0];const u=[0,0];for(;e.nextPoint();){a=e.x,o=e.y;const h=this._curveHelper.getLength(s,n,a,o);if(h<this._epsilon){s=a,n=o;continue}const p=.5+this._position/h,[y,v]=this._curveHelper.getAngleCS(u,s,n,a,o,p),b=this._curveHelper.getCoord2D(s,n,a,o,p);return this.internalPlacement.setTranslate(b[0]-this._offset*v,b[1]+this._offset*y),this._angleToLine&&this.internalPlacement.setRotateCS(y,v),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo==="LineEnd";return this.onLine(e,i,r)}onLine(e,i,r){let s,n=!1;switch(this._relativeTo){case"LineMiddle":default:e.seekPathStart(),s=e.pathLength()/2+i;break;case"LineBeginning":s=i;break;case"LineEnd":s=i,n=!0}r?e.seekPathEnd():e.seekPathStart();let a=0;if(r?e.prevPoint():e.nextPoint()){let[o,u]=[e.x,e.y],[h,p]=[0,0];const y=[0,0];for(;r?e.prevPoint():e.nextPoint();){h=e.x,p=e.y;const v=this._curveHelper.getLength(o,u,h,p);if(a+v>s){const b=(s-a)/v,[w,S]=this._curveHelper.getAngleCS(y,o,u,h,p,b),M=this._curveHelper.getCoord2D(o,u,h,p,b),T=n?-this._offset:this._offset;return this.internalPlacement.setTranslate(M[0]-T*S,M[1]+T*w),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-w,-S):this.internalPlacement.setRotateCS(w,S)),this.internalPlacement}o=h,u=p,a+=v}}return null}};const n6e=1e-15;var su;let a6e=(su=class{static local(){return su.instance===null&&(su.instance=new su),su.instance}execute(e,i,r){return new o6e(e,i,r)}},su.instance=null,su),o6e=class extends a2{constructor(e,i,r){super(e),this._curveHelper=new Jc,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],s=i[1];if(this._offset!==0){const n=Math.cos(i[2]),a=Math.sin(i[2]);r-=this._offset*a,s+=this._offset*n}return this.internalPlacement.setTranslate(r,s),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,s=!1,n=0,a=0;if(e.seekPathStart(),e.nextPoint()){let o=e.x,u=e.y,h=e.getControlPoint(),p=!0,y=e.nextPoint();for(;y;){const v=e.x,b=e.y,w=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(n=this._curveHelper.getAngle(o,u,v,b,0)),p?(p=!1,i?(r=n,s=h):(this._endPoints||this._controlPoints&&h)&&this._tags.push([o,u,n])):h?this._controlPoints&&this._tags.push([o,u,zx(a,n)]):this._regularVertices&&this._tags.push([o,u,zx(a,n)]),(this._angleToLine||this._offset!==0)&&(a=this._curveHelper.getAngle(o,u,v,b,1)),y=e.nextPoint(),y||(i?w||s?this._controlPoints&&this._tags.push([v,b,zx(a,r)]):this._regularVertices&&this._tags.push([v,b,zx(a,r)]):(this._endPoints||this._controlPoints&&w)&&this._tags.push([v,b,a])),o=v,u=b,h=w}}this._tagIterator=0}};function zx(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*n6e;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const l6e=100*222045e-21;function u6e(t){if(t.totalSize===0)return null;const e=qw(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*l6e;let r=0,s=0;t.reset();for(let B=0;t.nextPath();B++){const Q=t.getCurrentRingArea();Q>s&&(s=Q,r=B)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const n=kJ(t);if(Math.abs(s)<=2*i*i)return[(n[0]+n[2])/2,(n[1]+n[3])/2];t.seekPathStart();const a=Fge(t,Oi());if(a===null)return null;if(t.totalPoints<4)return a;const o=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],u=[NaN,NaN,NaN,NaN],h=[NaN,NaN,NaN,NaN];let p=!1,y=t1(a,t,!0);y.distance===0&&(p=!0,o[0][0]=a[0],o[0][1]=a[1],y=t1(a,t,!1)),u[0]=y.distance,h[0]=0;const v=[NaN,NaN];let b=!1,w=.25,S=-1,M=NaN;do if(M=NaN,o[1]=DA(t,NA(n[0],n[2],w),i,e),isNaN(o[1][0])||isNaN(o[1][1])||(y=t1(o[1],t,!1),M=y.distance),!isNaN(M)&&M>i&&vM(o[1],t))b=!0,u[1]=M,h[1]=hf(o[1],a);else if(!isNaN(M)&&M>S&&(S=M,v[0]=o[1][0],v[1]=o[1][1]),w-=.01,w<.1){if(!(S>=0))break;b=!0,u[1]=S,o[1][0]=v[0],o[1][1]=v[1],h[1]=hf(o[1],a)}while(!b);b=!1,w=.5,S=-1;let T=.01,I=1;do if(M=NaN,o[2]=DA(t,NA(n[0],n[2],w),i,e),isNaN(o[2][0])||isNaN(o[2][1])||(y=t1(o[2],t,!1),M=y.distance),!isNaN(M)&&M>i&&vM(o[2],t))b=!0,u[2]=M,h[2]=hf(o[2],a);else if(!isNaN(M)&&M>S)S=M,v[0]=o[2][0],v[1]=o[2][1];else if(M>S&&(S=M,v[0]=o[2][0],v[1]=o[2][1]),w=.5+T*I,T+=.01,I*=-1,w<.3||w>.7){if(!(S>=0))break;b=!0,u[2]=S,o[2][0]=v[0],o[2][1]=v[1],h[2]=hf(o[2],a)}while(!b);b=!1,w=.75,S=-1;do if(M=NaN,o[3]=DA(t,NA(n[0],n[2],w),i,e),isNaN(o[3][0])||isNaN(o[3][1])||(y=t1(o[3],t,!1),M=y.distance),!isNaN(M)&&M>i&&vM(o[3],t))b=!0,u[3]=M,h[3]=hf(o[3],a);else if(M>S&&(S=M,v[0]=o[3][0],v[1]=o[3][1]),w+=.01,w>.9){if(!(S>=0))break;b=!0,u[3]=S,o[3][0]=v[0],o[3][1]=v[1],h[3]=hf(o[3],a)}while(!b);const L=[0,1,2,3],O=p?0:1;let R;for(let B=O;B<4;B++)for(let Q=O;Q<3;Q++){const oe=h[Q],ue=h[Q+1];d6e(oe,ue)>0&&(R=L[Q],L[Q]=L[Q+1],L[Q+1]=R,h[Q]=ue,h[Q+1]=oe)}let z=O,j=0,U=0;for(let B=O;B<4;B++){switch(B){case 0:U=2*u[L[B]];break;case 1:U=1.66666666*u[L[B]];break;case 2:U=1.33333333*u[L[B]];break;case 3:U=u[L[B]]}U>j&&(j=U,z=L[B])}return o[z]}function vM(t,e){let i,r,s,n,a=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=s,r=n)s=e.x,n=e.y,r>t[1]!=n>t[1]&&((s-i)*(t[1]-r)-(n-r)*(t[0]-i)>0?a++:a--);return a!==0}function t1(t,e,i){if(i&&vM(t,e))return{coord:t,distance:0};let r=1/0,s=0,n=0,a=[0,0],o=[0,0];const u=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(a[0]=e.x,a[1]=e.y;e.nextPoint();a=o){o=[e.x,e.y],eJ(u,t,a,o);const h=hf(t,u);h<r&&(r=h,s=u[0],n=u[1])}return{coord:[s,n],distance:Math.sqrt(r)}}function DA(t,e,i,r){const s=[e,0];let n=1/0,a=1/0,o=!1,u=!1;const h=[[e,r[1]-1],[e,r[3]+1]],p=[0,0],y=[0,0],v=[0,0],b=[[0,0],[0,0]],w=Oi();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(b[0][0]=t.x,b[0][1]=t.y;t.nextPoint();b[0][0]=b[1][0],b[0][1]=b[1][1]){if(b[1][0]=t.x,b[1][1]=t.y,c6e(w,b)===null||(y[0]=h[0][0],y[1]=h[0][1],v[0]=h[1][0],v[1]=h[1][1],h6e(w,y,v)===0)||!HM(h[0],h[1],b[0],b[1],p))continue;const S=p[1];n>a?S<n&&(n=S,o=!0):S<a&&(a=S,u=!0)}return o&&u?s[1]=(n+a)/2:s[0]=s[1]=NaN,s}function c6e(t,e){if(e.length<2)return null;t||(t=Oi());const[i,r]=e[0],[s,n]=e[1];return t[0]=Math.min(i,s),t[1]=Math.min(r,n),t[2]=Math.max(i,s),t[3]=Math.max(r,n),t}const Fx=1,Vx=4,hB=3,dB=12;function h6e(t,e,i){let r=hl(e,t),s=hl(i,t);const n=t[0],a=t[1],o=t[2],u=t[3];if(r&s)return 0;if(!(r|s))return 4;const h=(r?1:0)|(s?2:0);do{const p=i[0]-e[0],y=i[1]-e[1];if(p>y)r&hB?(r&Fx?(e[1]+=y*(n-e[0])/p,e[0]=n):(e[1]+=y*(o-e[0])/p,e[0]=o),r=hl(e,t)):s&hB?(s&Fx?(i[1]+=y*(n-i[0])/p,i[0]=n):(i[1]+=y*(o-i[0])/p,i[0]=o),s=hl(i,t)):r?(r&Vx?(e[0]+=p*(a-e[1])/y,e[1]=a):(e[0]+=p*(u-e[1])/y,e[1]=u),r=hl(e,t)):(s&Vx?(i[0]+=p*(a-i[1])/y,i[1]=a):(i[0]+=p*(u-i[1])/y,i[1]=u),s=hl(i,t));else if(r&dB?(r&Vx?(e[0]+=p*(a-e[1])/y,e[1]=a):(e[0]+=p*(u-e[1])/y,e[1]=u),r=hl(e,t)):s&dB?(s&Vx?(i[0]+=p*(a-i[1])/y,i[1]=a):(i[0]+=p*(u-i[1])/y,i[1]=u),s=hl(i,t)):r?(r&Fx?(e[1]+=y*(n-e[0])/p,e[0]=n):(e[1]+=y*(o-e[0])/p,e[0]=o),r=hl(e,t)):(s&Fx?(i[1]+=y*(n-i[0])/p,i[0]=n):(i[1]+=y*(o-i[0])/p,i[0]=o),s=hl(i,t)),r&s)return 0}while(r|s);return h}function hl(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function NA(t,e,i){return t+(e-t)*i}function hf(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function d6e(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var nu;let p6e=(nu=class{static local(){return nu.instance===null&&(nu.instance=new nu),nu.instance}execute(e,i,r){return new f6e(e,i,r)}},nu.instance=null,nu),f6e=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:"OnPolygon",this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new Cv}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case"CenterOfMass":{const r=Gge(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case"BoundingBoxCenter":{const r=qw(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;default:{const r=u6e(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function m6e(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return ize.local();case"CIMGeometricEffectArrow":return aze.local();case"CIMGeometricEffectBuffer":return lze.local();case"CIMGeometricEffectControlMeasureLine":return cze.local();case"CIMGeometricEffectCut":return dze.local();case"CIMGeometricEffectDashes":return fze.local();case"CIMGeometricEffectDonut":return yze.local();case"CIMGeometricEffectJog":return xze.local();case"CIMGeometricEffectMove":return Mze.local();case"CIMGeometricEffectOffset":return Cze.local();case"CIMGeometricEffectRadial":return Aze.local();case"CIMGeometricEffectReverse":return Oze.local();case"CIMGeometricEffectRotate":return Dze.local();case"CIMGeometricEffectScale":return zze.local();case"CIMGeometricEffectSuppress":return Vze.local();case"CIMGeometricEffectTaperedPolygon":return Uze.local();case"CIMGeometricEffectWave":return qze.local();case"CIMGeometricEffectEnclosingPolygon":return vze.local()}return null}function y6e(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return Hze.local();case"CIMMarkerPlacementAtExtremities":return Zze.local();case"CIMMarkerPlacementAtRatioPositions":return Jze.local();case"CIMMarkerPlacementInsidePolygon":return Kze.local();case"CIMMarkerPlacementOnLine":return r6e.local();case"CIMMarkerPlacementOnVertices":return a6e.local();case"CIMMarkerPlacementPolygonCenter":return p6e.local()}return null}function zA(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Zu(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[s,n]=t;return[s*i+n*-r,s*r+n*i]}function tne(t,e,i=0){const r=ys(t,0,_6e);for(let s=0;s<4;s++)e[i+s]=Math.floor(256*b6e(r*g6e[s]))}function ine(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*v6e[r];return i}const g6e=[1,256,65536,16777216],v6e=[1/256,1/65536,1/16777216,1/4294967296],_6e=ine(new Uint8ClampedArray([255,255,255,255]));ine(new Uint8ClampedArray([255,255,255,0]));function b6e(t){return t-Math.floor(t)}const w6e=15.5,FA=4,S6e=64,nKe=1024,aKe={outlineWidth:.75,referenceWidth:.75,cap:or.CIMSolidStroke.capstyle,join:or.CIMSolidStroke.joinstyle,miterLimit:or.CIMSolidStroke.miterlimit},pB=()=>le.getLogger("esri.symbols.cim.rasterizingUtils"),x6e=32,$6e=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function oKe(t,e,i){const r=e.style,s=rge(Math.ceil(i)),n=$6e(r)?8*s:16*s,a=2*s;t.width=n,t.height=n;const o=t.getContext("2d");o.strokeStyle="#ffffff",o.lineWidth=s,o.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(o.moveTo(n/2,-a),o.lineTo(n/2,n+a)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(o.moveTo(-a,n/2),o.lineTo(n+a,n/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(o.moveTo(-a,-a),o.lineTo(n+a,n+a),o.moveTo(n-a,-a),o.lineTo(n+a,a),o.moveTo(-a,n-a),o.lineTo(a,n+a)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(o.moveTo(n+a,-a),o.lineTo(-a,n+a),o.moveTo(a,-a),o.lineTo(-a,a),o.moveTo(n+a,n-a),o.lineTo(n-a,n+a)),o.stroke();const u=o.getImageData(0,0,t.width,t.height),h=new Uint8Array(u.data);let p;for(let y=0;y<h.length;y+=4)p=h[y+3]/255,h[y]=h[y]*p,h[y+1]=h[y+1]*p,h[y+2]=h[y+2]*p;return[h,t.width,t.height,s]}function lKe(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce((y,v)=>y+v,0),i=Math.round(e*FA),r=1,s=new Float32Array(i*r);let n=0,a=0,o=.5,u=!0;for(const y of t){for(n=a,a+=y*FA;o<=a;){const v=o-.5,b=Math.min(Math.abs(o-n),Math.abs(o-a));s[v]=u?-b:b,o++}u=!u}const h=s.length,p=new Uint8Array(4*h);for(let y=0;y<h;++y){const v=s[y]/FA;tne(v/S6e*.5+.5,p,4*y)}return[p,i,r]}function uKe(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",s=!i&&!r;t.length%2==1&&(t=[...t,...t]);const n=w6e,a=2*n;let o=0;for(const T of t)o+=T;const u=Math.round(o*n),h=new Float32Array(u*a),p=.5*n;let y=0,v=0,b=.5,w=!0;for(const T of t){for(y=v,v+=T*n;b<=v;){let I=.5;for(;I<a;){const L=(I-.5)*u+b-.5,O=s?(I-n)*(I-n):Math.abs(I-n);h[L]=w?i?Math.max(Math.max(y+p-b,O),Math.max(b-v+p,O)):O:s?Math.min((b-y)*(b-y)+O,(b-v)*(b-v)+O):r?Math.min(Math.max(b-y,O),Math.max(v-b,O)):Math.min(Math.max(b-y+p,O),Math.max(v+p-b,O)),I++}b++}w=!w}const S=h.length,M=new Uint8Array(4*S);for(let T=0;T<S;++T){const I=(s?Math.sqrt(h[T]):h[T])/n;tne(I,M,4*T)}return[M,u,a]}function cKe(t,e){const{colorRamp:i,gradientType:r}=e,s=i.type==="CIMFixedColorRamp",n=e.interval||or.CIMGradientFill.interval;let a=jN(i);return s&&(a=rne(a,n)),r==="Discrete"||s?T6e(t,a,n):M6e(t,a)}let VA;function jx(t,e){const{colorRamp:i,gradientType:r}=e,s=jN(i),n=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!n)return _M(t,s);const a=e.interval??or.CIMGradientFill.interval;if(n)return _M(t,rne(s,a));const o=[];VA??=document.createElement("canvas"),UN(VA,s,a,1,0);const u=VA.getContext("2d").getImageData(0,0,a,1).data;for(let h=0,p=0;h<a;h++,p=4*h){const y=[u[p+0],u[p+1],u[p+2],u[p+3]];o.push({offset:h/a,color:y}),o.push({offset:(h+1)/a,color:y})}return _M(t,o)}function jN(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&pB().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let s=0;for(const n of i.colors)e.push({offset:s,color:[n[0],n[1],n[2],n[3]/255]}),s+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce((n,a)=>n+a,0);let s=0;for(let n=0;n<i.colorRamps.length;n++){const a=i.colorRamps[n],o=i.weights[n],u=jN(a);for(const h of u)e.push({offset:(s+h.offset*o)/r,color:h.color});s+=o}break}default:pB().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function rne(t,e){const i=[],r=(t.length-1)/(e-1);for(let s=0;s<e;s++){const n=t[Math.round(s*r)].color;i.push({offset:s/e,color:n}),i.push({offset:(s+1)/e,color:n})}return i}function M6e(t,e){return UN(t,e,x6e,1,Uee),sne(t)}function T6e(t,e,i){return UN(t,e,i,1,Uee),sne(t)}function _M(t,e,i=0){for(const{offset:r,color:s}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${s[3]})`)}function UN(t,e,i,r,s){const n=i+2*s;t.width=n,t.height=r;const a=(s+1)/n,o=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const u=o.createLinearGradient(0,0,n,r);_M(u,e,a),o.fillStyle=u}else o.fillStyle="rgba(128, 128, 128, 1)";o.fillRect(0,0,n,r)}function sne(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),s=new Uint8Array(r.data);for(let n=0;n<s.length;n+=4){const a=s[n+3]/255;s[n]*=a,s[n+1]*=a,s[n+2]*=a}return[s,e,i]}function E6e(t){const e=t[0]?.[0]?.[0]??0,i=t[0]?.[0]?.[1]??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let s=0;s<t.length;s++){const n=t[s];for(let a=0;a<n.length;a++){const o=n[a][0],u=n[a][1];o<r.xmin&&(r.xmin=o),o>r.xmax&&(r.xmax=o),u<r.ymin&&(r.ymin=u),u>r.ymax&&(r.ymax=u)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function WT(t,e){const i=E6e(t),r=i.width===0?1:i.width,s=i.height===0?1:i.height,n=[];for(let a=0;a<t.length;a++){const o=t[a],u=[];for(let h=0;h<o.length;h++){let p=Math.round(o[h][0]-i.xmin),y=Math.round(o[h][1]-i.ymin);if(p=e.xmin+p*e.width/r,y=e.ymin+y*e.height/s,isNaN(p)||isNaN(y))throw new Error("Scaled shape has NaN values");u.push([p,y])}n.push(u)}return n}function fB(t,e,i){const r=[];for(let s=0;s<t.length;s++){const n=t[s],a=[];for(let o=0;o<n.length;o++){const u=n[o][0]+e,h=n[o][1]+i;if(isNaN(u)||isNaN(h))throw new Error("Scaled shape has NaN values");a.push([u,h])}r.push(a)}return r}let C6e=class nne{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}static fromExtent(e){return new nne(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function I6e(t){return`rgb(${t.slice(0,3).toString()})`}function Ux(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let ane=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d",{willReadFrequently:!0});i1(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:n,weight:a}=i.font;this._lineThroughWidthOffset=n&&n==="line-through"?.1*this._lineHeight:0;const o=i.backgroundColor!=null||i.borderLine!=null,u=o?jSe:0,h=this._computeTextWidth(s,i)+2*u,p=this._lineHeight*this._textLines.length+2*u;if(r.width=h+2*this._lineThroughWidthOffset,r.height=p,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=h,this._renderedHeight=p,this._lineThroughWidthOffset*=i.pixelRatio;const y=(i.outline&&i.outline.color)??[0,0,0,0],v=i.color??[0,0,0,0],b=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=Ux(v),this._outlineStyle=Ux(y),this._haloStyle=I6e(b);const w=this._renderedLineHeight,S=this._renderedOutlineSize,M=this._renderedHaloSize;s.save(),s.clearRect(0,0,r.width,r.height),i1(s,i);const T=u*i.pixelRatio,I=L6e(s.textAlign,this._renderedWidth-2*T,this._renderedHaloSize+this._renderedOutlineSize)+T,L=M+S+T,O=M>0;let R=this._lineThroughWidthOffset,z=0;if(o){s.save();const Se=i.backgroundColor??[0,0,0,0],me=i.borderLine?.color??[0,0,0,0],ke=2*(i.borderLine?.size??0);s.fillStyle=Ux(Se),s.strokeStyle=Ux(me),s.lineWidth=ke,s.fillRect(0,0,r.width,r.height),s.strokeRect(0,0,r.width,r.height),s.restore()}O&&this._renderHalo(s,I,L,R,z,i),S>0&&this._renderOutline(s,I,L,R,z,i),z+=L,R+=I;for(const Se of this._textLines)O?(s.globalCompositeOperation="destination-out",s.fillStyle="rgb(0, 0, 0)",s.fillText(Se,R,z),s.globalCompositeOperation="source-over",s.fillStyle=this._fillStyle,s.fillText(Se,R,z)):(s.fillStyle=this._fillStyle,s.fillText(Se,R,z)),n&&n!=="none"&&this._renderDecoration(s,R,z,n,a),z+=w;s.restore();const j=this._renderedWidth+2*this._lineThroughWidthOffset,U=this._renderedHeight,B=s.getImageData(0,0,j,U),Q=new Uint8Array(B.data);if(i.premultiplyColors){let Se;for(let me=0;me<Q.length;me+=4)Se=Q[me+3]/255,Q[me]=Q[me]*Se,Q[me+1]=Q[me+1]*Se,Q[me+2]=Q[me+2]*Se}let oe,ue;switch(i.horizontalAlignment){case"left":oe=-.5;break;case"right":oe=.5;break;default:oe=0}switch(i.verticalAlignment){case"bottom":ue=-.5;break;case"top":ue=.5;break;case"baseline":ue=-1/6;break;default:ue=0}return{size:[j,U],image:new Uint32Array(Q.buffer),sdf:!1,simplePattern:!1,anchorX:oe,anchorY:ue,canvas:r}}_renderHalo(e,i,r,s,n,a){const o=this._renderedWidth,u=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=u;const h=this._outlineRasterizationCanvas,p=h.getContext("2d");p.clearRect(0,0,o,u),i1(p,a);const{decoration:y,weight:v}=a.font;p.fillStyle=this._haloStyle,p.strokeStyle=this._haloStyle,p.lineJoin="round",this._renderOutlineNative(p,i,r,y,v,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(h,0,0,o,u,s,n,o,u),e.globalAlpha=1}_renderOutline(e,i,r,s,n,a){const o=this._renderedWidth,u=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=o,this._outlineRasterizationCanvas.height=u;const h=this._outlineRasterizationCanvas,p=h.getContext("2d");p.clearRect(0,0,o,u),i1(p,a);const{decoration:y,weight:v}=a.font;p.fillStyle=this._outlineStyle,p.strokeStyle=this._outlineStyle,p.lineJoin="round",this._renderOutlineNative(p,i,r,y,v,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(h,0,0,o,u,s,n,o,u),e.globalAlpha=1}_renderOutlineNative(e,i,r,s,n,a){const o=this._renderedLineHeight;for(const u of this._textLines){const h=2*a,p=5,y=.1;for(let v=0;v<p;v++){const b=(1-(p-1)*y+v*y)*h;e.lineWidth=b,e.strokeText(u,i,r),s&&s!=="none"&&this._renderDecoration(e,i,r,s,n,b)}r+=o}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d");i1(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const n=this._computeTextWidth(s,i),a=this._lineHeight*this._textLines.length;return r.width=n,r.height=a,[n*i.pixelRatio,a*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const n of this._textLines)r=Math.max(r,e.measureText(n).width);const s=i.font;return(s.style==="italic"||s.style==="oblique"||typeof s.weight=="string"&&(s.weight==="bold"||s.weight==="bolder")||typeof s.weight=="number"&&s.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*lt(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*lt(this._parameters.halo.size))}_renderDecoration(e,i,r,s,n,a){let o=.9*this._lineHeight;const u=n==="bold"?.06:n==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const h=e.textBaseline;if(s==="underline")switch(o=.9*this._computeLineHeightBase(),h){case"top":r+=o;break;case"middle":r+=o/2}else if(s==="line-through")switch(h){case"top":r+=o/1.5;break;case"middle":r+=o/3}const p=a?1.5*a:Math.ceil(o*u);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=p,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function i1(t,e){const i=Math.max(e.size,.5),r=e.font,s=`${r.style} ${r.weight} ${lt(i).toFixed(1)}px ${r.family}, sans-serif`;let n;switch(t.font=s,t.textBaseline="top",e.horizontalAlignment){case"left":default:n="left";break;case"right":n="right";break;case"center":n="center"}t.textAlign=n}function L6e(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function one(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A6e(){const t=one("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function P6e(t){return t!=null&&document.body.removeChild(t),null}const O6e=()=>le.getLogger("esri.views.2d.engine.webgl.alignmentUtils");function k6e(t){if(!t)return 0;switch(t){case"Left":case"left":return-1;case"Right":case"right":return 1;case"Justify":return O6e().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),0;case"Center":case"center":return 0}}function R6e(t){if(!t)return 0;switch(t){case"Top":case"top":return 1;case"Center":case"middle":return 0;case"Baseline":case"baseline":return 2;case"Bottom":case"bottom":return-1}}function dKe(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function pKe(t){switch(t){case 1:case"right":return-1;case 0:case"center":return 0;case-1:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function fKe(t){switch(t){case 1:case"top":return 1;case 0:case"middle":return 0;case-1:case 2:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}let D6e=class{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},Q1=class C5{constructor(e,i,r,s){this.transformedX=0,this.transformedY=0,this.center=pm(e,i),this.centerT=aw(),this.halfWidth=r/2,this.halfHeight=s/2,this.width=r,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new C5(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),s=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth+i)/r,a=(e.halfHeight+this.halfHeight+i)/s,o=Math.min(n,a);return Math.log2(o)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),s=Math.max(this.xmax,e.xmax)-i,n=Math.max(this.ymax,e.ymax)-r,a=i+s/2,o=r+n/2;this.width=s,this.height=n,this.halfWidth=s/2,this.halfHeight=n/2,this.x=a,this.y=o}static deserialize(e){const i=e.readF32(),r=e.readF32(),s=e.readInt32(),n=e.readInt32();return new C5(i,r,s,n)}};const GN=22,lne=4,N6e=GN+lne,z6e=GN-6,mB=3,F6e=Math.PI/180,Fh=8,V6e=1.5;let une=class{constructor(e,i,r,s){this._rotationT=zc(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const n=r.rect,a=new Float32Array(8);e*=s,i*=s;const o=r.code?n.width*s:r.metrics.width,u=r.code?n.height*s:r.metrics.height;this.width=o,this.height=u,a[0]=e,a[1]=i,a[2]=e+o,a[3]=i,a[4]=e,a[5]=i+u,a[6]=e+o,a[7]=i+u,this._data=a,this._setTextureCoords(n),this._scale=s,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+o,i+u)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,Z3(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,s=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+r,n[3]=this.y,n[4]=this.x,n[5]=this.y+s,n[6]=this.x+r,n[7]=this.y+s;const a=Pl(zc(),this._rotationT,this._transform);cee(n,n,a);let o=1/0,u=1/0,h=-1/0,p=-1/0;for(let S=0;S<4;S++){const M=n[2*S],T=n[2*S+1];o=Math.min(o,M),u=Math.min(u,T),h=Math.max(h,M),p=Math.max(p,T)}const y=h-o,v=p-u,b=o+y/2,w=u+v/2;this._bounds=new Q1(b,w,y,v)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=Pl(zc(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],As(this._offsets.topLeft,this._offsets.topLeft,e),As(this._offsets.topRight,this._offsets.topRight,e),As(this._offsets.bottomLeft,this._offsets.bottomLeft,e),As(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:s}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+s],bottomRight:[e+r,i+s]}}};const j6e=(t,e)=>({code:0,page:0,sdf:!0,rect:new D6e(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function r1(t,e){return t.forEach(i=>As(i,i,e)),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let U6e=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const s of e)s.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=Z3(zc(),e);Pl(i,r,i);for(const s of this.glyphs)s.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const s=r.scale,n=r.decoration==="underline"?N6e:z6e,a=e[0].textureBinding;for(const o of i){const u=o.startX*s,h=o.startY*s,p=(o.width+o.glyphWidthEnd)*s;e.push(new une(u,h+n*s,j6e(p,a),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(V6e+i)/2,s=this._borderLineSizePx?r:0,{xmin:n,ymin:a,xmax:o,ymax:u,x:h,y:p,width:y,height:v}=this.bounds,b=[n-Fh,a-Fh],w=[o+Fh,a-Fh],S=[n-Fh,u+Fh],M=[o+Fh,u+Fh],T=r1([[b[0]-r,b[1]-r],[w[0]+r,w[1]-r],[b[0]+s,b[1]+s],[w[0]-s,w[1]+s]],e),I=r1([[S[0]+s,S[1]-s],[M[0]-s,M[1]-s],[S[0]-r,S[1]+r],[M[0]+r,M[1]+r]],e),L=r1([[b[0]-r,b[1]-r],[b[0]+s,b[1]+s],[S[0]-r,S[1]+r],[S[0]+s,S[1]-s]],e),O=r1([[w[0]-s,w[1]+s],[w[0]+r,w[1]-r],[M[0]-s,M[1]-s],[M[0]+r,M[1]+r]],e),R={main:r1([b,w,S,M],e),top:T,bot:I,left:L,right:O};return[new Q1(h,p,y+2*r,v+2*r),R]}get boundsT(){const e=this.bounds,i=ir(aw(),e.x,e.y);if(As(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new Q1(i[0],i[1],r,r)}return new Q1(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,s=0,n=0;for(const u of e)i=Math.min(i,u.xTopLeft),r=Math.min(r,u.yTopLeft),s=Math.max(s,u.xBottomRight),n=Math.max(n,u.yBottomRight);const a=s-i,o=n-r;return new Q1(i+a/2,r+o/2,a,o)}_createGlyphTransform(e,i){const r=F6e*i.angle,s=zc(),n=aw();return du(s,s,ir(n,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?qd(s,s,r):(du(s,s,ir(n,e.x,e.y)),qd(s,s,r),du(s,s,ir(n,-e.x,-e.y))),s}},Gx=class{constructor(e,i,r,s,n,a){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=s,this.yMin=n,this.yMax=a}};const I5=t=>t===10,yB=t=>t===32;function G6e(t,e,i){const r=new Array,s=1/i.scale,n=i.maxLineWidth*s,a=e?t.length-1:0,o=e?-1:t.length,u=e?-1:1;let h=a,p=0,y=0,v=h,b=v,w=0,S=1/0,M=0;for(;h!==o;){const{code:I,metrics:L}=t[h],O=Math.abs(L.top);if(I5(I)||yB(I)||(S=Math.min(S,O),M=Math.max(M,O+L.height)),I5(I))h!==a&&(r.push(new Gx(t,v,h-u,p,S===1/0?0:S,M)),S=1/0,M=0),p=0,v=h+u,b=h+u,y=0;else if(yB(I))b=h+u,y=0,w=L.advance,p+=L.advance;else if(p>n){if(b!==v){const R=b-2*u;p-=w,r.push(new Gx(t,v,R,p-y,S,M)),S=1/0,M=0,v=b,p=y}else r.push(new Gx(t,v,h-u,p,S,M)),S=1/0,M=0,v=h,b=h,p=0;p+=L.advance,y+=L.advance}else p+=L.advance,y+=L.advance;h+=u}const T=new Gx(t,v,h-u,p,S,M);return T.start>=0&&T.end<t.length&&r.push(T),r}function q6e(t,e){let i=0;for(let n=0;n<t.length;n++){const{width:a}=t[n];i=Math.max(a,i)}const r=e.decoration==="underline"?lne:0,s=t[0].yMin;return{x:0,y:s,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-s,width:i}}function cne(t,e){const i=e.scale,r=new Array,{glyphs:s,isRightToLeft:n}=t,a=G6e(s,n,e),o=a.length?q6e(a,e):{y:0,height:0},u=k6e(e.horizontalAlignment),h=R6e(e.verticalAlignment),p=h===2?1:0,y=p?0:h-1,v=(1-p)*-o.y+y*(o.height/2)+(p?1:0)*-GN;for(let b=0;b<a.length;b++){const{start:w,end:S,width:M}=a[b];let T=-1*(u+1)*(M/2)-mB;const I=(t.isRightToLeft?a.length-1-b:b)*e.lineHeight+v-mB;a[b].startX=T,a[b].startY=I;for(let L=w;L<=S;L++){const O=s[L];if(I5(O.code))continue;const R=new une(T+O.metrics.left,I-O.metrics.top,O,i);T+=O.metrics.advance,r.push(R)}}return new U6e(r,a,e)}const _Ke=50;function bKe(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:s,spatialReference:n}=t;return new pi({rings:[[[e,i],[e,s],[r,s],[r,i],[e,i]]],spatialReference:n})}function hne(t){return Ut(Math.round(lt(t)))}function dne(t){const e=Ut(fEe),i=Ut(mEe);return Math.max(e,Math.min(t||i,i))}const Cf=Math.PI/180,pne=.5,K1=()=>le.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class Xr{constructor(e){this._t=e}static createIdentity(){return new Xr([1,0,0,0,1,0])}clone(){const e=this._t;return new Xr(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Xr([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Xr([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Xr([i,-r,0,r,i,0])}rotate(e){return Xr.multiply(this,Xr.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const s=e._t,n=i._t,a=s[0]*n[0]+s[3]*n[1],o=s[1]*n[0]+s[4]*n[1],u=s[2]*n[0]+s[5]*n[1]+n[2],h=s[0]*n[3]+s[3]*n[4],p=s[1]*n[3]+s[4]*n[4],y=s[2]*n[3]+s[5]*n[4]+n[5],v=r._t;return v[0]=a,v[1]=o,v[2]=u,v[3]=h,v[4]=p,v[5]=y,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Xr([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,s=(e[2]*e[3]-e[0]*e[5])*i,n=e[4]*i,a=-e[1]*i,o=-e[3]*i,u=e[0]*i;return new Xr([n,a,r,o,u,s])}}class qN{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new _m(()=>new Cv,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Xr.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Xr.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Xr.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const s=e.effects;if(s&&s.length>0){const n=this.executeEffects(s,i);if(n){let a=n.next();for(;a;)this.drawSymbolLayers(r,a.asJSON()),a=n.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){let r=new YNe(Gt.fromJSONCIM(i));for(const s of e){const n=m6e(s);n&&(r=n.execute(r,s,this.geomUnitsPerPoint(),null))}return r}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const s=e[r];if(!s||s.enable===!1)continue;const n=s.effects;if(n&&n.length>0){const a=this.executeEffects(n,i);if(a){let o=null;for(;(o=a.next())&&(this.drawSymbolLayer(s,o.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(s,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=H6e(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const s=y6e(r);if(s){const n=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;n&&this.pushClipPath(i);const a=s.execute(Gt.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null);if(a){let o=null;for(;(o=a.next())&&(this.drawMarker(e,o),!this._earlyReturn););}n&&this.popClipPath()}}else{const s=this._placementPool.acquire();if(ew(i))s.tx=i.x,s.ty=i.y,this.drawMarker(e,s);else if(sr(i)){const n=sJ(i);n&&([s.tx,s.ty]=n,this.drawMarker(e,s))}else if(fs(i)){for(const n of i.paths)for(const a of n)if(s.tx=a[0],s.ty=a[1],this.drawMarker(e,s),this._earlyReturn)break}else for(const n of i.points)if(s.tx=n[0],s.ty=n[1],this.drawMarker(e,s),this._earlyReturn)break;this._placementPool.release(s)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),s=Qe(e.size,or.CIMPictureMarker.size);if(r==null||s<=0)return;const n=r.width,a=r.height;if(!n||!a)return;const o=n/a,u=Qe(e.scaleX,1),h=Xr.createIdentity(),p=e.anchorPoint;if(p){let M=p.x,T=p.y;e.anchorPointUnits!=="Absolute"&&(M*=s*o*u,T*=s),h.translate(-M,-T)}let y=Qe(e.rotation);e.rotateClockwise&&(y=-y),this._mapRotation&&(y+=this._mapRotation),y&&h.rotate(y*Cf);let v=Qe(e.offsetX),b=Qe(e.offsetY);if(v||b){if(this._mapRotation){const M=Cf*this._mapRotation,T=Math.cos(M),I=Math.sin(M),L=v*I+b*T;v=v*T-b*I,b=L}h.translate(v,b)}const w=this.geomUnitsPerPoint();w!==1&&h.scale(w,w);const S=i.getAngle();S&&h.rotate(S),h.translate(i.tx,i.ty),this.push(h,!1),this.drawImage(e,s),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const s=Qe(e.size,or.CIMVectorMarker.size),n=e.frame,a=n?n.ymax-n.ymin:0,o=s&&a?s/a:1,u=Xr.createIdentity();n&&u.translate(.5*-(n.xmax+n.xmin),.5*-(n.ymax+n.ymin));const h=e.anchorPoint;if(h){let S=h.x,M=h.y;e.anchorPointUnits!=="Absolute"?n&&(S*=n.xmax-n.xmin,M*=n.ymax-n.ymin):(S/=o,M/=o),u.translate(-S,-M)}o!==1&&u.scale(o,o);let p=Qe(e.rotation);e.rotateClockwise&&(p=-p),this._mapRotation&&(p+=this._mapRotation),p&&u.rotate(p*Cf);let y=Qe(e.offsetX),v=Qe(e.offsetY);if(y||v){if(this._mapRotation){const S=Cf*this._mapRotation,M=Math.cos(S),T=Math.sin(S),I=y*T+v*M;y=y*M-v*T,v=I}u.translate(y,v)}const b=this.geomUnitsPerPoint();b!==1&&u.scale(b,b);const w=i.getAngle();w&&u.rotate(w),u.translate(i.tx,i.ty),this.push(u,e.scaleSymbolsProportionally);for(const S of r){S?.symbol&&S.geometry||K1().error("Invalid marker graphic",S);let M=S.textString;if(typeof M=="number"&&(M=M.toString()),this.drawSymbol(S.symbol,S.geometry,M),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!ew(i)||Qe(e.height,or.CIMTextSymbol.height)<=0)return;const s=Xr.createIdentity();let n=Qe(e.angle);n=-n,n&&s.rotate(n*Cf);const a=Qe(e.offsetX),o=Qe(e.offsetY);(a||o)&&s.translate(a,o);const u=this.geomUnitsPerPoint();u!==1&&s.scale(u,u),s.translate(i.x,i.y),this.push(s,!1),this.drawText(e,r),this.pop()}}class B6e extends qN{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new C6e(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return lJ(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(sr(e))this._processPath(e.rings,0);else if(fs(e))this._processPath(e.paths,0);else if(sn(e)){const i=wc(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const s=Math.max(.5*this.transformSize(Qe(r,or.CIMSolidStroke.width)),.5*pne);if(sr(e))this._processPath(e.rings,s);else if(fs(e))this._processPath(e.paths,s);else if(sn(e)){const n=wc(e);n&&this._processPath(n.rings,s)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){sr(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,s=Qe(e.scaleX,1);let n=s*i,a=i;const o=this._resourceManager.getResource(r);if(o!=null){const u=o.height/o.width;n=s*(i?u>1?i:i/u:o.width),a=i?u>1?i*u:i:o.height}this._merge(this.transformPt([-n/2,-a/2]),0),this._merge(this.transformPt([-n/2,a/2]),0),this._merge(this.transformPt([n/2,-a/2]),0),this._merge(this.transformPt([n/2,a/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new ane);const r=yne(e);let[s,n]=this._textRasterizer.computeTextSize(i,r);s=Ut(s),n=Ut(n);const a=this.transformSize(1)*this.reverseTransformScalar(1);s*=a,n*=a;let o=0;switch(e.horizontalAlignment){case"Left":o=s/2;break;case"Right":o=-s/2}let u=0;switch(e.verticalAlignment){case"Bottom":u=n/2;break;case"Top":u=-n/2;break;case"Baseline":u=n/6}this._merge(this.transformPt([-s/2+o,-n/2+u]),0),this._merge(this.transformPt([-s/2+o,n/2+u]),0),this._merge(this.transformPt([s/2+o,-n/2+u]),0),this._merge(this.transformPt([s/2+o,n/2+u]),0)}_processPath(e,i){if(e)for(const r of e){const s=r?r.length:0;if(s>1){this._merge(this.transformPt(r[0]),i);for(let n=1;n<s;n++)this._merge(this.transformPt(r[n]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class wKe extends qN{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=P6e(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,s,n,a){const o=a*lt(1);this.setTransform(),this.setGeomUnitsPerPoint(o),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/o,this._textInfo=s;const u=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=u?n:0,!X("esri-mobile")){const h=Ut(uEe*window.devicePixelRatio),p=Ut(cEe);!((i?.type==="CIMLineSymbol"||i?.type==="CIMPolygonSymbol")&&i.symbolLayers?.some(jOe))&&i?.type!=="CIMMeshSymbol"&&(QOe(i)??0)<p&&(this._searchDistPoint=h)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){return e.at(-1)?.type==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,s,n,a,o){o!=null?this._hittestSvgPath(e,o,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,s=Qe(e.scaleX,1),n=this._resourceManager.getResource(r);if(n==null||n.height===0||i===0)return;const a=i*this.geomUnitsPerPoint(),o=a*s*(n.width/n.height),u=this.reverseTransformPt(this._searchPoint),h=this._searchDistPoint;Math.abs(u[0])<o/2+h&&Math.abs(u[1])<a/2+h&&(this._earlyReturn=!0)}drawText(e,i){const r=this._textInfo;if(!r)return;const s=r.get(e);if(!s||!s.glyphMosaicItems.glyphs.length)return;const n=hne(Qe(e.height,or.CIMTextSymbol.height)),{lineGapType:a,lineGap:o}=e,u=a?mne(a,Qe(o),n):0,h=e.callout?.type==="CIMBackgroundCallout",p=cne(s.glyphMosaicItems,{scale:n/Vee,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:dne(e.lineWidth),lineHeight:Fee*Math.max(.25,Math.min(u||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:h}),y=this.reverseTransformPt(this._searchPoint),v=y[0],b=y[1];for(const w of p.glyphs)if(v>w.xTopLeft&&v<w.xBottomRight&&b>-w.yBottomRight&&b<-w.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(sn(e)){const s=e;i=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(sr(e))i=e.rings;else{if(!fs(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);W6e(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&gB(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??=A6e(),this._path??=one("path"),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,s=0){const n=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),a=this.reverseTransformPt(this._searchPoint),o=Oi();cD(o,e);const u={x:o[0],y:o[1],width:o[2]-o[0],height:o[3]-o[1]},h=this._getSvgPath();h.setAttribute("d",i);const p=h.getBBox();let y=Math.max(p.width/u.width,p.height/u.height),v=1;const b=2*n*y;b<1&&(v=2/b,y*=v,p.x*=v,p.y*=v,p.width*=v,p.height*=v);const w=1+s*y/2,S=this._getCanvasContext(p.width+2*w,p.height+2*w);S.setTransform(v,0,0,v,-p.x+w,-p.y+w);const M=new Path2D(i);r?S.fill(M):(S.lineWidth=s*(y/v),S.stroke(M));const T=(u.width*y-p.width)/2,I=(u.height*y-p.height)/2,L=Math.floor((a[0]-u.x-n)*y-T+w),O=Math.floor((u.height-(a[1]-u.y)-n)*y+I+w),R=Math.ceil(2*n*y),z=Math.ceil(2*n*y),j=S.getImageData(L,O,R,z).data;for(let U=3;U<j.length;U+=4)if(j[U]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(sn(e)){const s=e;r=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(sr(e))r=e.rings;else{if(!fs(e))return;r=e.paths}gB(this.reverseTransformPt(this._searchPoint),r,Qe(i,or.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class fne extends qN{constructor(e,i,r,s){super(i,r),this._applyAdditionalRenderProps=s,this._colorSubstitutionHelper=new tze,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(sr(e))this._buildPath(e.rings,!0);else if(fs(e))this._buildPath(e.paths,!0);else if(sn(e))this._buildPath(wc(e).rings,!0);else{if(!Xg(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,s,n,a){if(!e||!i||r===0)return;if(sr(e))this._buildPath(e.rings,!0);else if(fs(e))this._buildPath(e.paths,!1);else{if(!sn(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(wc(e).rings,!0)}const o=this._ctx;o.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",o.lineWidth=Math.max(this.transformSize(r),pne),this._setCapStyle(s),this._setJoinStyle(n),o.miterLimit=a,o.stroke()}pushClipPath(e){if(this._ctx.save(),sr(e))this._buildPath(e.rings,!0);else if(fs(e))this._buildPath(e.paths,!0);else{if(!sn(e))return;this._buildPath(wc(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:s,tintColor:n}=e,a=Qe(e.scaleX,1),o=this._resourceManager.getResource(s);if(o==null)return;let u=i*(o.width/o.height),h=i;i||(u=o.width,h=o.height);const p=Dy(s)||"src"in o&&Dy(o.src);let y="getFrame"in o?zA(o):o;r&&(y=this._colorSubstitutionHelper.applyColorSubstitution(y,r)),this._applyAdditionalRenderProps&&!p&&n&&(y=this._colorSubstitutionHelper.tintImageData(y,n));const v=this.transformPt([0,0]),[b,w]=this.getTransformAngle(),S=this.transformSize(1),M=this._ctx;M.save(),M.setTransform({m11:a*S*b,m12:a*S*w,m21:-S*w,m22:S*b,m41:v[0],m42:v[1]}),M.drawImage(y,-u/2,-h/2,u,h),M.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new ane);const r=yne(e,this.transformSize(Ut(1))),s=this._textRasterizer.rasterizeText(i,r);if(!s)return;const{size:n,anchorX:a,anchorY:o,canvas:u}=s,h=n[0]*(a+.5),p=n[1]*(o-.5),y=this._ctx,v=this.transformPt([0,0]),[b,w]=this.getTransformAngle(),S=1;y.save(),y.setTransform({m11:S*b,m12:S*w,m21:-S*w,m22:S*b,m41:v[0]-S*h,m42:v[1]+S*p}),y.drawImage(u,0,0),y.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:s,offsetX:n,offsetY:a,rotation:o,scaleX:u,tintColor:h,url:p}=i;const y=this._resourceManager.getResource(p);if(y==null)return;if(sr(e))this._buildPath(e.rings,!0);else if(fs(e))this._buildPath(e.paths,!0);else if(sn(e))this._buildPath(wc(e).rings,!0);else{if(!Xg(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const v=this._ctx,b=Dy(p)||"src"in y&&Dy(y.src);let w,S="getFrame"in y?zA(y):y;if(r&&(S=this._colorSubstitutionHelper.applyColorSubstitution(S,r)),this._applyAdditionalRenderProps){b||h&&(S=this._colorSubstitutionHelper.tintImageData(S,h)),w=v.createPattern(S,"repeat");const M=this.transformSize(1);o||(o=0),n?n*=M:n=0,a?a*=M:a=0,s&&(s*=M);const T=s?s/y.height:1,I=u&&s?u*s/y.width:1;if(o!==0||T!==1||I!==1||n!==0||a!==0){const L=new DOMMatrix;L.rotateSelf(0,0,-o).translateSelf(n,a).scaleSelf(I,T,1),w.setTransform(L)}}else w=v.createPattern(S,"repeat");v.save(),v.fillStyle=w,v.fill("evenodd"),v.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:s,joinStyle:n,miterLimit:a,tintColor:o,url:u,width:h}=i;const p=this._resourceManager.getResource(u);if(p==null)return;let y;if(sr(e))y=e.rings;else if(fs(e))y=e.paths;else{if(!sn(e))return Xg(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;y=wc(e).rings}h||(h=p.width);const v=Dy(u)||"src"in p&&Dy(p.src);let b="getFrame"in p?zA(p):p;r&&(b=this._colorSubstitutionHelper.applyColorSubstitution(b,r)),this._applyAdditionalRenderProps&&(v||o&&(b=this._colorSubstitutionHelper.tintImageData(b,o)));const w=Math.max(this.transformSize(lt(h)),.5),S=w/b.width,M=this._ctx,T=M.createPattern(b,"repeat-y");let I,L;M.save(),this._setCapStyle(s),this._setJoinStyle(n),a!==void 0&&(M.miterLimit=a),M.lineWidth=w;for(let O of y)if(O=J(O),vB(O),O&&!(O.length<=1)){I=this.transformPt(O[0]);for(let R=1;R<O.length;R++){L=this.transformPt(O[R]);const z=Z6e(I,L),j=new DOMMatrix;j.translateSelf(0,I[1]-w/2).scaleSelf(S,S,1).rotateSelf(0,0,90-z),T.setTransform(j),M.strokeStyle=T,M.beginPath(),M.moveTo(I[0],I[1]),M.lineTo(L[0],L[1]),M.stroke(),I=L}}M.restore()}drawGradientFill(e,i){if(!e)return;let r;if(sr(e))r=e.rings;else if(fs(e))r=e.paths;else{if(!sn(e))return void K1().error("Unable to draw gradient fill");r=wc(e).rings}this._buildPath(r,!0);const{angle:s,gradientMethod:n,gradientSize:a,gradientSizeUnits:o}=i,u=or.CIMGradientFill,h=i.gradientType??u.gradientType,p=-au(s??0),y=Qge();for(const T of r){const I=T?T.length:0;if(I>1)for(let L=0;L<I;L++){let O=this.transformPt(T[L]);n!=="Linear"&&n!=="Rectangular"||(O=Zu(O,-p)),ms(y,O)}}const[v,b,w,S]=y,M=this._ctx;switch(M.save(),n){case"Buffered":K1().error(`Gradient method "${n}" currently unsupported.`);break;case"Linear":{const T=(b+S)/2,I=o==="Absolute"?this.transformSize(lt(a)):Y_(a,u.gradientSize)*(w-v),[L,O]=h==="Discrete"?[w,w-I]:[v+I,v],R=Zu([L,T],p),z=Zu([O,T],p),j=M.createLinearGradient(R[0],R[1],z[0],z[1]);jx(j,i),M.fillStyle=j,M.fill("evenodd");break}case"Circular":{const T=l9(y),I=Jge(y)/2,L=o==="Absolute"?this.transformSize(lt(a)):Y_(a,u.gradientSize)*I,[O,R]=h==="Discrete"?[I,I-L]:[L,0],z=M.createRadialGradient(T[0],T[1],O,T[0],T[1],R);jx(z,i),M.fillStyle=z,M.fill("evenodd");break}case"Rectangular":{const T=l9(y),I=T[0],L=T[1],O=Zu(T,p),R=(oe,ue,Se,me,ke,te,be,Me)=>{M.save(),this.pushClipPath(e);const et=Zu([ke,te],p),_t=Zu([be,Me],p);M.beginPath(),M.moveTo(O[0],O[1]),M.lineTo(et[0],et[1]),M.lineTo(_t[0],_t[1]),M.lineTo(O[0],O[1]),M.clip();const W=Zu([oe,ue],p),pe=Zu([Se,me],p),Te=M.createLinearGradient(W[0],W[1],pe[0],pe[1]);jx(Te,i),M.fillStyle=Te,M.fill("evenodd"),M.restore()};let z=o==="Absolute"?this.transformSize(lt(a)):Y_(a,u.gradientSize)*(E3(y)/2),[j,U]=h==="Discrete"?[w,w-z]:[I+z,I];R(j,L,U,L,w,b,w,S),[j,U]=h==="Discrete"?[v,v+z]:[I-z,I],R(j,L,U,L,v,S,v,b),z=o==="Absolute"?this.transformSize(lt(a)):Y_(a,u.gradientSize)*(C3(y)/2);let[B,Q]=h==="Discrete"?[S,S-z]:[L+z,L];R(I,B,I,Q,w,S,v,S),[B,Q]=h==="Discrete"?[b,b+z]:[L-z,L],R(I,B,I,Q,v,b,w,b);break}}M.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:s,gradientSize:n,gradientSizeUnits:a,joinStyle:o,miterLimit:u,width:h}=i;if(!e||h===0)return;let p;if(sr(e))p=e.rings;else if(fs(e))p=e.paths;else{if(!sn(e))return void K1().error("Unable to draw gradient stroke");p=wc(e).rings}const y=i.gradientType??or.CIMGradientStroke.gradientType,v=Math.max(this.transformSize(lt(h)),.5),b=this._ctx;let w,S;b.save(),this._setCapStyle(r),this._setJoinStyle(o),u!==void 0&&(b.miterLimit=u),b.lineWidth=v;for(let M of p){if(M=J(M),vB(M),!M||M.length<=1)continue;let T=0;w=this.transformPt(M[0]);for(let O=1;O<M.length;O++){S=this.transformPt(M[O]);const R=S[0]-w[0],z=S[1]-w[1];T+=Math.sqrt(R*R+z*z),w=S}const I=a==="Absolute"?this.transformSize(lt(n)):Y_(n,or.CIMGradientStroke.gradientSize)*(s==="AcrossLine"?v:T);let L=0;w=this.transformPt(M[0]);for(let O=1;O<M.length;O++){S=this.transformPt(M[O]);const R=S[0]-w[0],z=S[1]-w[1],j=Math.sqrt(R*R+z*z);let U,B,Q,oe;switch(s){case"AcrossLine":{const[Se,me]=Zu([R/j,z/j],-Math.PI/2),ke=v/2,te=y==="Discrete"?ke:I-ke;U=(w[0]+S[0])/2+Se*te,B=(w[1]+S[1])/2+me*te,Q=U-Se*I,oe=B-me*I;break}case"AlongLine":{const Se=R/j,me=z/j;y==="Discrete"?(U=w[0]-Se*L,B=w[1]-me*L,Q=U+Se*I,oe=B+me*I):(Q=w[0]+Se*(T-L),oe=w[1]+me*(T-L),U=Q-Se*I,B=oe-me*I);break}default:return K1().error("Unrecognized gradient method:",s),void b.restore()}const ue=b.createLinearGradient(U,B,Q,oe);jx(ue,i),b.strokeStyle=ue,b.beginPath(),b.moveTo(w[0],w[1]),b.lineTo(S[0],S[1]),b.stroke(),L+=j,w=S}}b.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const s of e){const n=s?s.length:0;if(n>1){let a=this.transformPt(s[0]);r.moveTo(a[0],a[1]);for(let o=1;o<n;o++)a=this.transformPt(s[o]),r.lineTo(a[0],a[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}function H6e(t,e,i){let r=Qe(t.separation,or.CIMHatchFill.separation)*i,s=Qe(t.rotation);if(r===0)return null;r<0&&(r=-r);let n=0;const a=.5*r;for(;n>a;)n-=r;for(;n<-a;)n+=r;const o=Oi();cD(o,e),o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;const u=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];for(;s>180;)s-=180;for(;s<0;)s+=180;const h=Math.cos(s*Cf),p=Math.sin(s*Cf),y=-r*p,v=r*h;let b,w,S,M;n=Qe(t.offsetX)*i*p-Qe(t.offsetY)*i*h,b=S=Number.MAX_VALUE,w=M=-Number.MAX_VALUE;for(const j of u){const U=j[0],B=j[1],Q=h*U+p*B,oe=-p*U+h*B;b=Math.min(b,Q),S=Math.min(S,oe),w=Math.max(w,Q),M=Math.max(M,oe)}S=Math.floor(S/r)*r;let T=h*b-p*S-y*n/r,I=p*b+h*S-v*n/r,L=h*w-p*S-y*n/r,O=p*w+h*S-v*n/r;const R=1+Math.round((M-S)/r),z=[];for(let j=0;j<R;j++)T+=y,I+=v,L+=y,O+=v,z.push([[T,I],[L,O]]);return{paths:z}}function W6e(t,e){let i=0;for(const r of e){const s=r.length;for(let n=1;n<s;n++){const a=r[n-1],o=r[n];a[1]>t[1]!=o[1]>t[1]&&((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0])>0?i++:i--)}}return i!==0}function gB(t,e,i){for(const r of e){const s=r.length;for(let n=1;n<s;n++){const a=r[n-1],o=r[n];let u=(o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]);if(u===0)continue;u=Math.sqrt(u);const h=((o[0]-a[0])*(t[1]-a[1])-(o[1]-a[1])*(t[0]-a[0]))/u;if(Math.abs(h)<i){const p=((o[0]-a[0])*(t[0]-a[0])+(o[1]-a[1])*(t[1]-a[1]))/u;if(p>-i&&p<u+i)return!0}}}return!1}function Z6e(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const wc=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,mne=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function yne(t,e=1){const i=ure(t),r=lre(t.fontStyleName),s=t.fontFamilyName??VN,{weight:n,style:a}=r,o=e*(t.height||5),u=BOe(t.horizontalAlignment),h=HOe(t.verticalAlignment),p=Ab(t),y=Ab(t.haloSymbol),v=y!=null?e*(t.haloSize??0):0,b=AT(t.symbol),w=e*(PT(t.symbol)||0),S=t.callout?.type==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,M=Ab(S),T=PT(S),I=AT(S);return{color:p,size:o,horizontalAlignment:u,verticalAlignment:h,font:{family:s,style:GOe(a),weight:qOe(n),decoration:i},outline:{size:w||0,color:b},halo:{size:v||0,color:y,style:a},backgroundColor:M,borderLine:T!=null&&I!=null?{size:T,color:I}:null,pixelRatio:1,premultiplyColors:!0}}const Y6e=1e-4;function vB(t){let e,i,r,s,n,a=t[0],o=1;for(;o<t.length;)e=t[o][0]-a[0],i=t[o][1]-a[1],s=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(s-r)<=Y6e?(t.splice(o-1,1),a=n):(n=a,a=t[o],o++),r=s}const qx=Number.POSITIVE_INFINITY,BN=Math.PI,SKe=2*BN,J6e=128/BN,X6e=256/360,xKe=BN/180,Q6e=1/Math.LN2;function gne(t,e){return(t%=e)>=0?t:t+e}function $Ke(t){return gne(t*J6e,256)}function MKe(t){return gne(t*X6e,256)}function TKe(t){return Math.log(t)*Q6e}function EKe(t,e,i){return t*(1-i)+e*i}const K6e=8,eFe=14,tFe=16;function CKe(t){return K6e+Math.max((t-eFe)*tFe,0)}function IKe(t,e,i){let r,s,n,a=0;for(const o of i){r=o.length;for(let u=1;u<r;++u)s=o[u-1],n=o[u],s.y>e!=n.y>e&&((n.x-s.x)*(e-s.y)-(n.y-s.y)*(t-s.x)>0?a++:a--)}return a!==0}function LKe(t,e,i,r){let s,n,a,o;const u=r*r;for(const h of i){const p=h.length;if(!(p<2)){s=h[0].x,n=h[0].y;for(let y=1;y<p;++y){if(a=h[y].x,o=h[y].y,Age(t,e,s,n,a,o)<u)return!0;s=a,n=o}}}return!1}function AKe(t,e,i,r,s,n,a){const o=Math.max(r,Math.min(e,n))-e,u=Math.max(s,Math.min(i,a))-i;return o*o+u*u<=t*t}function PKe(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new Mt(0,0),s=new Mt(0,0),n=new Mt(0,0);for(let a=0;a<t.length;a++){const o=t[a],u=[];for(let h=0;h<o.length;h++){const p=o[h-1],y=o[h],v=o[h+1];h===0?r.setCoords(0,0):r.assignSub(y,p).normalize().rightPerpendicular(),h===o.length-1?s.setCoords(0,0):s.assignSub(v,y).normalize().rightPerpendicular(),n.assignAdd(r,s).normalize();const b=n.x*s.x+n.y*s.y;b!==0&&n.scale(1/b),u.push(Mt.add(y,n.scale(e)))}i.push(u)}return i}function OKe(t,e,i,r){const s=new Mt(t[0],t[1]);if(s.scale(r),e==="viewport"){const n=-i*(Math.PI/180),a=Math.cos(n),o=Math.sin(n);s.rotate(a,o)}return s}const vne=Math.PI,iFe=vne/2,_B=Math.PI/180,jA=96/72,rFe=1.4142135623730951,bB=2,wB=4,ZT=()=>le.getLogger("esri.symbols.cim.CIMSymbolHelper");function kKe(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=Ps.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=Ps.fromPictureMarker(t);break;case"simple-line":e=Ps.fromSimpleLineSymbol(t);break;case"simple-fill":e=Ps.fromSimpleFillSymbol(t);break;case"picture-fill":e=Ps.fromPictureFillSymbol(t);break;case"text":e=Ps.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function bM(t,e,i){switch(e.type){case"CIMSymbolReference":return bM(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new Cv;t.drawMarker(e,r);break}}return t.envelope()}function sFe(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function nFe(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Qe(t.offsetX)),Math.abs(Qe(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function SB(t){if(!t)return 0;let e=0;for(const i of t)e+=nFe(i);return e}let RKe=class{static getSymbolInflateSize(e,i,r,s,n){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,s,n):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,s){let n=!0;const a=Oi();if(i?.markerGraphics)for(const o of i.markerGraphics){const u=[0,0,0,0];o.geometry&&(cD(a,o.geometry),u[0]=0,u[1]=0,u[2]=0,u[3]=0,this.getSymbolInflateSize(u,o.symbol,r,0,s),a[0]+=u[0],a[1]+=u[1],a[2]+=u[2],a[3]+=u[3],n?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],n=!1):(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[1]),e[2]=Math.max(e[2],a[2]),e[3]=Math.max(e[3],a[3])))}return e}static _getInflateSize(e,i,r,s,n){if(hFe(i)){const a=this._getLayersInflateSize(e,i.symbolLayers,r,s,n),o=SB(i.effects);return o>0&&(a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o),a}return this._getTextInflatedSize(e,i,n)}static _getLayersInflateSize(e,i,r,s,n){let a=!0;if(!i)return e;for(const o of i){if(!o)continue;let u=[0,0,0,0];switch(o.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const p=o;let y=p.width;y!=null&&(p.capStyle==="Square"||p.joinStyle==="Miter"?y/=rFe:y/=2,u[0]=-y,u[1]=-y,u[2]=y,u[3]=y);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const p=o;if(o.type==="CIMVectorMarker"){const S=o;if(u=this._vectorMarkerBounds(u,S,r,n),S.frame){const M=(S.frame.xmin+S.frame.xmax)/2,T=(S.frame.ymin+S.frame.ymax)/2;if(u[0]-=M,u[1]-=T,u[2]-=M,u[3]-=T,S.size!=null){const I=S.size/(S.frame.ymax-S.frame.ymin);u[0]*=I,u[1]*=I,u[2]*=I,u[3]*=I}}}else if(o.type==="CIMPictureMarker"){const S=o,M=r.getResource(S.url);let T=1;if(M!=null&&M.height&&(T=M.width/M.height),p.size!=null){const I=p.size/2,L=p.size*T*S.scaleX/2;u=[-L,-I,L,I]}}else if(p.size!=null){const S=p.size/2;u=[-S,-S,S,S]}if(p.anchorPoint){let S,M;p.anchorPointUnits==="Absolute"?(S=p.anchorPoint.x,M=p.anchorPoint.y):(S=p.anchorPoint.x*(u[2]-u[0]),M=p.anchorPoint.y*(u[3]-u[1]));const T=1.25*Math.sqrt(S*S+M*M);u[0]-=T,u[1]-=T,u[2]+=T,u[3]+=T}let y=Qe(p.rotation);if(p.rotateClockwise&&(y=-y),s&&(y-=s),y){const S=_B*y,M=Math.cos(S),T=Math.sin(S),I=Oi([qx,qx,-qx,-qx]);ms(I,[u[0]*M-u[1]*T,u[0]*T+u[1]*M]),ms(I,[u[0]*M-u[3]*T,u[0]*T+u[3]*M]),ms(I,[u[2]*M-u[1]*T,u[2]*T+u[1]*M]),ms(I,[u[2]*M-u[3]*T,u[2]*T+u[3]*M]),u=I}let v=Qe(p.offsetX),b=Qe(p.offsetY);if(s){const S=_B*s,M=Math.cos(S),T=Math.sin(S),I=v*T+b*M;v=v*M-b*T,b=I}u[0]+=v,u[1]+=b,u[2]+=v,u[3]+=b;const w=sFe(p.markerPlacement);w>0&&(u[0]-=w,u[1]-=w,u[2]+=w,u[3]+=w);break}}const h=SB(o.effects);h>0&&(u[0]-=h,u[1]-=h,u[2]+=h,u[3]+=h),a?(e[0]=u[0],e[1]=u[1],e[2]=u[2],e[3]=u[3],a=!1):(e[0]=Math.min(e[0],u[0]),e[1]=Math.min(e[1],u[1]),e[2]=Math.max(e[2],u[2]),e[3]=Math.max(e[3],u[3]))}return e}static _getTextInflatedSize(e,i,r){const s=hne(i.height??or.CIMTextSymbol.height);if(e[0]=-s/2,e[1]=-s/2,e[2]=s/2,e[3]=s/2,!r)return e;const n=r.get(i);if(!n||!n.glyphMosaicItems.glyphs.length)return e;const{lineGapType:a,lineGap:o}=i,u=a?mne(a,o??0,s):0,h=i.callout?.type==="CIMBackgroundCallout",p=cne(n.glyphMosaicItems,{scale:s/Vee,angle:Qe(i.angle),xOffset:Qe(i.offsetX),yOffset:Qe(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:dne(i.lineWidth),lineHeight:Fee*Math.max(.25,Math.min(u||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:h}).boundsT,y=Math.sqrt(p.width*p.width+p.height*p.height);return e[0]-=p.x+y,e[1]-=p.y-y,e[2]+=p.x+y,e[3]+=-p.y+y,e}};class Ps{static getEnvelope(e,i,r){if(!e)return null;const s=new B6e(r);if(Array.isArray(e)){let n;for(const a of e)n?n.union(bM(s,a,i)):n=bM(s,a,i);return n}return bM(s,e,i)}static getTextureInfo(e,i,r,s,n){const a=s??this.getEnvelope(e,null,i);if(!a)return[0,0,0,0,1];const o=Math.max(a.width,a.height)*jA;let u=n!=null?Math.max(n/o,1):1;u*=jA,a.x*=u,a.y*=u,a.width*=u,a.height*=u,a.width=Math.max(Math.ceil(a.x+a.width)-Math.floor(a.x),1)-1,a.height=Math.max(Math.ceil(a.y+a.height)-Math.floor(a.y),1)-1;let h=a.x+.5*a.width,p=a.y+.5*a.height;return h+=a.x-Math.floor(a.x),p+=a.y-Math.floor(a.y),s||(a.width+=r,a.height+=r,h+=r/2,p+=r/2),[a.width,a.height,h,p,u]}static getTextureAnchor(e,i,r){const[s,n,a,o,u]=this.getTextureInfo(e,i,bB,null,r);return[-a/s,-o/n,n/u*jA]}static rasterize(e,i,r,s,n=!0,a){const[o,u,h,p,y]=this.getTextureInfo(i,s,bB,r,a);e.width=o,e.height=u;const v=e.getContext("2d",{willReadFrequently:!0}),b=Xr.createScale(y,-y);b.translate(.5*o-h,.5*u+p);const w=new fne(v,s,b);switch(i.type){case"CIMPointSymbol":{const T={type:"point",x:0,y:0};w.drawSymbol(i,T);break}case"CIMVectorMarker":{const T=new Cv;w.drawMarker(i,T);break}}const S=v.getImageData(0,0,e.width,e.height),M=new Uint8Array(S.data);if(n){let T;for(let I=0;I<M.length;I+=4)T=M[I+3]/255,M[I]=M[I]*T,M[I+1]=M[I+1]*T,M[I+2]=M[I+2]*T}return[M,e.width,e.height,-h/o,-p/u]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:Ps.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:s,xoffset:n,xscale:a,yoffset:o,yscale:u}=e,h=[],p={type:"CIMPolygonSymbol",symbolLayers:h};if(r){const S=xB(r);S&&h.push(S)}let y=e.url;e.type==="esriPFS"&&e.imageData&&(y=e.imageData);const v="angle"in e?e.angle??0:0,b=(s??0)*(a||1),w=(i??0)*(u||1);return h.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:y,height:w,width:b,offsetX:Qe(n),offsetY:Qe(o),rotation:Qe(-v),colorSubstitutions:null}),p}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:s}=e,n=[],a={type:"CIMPolygonSymbol",symbolLayers:n};if(s){const o=xB(s);o&&n.push(o)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const o={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:ua(i),capStyle:"Butt",joinStyle:"Miter",width:.75}]};let u=0;const h=Ut(dFe(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":u=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":u=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":u=45;break;case"cross":case"esriSFSCross":u=0}n.push({type:"CIMHatchFill",lineSymbol:o,offsetX:0,offsetY:0,rotation:u,separation:h}),r==="cross"||r==="esriSFSCross"?n.push({type:"CIMHatchFill",lineSymbol:J(o),offsetX:0,offsetY:0,rotation:90,separation:h}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||n.push({type:"CIMHatchFill",lineSymbol:J(o),offsetX:0,offsetY:0,rotation:45,separation:h})}else!r||r!=="solid"&&r!=="esriSFSSolid"||n.push({type:"CIMSolidFill",enable:!0,color:ua(i)});return a}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:s,marker:n,miterLimit:a,style:o,width:u}=e;let h=null;o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(h=[{type:"CIMGeometricEffectDashes",dashTemplate:L5(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const p=[];if(n){let y;switch(n.placement){case"begin-end":y="Both";break;case"begin":y="JustBegin";break;case"end":y="JustEnd";break;default:y="None"}const v=Ps.fromSimpleMarker(n,u,r).symbolLayers[0];v.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:y,offsetAlongLine:0},p.push(v)}return p.push({type:"CIMSolidStroke",color:o!=="none"&&o!=="esriSLSNull"?ua(r):[0,0,0,0],capStyle:bne(i),joinStyle:wne(s),miterLimit:a,width:u,effects:h}),{type:"CIMLineSymbol",symbolLayers:p}}static fromPictureMarker(e){const{angle:i,height:r,width:s,xoffset:n,yoffset:a}=e;let o=e.url;return e.type==="esriPMS"&&e.imageData&&(o=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:s,offsetX:Qe(n),offsetY:Qe(a),rotation:Qe(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:s,haloColor:n,haloSize:a,horizontalAlignment:o,kerning:u,lineWidth:h,text:p,verticalAlignment:y,xoffset:v,yoffset:b,backgroundColor:w,borderLineColor:S,borderLineSize:M}=e;let T,I,L,O,R,z;s&&(T=s.family,I=s.style,L=s.weight,O=s.size,R=s.decoration);let j=!1;return p&&(j=FNe(p)[1]),(w||M)&&(z={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:ua(w)},{type:"CIMSolidStroke",color:ua(S),width:M}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:2,depth3D:1,extrapolateBaselines:!0,fontEffects:0,fontEncoding:1,fontFamilyName:T||"Arial",fontStyleName:lFe(I,L),fontType:0,haloSize:a,height:O,hinting:1,horizontalAlignment:aFe(o??"center"),kerning:u,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:h,offsetX:Qe(v),offsetY:Qe(b),strikethrough:R==="line-through",underline:R==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:ua(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:ua(n)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:j?1:0,verticalAlignment:oFe(y??"baseline"),verticalGlyphOrientation:0,wordSpacing:100,billboardMode3D:2,callout:z}}static createPictureMarkerRasterizationParam(e){const{angle:i,height:r,width:s,xoffset:n,yoffset:a}=e,o=e.url??e.source?.url??e.source?.imageData;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:o,size:r,width:s,offsetX:Qe(n),offsetY:Qe(a),rotation:Qe(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:s,yoffset:n,url:a}=e;return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:"Picture",tintColor:null,url:a,width:i,height:r,offsetX:Qe(s),offsetY:Qe(n),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:s}=e,n=e.color??r;if(s==="path"||s==="esriSMSPath"){const y=[];if("outline"in e&&e.outline){const w=e.outline;y.push({type:"CIMSolidStroke",enable:!0,width:w.width,color:ua(w.color),path:e.path})}y.push({type:"CIMSolidFill",enable:!0,color:ua(n),path:e.path});const[v,b]=s1("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-Qe(e.angle),size:Qe(e.size||6),offsetX:Qe(e.xoffset),offsetY:Qe(e.yoffset),scaleSymbolsProportionally:!1,frame:v,markerGraphics:[{type:"CIMMarkerGraphic",geometry:b,symbol:{type:"CIMPolygonSymbol",symbolLayers:y}}]}]}}const a=[];let o,u,h=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const y=e.outline,v=y.style!=="solid"&&y.style!=="esriSLSSolid";[o,u]=v?s1(s,e.size):s1(s);const b=y.width??dE.width;if(v){const M=b/e.size,T=(o.xmax-o.xmin)*M/2,I=(o.ymax-o.ymin)*M/2;o.xmin-=T,o.xmax+=T,o.ymin-=I,o.ymax+=I,h&&(h+=b)}const w=e.style!=="cross"&&e.style!=="x"||e?.outline.style==="dot"||e?.outline.style==="short-dot"?"HalfGap":"FullPattern",S=v?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:L5(y.style,null).map(M=>y.width&&y.width>0?M*y.width:M),lineDashEnding:w,controlPointEnding:"FullPattern"}]:void 0;a.push({type:"CIMSolidStroke",capStyle:v?"Round":"Butt",enable:!0,width:b,color:ua(y.color),effects:S})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[o,u]=s1(s):([o,u]=s1(s),a.push({type:"CIMSolidStroke",enable:!0,width:i,color:ua(n)}));a.push({type:"CIMSolidFill",enable:!0,color:ua(n)});const p={type:"CIMPolygonSymbol",symbolLayers:a};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Qe(-e.angle),size:Qe(h||6*i),offsetX:Qe(e.xoffset),offsetY:Qe(e.yoffset),scaleSymbolsProportionally:!1,frame:o,markerGraphics:[{type:"CIMMarkerGraphic",geometry:u,symbol:p}]}]}}static fromCIMHatchFill(e,i){const r=i*(e.separation??or.CIMHatchFill.separation),s=r/2,n=J(e.lineSymbol);n.symbolLayers?.forEach(u=>{switch(u.type){case"CIMSolidStroke":u.width!=null&&(u.width*=i),u.effects?.forEach(h=>{if(h.type==="CIMGeometricEffectDashes"){const p=h.dashTemplate;h.dashTemplate=p?.map(y=>y*i)}});break;case"CIMVectorMarker":{u.size!=null&&(u.size*=i);const h=u.markerPlacement;h!=null&&"placementTemplate"in h&&(h.placementTemplate=h.placementTemplate.map(p=>p*i));break}}});let a=this._getLineSymbolPeriod(n)||wB;for(;a<wB;)a*=2;const o=a/2;return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-s,ymax:s},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-o,0],[o,0]]]},symbol:n}],size:r}}static fetchResources(e,i,r,s=null){if(!e||!i)return r;switch(e.type){case"CIMMeshSymbol":case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":for(const n of e.effects||[])r.push(aB(n))}return _ne(e,n=>{for(const a of n.effects||[])r.push(aB(a));"url"in n&&n.url&&r.push(i.fetchResource(n.url,{signal:s}))}),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const s of e.symbolLayers)if(s.type==="CIMVectorMarker"&&s.markerGraphics)for(const n of s.markerGraphics)n?.symbol&&Ps.fetchFonts(n.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:s,fontStyleName:n}=e;if(!s||s.toLowerCase()==="calcitewebcoreicons")return;const{style:a,weight:o}=lre(n),u=ure(e),h=new ha({family:s,style:a,weight:o,decoration:u});r.push(i.loadFont(h).catch(()=>{ZT().error(`Unsupported font ${s} in CIM symbol`)}))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const s=this._getEffectsRepeat(r.effects);if(s)return s;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=this._getPlacementRepeat(r.markerPlacement);if(n)return n}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let s=0;for(const n of r)s+=n;return 1&r.length&&(s*=2),s}break}case"CIMGeometricEffectWave":return i.period;default:ZT().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const s of i)r+=+s;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const s=Math.abs(i.stepX),n=Math.abs(i.stepY),a=(i.randomness??100)/100;let o,u,h,p;if(i.gridType==="Random"){const y=Ut(pEe),v=Math.max(Math.floor(y/s),1),b=Math.max(Math.floor(y/n),1);o=v*s/2,u=b*n/2,h=2*u;const w=new j5(i.seed),S=a*s/1.5,M=a*n/1.5;p=[];for(let T=0;T<v;T++)for(let I=0;I<b;I++){const L=T*s-o+S*(.5-w.getFloat()),O=I*n-u+M*(.5-w.getFloat());p.push({x:L,y:O}),T===0&&p.push({x:L+2*o,y:O}),I===0&&p.push({x:L,y:O+2*u})}}else i.shiftOddRows===!0?(o=s/2,u=n,h=2*n,p=[{x:-o,y:0},{x:o,y:0},{x:0,y:u},{x:0,y:-u}]):(o=s/2,u=n/2,h=n,p=[{x:-s,y:0},{x:0,y:-n},{x:-s,y:-n},{x:0,y:0},{x:s,y:0},{x:0,y:n},{x:s,y:n},{x:-s,y:n},{x:s,y:-n}]);return{type:"CIMVectorMarker",frame:{xmin:-o,xmax:o,ymin:-u,ymax:u},markerGraphics:p.map(y=>({type:"CIMMarkerGraphic",geometry:y,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}})),size:h}}}function _ne(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const s=r.markerGraphics;if(!s)continue;for(const n of s)if(n){const a=n.symbol;a&&_ne(a,e)}}break}}}const bne=t=>{if(!t)return"Butt";switch(t){case"butt":return"Butt";case"square":return"Square";case"round":return"Round"}},wne=t=>{if(!t)return"Miter";switch(t){case"miter":return"Miter";case"round":return"Round";case"bevel":return"Bevel"}},aFe=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},oFe=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},ua=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]},lFe=(t,e)=>{const i=uFe(e),r=cFe(t);return i&&r?`${i}-${r}`:`${i}${r}`},uFe=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},cFe=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},L5=(t,e)=>{const i=X("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return ZT().error("Unexpected: style does not require rasterization"),[0,0];default:return ZT().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function hFe(t){return t.symbolLayers!==void 0}const s1=(t,e=100)=>{const i=e/2;let r,s;const n=t;if(n==="circle"||n==="esriSMSCircle"){let o=Math.acos(1-.25/i),u=Math.ceil(vne/o/4);u===0&&(u=1),o=iFe/u,u*=4;const h=[];h.push([i,0]);for(let p=1;p<u;p++)h.push([i*Math.cos(p*o),-i*Math.sin(p*o)]);h.push([i,0]),r={rings:[h]},s={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(n==="cross"||n==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="diamond"||n==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="square"||n==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="x"||n==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="triangle"||n==="esriSMSTriangle"){const a=e*.5773502691896257,o=-a,u=2/3*e,h=u-e;r={rings:[[[o,h],[0,u],[a,h],[o,h]]]},s={xmin:o,ymin:h,xmax:a,ymax:u}}else n==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i});return[s,r]},dFe=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function xB(t){if(!t)return null;let e=null;const{cap:i,color:r,join:s,miterLimit:n,style:a,width:o}=t;return a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:L5(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:a!=="esriSLSNull"&&a!=="none"?ua(r):[0,0,0,0],capStyle:bne(i),joinStyle:wne(s),miterLimit:n,width:o,effects:e}}let pFe=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let s=this._inFlightResourceMap.get(e);return s?s.then(n=>({width:n.width,height:n.height})):(s=WEe(e,i),this._inFlightResourceMap.set(e,s),s.then(n=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,n),{width:n.width,height:n.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return XNe(e)}};function zKe(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function fFe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function Am(t){if(fFe(t))return t;const{originPosition:e,scale:i,translate:r}=t,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,e==="lowerLeft"?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function Hc({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Wc({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function bw({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function ww({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function Sne(t,e){return t&&e?vFe:t&&!e?yFe:!t&&e?gFe:mFe}const mFe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Hc(t,r[0]),n=Wc(t,r[1]);i.push([s,n]);for(let a=1;a<e.length;a++){const[o,u]=e[a],h=Hc(t,o),p=Wc(t,u);h===s&&p===n||i.push([h-s,p-n]),s=h,n=p}return i},yFe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Hc(t,r[0]),n=Wc(t,r[1]),a=bw(t,r[2]);i.push([s,n,a]);for(let o=1;o<e.length;o++){const[u,h,p]=e[o],y=Hc(t,u),v=Wc(t,h),b=bw(t,p);y===s&&v===n&&b===a||i.push([y-s,v-n,b]),s=y,n=v,a=b}return i},gFe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Hc(t,r[0]),n=Wc(t,r[1]),a=ww(t,r[2]);i.push([s,n,a]);for(let o=1;o<e.length;o++){const[u,h,p]=e[o],y=Hc(t,u),v=Wc(t,h),b=ww(t,p);y===s&&v===n&&b===a||i.push([y-s,v-n,b]),s=y,n=v,a=b}return i},vFe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Hc(t,r[0]),n=Wc(t,r[1]),a=bw(t,r[2]),o=ww(t,r[3]);i.push([s,n,a,o]);for(let u=1;u<e.length;u++){const[h,p,y,v]=e[u],b=Hc(t,h),w=Wc(t,p),S=bw(t,y),M=ww(t,v);b===s&&w===n&&S===a&&M===o||i.push([b-s,w-n,S,M]),s=b,n=w,a=S,o=M}return i};function _Fe(t,e,i,r){const s=[],n=Sne(i,r);for(let a=0;a<e.length;a++){const o=n(t,e[a]);o&&o.length>=3&&s.push(o)}return s.length?s:null}function bFe(t,e,i,r){const s=[],n=Sne(i,r);for(let a=0;a<e.length;a++){const o=n(t,e[a]);o&&o.length>=2&&s.push(o)}return s.length?s:null}function o2({scale:t,translate:e},i){return i*t[0]+e[0]}function l2({scale:t,translate:e},i){return i*t[1]+e[1]}function Sw({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function xw({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function HN(t,e){return t&&e?$Fe:t&&!e?SFe:!t&&e?xFe:wFe}const wFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=o2(t,r[0]),n=l2(t,r[1]);i[0]=[s,n];const{scale:a,originPosition:o}=t,u=a[0],h=o==="lowerLeft"?a[1]:-a[1];for(let p=1;p<e.length;p++){const[y,v]=e[p];s+=u*y,n+=h*v,i[p]=[s,n]}return i},SFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=o2(t,r[0]),n=l2(t,r[1]);i[0]=[s,n,Sw(t,r[2])];const{scale:a,originPosition:o}=t,u=a[0],h=o==="lowerLeft"?a[1]:-a[1];for(let p=1;p<e.length;p++){const[y,v,b]=e[p];s+=u*y,n+=h*v,i[p]=[s,n,Sw(t,b)]}return i},xFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=o2(t,r[0]),n=l2(t,r[1]);i[0]=[s,n,xw(t,r[2])];const{scale:a,originPosition:o}=t,u=a[0],h=o==="lowerLeft"?a[1]:-a[1];for(let p=1;p<e.length;p++){const[y,v,b]=e[p];s+=u*y,n+=h*v,i[p]=[s,n,xw(t,b)]}return i},$Fe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=o2(t,r[0]),n=l2(t,r[1]);i[0]=[s,n,Sw(t,r[2]),xw(t,r[3])];const{scale:a,originPosition:o}=t,u=a[0],h=o==="lowerLeft"?a[1]:-a[1];for(let p=1;p<e.length;p++){const[y,v,b,w]=e[p];s+=u*y,n+=h*v,i[p]=[s,n,Sw(t,b),xw(t,w)]}return i};function xne(t,e,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=e(t,i[s]);return r}function FKe(t,e,i){const r=Am(t);return e.x=Hc(r,i.x),e.y=Wc(r,i.y),i.z!=null&&(e.z=bw(r,i.z)),i.m!=null&&(e.m=ww(r,i.m)),e}function VKe(t,e,i){const r=_Fe(Am(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function jKe(t,e,i){const r=bFe(Am(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function MFe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Am(t);e.points=HN(r,s)(n,i.points),e.hasZ=r,e.hasM=s}return e}function TFe(t,e,i,r=i?.z!=null,s=i?.m!=null){if(i==null)return e;const n=Am(t);return e.x=o2(n,i.x),e.y=l2(n,i.y),r&&(e.z=Sw(n,i.z)),s&&(e.m=xw(n,i.m)),e}function EFe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Am(t);e.rings=xne(n,HN(r,s),i.rings),e.hasZ=r,e.hasM=s}return e}function CFe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Am(t);e.paths=xne(n,HN(r,s),i.paths),e.hasZ=r,e.hasM=s}return e}function $ne(t,e,i,r,s,n){if(t==null)return null;const a=t.references("geometry")&&n?IFe(e,r,n):e,o=t.repurposeFeature(a,s);try{return t.evaluate(o,i)}catch(u){return le.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",u),null}}const UA=new Map;function IFe(t,e,i){const{transform:r,hasZ:s,hasM:n}=i;UA.has(e)||UA.set(e,LFe(e));const a=UA.get(e)(t.geometry,r,s,n);return{...t,geometry:a}}function LFe(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,s,n)=>TFe(r,e,i,s,n);case"esriGeometryPolygon":return(i,r,s,n)=>EFe(r,e,i,s,n);case"esriGeometryPolyline":return(i,r,s,n)=>CFe(r,e,i,s,n);case"esriGeometryMultipoint":return(i,r,s,n)=>MFe(r,e,i,s,n);default:return le.getLogger("esri.views.2d.support.arcadeOnDemand").error(new G("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const UKe=Object.freeze(Object.defineProperty({__proto__:null,default:$ne},Symbol.toStringTag,{value:"Module"})),AFe=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]};var ii;let WN=(ii=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let s=!1;for(const n of r)if(n.primitiveName===e.primitiveName){s=!0;break}if(!s)for(const n of i)n.primitiveName===e.primitiveName&&r.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)ii.findApplicableOverrides(s,i,r);if(e.symbolLayers)for(const s of e.symbolLayers)ii.findApplicableOverrides(s,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const s of e.effects)ii.findApplicableOverrides(s,i,r);if(e.markerPlacement&&ii.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const s of e.markerGraphics)ii.findApplicableOverrides(s,i,r),ii.findApplicableOverrides(s.symbol,i,r)}else e.type==="CIMCharacterMarker"?ii.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?ii.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&ii.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&cre(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=iq(e),s=e.primitiveName,n=[];for(const a of i)a.primitiveName===s&&n.push(iq(a));return{type:"cim-effect-param",effect:r,overrides:eke(n)}}static async resolveSymbolOverrides(e,i,r,s,n,a,o){if(!e?.symbol)return null;let{symbol:u,primitiveOverrides:h}=e;const p=!!h;if(!p&&!s)return u;u=J(u),h=J(h);let y=!0;if(i||(i={attributes:{}},y=!1),p){if(y||(h=h.filter(v=>!v.valueExpressionInfo?.expression.includes("$feature"))),o||(h=h.filter(v=>!v.valueExpressionInfo?.expression.includes("$view"))),h.length>0){const v=WOe(i.attributes),b={spatialReference:r,fields:v,geometryType:n};await ii.createRenderExpressions(h,b),ii.evaluateOverrides(h,i,n??"esriGeometryPoint",a,o,new mw(v))}ii.applyOverrides(u,h)}return s&&ii.applyDictionaryTextOverrides(u,i,s,null),u}static async createRenderExpressions(e,i){const r=[];for(const s of e){const n=s.valueExpressionInfo;if(!n||ii._expressionToRenderExpression.has(n.expression))continue;const a=POe(n.expression,i.spatialReference);r.push(a),a.then(o=>ii._expressionToRenderExpression.set(n.expression,o))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,s,n,a){const o={$view:{scale:n?.scale}};for(const u of e){u.value&&typeof u.value=="object"&&Zre(u.value)&&(u.propertyName==="Color"||u.propertyName==="StrokeColor")&&(u.value=AFe(u.value));const h=u.valueExpressionInfo;if(!h)continue;const p=ii._expressionToRenderExpression.get(h.expression);p&&(u.value=$ne(p,i,o,r,a,s))}}static applyDictionaryTextOverrides(e,i,r,s,n="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const a=e.symbolLayers;if(!a)return;for(const o of a)o&&o.type==="CIMVectorMarker"&&ii.applyDictionaryTextOverrides(o,i,r,s,e.type==="CIMTextSymbol"?e.textCase:n)}break;case"CIMVectorMarker":{const a=e.markerGraphics;if(!a)return;for(const o of a)o&&ii.applyDictionaryTextOverrides(o,i,r,s)}break;case"CIMMarkerGraphic":{const a=e.textString;if(a&&a.includes("[")){const o=FOe(a,r);e.textString=VOe(i,o,s,n)}}}}static applyOverrides(e,i,r,s){if(e.primitiveName){for(const n of i)if(n.primitiveName===e.primitiveName){const a=s2(n.propertyName);if(s&&s.push({cim:e,nocapPropertyName:a,value:e[a]}),r){let o=!1;for(const u of r)u.primitiveName===e.primitiveName&&(o=!0);o||r.push(n)}n.value!=null&&(e[a]=n.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)ii.applyOverrides(n,i,r,s);if(e.symbolLayers)for(const n of e.symbolLayers)ii.applyOverrides(n,i,r,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)ii.applyOverrides(n,i,r,s);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const n of e.markerGraphics)ii.applyOverrides(n,i,r,s),ii.applyOverrides(n.symbol,i,r,s)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(r=>Number(r));if(e==="Color"){const r=new we(i).toRgba();return r[3]*=255,r}return i}},ii._expressionToRenderExpression=new Map,ii);const PFe=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:WN},Symbol.toStringTag,{value:"Module"})),OFe=96/72;let Mne=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new pFe}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,s,n,a,o,u,h,p){if(!e)return null;const{data:y}=e;if(!y||y.type!=="CIMSymbolReference"||!y.symbol)return null;const{symbol:v}=y;a||(a=OT(v));const b=await WN.resolveSymbolOverrides(y,i,this._spatialReference,n,a,o,u),w=this._cimResourceManager,S=[];Ps.fetchResources(b,w,S),Ps.fetchFonts(b,w,S),S.length>0&&await Promise.all(S);const{width:M,height:T}=r;let I=$B(a,M,T,s,p);const L=Ps.getEnvelope(b,I,w);if(!L)return null;L.x===1/0&&(L.x=M+2),L.y===1/0&&(L.y=-T/2),L.width===-1/0&&(L.width=M),L.height===-1/0&&(L.height=T);let O=1,R=0,z=0;switch(v.type){case"CIMPointSymbol":case"CIMTextSymbol":{let U=1;L.width>M&&(U=M/L.width);let B=1;L.height>T&&(B=T/L.height),s==="preview"&&(L.width<M&&(U=M/L.width),L.height<T&&(B=T/L.height)),O=Math.min(U,B),R=L.x+L.width/2,z=L.y+L.height/2}break;case"CIMLineSymbol":if(p){z=L.y+L.height/2,R=L.x+L.width/2;const U=L.width-M,B=L.height-T;I={paths:WT(I.paths,{xmin:-1*L.width/2+U,xmax:L.width/2-U,ymin:-1*L.height/2+B,ymax:L.height/2-B,width:L.width-2*U,height:L.height-2*B})}}else{(h||L.height>T)&&(O=T/L.height),z=L.y+L.height/2;const U=L.x*O+M/2,B=(L.x+L.width)*O+M/2,Q=fs(I)?I.paths:sr(I)?I.rings:null;if(Q===null)throw new Error("Bad geometry, can't rasterise symbol!");Q[0][0][0]-=U/O,Q[0][2][0]-=(B-M)/O}break;case"CIMPolygonSymbol":if(p){z=L.y+L.height/2,R=L.x+L.width/2;const U=L.width-M,B=L.height-T;I={paths:WT(I.rings,{xmin:-1*L.width/2+U,xmax:L.width/2-U,ymin:-1*L.height/2+B,ymax:L.height/2-B,width:L.width-2*U,height:L.height-2*B})}}else{R=L.x+L.width/2,z=L.y+L.height/2;const U=L.x*O+M/2,B=(L.x+L.width)*O+M/2,Q=L.y*O+T/2,oe=(L.y+L.height)*O+T/2,{rings:ue}=I;U<0&&(ue[0][0][0]-=U,ue[0][3][0]-=U,ue[0][4][0]-=U),Q<0&&(ue[0][0][1]+=Q,ue[0][1][1]+=Q,ue[0][4][1]+=Q),B>M&&(ue[0][1][0]-=B-M,ue[0][2][0]-=B-M),oe>T&&(ue[0][2][1]+=oe-T,ue[0][3][1]+=oe-T)}}const j={type:"cim",data:{type:"CIMSymbolReference",symbol:b}};return this.rasterize(j,M,T,R,z,O,a,1,I)}rasterize(e,i,r,s,n,a,o,u=0,h=null,p=window.devicePixelRatio||1){const{data:y}=e;if(!y||y.type!=="CIMSymbolReference"||!y.symbol)return null;const{symbol:v}=y,b=this._canvas,w=p*OFe;b.width=i*w,b.height=r*w,o||(o=OT(v)),h||(h=$B(o,i,r,"legend")),b.width+=2*u,b.height+=2*u;const S=b.getContext("2d",{willReadFrequently:!0}),M=Xr.createIdentity();return M.translate(-s,-n),M.scale(a*w,-a*w),M.translate(i*w/2+u,r*w/2+u),S.clearRect(0,0,b.width,b.height),new fne(S,this._cimResourceManager,M,!0).drawSymbol(v,h),S.getImageData(0,0,b.width,b.height)}};function kFe(t,e,i,r){return e==="esriGeometryPolygon"?{rings:fB(WT(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:fB(WT(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function $B(t,e,i,r,s){const a=-e/2+1,o=e/2-1,u=i/2-1,h=-i/2+1;if(s&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const p=kFe(s,t,e,i);if(p)return p}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[o,0]]]};default:return r==="legend"?{rings:[[[a,u],[o,0],[o,h],[a,h],[a,u]]]}:{rings:[[[a,u],[o,u],[o,h],[a,h],[a,u]]]}}}const qKe=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:Mne},Symbol.toStringTag,{value:"Module"})),wM=new Mne(null),Bx=Ut(22),MB=Ut(120),GA=Ut(50),RFe=1;async function DFe(t,e,i){const r=e?.size;let s=r!=null&&typeof r=="object"&&"width"in r?r.width:r,n=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!s||!n)if(i==="esriGeometryPolygon")s=n=e.maxSize?Math.min(e.maxSize,Bx):Bx;else{const a=await ZN(t,e,i);a&&(s=a.width,n=a.height),i==="esriGeometryPolyline"&&(s=e.maxSize?Math.min(e.maxSize,GA):GA),s=s!=null&&isFinite(s)?Math.min(s,MB):Bx,n=n!=null&&isFinite(n)?Math.max(Math.min(n,MB),RFe):Bx}return e.style==="legend"&&i==="esriGeometryPolyline"&&(s=GA),{width:s,height:n}}async function ZN(t,e={},i){const r=e.cimOptions||e;i??=r.geometryType||OT(t?.data?.symbol);const{feature:s,fieldMap:n,viewParams:a}=r,o=await WN.resolveSymbolOverrides(t.data,s,null,n,i,null,a);if(!o)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:o},t.data.primitiveOverrides=void 0;const u=[];return Ps.fetchResources(o,wM.resourceManager,u),Ps.fetchFonts(o,wM.resourceManager,u),u.length>0&&await Promise.all(u),Ps.getEnvelope(o,null,wM.resourceManager)}async function NFe(t,e={}){const{node:i,opacity:r,symbolConfig:s}=e,n=s!=null&&typeof s=="object"&&"isSquareFill"in s&&s.isSquareFill,a=e.cimOptions||e,o=a.geometryType||OT(t?.data?.symbol),u=await DFe(t,e,o),{feature:h,fieldMap:p}=a,y=e?.geometry||n||o!=="esriGeometryPolygon"?"preview":"legend";let v=u;const b=u;if(e?.geometry&&(o==="esriGeometryPolygon"||o==="esriGeometryPolyline")&&(lt(u.width)<200||lt(u.height)<200)){const j=u.width>u.height?Ut(200)*u.height/u.width:Ut(200);v={width:u.width>u.height?Ut(200):Ut(200)*u.width/u.height,height:j}}const w=await wM.rasterizeCIMSymbolAsync(t,h,v,y,p,o,null,a.viewParams,a.allowScalingUp,e?.geometry?.toJSON());if(!w)return null;const{width:S,height:M}=w,T=document.createElement("canvas");T.width=S,T.height=M,T.getContext("2d").putImageData(w,0,0);const I=lt(b.width),L=lt(b.height),O=new Image(I,L);O.src=T.toDataURL(),O.ariaLabel=e.ariaLabel??null,O.alt=e.ariaLabel??"",r!=null&&(O.style.opacity=`${r}`);let R=O;if(e.cssEffectFilter){const z={shape:{type:"image",x:0,y:0,width:I,height:L,src:O.src},fill:null,stroke:null,offset:[0,0]};R=Ev([[z]],[I,L],e)}return i&&R&&i.appendChild(R),R}const zFe=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:ZN,previewCIMSymbol:NFe},Symbol.toStringTag,{value:"Module"})),A5=30,P5=12,O5=24,Tne=[255,255,255],YT=[200,200,200],Ff=[128,128,128],FFe=20,VFe=5;function jFe(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function UFe(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function GFe(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function qFe(t){return t.declaredClass==="esri.symbols.TextSymbol"}function BFe(t,e){const i=t.length-1;return t.map((r,s)=>Ase(r,s,i,e))}async function HFe(t,e,i,r,s,n,a){const o=e.legendOptions,u=o?.customValues,h=a||await YFe(t,i),p=e.stops,y=!!h,v=!!u,b=e.minSize!=null&&e.maxSize!=null,w=p&&p.length>1,S=!!e.target;if(!y||!v&&!(b||w&&!S))return;const M=gE(h);let T=!1,I=null,L=null;I=M&&!w?jT([e.minDataValue,e.maxDataValue]):u??await XFe(e,h,r,s?.type);const O=t?.authoringInfo,R=O?.type==="univariate-color-size",z=R&&O?.univariateTheme==="above-and-below",j=!!ou(t,"reference-size"),U=!!ou(t,"spike");if(!I&&w&&(I=p.map(Se=>Se.value),T=p.some(Se=>!!Se.label),t.type==="flow"&&(I=jT(I)),T&&(L=p.map(Se=>Se.label))),M&&I!=null&&I?.length>2&&!z&&(I=[I[0],I[I.length-1]]),!I)return null;R&&I?.length!==5&&(I=Ine({minSize:I[0],maxSize:I[I.length-1]}));const B=M?WFe(t,I):null,Q=L4e(h),oe=T?null:BFe(I,n);return(await Promise.all(I.map(async(Se,me)=>{let ke=M?B[me]:await _g(e,h,Se,r,s?.type),te=ke;j&&(ke*=O5/e.maxSize||1,te=O5);const be=e8e(h,ke,t,me);return U&&be.type==="cim"&&(te=await ZN(be)),{value:Se,symbol:be,label:T?L[me]:oe[me],size:te,outlineSize:Q}}))).reverse()}function WFe(t,e){const i=t?.authoringInfo,r=i?.type==="univariate-color-size";let s=[P5,A5];if(r){const n=e[0],a=e[e.length-1],o=P5,u=A5;s=e.map(h=>o+(h-n)/(a-n)*(u-o))}return r&&i?.univariateTheme==="below"&&s.reverse(),s}function ZFe(t,e){const i=t.classBreakInfos,r=i.length,s=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return t.visualVariables?.some(a=>a.type==="color")&&(s.type.includes("3d")?Ene(s):Cne(s)),s}async function YFe(t,e){if(t.type==="flow")return Pse(t,e);if(t.type==="pie-chart")return new Pi({color:null,outline:t.outline?.width?t.outline:new Ui});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const s=t.classBreakInfos;i=s&&s[0]&&s[0].symbol,r=s.length>1}else if(t.type==="unique-value"){const s=t.uniqueValueInfos;i=s?.[0]?.symbol,r=s!=null&&s.length>1}if(!i||JFe(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))Ene(i);else if(ou(t,"reference-size")&&i.type==="cim")CN(i,{color:e??(t.type!=="class-breaks"?new we(YT):null)});else if(ou(t,"spike")&&i.type==="cim"){const s=new we(YT),n=new we(Ff),a=i.data.symbol?.type==="CIMPointSymbol"?i.data.symbol:null,o=!!a?.symbolLayers?.find(({type:p})=>p==="CIMSolidStroke")?.colorLocked;let u,h=e??void 0;if(h){const p=ise(h),y=mte();(!y&&p>225||y&&p<25)&&(h=s,u=o?n:s)}else h=s,u=o?n:s;Dse(i,{color:h,strokeColor:u})}else Cne(i);return i}function JFe(t){return el(t)?t.symbolLayers?.some(e=>e?.type==="fill")??!1:t?.type.includes("fill")??!1}function Ene(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:Ff}}):t.symbolLayers.forEach(e=>{e.type!=="icon"||e.resource?.href?e.material={color:YT}:(e.material={color:Tne},e.outline={color:Ff,size:1.5})})}function Cne(t){const e=mte();t.type==="cim"?Wre(t,new we(YT)):t.type.includes("line")?t.color=Ff:(t.color=e?Ff:Tne,t.type==="simple-marker"&&(t.outline?t.outline?.color?.toHex()==="#ffffff"&&(t.outline.color=Ff):t.outline={color:Ff,width:1.5}))}async function XFe(t,e,i,r){const s=(await K(async()=>{const{getSizeRangeAtScale:o}=await Promise.resolve().then(()=>Em);return{getSizeRangeAtScale:o}},void 0,import.meta.url)).getSizeRangeAtScale(t,i,r),n=s&&Ine(s);if(!s||!n)return;let a=n.map(o=>QFe(o,t,s));a=jT(a);for(let o=1;o<a.length-1;o++){const u=await KFe(t,e,a[o],a[o-1],i,r);u&&(a[o]=u[0],n[o]=u[1])}return a}function Ine(t){const e=t.minSize,i=t.maxSize,r=VFe,s=(i-e)/(r-1),n=[];for(let a=0;a<r;a++)n.push(e+s*a);return n}function QFe(t,e,i){const r=i.minSize,s=i.maxSize,n=e.minDataValue,a=e.maxDataValue;let o;return t<=r?o=n:t>=s?o=a:o=(t-r)/(s-r)*(a-n)+n,o}async function KFe(t,e,i,r,s,n){const a=await _g(t,e,i,s,n),o=await _g(t,e,r,s,n),u=VT(i),h=u.fractional,p=FFe;let y=u.integer,v=null,b=null;i>0&&i<1&&(v=10**h,y=VT(i*=v).integer);for(let w=y-1;w>=0;w--){const S=10**w;let M=Math.floor(i/S)*S,T=Math.ceil(i/S)*S;v!=null&&(M/=v,T/=v);let I=(M+T)/2;[,I]=jT([M,I,T],{indexes:[1]});const L=await _g(t,e,M,s,n),O=await _g(t,e,T,s,n),R=await _g(t,e,I,s,n),z=fM(a,L,o,null),j=fM(a,O,o,null),U=fM(a,R,o,null);let B=z.previous<=p,Q=j.previous<=p;if(B&&Q&&(z.previous<=j.previous?(B=!0,Q=!1):(Q=!0,B=!1)),B?b=[M,L]:Q?b=[T,O]:U.previous<=p&&(b=[I,R]),b)break}return b}async function _g(t,e,i,r,s){const{getSize:n}=await K(()=>Promise.resolve().then(()=>Em),void 0,import.meta.url);return n(t,i,{scale:r,view:s,shape:e.type==="simple-marker"?e.style:null})}function e8e(t,e,i,r){i?.authoringInfo?.type==="univariate-color-size"&&i?.authoringInfo?.univariateTheme==="above-and-below"&&i.type==="class-breaks"&&(t=ZFe(i,r));const s=t.clone();if(el(s))gE(s)||s.symbolLayers.forEach(n=>{n.type!=="fill"&&(n.size=e)});else if(jFe(s))s.size=e;else if(UFe(s)){const n=s.width,a=s.height;s.height=e,s.width=e*(n/a)}else GFe(s)?s.width=e:qFe(s)?s.font&&(s.font.size=e):s.type==="cim"&&ou(i,"reference-size")?CN(s,{innerDotSize:e,outerRingSize:O5}):s.type==="cim"&&ou(i,"spike")&&Dse(s,{defaultHeight:e,primitiveOverrides:null});return s}function t8e(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,s=1e6,n=Math.abs(t)>=s?"compact":"standard";return Uc(t,{notation:n,minimumSignificantDigits:2,maximumSignificantDigits:r})}const TB=16,i8e="https://utility.arcgis.com/sharing/tools/legend",r8e="esri.layers.ImageryLayer",s8e="esri.layers.ImageryTileLayer",n8e="esri.layers.WCSLayer",Hx=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,a8e=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Wx=new Pi({size:6,outline:{color:[128,128,128,.5],width:.5}}),o8e=new ln({style:"solid"});function k5(t){return t.type==="flow"}function Lne(t){return t.type==="vector-field"}function Ane(t){return t.type==="raster-colormap"}function Pne(t){return t.type==="raster-stretch"}function One(t){return t.type==="raster-shaded-relief"}function bg(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function df(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function pf(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function kne(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function l8e(t){return YN(t)||JN(t)||XN(t)||u8e(t)}function u8e(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function YN(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function JN(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function XN(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Rne(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function Dne(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function c8e(t,e){return bg(t)||df(t)||pf(t)||kne(t)||Rne(t)||Dne(t)?e.type==="2d"||Gre(t):Pne(t)||Ane(t)||One(t)||YN(t)||JN(t)||XN(t)||Lne(t)||k5(t)}function h8e(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function qA(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function d8e(t){return t.declaredClass==="esri.layers.VoxelLayer"}function p8e(t){return t.declaredClass==="esri.layers.WMSLayer"}function f8e(t){return t.declaredClass==="esri.layers.WMTSLayer"}function BA(t){return t.declaredClass==="esri.layers.MapImageLayer"}function EB(t){return t.declaredClass==="esri.layers.TileLayer"}function Vy(t){return t.declaredClass===r8e}function Zx(t){return t.declaredClass===s8e}function m8e(t){return t.declaredClass===n8e}function y8e(t){return t.type==="stretch-ramp"}function g8e(t){return("authoringInfo"in t?t?.authoringInfo:null)?.type==="univariate-color-size"}function v8e(t){const e="authoringInfo"in t?t?.authoringInfo:null;return e?.type==="univariate-color-size"&&e?.univariateTheme==="above-and-below"}function CB(t){return"sublayers"in t}function IB(t){return t&&"symbol"in t}function _8e(t,e){const{field:i,field2:r,field3:s,fieldDelimiter:n,valueExpression:a}=t;if(!i)return null;const o=!i&&!a||!r&&!s?[e]:e?.toString().split(n||""),u=i?{[i]:o?.[0]}:null;return u&&(r&&(u[r]=o?.[1]),s&&(u[s]=o?.[2])),u}const b8e=new Pi({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let jy={};const HA=new WeakMap;let Ni=class extends Ce{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._loading=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._clusterSizeVariable=null,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilter=null,this._layerDisplayFilterClause=null,this.children=new $e,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([Vs(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(s=>{const n=`activeLayerInfo-ready-watcher-${s.layer.uid}`;this.addHandles(_e(()=>s.ready,t,Lt),n)}),r.forEach(s=>this.removeHandles(s.layer.uid)),t()})]),this.keepCacheOnDestroy||(jy={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(jy=null),this._layerDefinitionExpressionClause=null}get cssEffectFilter(){const{layer:t,scale:e}=this,i="effect"in t?t.effect:null;if(!i)return null;const r=new Po({effect:i});return r.endTransition(),r.scale=e,B4e(r)}get loading(){return this.children.length>0?this.children.some(t=>t.loading):this._loading}get opacity(){const t=this.layer.opacity,e=this.parent?.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&pf(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(this._loading=!0,!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");const e=Array.from(t,i=>{if(AY(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if(i.featureSet?.features.length){const r=i.layerDefinition,s=r?.drawingInfo,n=s&&Yke(s.renderer),a=a8e.read(r.geometryType);return n?this._getRendererLegendElements(n,{title:i.name,geometryType:a}):(le.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const s of r)if(s.status==="fulfilled")for(const n of s.value??[])i.push(n);this.legendElements=i}catch(i){le.getLogger(this).warn("error while building legend for layer!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForRenderer(t){try{this._loading=!0;const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[]}catch(e){le.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForFeatureReduction(t){try{this._loading=!0,await this._waitForLayerViewUpdate(this.layerView);const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[]}catch(e){le.getLogger(this).warn("error while building legend for layer!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForTools(){this._loading=!0;const t=this.layer;if(d8e(t))await this._constructLegendElementsForVoxelLayer();else if(f8e(t))this._constructLegendElementsForWMTSlayer();else if(p8e(t))await this._constructLegendElementsForWMSSublayers();else if(h8e(t))await this._constructLegendElementsForBuildingSceneLayer();else if(BA(t)||EB(t)||qA(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let e="default";if(Vy(t)&&(e=(t?.rasterFunction?.functionName||"default")+"_"+(t.bandIds?.length?t.bandIds.join(""):"###")),Zx(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${e}`).then(async i=>{this.legendElements=[];const r=i.map(async s=>{if(Vy(t)){const a=_e(()=>[t.rasterFunction,t.bandIds],()=>Aw(async()=>{jy.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(a,"imageryLayers-watcher")}const n=this._generateSymbolTableElementForLegendLayer(s);n?.infos.length&&(Vy(t)&&(n.title=t.title),this.legendElements.push(n))});await Promise.allSettled(r)}).catch(i=>{le.getLogger(this).warn("Request to server for legend has failed!",i)})}this._loading=!1,this.notifyChange("ready")}async _isLayerInCurrentView(t){return this._checkFeatureCountForExpression(t,this.view.extent)}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;return Hx.test(e)?!0:!!("visualVariables"in t?t.visualVariables:null)?.some(r=>this._isScaleDrivenSizeVariable(r))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(e=>this._isScaleDrivenSymbol(e.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!t.uniqueValueInfos?.some(e=>this._isScaleDrivenSymbol(e.symbol))}return!1}_isScaleDrivenSymbol(t){if(t?.type==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,s=e?.some(n=>(n.valueExpressionInfo?.expression||"").includes("$view.scale"))??!1;return i!=null||r!=null||s}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||Hx.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&BA(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(_e(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(_e(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if(e.uniqueValues?.length){const r=[];e.uniqueValues.forEach(s=>{s.enabled&&r.push({label:s.label||`${s.value}`,value:s.value,symbol:new ln({color:s.color,outline:null})})}),r.length&&i.push({type:"symbol-table",title:e.label,infos:r})}else if(e.transferFunction){const{colorStops:r,stretchRange:s}=e.transferFunction,n=r.toArray().reverse(),a=s.map((u,h)=>`${h===0?Ise:Lse} ${t8e(u)}`).reverse(),o=n.map(u=>({color:u.color,value:null,label:null}));o[0].label=a[0],o[o.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:o,preview:uf(n.map(u=>u.color))})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this._loading=!1,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this._loading=!0,this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(_e(()=>{const{layer:i}=this;return i&&"activeLayer"in i&&i.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const e=t.styleId?t.styles?.find(({id:i})=>i===t.styleId)?.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this._loading=!1,this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this._loading=!0,this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(_e(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this._loading=!1,this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){const i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const s=this.sublayerIds?.map(a=>i.findSublayerById(a))?.filter(Qr)??[],n=s.length?s:t.toArray();for(const a of n){const o=_e(()=>[a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(o,"wms-sublayers-watcher"),!this.respectLayerVisibility||a.visible&&a.legendEnabled){const u=await this._generateSymbolTableElementForWMSSublayer(a,e);u?.infos.length&&r.unshift(u)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=Jx(i,e));let s=null;const n=t.layer?.opacity;try{s=(await Ot(i,{responseType:"image"})).data,s&&(s.style.opacity=n)}catch{}return r.infos.push({src:i,preview:s,opacity:n}),r}_getLegendLayers(t,e){const i=jy&&jy[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const s=r.layers;return jy[t]=s,s})}_legendRequest(t){const e=this.layer;let i={f:"json",dynamicLayers:t};if(Vy(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(s.functionDefinition?.toJSON()||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:n,viewId:a,customParameters:o}=e;i={raster:n,viewId:a,...i,...o}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),n=s===-1?r:r.slice(0,s)+r.slice(s+5);r=i8e+"?soapUrl="+encodeURI(n)+"&returnbytes=true"}return Ot(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(_e(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity)}catch(e){le.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const s of r){const n=_e(()=>["renderer"in s&&s.renderer,s.opacity,s.title,s.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(n,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const a=s?.opacity!=null?s.opacity:null,o=a!=null?a*e:e;if(s.type==="building-group"){const u={type:"symbol-table",title:s.title,infos:[]},h=await this._generateLegendElementsForBuildingSublayers(s.sublayers,o);u.infos.push(...h),i=[u,...i]}else s.renderer&&(i=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:o,sublayer:s}),...i])}}return i.filter(s=>!!s&&(!("infos"in s)||!s.infos||s.infos.length>0))}async _constructLegendElementsForSublayers(){this._loading=!0,this.removeHandles("sublayers-watcher");const t=this.layer;if(!(BA(t)||EB(t)||qA(t))||this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");this.addHandles(_e(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity)}catch(e){le.getLogger(this).warn("Request to server for legend has failed!",e)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let s=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let n=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=qA(r)?this.sublayerIds.map(a=>r.findSublayerForSubtypeCode(a)).filter(Qr):this.sublayerIds.map(a=>r.findSublayerById(a)).filter(Qr));for(const a of n){const o=_e(()=>[a.renderer,a.opacity,a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForSublayers());this.addHandles(o,"sublayers-watcher");const u=a.createQuery().where,h=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView(u),p=!this.respectLayerVisibility||a.visible&&a.legendEnabled&&this._isSublayerInScale(a);if(h&&p){const y=a?.opacity!=null?a.opacity:null,v=y!=null?y*e:e,b=!CB(a)||a.originIdOf("renderer")>2&&!a.sublayers;if(a.renderer&&b)await a.load(),s=[...await this._getRendererLegendElements(a.renderer,{title:a.title,opacity:v,sublayer:a}),...s];else if(CB(a)){const w=await this._generateSymbolTableElementForSublayer(a,v,i);w&&s.unshift(w)}}}return s.filter(a=>!!a&&(!("infos"in a)||!a.infos||a.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const s=this.layer,n=t.source;let a=null;if(!(!n||n.type==="map-layer"&&n.mapLayerId===t.id&&(!n.gdbVersion||n.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||t.originIdOf("renderer")>2||t.originIdOf("labelingInfo")>2||t.originIdOf("labelsVisible")>2){const u=new Ua({layer:this.layer});a=u.hasDynamicLayers?u.dynamicLayers:null,u.destroy()}const o=a||`${s.uid}-default`;(await this._getLegendLayers(o,a)).forEach(u=>i.set(u.layerId,u))}const r=i.get(t.id);if((!r||r?.subLayerIds&&r.defaultVisibility)&&t.sublayers){const s=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!t?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e?.renderer;let s=e?.title||t.layerName;if(r&&(!e||e?.originIdOf("renderer")>2)){const o=e?.title||this._getRendererTitle(r,e);o&&(s&&typeof o!="string"&&"title"in o&&(o.title=s),s=o)}const n={type:"symbol-table",title:s,legendType:t.legendType||null,infos:[]},a=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(o=>{const u={type:"symbol-table",title:o.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter(h=>h.groupId===o.id),t.layerId,o.heading||n.title||e?.title,i)};u.infos?.length>0&&n.infos.push(u)}):n.infos=this._generateSymbolTableElementInfosForLegendLayer(a,t.layerId,n.title||e?.title,i),n.infos.length>0?n:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i,r){return t.map(s=>{let n=s.url;if(s.imageData&&s.imageData.length>0)n=`data:image/png;base64,${s.imageData}`;else{if(n.startsWith("http"))return null;n=Rue(`${this.layer.url}/${e}/images/${n}`)}let a=s.label;return a==="<all other values>"&&(a="others"),{previewAriaLabel:a||i,label:a,src:n,opacity:r??this.opacity,width:s.width,height:s.height}}).filter(Qr)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,s=null,n=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(s=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,s=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||s>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(a=>a.values);let s=0,n=null;return r&&t.some((a,o)=>(a.values||(s=o,n=a,n.label||(n.label="others")),n!=null)),i?i.type==="unique-value"?n&&(t.splice(s,1),t.push(n)):i.type==="class-breaks"&&(n&&t.splice(s,1),i.legendOptions?.order||t.reverse(),n&&t.push(n)):n&&(t.splice(s,1),t.push(n)),t}async _getRendererLegendElements(t,e={}){if(!c8e(t,this.view))return le.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(l8e(t))return this._constructPointCloudRendererLegendElements(t,e);if(Rne(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return Dne(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e,{isFeatureReductionRenderer:!0}):[]}_getPointCloudRendererTitle(t){return(t.legendOptions?.title||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){const i=e.title,r=[];let s=null,n=null;if(YN(t))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(a=>{s.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(Wx,a.color)})});else if(JN(t)){const a=t.stops;let o=null;if(a?.length&&(a.length===1&&(o=a[0].color),!o)){const h=a[0].value,p=a[a.length-1].value;h!=null&&p!=null&&(o=Rse(h+(p-h)/2,a))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Wx,o||Wx.color)}]};const u=BDe(t.stops??[])??[];n={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:u,preview:uf(u.map(h=>h.color))}}else XN(t)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorUniqueValueInfos?.forEach(a=>{s.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(Wx,a.color)})}));return s?.infos.length&&r.push(s),n?.infos.length&&r.push(n),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:s}=e,{backgroundColor:n,outline:a,dotSize:o}=t,u=this.cssEffectFilter,h=o+"-"+i+"-"+n+"-"+(a&&JSON.stringify(a.toJSON()))+"-"+u,p=this._dotDensityUrlCache,y=p.has(h)?p.get(h):wDe(t,i);p.set(h,y);const v={shape:{type:"image",x:0,y:0,width:y.width,height:y.height,src:y.src},fill:null,stroke:null,offset:[0,0]},b=Ev([[v]],[y.width,y.height],{cssEffectFilter:this.cssEffectFilter});return{opacity:1,src:y.src,preview:b,width:y.width,height:y.height,previewAriaLabel:r||s}}async _constructDotDensityRendererLegendElements(t){const e=t.calculateDotValue(this.view.scale),i=t.legendOptions?.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const n=await this._getElementInfoForDotDensity(t,s);n.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(n)}return[r]}async _constructPieChartRendererLegendElements(t){const e=[];let i=null;const r=t.outline;t.attributes.forEach(a=>{const o=new Pi({color:a.color,outline:r}),u=a.label||a.valueExpressionTitle||a.field;e.push({label:u,symbol:o})});const s=e.length?[...e]:[];if(t.othersCategory?.color&&t.othersCategory?.threshold!==0){const a=new Pi({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:a})}if(t.defaultColor?.a){const a=new Pi({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:a})}const n=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){n.unshift({type:"symbol-table",title:null,infos:e});const a=s.filter(u=>u.label!==i).map(u=>u.symbol.color).filter(Boolean),o=SDe(a,{holePercentage:t.holePercentage,backgroundColor:t.backgroundFillSymbol?.color,cssEffectFilter:this.cssEffectFilter,outline:r});n.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:o})}return await this._generatePreviewsForLegendElements(n,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter}),n}async _getWhereClause(t,e,i){const r=await $D(t,i),s=new Set,{field:n,field2:a,field3:o}=e;W0(s,i,[n,a,o]),await Gs(s,i,null,e.valueExpression);const u=new Set(Array.from(s,p=>p.toLowerCase()));return r?.fieldNames.map(p=>p.toLowerCase())?.some(p=>!u.has(p))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?gAe(t.displayFilterInfo,this.view):null;return i?.where?this._layerDisplayFilter?.id!==i?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilter=i,i}async _constructRendererLegendElements(t,e={}){const{title:i,sublayer:r,isFeatureReductionRenderer:s}=e,n=r||this.layer,a=ou(t,"reference-size"),o=ou(t,"spike"),u=s&&"renderer"in n&&n.renderer?n.renderer:t;let h=null;pf(u)&&(await this._processDefinitionExpression(n,u),h=await this._processDisplayFilter(n,u)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const p=await this._getVisualVariableLegendElements(t,n)||[],y={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let v=null,b=!1;const w=new Set;if(k5(t)&&!this._hasSizeRamp){const L=await Pse(t);y.infos.push({label:null,symbol:L})}else if(g8e(t)){let L=i;const O=v8e(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",R=p.findIndex(Q=>Q.type==="color-ramp"),z=R!==-1?p.splice(R,1)[0]:null,j=p.findIndex(Q=>Q.type==="size-ramp"),U=j!==-1?p.splice(j,1)[0]:null,B=[];z&&(L=z.title,B.push(z)),U&&(L=U.title,B.push(U)),B.length>0&&p.push({type:O,title:L,infos:B})}else if(kne(t)){const L=ZDe(t);p.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:L,preview:uf(L.map(O=>O.color),{cssEffectFilter:this.cssEffectFilter})})}else if(pf(t)){const L=t.authoringInfo;if(L&&L.type==="relationship"){const{numClasses:O,field1:R,field2:z}=L,j=L.focus;if(O&&R&&z){const U=[R,z];let B=Tse(j)||0;for(const oe of U){const{field:ue,normalizationField:Se,label:me}=oe,ke=me||{field:this._getFieldAlias(ue,n),normField:Se&&this._getFieldAlias(Se,n)},te=b8e.clone();te.angle=B,y.infos.push({label:ke,symbol:te}),w.add(te),B+=90}const Q=bDe({focus:j,numClasses:O,infos:t.uniqueValueInfos??[]});p.unshift(Q)}}else if(Vy(this.layer)||Zx(this.layer)){const{uniqueValueInfos:O}=t;if(O)for(const R of O)R.symbol&&await this._checkClausesForUVR(u,R.value)&&y.infos.push({label:R.label||R.value,value:R.value,symbol:R.symbol})}else{const{field:O,field2:R,field3:z,fieldDelimiter:j,valueExpression:U,defaultSymbol:B}=t,Q=!(!O&&!U||!R&&!z),oe=h?h.title:null,ue=[],{uniqueValueGroups:Se}=t;if(Se)for(const me of Se){const ke={type:"symbol-table",title:oe||me.heading,infos:[]},{classes:te}=me;if(te)for(const be of te){const{symbol:Me,values:et}=be;if(Me){const _t=[],W=[];for(const ot of et??[]){const{value:Et,value2:lr,value3:ci}=ot,Wn=[],uo=[];(O||U)&&(Wn.push(Et),uo.push(this._getDomainName(O,Et,n)??mM(Et,yM(n,O,this.view.timeZone)))),R&&(Wn.push(lr),uo.push(this._getDomainName(R,lr,n)??mM(lr,yM(n,R,this.view.timeZone)))),z&&(Wn.push(ci),uo.push(this._getDomainName(z,ci,n)??mM(ci,yM(n,z,this.view.timeZone)))),_t.push(Q?Wn.join(j||""):Wn[0]),W.push(uo.join(" - "))}const pe=_t.join(", ");let Te=be.label;if(!Te){const ot=W.filter(Boolean);Te=ot.length?ot.join(", "):pe}let Pe=Me;Pe.type==="cim"&&a&&(Pe=Pe.clone(),CN(Pe,{innerDotSize:.5*TB,outerRingSize:TB}));let tt=!1;for(const ot of _t)if(tt=await this._checkClausesForUVR(u,ot),tt)break;tt&&ke.infos.push({label:Te,value:pe,symbol:Pe})}}ke.infos.length&&ue.push(ke)}if(ue.length){const me=ue[0];if(ue.length===1&&"title"in me&&!me.title){const ke=me.infos?.filter(IB)??[];y.infos.push(...ke)}else B&&(ue.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:B}]}),b=!0),y.infos.push(...ue);i||t.legendOptions?.title||t.valueExpressionTitle||(y.title=null)}}t.defaultSymbol&&!b&&(y.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),b=!0)}else if(df(t)){if(!a&&!o){if(v=this._isUnclassedRenderer(t),!v||!this._hasSizeRamp){const L=t.classBreakInfos.filter(({symbol:R})=>R),O=t.legendOptions?.order==="ascending-values";for(const{label:R,minValue:z,maxValue:j,symbol:U}of L){const B=R||(v?null:`${z} - ${j}`),Q={previewAriaLabel:B||y.title||n.title,label:B,value:[z,j],symbol:U};O?y.infos.push(Q):y.infos.unshift(Q)}v&&(y.title=null),this._updateInfosForClassedSizeRenderer(t,y.infos)}t.defaultSymbol&&!v&&(y.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),b=!0)}}else if(Pne(t))if(Zx(this.layer)||m8e(this.layer)){const L=await this._constructTileImageryStretchRendererElements(t);y8e(L)?p.push(L):y.infos=L}else{const L=this.layer;let O,R;t.customStatistics?.length&&({min:O,max:R}=t.customStatistics[0]);let z=[],j=L.serviceRasterInfo;if(L.rasterFunction)try{j=await L.generateRasterInfo(L.rasterFunction)}catch{}const U=NT(j.pixelType);if(j.bandCount===1){const B=L.bandIds?.[0]||0;O=O??(j.statistics?j.statistics[B].min:U[0]),R=R??(j.statistics?j.statistics[B].max:U[1]),O||R?p.push(await this._getStretchLegendElements(t,{min:O,max:R})):this._getServerSideLegend()}else if(L.bandIds&&L.bandIds.length===1)O=O??(j.statistics?j.statistics[L.bandIds[0]].min:U[0]),R=R??(j.statistics?j.statistics[L.bandIds[0]].max:U[1]),O||R?p.push(await this._getStretchLegendElements(t,{min:O,max:R})):this._getServerSideLegend();else if(j.bandCount>=3){const{bandInfos:B}=j,{bandIds:Q}=L;B.length>=j.bandCount?Q?.length===3?(z=Q.map(oe=>B[oe].name),y.infos=this._createSymbolTableElementMultiBand(z)):L.format==="lerc"?(z=[0,1,2].map(oe=>B[oe].name),y.infos=this._createSymbolTableElementMultiBand(z)):this._getServerSideLegend():L.format==="lerc"?(z=["band1","band2","band3"],y.infos=this._createSymbolTableElementMultiBand(z)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Ane(t))t.colormapInfos.forEach(L=>{y.infos.push({label:L.label,value:L.value,symbol:this._getAppliedCloneSymbol(o8e,L.color)})});else if(bg(t)){let L=t.symbol;switch(e.geometryType){case"point":L="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":L="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":L="polygonSymbol"in n?n.polygonSymbol:null}const O=this._clusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&O&&y.infos.push({previewAriaLabel:t.label||y.title||n.title,label:t.label,symbol:L})}else if(Lne(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),y.title=t.attributeField;const L=t.getClassBreakInfos();L?.length?L.forEach(O=>{y.infos.push({label:O.minValue+" - "+O.maxValue,symbol:O.symbol})}):y.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else One(t)&&p.push(await this._getStretchLegendElements(t,{min:0,max:255}));const S=t.defaultSymbol;!S||b||bg(t)||v&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||p.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:S}]}),y.infos.length&&p.unshift(y);const M=e.opacity==null?this.opacity:e.opacity,T=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),I=Vy(this.layer)||Zx(this.layer);return await this._generatePreviewsForLegendElements(p,{opacity:M,symbolConfig:{isTall:T,isSquareFill:I},cssEffectFilter:this.cssEffectFilter},{arrowMarkerSymbols:w}),t=null,p}async _waitForLayerViewUpdate(t){await jw(()=>!t.updating)}async _checkFeatureCountForExpression(t,e){const i=this.layerView;if(!(i&&"createQuery"in i&&"queryFeatureCount"in i))return!0;try{await this._waitForLayerViewUpdate(i);const r=i.createQuery();return t&&(r.where=UDe(r.where,t)),e&&(r.geometry=e),await i.queryFeatureCount(r)>0}catch{return!0}}async _checkClausesForUVR(t,e){const i=_8e(t,e);return i?(!(!this._layerDefinitionExpressionClause&&this._layerDefinitionExpression&&this.respectLayerDefinitionExpression||!this._layerDisplayFilterClause&&this._layerDisplayFilter?.where)||await this._checkFeatureCountForExpression(`${t.field} = ${e}`))&&(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i)):!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t?.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,s;const n=t?.customStatistics?.length?t.customStatistics:i?.statistics;if(n)({min:r,max:s}=n[0]);else{const o=NT(i.pixelType);r=o[0],s=o[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),s=e.getStandardTimeValue(s)),i.bandCount===1||e.bandIds?.length===1)return this._getStretchLegendElements(t,{min:r,max:s});const a=(e?.bandIds?.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(o=>i.bandInfos[o].name);return a.length<3?a.push(a[1]):a.length>3&&a.splice(3),this._createSymbolTableElementMultiBand(a)}async _getStretchLegendElements(t,e){const i=t.colorRamp?.toJSON(),r=WDe(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:uf(r.map(s=>s.color))}}_getClusterSymbol(){const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&i?.authoringInfo?.isAutoGenerated!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._clusterSizeVariable?this._getClusterTitle(e):t,infos:await HFe(i,e,await S5(i),this.scale,this.view,r,this._clusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,s)=>{e.push({label:{colorName:i[s],bandName:r},src:zDe[s],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(s=>gE(s.symbol));if(i&&r){const s=A5,n=P5,a=t.classBreakInfos.length,o=(s-n)/(a>1?a-1:a);e.forEach((u,h)=>{u.size=s-o*h})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const s=t[r];s.type==="size"&&(s.axis==="height"&&(e=!0),s.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){const r=[];for(const s of t)for(const n of s.infos??[])if("infos"in n&&n.infos&&r.push(this._generatePreviewsForLegendElements([n],e,i)),IB(n)&&n.symbol&&!n.preview){let a=!0;if(n.symbol.type==="cim"){const{minScale:o,maxScale:u}=n.symbol.data;(o&&o<this.scale||u&&u>this.scale)&&(a=!1)}a&&r.push(this._generateSymbolPreviewForInfo(n,{...e,clipBloomEffect:"theme"in s&&s.theme==="spike",cssEffectFilter:i?.arrowMarkerSymbols?.has(n.symbol)?null:e.cssEffectFilter},i?{applyScaleDrivenSize:!i.arrowMarkerSymbols?.has(n.symbol)}:void 0))}await Promise.all(r)}async _getSize(t,e){let i=t.size==null&&this._hasSizeRamp?Ut(22):t.size;if(this._scaleDrivenSizeVariable&&e?.applyScaleDrivenSize){const{getSize:r}=await K(()=>Promise.resolve().then(()=>Em),void 0,import.meta.url);i=r(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}return i}_getPreviewCIMOptions(t){return{style:"legend",cimOptions:{allowScalingUp:this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!t?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:this.view?.type==="2d"?"map":this.view?.viewingMode,scale:this.view?.scale}:null}}}async _generateSymbolPreviewForInfo(t,e={},i){const{symbol:r}=t;try{if(e.size=await this._getSize(t,i),e.scale=!1,r.type==="cim"){const s=this._getPreviewCIMOptions(i);e={...e,...s}}t.preview=await Ese(r,e)}catch{t.preview=null,le.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${r?.type}`)}}_getClusterRenderer(t){this._clusterSizeVariable=null;const e="renderer"in this.layer?this.layer.renderer:null,i=t.renderer?.clone()||e?.clone(),r=EDe(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!i.visualVariables?.some(n=>n.type==="size"&&n.target!=="outline"&&!Hx.test(n.valueExpression))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:a,clusterMaxSize:o}=t;r.legendOptions=new wie({showLegend:a!==o})}const n=i.visualVariables||[];i.visualVariables=n.concat([r]),this._clusterSizeVariable=r}return i}async _loadRenderer(t){if(HA.has(t))return HA.get(t);const e=[],i=t.clone(),r=await S5(i);if(df(i)||pf(i)){const s=(i.classBreakInfos||i.uniqueValueInfos).map(n=>this._fetchSymbol(n.symbol,r).then(a=>{n.symbol=a}).catch(()=>{n.symbol=null}));Array.prototype.push.apply(e,s)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(s=>{this._applySymbolToRenderer(i,s,bg(i))}).catch(()=>{this._applySymbolToRenderer(i,null,bg(i))})),await Promise.allSettled(e),HA.set(t,i),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw le.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?Wre(i,e):i.color&&(i.color=new we(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new we(e))})}async _getVisualVariableLegendElements(t,e){if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],s=[],n=[],a=ou(t,"reference-size")??ou(t,"spike");let o;const u=this._clusterSizeVariable;if(a?.sizeStops?.length===2&&(df(t)||pf(t))){const[b,w]=a.sizeStops,S=u?u.minDataValue:b.value,M=u?u.maxDataValue:w.value;o=new $t({field:a.field??void 0,normalizationField:a.normalizationField,minSize:ys(b.size,10,100),maxSize:ys(w.size,50,150),minDataValue:S,maxDataValue:M}),s.push(o)}for(const b of i)if(b.type==="color")r.push(b);else if(b.type==="size"){if(b.field==="cluster_count"&&o)continue;s.push(b)}else b.type==="opacity"&&n.push(b);const h=[...r,...s,...n];let p,y;if(r.length===0&&df(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const b=t.classBreakInfos[0];p=b&&b.symbol}if(r.length===0&&bg(t)&&(p=t.symbol),p)if(p.type.includes("3d")){const b=p.symbolLayers.at(0);b.type==="water"?b.color!=null&&(y=b.color):b.material?.color!=null&&(y=b.material.color)}else p.url||(y=p.color);const v=this.cssEffectFilter;return(await Promise.all(h.map(async b=>{if(!b.legendOptions||b.legendOptions.showLegend!==!1){const w=k5(t)?b.field:this._getRampTitle(b,e);let S=null;const M=jDe(e,b,this.view.timeZone);if(b.type==="color"){const T=await Yq(b,null,M)??[];S={type:"color-ramp",title:w,infos:T,preview:uf(T.map(I=>I.color),{cssEffectFilter:v})},this._hasColorRamp||(this._hasColorRamp=T.length>0)}else if(b.type==="size"&&b.target!=="outline")Hx.test(b.valueExpression)?this._clusterSizeVariable||(this._scaleDrivenSizeVariable=b):(S=await this._getSizeLegendElement(w,b,t,M),o===b&&a?.theme==="spike"&&(S.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(S.infos==null||!S.infos.length)));else if(b.type==="opacity"){const T=await Yq(b,y,M)??[];S={type:"opacity-ramp",title:w,infos:T,preview:uf(T.map(I=>I.color),{cssEffectFilter:v})},this._hasOpacityRamp||(this._hasOpacityRamp=T.length>0)}return S?.infos?S:null}}))).filter(Qr)}_getDomainName(t,e,i){if(t&&typeof t!="function"){const r="getField"in i&&i.getField?.(t),s=r&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(r.name,{excludeImpliedDomains:X("esri-widget-legacy-field-domain-calculation")}):null;return s?.type==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,s="popupTemplate"in r&&r.popupTemplate,n=s&&s.fieldInfos;if(n){for(const a of n)if(a.fieldName===i)return i==="cluster_count"?a.label||{showCount:!0}:a.label}}return{showCount:!0}}_getRampTitle(t,e){let i=t.field,r=t.normalizationField,s=!1,n=!1,a=!1,o=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const u=t.legendOptions?.title;if(u!=null)o=u;else if(t.valueExpressionTitle)o=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo?.visualVariables){const h=e.renderer.authoringInfo.visualVariables;for(let p=0;p<h.length;p++){const y=h[p];if(y.type==="color"){if(y.style==="ratio"){s=!0;break}if(y.style==="percent"){n=!0;break}if(y.style==="percent-of-total"){a=!0;break}}}}o={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:s,ratioPercent:n,ratioPercentTotal:a}}return o}_getRendererTitle(t,e){const i=t;if(i.legendOptions?.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,s=null,n=null;if(df(i)&&(s=i.normalizationField,n=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,s=typeof s=="function"?null:s,pf(i)){const{field2:o,field3:u,fieldDelimiter:h}=i;let p=r&&this._getFieldAlias(r,e);return o&&(p=`<${p}>${h}<${this._getFieldAlias(o,e)}>`,u&&(p=`${p}${h}<${this._getFieldAlias(u,e)}>`)),p}let a=null;return(r||s)&&(a={field:r&&this._getFieldAlias(r,e),normField:s&&this._getFieldAlias(s,e),normByPct:n}),a}_getFieldAlias(t,e){const i="featureReduction"in e&&e.featureReduction;if(OY(e)&&!i)return e.getFieldAlias(t)||t;let n=("popupTemplate"in e?e.popupTemplate:null)?.fieldInfos?.find(p=>t===p.fieldName),a=null;"getField"in e&&e.getField?a=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(a=e.fieldsIndex.get(t));let o=null;i&&(n??="popupTemplate"in i?i.popupTemplate?.fieldInfos?.find(p=>t?.toLowerCase()===p.fieldName?.toLowerCase()):void 0,"fields"in i&&i.fields&&(o=i.fields.find(p=>p.name?.toLowerCase()===t?.toLowerCase())));const u=n||a||o;let h=null;return u&&(h=n?.label||a?.alias||o?.alias||"name"in u&&u.name||"fieldName"in u&&u.fieldName||null),h}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return df(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};d([m()],Ni.prototype,"_loading",void 0),d([m()],Ni.prototype,"children",void 0),d([m({readOnly:!0})],Ni.prototype,"cssEffectFilter",null),d([m()],Ni.prototype,"layerView",void 0),d([m()],Ni.prototype,"layer",void 0),d([m()],Ni.prototype,"legendElements",void 0),d([m({readOnly:!0})],Ni.prototype,"loading",null),d([m({readOnly:!0})],Ni.prototype,"opacity",null),d([m()],Ni.prototype,"parent",void 0),d([m({readOnly:!0,dependsOn:[]})],Ni.prototype,"ready",null),d([m()],Ni.prototype,"hideLayersNotInCurrentView",void 0),d([m()],Ni.prototype,"keepCacheOnDestroy",void 0),d([m()],Ni.prototype,"respectLayerDefinitionExpression",void 0),d([m()],Ni.prototype,"respectLayerVisibility",void 0),d([m({readOnly:!0})],Ni.prototype,"scale",null),d([m()],Ni.prototype,"sublayerIds",void 0),d([m({readOnly:!0})],Ni.prototype,"isScaleDriven",null),d([m()],Ni.prototype,"title",void 0),d([m({readOnly:!0,dependsOn:["ready"],value:0})],Ni.prototype,"version",null),d([m()],Ni.prototype,"view",void 0),Ni=d([N("esri.widgets.Legend.support.ActiveLayerInfo")],Ni);const Dp={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},Nne=$e.ofType(Ni),w8e=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),zne="view.basemapView.baseLayerViews",Fne="view.groundView.layerViews",Vne="view.basemapView.referenceLayerViews",S8e=[zne,Fne,"view.layerViews",Vne];let Cn=class extends Ce{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new $e,this._activeLayerInfosPromises=new WeakMap,this.activeLayerInfos=new Nne,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(_e(()=>this.view,()=>this._viewHandles(),Lt),Dp.view),this.addHandles(R4(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get loading(){return this.activeLayerInfos.some(e=>e.loading)}get state(){return this.view?.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Dp.state),this.view&&this.addHandles(_e(()=>this.state,()=>this._stateHandles(),Lt),Dp.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Dp.allLayerViews,Dp.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];i&&this._activeLayerInfosPromises.delete(i),delete this._activeLayerInfosByLayerViewId[e],i?.parent?.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Dp.allLayerViews),this.addHandles(_e(()=>[this.basemapLegendVisible,this.groundLegendVisible,this.hideLayersNotInCurrentView,this.keepCacheOnDestroy,this.layerInfos,this.respectLayerDefinitionExpression,this.respectLayerVisibility],()=>this._refresh()),Dp.legendProperties)}_allLayerViewsChangeHandle(e){if(e.added.length&&this._generateActiveLayerInfosForLayerViews(e.added),e.moved.length)return this._destroyViewActiveLayerInfos(),void this._refresh();if(e.removed.length){for(const{uid:i}of e.removed)this._destroyViewActiveLayerInfo(i);this._refresh()}}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.drain(e=>this._activeLayerInfosPromises.delete(e)),this._generateActiveLayerInfosForLayerViews(this._generateLayerViews())}_generateActiveLayerInfosForLayerViews(e){e.filter(this._filterBasemapLayerViews,this).filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this)}_filterBasemapLayerViews(e){if(!this.view?.basemapView)return!0;const{baseLayerViews:i,groundLayerViews:r,referenceLayerViews:s}=this.view.basemapView,n=!this.basemapLegendVisible&&(i?.includes(e)||s?.includes(e)),a=!this.groundLegendVisible&&r?.includes(e);return!n&&!a}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(n=>{if(!n.parent){const a=n.layer.parent,o=a&&"uid"in a&&this._layerViewByLayerId[a.uid],u=o&&this._activeLayerInfosByLayerViewId[o.uid];u&&e.includes(u)&&(r.push(n),n.parent=u,u.children.add(n),this._sortActiveLayerInfos(u.children))}}),e.removeMany(r);const s={};i.allLayerViews.forEach((n,a)=>s[n.layer.uid]=a),e.sort((n,a)=>{const o=s[n.layer.uid]||0;return(s[a.layer.uid]||0)-o})}_generateLayerViews(){const e=[];return S8e.filter(this._filterLayerViews,this).map(i=>Rs(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===zne||e===Vne),r=!this.groundLegendVisible&&e===Fne;return!i&&!r}_collectLayerViews(e,i){const r=s=>(s&&s.forEach(n=>{i.push(n),r(n[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!w8e.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(_e(()=>[e.legendEnabled,e.layer?.legendEnabled],()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}async _buildActiveLayerInfo(e){const i=e.layer,r=e.uid,s=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];n||(n=new Ni({layer:i,layerView:e,view:this.view??void 0}),this._activeLayerInfosByLayerViewId[r]=n);const a=s?.title!==void 0&&s.layer.uid===i.uid;n.title=a?s.title:i.title,n.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,n.respectLayerVisibility=this.respectLayerVisibility,n.hideLayersNotInCurrentView=this.hideLayersNotInCurrentView,n.keepCacheOnDestroy=this.keepCacheOnDestroy,n.sublayerIds=s?.sublayerIds||[];const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;n.parent=this._activeLayerInfosByLayerViewId[o?.uid],this._addActiveLayerInfo(n),this._constructLegendElements(n),this._attachHandlesToActiveLayerInfo(n)}_attachHandlesToActiveLayerInfo(e){const{layer:i,layerView:r}=e,s=r.uid;this.removeHandles(s),this.addHandles([_e(()=>i.title,n=>this._titleHandle(n,e)),_e(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol,"effect"in i&&i.effect,"featureReduction"in i&&xq(i,r.view),this.view?.timeZone],()=>this._constructLegendElements(e)),_e(()=>"filter"in r&&r.filter,()=>{xq(r.layer,r.view)!=null&&this._constructLegendElements(e)}),Kr(()=>!!this.view?.stationary,()=>this._scaleHandle(e)),_e(()=>e.loading,()=>this.notifyChange("loading"),Lt)],s),this.respectLayerVisibility&&this.addHandles([_e(()=>i.legendEnabled,n=>this._legendEnabledHandle(n,e)),_e(()=>r.legendEnabled,n=>{this.view?.suspended||this._legendEnabledHandle(n,e)})],s),this.respectLayerDefinitionExpression&&"definitionExpression"in i&&this.addHandles(_e(()=>i.definitionExpression,()=>this._constructLegendElements(e)),s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const n=this.layerInfos?.some(o=>o.layer.uid===r.uid),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!n?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const n=[];this._activeLayerInfosWithNoParent.forEach(a=>{const o=a.layer.parent,u=o&&"uid"in o?this._layerViewByLayerId[o?.uid]:null,h=this._activeLayerInfosByLayerViewId[u?.uid];h&&(n.push(a),a.parent=h)}),n.length&&(this._activeLayerInfosWithNoParent.removeMany(n),n.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}async _getBuildLegendPromise(e){const{layer:i}=e;if("featureCollections"in i&&i.featureCollections)return e.buildLegendElementsForFeatureCollections(i.featureCollections);if("featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale))return e.buildLegendElementsForFeatureReduction(i.featureReduction);if("renderer"in i&&i.renderer&&!("sublayers"in i))return e.buildLegendElementsForRenderer(i.renderer);if("url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph")return e.buildLegendElementsForTools();const r=e.children.map(s=>this._constructLegendElements(s));return Promise.all(r).then(()=>{})}async _constructLegendElements(e){const i=this._activeLayerInfosPromises.get(e);i&&await i.catch(()=>{});const r=this._getBuildLegendPromise(e);this._activeLayerInfosPromises.set(e,r),r.finally(()=>{this._activeLayerInfosPromises.delete(e)})}};d([m({type:Nne})],Cn.prototype,"activeLayerInfos",void 0),d([m()],Cn.prototype,"basemapLegendVisible",void 0),d([m()],Cn.prototype,"groundLegendVisible",void 0),d([m()],Cn.prototype,"hideLayersNotInCurrentView",void 0),d([m()],Cn.prototype,"keepCacheOnDestroy",void 0),d([m({readOnly:!0})],Cn.prototype,"loading",null),d([m()],Cn.prototype,"respectLayerDefinitionExpression",void 0),d([m()],Cn.prototype,"respectLayerVisibility",void 0),d([m()],Cn.prototype,"layerInfos",void 0),d([m({readOnly:!0})],Cn.prototype,"state",null),d([m()],Cn.prototype,"view",void 0),Cn=d([N("esri.widgets.Legend.LegendViewModel")],Cn);const Vt="esri-legend--card",n1="esri-legend",Be={base:Vt,stacked:`${n1}--stacked`,carouselTitle:`${Vt}__carousel-title`,intervalSeparator:`${Vt}__interval-separator`,imageryLayerStretchedImage:`${Vt}__imagery-layer-image--stretched`,imageLabel:`${Vt}__image-label`,layerCaption:`${Vt}__layer-caption`,labelElement:`${Vt}__label-element`,layerRow:`${Vt}__layer-row`,labelCell:`${Vt}__label-cell`,message:`${Vt}__message`,rampLabel:`${Vt}__ramp-label`,section:`${Vt}__section`,serviceCaptionText:`${Vt}__service-caption-text`,serviceContent:`${Vt}__service-content`,service:`${Vt}__service`,groupLayer:`${Vt}__group-layer`,groupLayerChild:`${Vt}__group-layer-child`,symbol:`${Vt}__symbol`,sizeRampRow:`${Vt}__size-ramp-row`,symbolRow:`${Vt}__symbol-row`,symbolCell:`${Vt}__symbol-cell`,carousel:`${Vt}__carousel`,carouselItem:`${Vt}__carousel-item`,intervalSeparatorsContainer:`${Vt}__interval-separators-container`,relationshipLabelContainer:`${Vt}__relationship-label-container`,labelContainer:`${Vt}__label-container`,serviceCaptionContainer:`${Vt}__service-caption-container`,symbolContainer:`${Vt}__symbol-container`,colorRampContainer:`${Vt}__color-ramp-container`,sizeRampContainer:`${Vt}__size-ramp-container`,sizeRampPreview:`${Vt}__size-ramp-preview`,pieChartRampPreview:`${Vt}__pie-chart-ramp-preview`,sizeRampHorizontal:`${n1}__size-ramp--horizontal`,rampLabelsContainer:`${n1}__ramp-labels`,layerInfo:`${n1}__layer-cell ${n1}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function x8e(t,e){return e}function Fi(t){const e=this;t.appendChild(e)}function Fc(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return eue(e);if("value"in e||"unit"in e)return Gc(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return x8e(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:jne(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?Gc(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function jne(t,e){return!e}function Une(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function $8e(t,e){return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:Uc(t.value??0,{style:"decimal",notation:t.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function Gne(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return $8e(t,i);default:return t.label}}function qne(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,s=Fc(e,r,i);return jne(r,i)&&r.title?`${r.title} (${s})`:s}function Bne(t){return!(!t||typeof t!="object")}function JT(t,e){const i=Fc(t,e,!1),r=i?t.previewTemplateAriaLabel:t.previewAriaLabel;return Gc(r,{label:i})}const M8e=25,T8e=25,E8e=100;let ff=class extends Wi{constructor(e,i){super(e,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return F("div",{class:this.classes(Be.layerRow,Be.colorRampContainer)},this._renderRampLabel(e[0]),F("div",{class:Be.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",s=e.length-1,n=T8e,a=s>2&&!r?M8e*s:E8e,o=a+20,u=10,h=[[{shape:{type:"path",path:`M0 ${n/2} L${u} 0 L${u} ${n} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:u,y:0,width:a,height:n},fill:{type:"linear",x1:u,y1:0,x2:a+u,y2:0,colors:e.map((v,b)=>({color:v.color,offset:r&&"ratio"in v?v.ratio:b/s}))},stroke:{width:0}},{shape:{type:"path",path:`M${a+u} 0 L${o} ${n/2} L${a+u} ${n} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],p=pse(h,o,n),y={filter:this.cssEffectFilter??void 0,opacity:i==null?void 0:`${i}`};return F("div",{styles:y},p)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?F("div",{class:Be.intervalSeparatorsContainer},F("div",{class:Be.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return F("div",{class:Be.rampLabel},Gne(e,this.legendElement.type,this.messages))}};d([m()],ff.prototype,"cssEffectFilter",void 0),d([m()],ff.prototype,"legendElement",void 0),d([m()],ff.prototype,"messages",void 0),d([m()],ff.prototype,"opacity",void 0),ff=d([N("esri.widgets.Legend.styles.card.ColorRamp")],ff);const C8e="#ddd",as=window.devicePixelRatio,Np="esri-spike-ramp",kc={spikeRampContainer:`${Np}__container`,spikeRampPreviewContainer:`${Np}__preview-container`,spikeRampPreview:`${Np}__preview`,spikeRampSymbolPreview:`${Np}__symbol-preview`,spikeRampLines:`${Np}__lines`,spikeRampLabelsContainer:`${Np}__labels-container`,spikeRampLabel:`${Np}__label`};function Hne(t){return t.infos.length!==5?null:F("div",{class:kc.spikeRampContainer},F("div",{class:kc.spikeRampPreviewContainer},I8e(t),L8e(t)),A8e(t))}function I8e(t){const[e,i,r]=QN(t).map(({preview:s})=>{if(!s)return null;const n=s.cloneNode(!0);return n.classList.add(kc.spikeRampSymbolPreview),n});return e&&i&&r?F("div",{class:kc.spikeRampPreview},F("div",{afterCreate:Fi,bind:r}),F("div",{afterCreate:Fi,bind:i}),F("div",{afterCreate:Fi,bind:e})):null}function L8e(t){const[{width:e,height:i},{width:r},{width:s,height:n}]=QN(t).map(({size:U})=>Bne(U)?{width:lt(U.width),height:lt(U.height)}:{width:0,height:0}),a=10,o=8,u=e+r+s+3*a,h=i,p=document.createElement("canvas");p.width=(u+a)*as,p.height=h*as,p.style.width=p.width/as+"px",p.style.height=p.height/as+"px";const y=p.getContext("2d");y.beginPath();const v=u-(e/2+a),b=0,w=u+o;y.moveTo(v*as,b*as),y.lineTo(w*as,0*as);const M=(u-o)/2,T=(i-n)/2,I=u+o,L=(i-n)/2;y.moveTo(M*as,T*as),y.lineTo(I*as,L*as);const O=s/2,R=h-n,z=u+o,j=h-n;return y.moveTo(O*as,R*as),y.lineTo(z*as,j*as),y.strokeStyle=C8e,y.lineWidth=.5*as,y.stroke(),F("div",{afterCreate:Fi,bind:p,class:kc.spikeRampLines})}function A8e(t){const[{label:e,height:i},{label:r},{label:s,height:n}]=QN(t).map(({label:p,size:y})=>({label:p,height:Bne(y)?lt(y.height):0})),a=i-n,o={position:"absolute",top:"0"},u={position:"absolute",top:a/2+"px"},h={position:"absolute",top:`${a}px`};return F("div",{class:kc.spikeRampLabelsContainer},F("div",{class:kc.spikeRampLabel,styles:o},e),F("div",{class:kc.spikeRampLabel,styles:u},r),F("div",{class:kc.spikeRampLabel,styles:h},s))}function QN(t){return t.infos.filter((e,i)=>i%2==0)}const P8e="#ddd",Uy=window.devicePixelRatio;function O8e(t){if(!t)return;if(t.type.includes("3d")){if(!t.symbolLayers?.length)return;const i=t.symbolLayers.at(-1),r=i.resource?.primitive;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function k8e(t){if(t){if(t.type.includes("3d")){if(!t.symbolLayers?.length)return;const e=t.symbolLayers.at(-1),i=e?.resource?.primitive;return i==="triangle"||i==="cone"||i==="tetrahedron"}return t.style==="triangle"}}let mf=class extends Wi{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return F("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},Hne(this.legendElement));const{legendElement:e,hasIndicators:i,opacity:r}=this,s=e.infos,n=s.at(0),a=s.at(-1);if(!n||!a)return null;const{label:o,...u}=n,{label:h,...p}=a;let y=u.preview,v=p.preview;const b={"flex-direction":i?"column":"row-reverse"};if(!y||!v)return null;y=y.cloneNode(!0),y.style.display="flex",v=v.cloneNode(!0),v.style.display="flex";const w={opacity:`${r??""}`};return F("div",{class:this.classes(Be.layerRow,{[Be.sizeRampRow]:i})},F("div",{class:Be.rampLabel},i?o:h),F("div",{class:Be.sizeRampContainer,styles:b},F("div",{afterCreate:Fi,bind:y,class:Be.sizeRampPreview,styles:w}),this._renderSizeRampLines(e),F("div",{afterCreate:Fi,bind:v,class:Be.sizeRampPreview,styles:w})),F("div",{class:Be.rampLabel},i?h:o))}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),s=i.at(-1);if(!r||!s)return null;const n=r.symbol,a=this.hasIndicators,o=r.size&&typeof r.size=="number"?r.size:0,u=s.size&&typeof s.size=="number"?s.size:0,h=r.outlineSize||0,p=s.outlineSize||0,y=lt(o+h)*Uy,v=lt(u+p)*Uy,b=a?y:y+50*Uy,w=a?y/2+50*Uy:y,S=k8e(n),M=O8e(n),T=document.createElement("canvas");T.width=b,T.height=w,T.style.width=T.width/Uy+"px",T.style.height=T.height/Uy+"px";const I=T.getContext("2d");if(a){I.beginPath();const L=0,O=0,R=b/2-v/2,z=w;I.moveTo(L,O),I.lineTo(R,z);const j=b,U=0,B=b/2+v/2,Q=w;I.moveTo(j,U),I.lineTo(B,Q)}else{I.beginPath();const L=0,O=w/2-v/2,R=b;I.moveTo(L,O),I.lineTo(R,0);const j=0,U=w/2+v/2,B=b,Q=w;I.moveTo(j,U),I.lineTo(B,Q)}return I.strokeStyle=P8e,I.stroke(),F("div",{afterCreate:Fi,bind:T,styles:a?{display:"flex",marginTop:`-${S?0:M?y/2:0}px`,marginBottom:`-${S?v:M?v/2:0}px`}:{display:"flex",marginRight:`-${S?0:M?y/2:0}px`,marginLeft:`-${S?0:M?v/2:0}px`}})}};d([m()],mf.prototype,"hasIndicators",void 0),d([m()],mf.prototype,"legendElement",void 0),d([m()],mf.prototype,"messages",void 0),d([m()],mf.prototype,"opacity",void 0),mf=d([N("esri.widgets.Legend.styles.card.SizeRamp")],mf);const R8e=aT(),Wne=10,KN=20,xE=10,ez=20,tz={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function D8e(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?F("svg",{height:"4",width:"10"},F("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):F("svg",{height:"10",width:"10"},F("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function N8e(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${KN}px`,i.className=tz.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),R8e.append(i,D8e.bind(null,e)),i}function Zne(t,e,i="vertical",r){t.infos.forEach((s,n)=>{if(r&&n===2)s.preview=N8e(e,i);else{const a=(H0(s.size)?lt(s.size):0)+(i==="horizontal"?ez:xE),o=s.preview,u=o?.tagName.toLowerCase()==="div",h=u?o:document.createElement("div");h.className=tz.univariateAboveAndBelowSymbol,i==="horizontal"?h.style.width=`${a}px`:h.style.height=`${a}px`,!u&&o&&h.appendChild(o),s.preview=h}})}function $E(t,e="classic"){const i=t.infos,r=i.at(0),s=i.at(-1),n=H0(r.size)?lt(r.size):0,a=H0(s.size)?lt(s.size):0;return e==="classic"?(n+xE)/2:(n-a)/2}function K0(t,e){if(!t)return null;const i=t.infos.map(s=>s.color),r=uf(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,cssEffectFilter:e.cssEffectFilter,ariaLabel:e.ariaLabel});return r.className=tz.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function iz(t,e,i,r="vertical"){let s=0;const n=t.infos,a=Math.floor(n.length/2),o=e==="full"||e==="above"?0:a,u=e==="full"||e==="below"?n.length-1:a;for(let h=o;h<=u;h++)if(i&&h===a)s+=r==="horizontal"?Wne:KN;else{const p=n[h].size;s+=(H0(p)?lt(p):0)+(r==="horizontal"?ez:xE)}return Math.round(s)}function ev(t,e,i,r="vertical"){const s=iz(t,e,i,r),n=t.infos,a=Math.floor(n.length/2),o=e==="full"||e==="above"?0:a,u=e==="full"||e==="below"?n.length-1:a,h=H0(n[o].size)?n[o].size:0,p=H0(n[u].size)?n[u].size:0,y=e==="full"?h+p:e==="above"?h:p,v=i?r==="vertical"?KN:Wne:0,b=r==="vertical"?xE*(e==="full"?2:1):ez*(e==="full"?2:1);return Math.round(s-(lt(y)/2+v/2+b/2))}function Yne(t,e,i="vertical"){const r=t.infos;let s=r.find(({type:a})=>a==="size-ramp"),n=r.find(({type:a})=>a==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],Zne(s,e,i,!0)),n&&(n={...n},n.infos=[...n.infos]),i==="horizontal"&&(s?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}function Jne(t,e="vertical"){const i=t.infos;let r=i.find(({type:n})=>n==="size-ramp"),s=i.find(({type:n})=>n==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],Zne(r,null,e,!1)),s&&(s={...s},s.infos=[...s.infos]),e==="horizontal"&&(r?.infos.reverse(),s?.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}const R5={marginLeft:"3px"},Rg={display:"table-cell",verticalAlign:"middle"},Xne={display:"flex",alignItems:"flex-start"};let yf=class extends Wi{constructor(e,i){super(e,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,cssEffectFilter:r,key:s}=this,{sizeRampElement:n,colorRampElement:a}=Yne(e,i,"horizontal");if(!n)return null;const o=iz(n,"full",!0,"horizontal"),u=ev(n,"above",!0,"horizontal"),h=ev(n,"below",!0,"horizontal"),p=12,y=this.messages?.previewColorRampAriaLabel,v=K0(a,{width:u,height:p,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:r,ariaLabel:y}),b=K0(a,{width:h,height:p,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:r,ariaLabel:y}),w=$E(n,"card"),S=n.infos.map(z=>z.label),M=S.length-1,T=S.map((z,j)=>j===0||j===M?F("div",{key:j},z):null),I={display:"flex",flexDirection:"column"},L={display:"flex",flexDirection:"row"},O={marginTop:"3px",display:"flex"};K3(this.container)?O.marginRight=`${w}px`:O.marginLeft=`${w}px`;const R={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return F("div",{class:Be.layerRow,key:`${s}-container`,styles:I},F("div",{class:this.classes(Be.symbolContainer,Be.sizeRampHorizontal),styles:L},n.infos.map((z,j)=>F("div",{afterCreate:Fi,bind:z.preview,class:Be.symbol,key:j}))),v?F("div",{class:Be.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:O},F("div",{afterCreate:Fi,bind:v}),F("div",{afterCreate:Fi,bind:b})):null,F("div",{class:Be.layerInfo},F("div",{class:Be.rampLabelsContainer,styles:R},T)))}};d([m()],yf.prototype,"cssEffectFilter",void 0),d([m()],yf.prototype,"legendElement",void 0),d([m()],yf.prototype,"messages",void 0),d([m()],yf.prototype,"opacity",void 0),yf=d([N("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],yf);let gf=class extends Wi{constructor(e,i){super(e,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,cssEffectFilter:r,key:s}=this,{sizeRampElement:n,colorRampElement:a}=Jne(e,"horizontal");if(!n)return null;const o=iz(n,"full",!1,"horizontal"),u=ev(n,"full",!1,"horizontal"),h=K0(a,{width:u,height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),p=$E(n,"card"),y=n.infos.length-1,v=n.infos.map((T,I)=>I===0||I===y?F("div",{key:I},T.label):null),b={display:"flex",flexDirection:"column"},w={display:"flex",flexDirection:"row"},S={marginTop:"3px",display:"flex"};K3(this.container)?S.marginRight=`${p}px`:S.marginLeft=`${p}px`;const M={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return F("div",{class:Be.layerRow,key:`${s}-container`,styles:b},F("div",{class:this.classes(Be.symbolContainer,Be.sizeRampHorizontal),styles:w},n.infos.map((T,I)=>F("div",{afterCreate:Fi,bind:T.preview,class:Be.symbol,key:I}))),F("div",{class:Be.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:S},F("div",{afterCreate:Fi,bind:h})),F("div",{class:Be.layerInfo},F("div",{class:Be.rampLabelsContainer,styles:M},v)))}};d([m()],gf.prototype,"cssEffectFilter",void 0),d([m()],gf.prototype,"legendElement",void 0),d([m()],gf.prototype,"messages",void 0),d([m()],gf.prototype,"opacity",void 0),gf=d([N("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],gf);function t0({level:t,class:e,...i},r){const s=Qne(t);return F(`h${s}`,{...i,"aria-level":String(s),class:Lg(ui.heading,e),role:"heading"},r)}function Qne(t){return ys(Math.ceil(t),1,6)}function z8e(t,e=1){return Qne(t+e)}var D5;let Ga=D5=class extends Wi{constructor(t,e){super(t,e),this.cssEffectFilter=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=qne(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?F("div",null,F(t0,{class:Be.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),F(t0,{class:Be.layerCaption,level:z8e(this.headingLevel)},e)):e?F(t0,{class:Be.layerCaption,level:this.headingLevel},e):null;return F("section",{"aria-labelledby":this.key,class:Be.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return F(mf,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return F(ff,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return gse(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:t}=this.legendElement;if(!t)return null;const e=Gc(this.messages.previewPieChartAriaLabel,{label:null});return e&&t.querySelector("svg")?.setAttribute("aria-label",e),F("div",{afterCreate:Fi,bind:t,class:Be.pieChartRampPreview,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return F(yf,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return F(gf,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map(n=>this._renderElementInfo(n,t.legendType)).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some(({type:n})=>n==="relationship-ramp"),r=e[0]?.properties?.classes?.[Be.symbolRow],s={[Be.labelContainer]:!r&&!i,[Be.relationshipLabelContainer]:i};return F("div",{class:this.classes(s)},e)}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,s=`${this.key}-${r}`;if("type"in t&&t.type)return F(D5,{activeLayerInfo:this.activeLayerInfo,cssEffectFilter:this.cssEffectFilter,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:s,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const n=Une(i,e),a=Fc(this.messages,r,!1)||"";if("src"in t&&t.src)return F("div",{class:Be.layerRow,key:`${s}-row`},this._renderImage(t,i,n),F("div",{class:Be.imageLabel},a));if("symbol"in t&&t.preview){if(!t.symbol?.type.includes("simple-fill")){if(!t.label)return F("div",{afterCreate:Fi,bind:t.preview,key:`${s}-row`});const o={[Be.symbolCell]:this.hasIndicators},{preview:u}=t,h="previewAriaLabel"in t?t.previewAriaLabel:null,p="label"in t?Fc(this.messages,t.label,!1):null,y=u.querySelector("svg"),v=JT(this.messages,h||p);return v&&y&&y.setAttribute("aria-label",v),F("div",{class:this.classes(Be.layerRow,{[Be.symbolRow]:this.hasIndicators}),key:`${s}-row`},F("div",{afterCreate:Fi,bind:u,class:this.classes(o)}),F("div",{class:this.classes(Be.imageLabel,{[Be.labelCell]:this.hasIndicators})},a))}return F("div",{class:Be.layerRow,key:`${s}-row`},F("div",{class:Be.labelElement,styles:this._getBackgroundStyles(t)},a))}return null}_getBackgroundStyles(t){const e=t.symbol,i=e.color,r=!!i?.a,s="outline"in e?e.outline:null,n=!!s?.color?.a,a=new we(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),o=n&&s.color?new we([s.color.r,s.color.g,s.color.b,s.color.a*this.layer.opacity]):new we([255,255,255,0]),u=t.symbol.color?.isBright??!0,h=u?"black":"white",p=u?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?a.toCss(!0):"none",color:h,textShadow:`-1px -1px 0 ${p},
                  1px -1px 0 ${p},
                  -1px 1px 0 ${p},
                  1px 1px 0 ${p}`,border:n?`1px solid ${o.toCss(!0)}`:"none",filter:this.cssEffectFilter??void 0}}_renderImage(t,e,i){const{previewAriaLabel:r,src:s,opacity:n}=t,a=Fc(this.messages,t.label,!1),o={[Be.imageryLayerStretchedImage]:i,[Be.symbol]:!i},u={opacity:`${n??e.opacity}`},h=JT(this.messages,r||a);return F("img",{alt:h,"aria-label":h,border:0,class:this.classes(o),height:t.height,src:s,styles:u,width:t.width})}};d([m()],Ga.prototype,"activeLayerInfo",void 0),d([m()],Ga.prototype,"cssEffectFilter",void 0),d([m()],Ga.prototype,"hasIndicators",void 0),d([m()],Ga.prototype,"headingLevel",void 0),d([m()],Ga.prototype,"isChild",void 0),d([m()],Ga.prototype,"layer",void 0),d([m()],Ga.prototype,"legendElement",void 0),d([m()],Ga.prototype,"messages",void 0),Ga=D5=d([N("esri.widgets.Legend.styles.card.LegendElement")],Ga);const F8e=768;let Ba=class extends Wi{constructor(e,i){super(e,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return Yc({carousel:()=>K(()=>import("./index-Dr8XRocL.js"),__vite__mapDeps([350,291,292,288,293,326,294,297,314,289,290,299]),import.meta.url),"carousel-item":()=>K(()=>import("./index-Dyb1lWbI.js"),__vite__mapDeps([351,288]),import.meta.url)})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=F8e||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[Be.stacked]:this._hasIndicators};return F("div",{class:this.classes(Be.base,i)},e||F("div",{class:Be.message},this.messages.noLegend))}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e?.length?F("calcite-carousel",{class:Be.carousel,label:this.messages.carousel},e.map((r,s)=>F("calcite-carousel-item",{class:Be.carouselItem,key:s,label:Gc(this.messagesCommon.pagination.pageText,{index:s+1,total:e.length})},r))):null}_renderLayers(){const e=this.activeLayerInfos,i=e?.toArray()?.map(r=>this._renderLegendForLayer(r)).filter(Boolean);return i?.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return F("section",{class:this.classes(Be.service,Be.groupLayer),key:e.layer.uid},F("div",{class:Be.serviceCaptionContainer},e.title),i)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const i=e.legendElements?.filter(Boolean);if(!i?.length)return null;const r=i.map(n=>F(Ga,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${n.type}`,layer:e.layer,legendElement:n,messages:this.messages})),s={[Be.groupLayerChild]:!!e.parent};return F("section",{class:this.classes(Be.service,s),key:e.layer.uid},F("div",{class:Be.serviceCaptionContainer},F("div",{class:Be.serviceCaptionText},e.title)),F("div",{class:Be.serviceContent},r))}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const s of e.children)this._renderSections(s,i);const r=e.legendElements;if(r?.length)for(const s of r){const n=F(Ga,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages});n&&i.push(n)}}};d([m()],Ba.prototype,"activeLayerInfos",void 0),d([m()],Ba.prototype,"headingLevel",void 0),d([m()],Ba.prototype,"layout",void 0),d([m(),Hn("esri/widgets/Legend/t9n/Legend")],Ba.prototype,"messages",void 0),d([m(),Hn("esri/t9n/common")],Ba.prototype,"messagesCommon",void 0),d([m({readOnly:!0})],Ba.prototype,"type",void 0),d([m()],Ba.prototype,"view",void 0),Ba=d([N("esri.widgets.Legend.styles.card.CardView")],Ba);const gi="esri-legend",Ye={service:`${gi}__service`,label:`${gi}__service-label`,layer:`${gi}__layer`,groupLayer:`${gi}__group-layer`,groupLayerChild:`${gi}__group-layer-child`,layerTable:`${gi}__layer-table`,layerTableSizeRamp:`${gi}__layer-table--size-ramp`,layerChildTable:`${gi}__layer-child-table`,layerCaption:`${gi}__layer-caption`,layerBody:`${gi}__layer-body`,layerRow:`${gi}__layer-row`,layerInfo:`${gi}__layer-cell ${gi}__layer-cell--info`,imageryLayerStretchedImage:`${gi}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${gi}__imagery-layer-info--stretched`,symbolContainer:`${gi}__layer-cell ${gi}__layer-cell--symbols`,symbol:`${gi}__symbol`,rampContainer:`${gi}__ramps`,sizeRamp:`${gi}__size-ramp`,colorRamp:`${gi}__color-ramp`,opacityRamp:`${gi}__opacity-ramp`,rampLabelsContainer:`${gi}__ramp-labels`,rampLabel:`${gi}__ramp-label`,message:`${gi}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},V8e=24;let vf=class extends Wi{constructor(e,i){super(e,i),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp"?Ye.opacityRamp:"";return e.className=`${Ye.colorRamp} ${i}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={width:`${V8e}px`},s={height:i.style.height},n=Gc(this.messages.previewColorRampAriaLabel,{label:null});return n&&i.querySelector("svg")?.setAttribute("aria-label",n),F("div",{class:Ye.layerRow,key:`${this.key}-row`},F("div",{class:Ye.symbolContainer,styles:r},F("div",{afterCreate:Fi,bind:i,class:Ye.rampContainer})),F("div",{class:Ye.layerInfo},F("div",{class:Ye.rampLabelsContainer,styles:s},e.infos.map((a,o)=>this._renderRampLabel(a,o,e.type)))))}_renderRampLabel(e,i,r){return F("div",{class:e.label?Ye.rampLabel:void 0,key:`${this.key}-stop-${e.label??i}-label`},Gne(e,r,this.messages))}};d([m()],vf.prototype,"_preview",null),d([m()],vf.prototype,"legendElement",void 0),d([m()],vf.prototype,"messages",void 0),d([m()],vf.prototype,"opacity",void 0),vf=d([N("esri.widgets.Legend.styles.classic.ColorRamp")],vf);let eb=class extends Wi{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?Hne(this.legendElement):F("div",{class:Ye.layerBody},e):null}_renderRow(e){return e.preview?F("div",{class:Ye.layerRow,key:`${this.key}-${e.label}-row`},F("div",{class:this.classes(Ye.symbolContainer,Ye.sizeRamp)},F("div",{afterCreate:Fi,bind:e.preview,class:Ye.symbol})),F("div",{class:Ye.layerInfo},Fc(this.messages,e.label,!1)||"")):null}};d([m()],eb.prototype,"legendElement",void 0),d([m()],eb.prototype,"messages",void 0),eb=d([N("esri.widgets.Legend.styles.classic.SizeRamp")],eb);let _f=class extends Wi{constructor(e,i){super(e,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,cssEffectFilter:r,key:s}=this,{sizeRampElement:n,colorRampElement:a}=Yne(e,i);if(!n)return null;const o=this.messages.previewColorRampAriaLabel,u=ev(n,"above",!0),h=ev(n,"below",!0),p=12,y=K0(a,{width:p,height:u,rampAlignment:"vertical",opacity:i,type:"above",cssEffectFilter:r,ariaLabel:o}),v=K0(a,{width:p,height:h,rampAlignment:"vertical",opacity:i,type:"below",cssEffectFilter:r,ariaLabel:o}),b=$E(n),w=n.infos.map(j=>j.label),S=w.map((j,U)=>U===0?F("div",{class:j?y?Ye.univariateAboveAndBelowLabel:Ye.rampLabel:void 0,key:`${s}-color-ramp-above-label-${j??U}`},j):U===2?F("div",null):null),M=w.length-1,T=Math.floor(w.length/2),I=w.map((j,U)=>U===T||U===M?F("div",{class:j?y?Ye.univariateAboveAndBelowLabel:Ye.rampLabel:void 0,key:`${s}-color-ramp-below-label-${j??U}`},j):null),L={display:"table-cell",verticalAlign:"middle"},O={marginTop:`${b}px`},R={height:`${u}px`},z={height:`${h}px`};return F("div",{key:`${s}-container`,styles:Xne},F("div",{class:Ye.layerBody},n.infos.map((j,U)=>F("div",{class:this.classes(Ye.layerRow,Ye.sizeRamp),key:`${s}-row-${U}`},F("div",{afterCreate:Fi,bind:j.preview,class:Ye.symbol,styles:L}),y||U%2!=0?null:F("div",{class:Ye.layerInfo},w[U])))),y?F("div",{styles:O},F("div",{styles:R5},F("div",{styles:Rg},F("div",{afterCreate:Fi,bind:y,class:Ye.rampContainer})),F("div",{styles:Rg},F("div",{class:Ye.rampLabelsContainer,styles:R},S))),F("div",{styles:R5},F("div",{styles:Rg},F("div",{afterCreate:Fi,bind:v,class:Ye.rampContainer})),F("div",{styles:Rg},F("div",{class:Ye.rampLabelsContainer,styles:z},I)))):null)}};d([m()],_f.prototype,"cssEffectFilter",void 0),d([m()],_f.prototype,"legendElement",void 0),d([m()],_f.prototype,"messages",void 0),d([m()],_f.prototype,"opacity",void 0),_f=d([N("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],_f);let bf=class extends Wi{constructor(e,i){super(e,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,cssEffectFilter:r,key:s}=this,{sizeRampElement:n,colorRampElement:a}=Jne(e);if(!n)return null;const o=$E(n),u=12,h=ev(n,"full",!1),p=K0(a,{width:u,height:h,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),y=n.infos.length-1,v=n.infos.map((M,T)=>T===0||T===y?F("div",{class:M.label?a?Ye.univariateAboveAndBelowLabel:Ye.rampLabel:void 0,key:`${s}-color-ramp-label-${M.label??T}`},M.label):null),b={display:"table-cell",verticalAlign:"middle"},w={marginTop:`${o}px`},S={height:`${h}px`};return F("div",{key:`${s}-container`,styles:Xne},F("div",{class:Ye.layerBody},n.infos.map((M,T)=>F("div",{class:this.classes(Ye.layerRow,Ye.sizeRamp),key:`${s}-row-${T}`},F("div",{afterCreate:Fi,bind:M.preview,class:Ye.symbol,styles:b})))),F("div",{styles:w},F("div",{styles:R5},F("div",{styles:Rg},F("div",{afterCreate:Fi,bind:p,class:Ye.rampContainer})),F("div",{styles:Rg},F("div",{class:Ye.rampLabelsContainer,styles:S},v)))))}};d([m()],bf.prototype,"cssEffectFilter",void 0),d([m()],bf.prototype,"legendElement",void 0),d([m()],bf.prototype,"messages",void 0),d([m()],bf.prototype,"opacity",void 0),bf=d([N("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],bf);var N5;let td=N5=class extends Wi{constructor(t,e){super(t,e),this.cssEffectFilter=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=qne(this.legendElement,this.messages),i=this.isChild?Ye.layerChildTable:Ye.layerTable,r=e?F("div",{class:Ye.layerCaption},e):null,s={[Ye.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return F("section",{class:this.classes(i,s),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return F(eb,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return F(vf,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return gse(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:t}=this.legendElement;if(!t)return null;const e=Gc(this.messages.previewPieChartAriaLabel,{label:null});return e&&t.querySelector("svg")?.setAttribute("aria-label",e),F("div",{afterCreate:Fi,bind:t,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return F(_f,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return F(bf,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map(i=>this._renderElementInfo(i,t.legendType)).filter(Boolean);return e.length?F("div",{class:Ye.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,s=`${this.key}-${r}`;if("type"in t&&t.type)return F(N5,{cssEffectFilter:this.cssEffectFilter,isChild:!0,key:s,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const n=Une(i,e),a={[Ye.imageryLayerInfoStretched]:n},o={[Ye.imageryLayerInfoStretched]:n};return F("div",{class:Ye.layerRow,key:`${s}-row`},F("div",{class:this.classes(Ye.symbolContainer,o)},this._renderPreview(t,n)),F("div",{class:this.classes(Ye.layerInfo,a)},Fc(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;if("preview"in t&&t.preview){const{preview:r}=t,s="previewAriaLabel"in t?t.previewAriaLabel:null,n="label"in t?Fc(this.messages,t.label,!1):null,a=r.querySelector("svg"),o=JT(this.messages,s||n);return o&&a&&a.setAttribute("aria-label",o),F("div",{afterCreate:Fi,bind:r,class:Ye.symbol})}return"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{previewAriaLabel:r,src:s,opacity:n}=t,a=Fc(this.messages,t.label,!1),o={[Ye.imageryLayerStretchedImage]:i,[Ye.symbol]:!i},u={opacity:`${n??e.opacity}`},h=JT(this.messages,r||a);return F("img",{alt:h,"aria-label":h,border:0,class:this.classes(o),height:t.height,src:s,styles:u,width:t.width})}};d([m()],td.prototype,"cssEffectFilter",void 0),d([m()],td.prototype,"isChild",void 0),d([m()],td.prototype,"layer",void 0),d([m()],td.prototype,"legendElement",void 0),d([m()],td.prototype,"messages",void 0),td=N5=d([N("esri.widgets.Legend.styles.classic.LegendElement")],td);const j8e=`${gi}__`;let Ja=class extends Wi{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e?.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return i?.length?F("section",null,i):F("div",{class:Ye.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,i){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,s=`${j8e}${i?`${i}-`:""}${r}`,n=e.title?t0({level:this.headingLevel,class:this.classes(ui.heading,Ye.label)},e.title):null;if(e.children.length){const a=e.children.toArray().map(o=>this._renderLegendForLayer(o,r));return F("section",{class:this.classes(Ye.service,Ye.groupLayer),key:s},n,a)}return this._renderLegendElementsForLayer(e,n,s)}_renderLegendElementsForLayer(e,i,r){const s=e.legendElements?.filter(Boolean);if(!s?.length)return null;const n=s.map(o=>F(td,{cssEffectFilter:e.cssEffectFilter,isChild:!1,key:`${r}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages})),a={[Ye.groupLayerChild]:!!e.parent};return F("section",{class:this.classes(Ye.service,a),key:r},i,F("div",{class:Ye.layer},n))}};d([m()],Ja.prototype,"activeLayerInfos",void 0),d([m()],Ja.prototype,"headingLevel",void 0),d([m(),Hn("esri/widgets/Legend/t9n/Legend")],Ja.prototype,"messages",void 0),d([m({readOnly:!0})],Ja.prototype,"type",void 0),Ja=d([N("esri.widgets.Legend.styles.classic.ClassicView")],Ja);const U8e={base:"esri-legend"};let Rr=class extends Wi{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new Cn,this.style=new Ja,Pw(le.getLogger(this),"Legend","arcgis-legend",{version:"4.34"})}initialize(){this.addHandles([Vs(()=>this.view,"resize",()=>this.scheduleRender()),Vs(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),_e(()=>this.headingLevel,e=>{const{style:i}=this;i&&(i.headingLevel=e)}),_e(()=>this.style,(e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},Lt)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const i=this._get("style");e!==i&&i?.destroy(),this._set("style",e)}castStyle(e){if(e instanceof Ba||e instanceof Ja)return e;if(typeof e=="string")return e==="card"?new Ba:new Ja;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,e.type==="card"?new Ba(i):new Ja(i)}return new Ja}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return F("div",{class:this.classes(U8e.base,ui.widget,this.style instanceof Ja?ui.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=_e(()=>e.version,()=>this.scheduleRender());this.addHandles(i,`version_${e.layer.uid}`);const r=Vs(()=>e.children,"change",()=>e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s)),Lt);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s))}};d([m()],Rr.prototype,"activeLayerInfos",null),d([m()],Rr.prototype,"basemapLegendVisible",null),d([m()],Rr.prototype,"groundLegendVisible",null),d([m()],Rr.prototype,"headingLevel",void 0),d([m()],Rr.prototype,"hideLayersNotInCurrentView",null),d([m()],Rr.prototype,"keepCacheOnDestroy",null),d([m()],Rr.prototype,"respectLayerDefinitionExpression",null),d([m()],Rr.prototype,"respectLayerVisibility",null),d([m()],Rr.prototype,"icon",null),d([m()],Rr.prototype,"label",null),d([m()],Rr.prototype,"layerInfos",null),d([m(),Hn("esri/widgets/Legend/t9n/Legend")],Rr.prototype,"messages",void 0),d([m()],Rr.prototype,"style",null),d([Nt("style")],Rr.prototype,"castStyle",null),d([m()],Rr.prototype,"view",null),d([m()],Rr.prototype,"viewModel",void 0),Rr=d([N("esri.widgets.Legend")],Rr);const Kne=Rr,G8e=Object.freeze(Object.defineProperty({__proto__:null,default:Kne},Symbol.toStringTag,{value:"Module"}));let id=class extends Ce{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Vs(()=>this.view?.ui,"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const i=!!e;this._set("expanded",i);const r=this.view?.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&Kr(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?Kr(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const s=Eye(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(s,e),this._viewpointHandle=s}_collapse(){this.expanded=!1}};d([m({value:!1})],id.prototype,"autoCollapse",null),d([m({value:!1})],id.prototype,"expanded",null),d([m()],id.prototype,"group",void 0),d([m({readOnly:!0})],id.prototype,"state",null),d([m({value:null})],id.prototype,"view",null),id=d([N("esri.widgets.Expand.ExpandViewModel")],id);const eae=id,Vh="esri-expand",ia={base:Vh,toggle:`${Vh}__toggle`,popoverContent:`${Vh}__popover-content`,panel:`${Vh}__panel`,panelContent:`${Vh}__panel-content`,sheet:`${Vh}__sheet`,contentContainer:`${Vh}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconNumber:`${Vh}__icon-number`},LB="chevrons-left",AB="chevrons-right",WA=Symbol("scheduleRender-override-handle");let Ci=class extends Wi{constructor(e,i){super(e,i),this._boundScheduledRender=this.scheduleRender.bind(this),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.focusTrapDisabled=!1,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new eae,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=r=>{r.target===this._popoverEl&&(this.viewModel.expanded=r.currentTarget.open)},this._handleSheetClose=r=>{this.viewModel.expanded=r.currentTarget.open},this._handlePanelClose=r=>{this.viewModel.expanded=!r.currentTarget.closed},this._handleKeyDown=r=>{this.viewModel.expanded&&r.key==="Escape"&&!this._willCloseOnEsc(r)&&r.preventDefault()},this._storeToggleActionEl=r=>{this._toggleActionEl=r},this._storePopoverEl=r=>{this._popoverEl=r},Pw(le.getLogger(this),"Expand","arcgis-expand",{version:"4.34"})}initialize(){this.addHandles(_e(()=>this.viewModel?.view?.size,()=>this._popoverEl?.reposition(),Lt))}loadDependencies(){return Yc({action:()=>K(()=>import("./index-ARj2DFlA.js"),__vite__mapDeps([303,287,288,289,290,291,292,293,304,294,297,299,296]),import.meta.url),icon:()=>K(()=>import("./index-CgzgUqVR.js").then(e=>e.i),__vite__mapDeps([291,292,288,293]),import.meta.url),panel:()=>K(()=>import("./index-b3ygKNJX.js").then(e=>e.i),__vite__mapDeps([332,291,292,288,293,287,289,290,303,304,294,297,299,296,306,307,308,309,295,310,311,312,313,314,324]),import.meta.url),popover:()=>K(()=>import("./index-DyvJWL-X.js").then(e=>e.i),__vite__mapDeps([306,287,288,289,290,291,292,293,303,304,294,297,299,296,307,308,309,295,310,311,312]),import.meta.url),sheet:()=>K(()=>import("./index-ChWB8Duk.js"),__vite__mapDeps([352,287,288,289,290,324,294,293,292,291,304,353,309,317,311,299]),import.meta.url)})}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:r,expandTooltip:s}=this;return(e?r||i?.collapse:s||i?.expand)??""}get _displaySheet(){switch(this.mode){case"drawer":return!0;case"auto":return this.viewModel.view?.widthBreakpoint==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return AB}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return typeof this.content=="object"&&"icon"in this.content&&this.content.icon?this.content.icon:LB}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){return typeof this.content=="object"&&"label"in this.content&&this.content.label?this.content.label:this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleActionEl:i,viewModel:{expanded:r},label:s,placement:n}=this;return F("div",{class:this.classes(ia.base,ui.widget)},this._renderToggle(),e?F("calcite-sheet",{class:ia.sheet,heightScale:"l",label:s,onkeydown:this._handleKeyDown,open:r,position:"block-end",onCalciteSheetClose:this._handleSheetClose},F("calcite-panel",{class:ia.panel,closable:!0,closed:!r,heading:s,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},F("div",{class:ia.panelContent},this._renderContent()))):i?F("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,focusTrapDisabled:this.focusTrapDisabled,label:s,onkeydown:this._handleKeyDown,open:r,overlayPositioning:"fixed",placement:n??this._getPlacement(),referenceElement:i,onCalcitePopoverClose:this._handlePopoverClose},F("div",{class:ia.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:i}=this,r=e&&i?i.ui.getPosition(e):null;if(!r||r==="manual")return"auto";const[s,n]=r.split("-");return`${n==="right"?"left":"right"}-${s==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:i}=this;return typeof i=="function"?i(e):i}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?F("span",{class:ia.iconNumber,key:"expand__icon-number"},i):null}_renderToggleButton(){const{expanded:e,expandTitle:i,expandIcon:r,collapseIcon:s}=this,n=e?s:r,a=n===LB||n===AB;return F("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:ui.widgetButton,onclick:this.toggle,scale:"s",text:i,title:i},n?F("calcite-icon",{class:this.classes(ia.icon,a&&ia.iconFlip),icon:n,scale:"s"}):null)}_renderToggle(){return F("div",{class:ia.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?F("div",{class:ia.contentContainer,innerHTML:e,key:"content__string"}):y5(e)?F("div",{afterCreate:()=>{this._overwriteChildScheduleRender(e)},afterRemoved:()=>this.removeHandles(WA),afterUpdate:()=>{e.scheduleRender!==this._boundScheduledRender&&(this.removeHandles(WA),this._overwriteChildScheduleRender(e))},class:ia.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?F("div",{afterCreate:this._attachToNode,bind:e,class:ia.contentContainer,key:"content__html-element"}):o5e(e)?F("div",{afterCreate:this._attachToNode,bind:e.domNode,class:ia.contentContainer,key:"content__node"}):null}_overwriteChildScheduleRender(e){const i=e.scheduleRender;e.scheduleRender=this._boundScheduledRender,this.addHandles(vt(()=>e.scheduleRender=i),WA)}_attachToNode(e){const i=this;e.appendChild(i)}};d([m({readOnly:!0})],Ci.prototype,"expandTitle",null),d([m()],Ci.prototype,"_toggleActionEl",void 0),d([m()],Ci.prototype,"_displaySheet",null),d([m()],Ci.prototype,"autoCollapse",null),d([m()],Ci.prototype,"closeOnEsc",void 0),d([m()],Ci.prototype,"collapseIcon",null),d([m()],Ci.prototype,"collapseTooltip",void 0),d([m()],Ci.prototype,"content",void 0),d([m()],Ci.prototype,"expanded",null),d([m()],Ci.prototype,"expandIcon",null),d([m()],Ci.prototype,"expandTooltip",void 0),d([m()],Ci.prototype,"focusTrapDisabled",void 0),d([m()],Ci.prototype,"group",null),d([m()],Ci.prototype,"icon",null),d([m()],Ci.prototype,"iconNumber",void 0),d([m()],Ci.prototype,"label",null),d([m(),Hn("esri/widgets/Expand/t9n/Expand")],Ci.prototype,"messages",void 0),d([m(),Hn("esri/t9n/common")],Ci.prototype,"messagesCommon",void 0),d([m()],Ci.prototype,"mode",void 0),d([m()],Ci.prototype,"placement",void 0),d([m()],Ci.prototype,"view",null),d([m({type:eae})],Ci.prototype,"viewModel",void 0),Ci=d([N("esri.widgets.Expand")],Ci);const ZA=Ci;async function z5(t,e){const{data:i}=await Ot(t,{responseType:"json",query:{f:"json",...e?.customParameters,token:e?.apiKey}});return i}let tae=class{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,i){const r=this._serviceMetadatas.get(e);if(r)return r;const s=await z5(e,i);return this._serviceMetadatas.set(e,s),s}async fetchItemData(e){const{id:i}=e;if(!i)return null;const{_itemDatas:r}=this;if(r.has(i))return r.get(i);const s=await e.fetchData();return r.set(i,s),s}async fetchCustomParameters(e,i){const r=await this.fetchItemData(e);return r&&typeof r=="object"&&(i?i(r):r.customParameters)||null}};const No={BingMapsLayer:async()=>(await K(async()=>{const{default:t}=await import("./BingMapsLayer-DBwtOXff.js");return{default:t}},__vite__mapDeps([354,355]),import.meta.url)).default,BuildingSceneLayer:async()=>(await K(async()=>{const{default:t}=await import("./BuildingSceneLayer-DfQk-qRh.js");return{default:t}},__vite__mapDeps([356,159,160,161,63,162,4,163,164,165,166,167,168,169,170,171,172,357,358,359,302,360,361,362,363,117,54,113,101,95,98,364,99,94,52,53,100,133,223,281]),import.meta.url)).default,CSVLayer:async()=>(await K(async()=>{const{default:t}=await import("./CSVLayer-CY92gaV4.js");return{default:t}},__vite__mapDeps([365,159,160,161,63,162,4,163,164,165,166,167,168,169,170,171,172]),import.meta.url)).default,CatalogLayer:async()=>(await K(async()=>{const{default:t}=await import("./CatalogLayer-CURo_tF0.js");return{default:t}},__vite__mapDeps([366,14,15,160,367,50,55,368,169,369,94,95,370,300,163,371,372,62,60,61,22,25,63,155,24,161,162,4,164,165,166,167,168,170,172]),import.meta.url)).default,DimensionLayer:async()=>(await K(async()=>{const{default:t}=await import("./DimensionLayer-C8plNY2o.js");return{default:t}},__vite__mapDeps([373,374]),import.meta.url)).default,ElevationLayer:async()=>(await K(async()=>{const{default:t}=await import("./ElevationLayer-B52fTs3M.js");return{default:t}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)).default,FeatureLayer:async()=>(await K(async()=>{const{default:t}=await import("./FeatureLayer-CPKsrUVP.js");return{default:t}},__vite__mapDeps([159,160,161,63,162,4,163,164,165,166,167,168,169,170,171,172]),import.meta.url)).default,GaussianSplatLayer:async()=>(await K(async()=>{const{default:t}=await import("./GaussianSplatLayer--OtgxSEg.js");return{default:t}},__vite__mapDeps([375,162,4,376,281]),import.meta.url)).default,GeoJSONLayer:async()=>(await K(async()=>{const{default:t}=await Promise.resolve().then(()=>zRe);return{default:t}},void 0,import.meta.url)).default,GeoRSSLayer:async()=>(await K(async()=>{const{default:t}=await import("./GeoRSSLayer-zfhkvUd_.js");return{default:t}},[],import.meta.url)).default,GroupLayer:async()=>(await K(async()=>{const{default:t}=await Promise.resolve().then(()=>JVe);return{default:t}},void 0,import.meta.url)).default,ImageryLayer:async()=>(await K(async()=>{const{default:t}=await import("./ImageryLayer-CJCdcOOt.js");return{default:t}},__vite__mapDeps([377,157,242,378,104,103,19,105,15,110,355,185,379,372,62,60,61,22,25,63,155,4,172,281]),import.meta.url)).default,ImageryTileLayer:async()=>(await K(async()=>{const{default:t}=await import("./ImageryTileLayer-DXTF1hkZ.js");return{default:t}},__vite__mapDeps([380,158,4,381,242,378,104,103,19,105,15,110,82,244,108,107,106,379,185,109,3,281]),import.meta.url)).default,IntegratedMesh3DTilesLayer:async()=>(await K(async()=>{const{default:t}=await import("./IntegratedMesh3DTilesLayer-BxUqycMH.js");return{default:t}},__vite__mapDeps([382,162,4,383,376,281]),import.meta.url)).default,IntegratedMeshLayer:async()=>(await K(async()=>{const{default:t}=await import("./IntegratedMeshLayer-C4bkZUUS.js");return{default:t}},__vite__mapDeps([384,162,4,358,359,166,302,360,361,362,383,281]),import.meta.url)).default,KMLLayer:async()=>(await K(async()=>{const{default:t}=await import("./KMLLayer-pdX-AHo9.js");return{default:t}},__vite__mapDeps([385,246]),import.meta.url)).default,KnowledgeGraphLayer:async()=>(await K(async()=>{const{default:t}=await import("./KnowledgeGraphLayer-Chbu_XBL.js");return{default:t}},__vite__mapDeps([386,387,388,256,389,390,229,24,22,25,261,23,26,27,28,29,30,31,32,33,13,14,15,34,35,160,4]),import.meta.url)).default,LineOfSightLayer:async()=>(await K(async()=>{const{default:t}=await import("./LineOfSightLayer-Bs6ONO7y.js");return{default:t}},__vite__mapDeps([391,374,392,113,101,95,281]),import.meta.url)).default,LinkChartLayer:async()=>(await K(async()=>{const{default:t}=await import("./LinkChartLayer-Cpy2AIe8.js");return{default:t}},__vite__mapDeps([393,387,388,256,389,390,229,24,22,25,261,23,26,27,28,29,30,31,32,33,13,14,15,34,35,160]),import.meta.url)).default,MapImageLayer:async()=>(await K(async()=>{const{default:t}=await import("./MapImageLayer-D1F2DmC7.js");return{default:t}},__vite__mapDeps([394,162,395,371,169,372,62,60,61,22,25,63,155,24,170,165,167,168,4,355,172]),import.meta.url)).default,MapNotesLayer:async()=>(await K(async()=>{const{default:t}=await import("./MapNotesLayer-DZZx3UTG.js");return{default:t}},__vite__mapDeps([396,159,160,161,63,162,4,163,164,165,166,167,168,169,170,171,172,261,68]),import.meta.url)).default,MediaLayer:async()=>(await K(async()=>{const{default:t}=await import("./MediaLayer-THUHgJjQ.js");return{default:t}},__vite__mapDeps([397,251,88,263,26,27,138]),import.meta.url)).default,OGCFeatureLayer:async()=>(await K(async()=>{const{default:t}=await import("./OGCFeatureLayer-D8TxWgTW.js");return{default:t}},__vite__mapDeps([398,90,24,22,25,65,21,66,357,162,170]),import.meta.url)).default,OpenStreetMapLayer:async()=>(await K(async()=>{const{default:t}=await import("./OpenStreetMapLayer-CkgJyWOT.js");return{default:t}},__vite__mapDeps([399,400,355]),import.meta.url)).default,OrientedImageryLayer:async()=>(await K(async()=>{const{default:t}=await import("./OrientedImageryLayer-3_V7vsIC.js");return{default:t}},__vite__mapDeps([401,159,160,161,63,162,4,163,164,165,166,167,168,169,170,171,172]),import.meta.url)).default,ParquetLayer:async()=>(await K(async()=>{const{default:t}=await import("./ParquetLayer-B6VUTMgO.js");return{default:t}},__vite__mapDeps([402,147,37,85,82]),import.meta.url)).default,PointCloudLayer:async()=>(await K(async()=>{const{default:t}=await import("./PointCloudLayer-BMZQiwpO.js");return{default:t}},__vite__mapDeps([403,162,4,358,359,166,302,360,361,97,281]),import.meta.url)).default,RouteLayer:async()=>(await K(async()=>{const{default:t}=await import("./RouteLayer-Cw4FNevC.js");return{default:t}},__vite__mapDeps([404,359,256,255,389,183]),import.meta.url)).default,SceneLayer:async()=>(await K(async()=>{const{default:t}=await import("./SceneLayer-Bxz8qv09.js");return{default:t}},__vite__mapDeps([405,406,369,94,95,370,162,4,163,358,359,166,302,360,361,357,362,169,165,281,363,117,54,113,101,98,364,99,52,53,100,133,223]),import.meta.url)).default,StreamLayer:async()=>(await K(async()=>{const{default:t}=await import("./StreamLayer-BHV0_XPX.js");return{default:t}},__vite__mapDeps([407,4,77]),import.meta.url)).default,SubtypeGroupLayer:async()=>(await K(async()=>{const{default:t}=await import("./SubtypeGroupLayer-DPgPbaM6.js");return{default:t}},__vite__mapDeps([408,162,4,163,164,165,166,167,168,169,160,171,172]),import.meta.url)).default,TileLayer:async()=>(await K(async()=>{const{default:t}=await import("./TileLayer-CrlzflSd.js");return{default:t}},__vite__mapDeps([409,162,1,2,3,395,371,169,372,62,60,61,22,25,63,155,24,170,165,167,168,4,355]),import.meta.url)).default,UnknownLayer:async()=>(await K(async()=>{const{default:t}=await import("./UnknownLayer-_BWDKmoM.js");return{default:t}},[],import.meta.url)).default,UnsupportedLayer:async()=>(await K(async()=>{const{default:t}=await import("./UnsupportedLayer-Bl2RiLNs.js");return{default:t}},[],import.meta.url)).default,VectorTileLayer:async()=>(await K(async()=>{const{default:t}=await import("./VectorTileLayer-ZiKLOhmk.js");return{default:t}},__vite__mapDeps([410,162,1,2,3,4,302,125,122,44,43]),import.meta.url)).default,VideoLayer:async()=>(await K(async()=>{const{default:t}=await import("./VideoLayer-CLxKi_Mq.js");return{default:t}},__vite__mapDeps([411,4,166,168,169,262,263,52,19]),import.meta.url)).default,ViewshedLayer:async()=>(await K(async()=>{const{default:t}=await import("./ViewshedLayer-UGIfgBB3.js");return{default:t}},__vite__mapDeps([412,392,113,101,95,374]),import.meta.url)).default,VoxelLayer:async()=>(await K(async()=>{const{default:t}=await import("./VoxelLayer-CrJ88LU3.js");return{default:t}},__vite__mapDeps([413,162,4,358,359,166,302,360,361,94,95]),import.meta.url)).default,WCSLayer:async()=>(await K(async()=>{const{default:t}=await import("./WCSLayer-CcgVuB1p.js");return{default:t}},__vite__mapDeps([414,381,242,378,104,103,19,105,15,110,82,244,108,107,106,185,415]),import.meta.url)).default,WFSLayer:async()=>(await K(async()=>{const{default:t}=await import("./WFSLayer-DhoBjrGk.js");return{default:t}},__vite__mapDeps([416,119,65,21,22,120,227]),import.meta.url)).default,WMSLayer:async()=>(await K(async()=>{const{default:t}=await import("./WMSLayer-BdkefpU_.js");return{default:t}},__vite__mapDeps([417,415,265,355]),import.meta.url)).default,WMTSLayer:async()=>(await K(async()=>{const{default:t}=await import("./WMTSLayer-BIVOi-xV.js");return{default:t}},__vite__mapDeps([418,400,355,2,415,120]),import.meta.url)).default,WebTileLayer:async()=>(await K(async()=>{const{default:t}=await import("./WebTileLayer-D9KRkynz.js").then(e=>e.W);return{default:t}},__vite__mapDeps([400,355]),import.meta.url)).default};function q8e(t){return rz(t,"notes")}function B8e(t){return rz(t,"markup")}function H8e(t){return rz(t,"route")}function rz(t,e){return!(!t.layerType||t.layerType!=="ArcGISFeatureLayer")&&t.featureCollectionType===e}async function iae(t,e){const i=vm(t);if(!i)throw new G("invalid-url","Invalid scene service url");const r={...e,sceneServerUrl:i.url.path,layerId:i.sublayer??void 0};if(r.sceneLayerItem??=await W8e(r),r.sceneLayerItem==null)return PB(r.sceneServerUrl.replace("/SceneServer","/FeatureServer"),r);const s=await Y8e(r);if(!s?.url)throw new G("related-service-not-found","Could not find feature service through portal item relationship");r.featureServiceItem=s;const n=await PB(s.url,r);return n.portalItem=s,n}async function W8e(t){const e=(await rae(t)).serviceItemId;if(!e)return null;const i=new He({id:e,apiKey:t.apiKey}),r=await Z8e(t);r!=null&&(i.portal=new ge({url:r}));try{return await i.load({signal:t.signal})}catch(s){return zn(s),null}}async function rae(t){if(t.rootDocument)return t.rootDocument;const e={query:{f:"json",...t.customParameters,token:t.apiKey},responseType:"json",signal:t.signal};try{const i=await Ot(t.sceneServerUrl,e);t.rootDocument=i.data}catch{t.rootDocument={}}return t.rootDocument}async function Z8e(t){const e=pt?.findServerInfo(t.sceneServerUrl);if(e?.owningSystemUrl)return e.owningSystemUrl;const i=t.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await Ot(i,{query:{f:"json"},responseType:"json",signal:t.signal})).data.owningSystemUrl;if(r)return r}catch(r){zn(r)}return null}async function PB(t,e){const i=vm(t);if(!i)throw new G("invalid-feature-service-url","Invalid feature service url");const r=i.url.path,s=e.layerId;if(s==null)return{serverUrl:r};const n=rae(e),a=e.featureServiceItem?await e.featureServiceItem.fetchData("json"):null,o=(a?.layers?.[0]||a?.tables?.[0])?.customParameters,u=w=>{const S={query:{f:"json",...o},responseType:"json",authMode:w,signal:e.signal};return Ot(r,S)},h=u("anonymous").catch(()=>u("no-prompt")),[p,y]=await Promise.all([h,n]),v=y?.layers,b=p.data&&p.data.layers;if(!Array.isArray(b))throw new Error("expected layers array");if(Array.isArray(v)){for(let w=0;w<Math.min(v.length,b.length);w++)if(v[w].id===s)return{serverUrl:r,layerId:b[w].id}}else if(s!=null&&s<b.length)return{serverUrl:r,layerId:b[s].id};throw new Error("could not find matching associated sublayer")}async function Y8e({sceneLayerItem:t,signal:e}){if(!t)return null;try{const i=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:e})).find(s=>s.type==="Feature Service")||null;if(!i)return null;const r=new He({portal:i.portal,id:i.id});return await r.load(),r}catch(i){return zn(i),null}}const J8e=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function aet(t,e){const{loadContext:i,...r}=e||{},s=i?await i.fetchServiceMetadata(t,r):await z5(t,r),n=X4();kB(s),OB(s);const a={serviceJSON:s,preferredHost:n};if((s.currentVersion??0)<10.5)return a;const o=`${t}/layers`,u=i?await i.fetchServiceMetadata(o,r):await z5(o,r);return kB(u),OB(u),a.layersJSON={layers:u.layers,tables:u.tables},a}function X8e(t){const{type:e}=t;return!!e&&J8e.has(e)}function Q8e(t){return t.type==="Table"}function OB(t){t.layers=t.layers?.filter(X8e),t.tables=t.tables?.filter(Q8e)}function K8e(t){t.type||="Feature Layer"}function eVe(t){t.type||="Table"}function kB(t){t.layers?.forEach(K8e),t.tables?.forEach(eVe)}function sae(t){switch(t){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}function Nb(t){const e={id:t.id,name:t.name},i=sae(t.type);return i!=="FeatureLayer"&&(e.layerType=i),e}async function tVe(t,e,i){let r;if(t?.layers==null||t?.tables==null){const s=await i.fetchServiceMetadata(e,{customParameters:tv(t)?.customParameters});r=X4(),(t=t||{}).layers=t.layers||s?.layers?.map(Nb),t.tables=t.tables||s?.tables?.map(Nb)}return{data:t,preferredHost:r}}function tv(t){if(!t)return null;const{layers:e,tables:i}=t;return e?.length?e[0]:i?.length?i[0]:null}function iVe(t,e){return e==null?null:[...t.layers||[],...t.tables||[]].find(i=>i.id===e)}function oet(t,e){return[...t.layers||[],...t.tables||[]].filter(({layerType:i})=>i?e.includes(i):e.includes("ArcGISFeatureLayer"))}function sz(t){return(t?.layers?.length??0)+(t?.tables?.length??0)}function uet(t){switch(t){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null}function rVe(t){switch(t){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"}async function sVe(t,e,i){if(!t?.url)return e??{};if(e??={},!e.layers){const n=await i.fetchServiceMetadata(t.url);e.layers=n.layers?.map(Nb)}const{serverUrl:r,portalItem:s}=await iae(t.url,{sceneLayerItem:t,customParameters:tv(e)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(r==null)return e.tables=[],e;if(!e.tables&&s){const n=await s.fetchData().catch(()=>null);if(n?.tables)e.tables=n.tables.map(Nb);else{const a=await i.fetchServiceMetadata(r,{customParameters:tv(n)?.customParameters}).catch(()=>null);e.tables=a?.tables?.map(Nb)}}if(e.tables)for(const n of e.tables)n.url=`${r}/${n.id}`;return e}async function nVe(t){let{portalItem:e}=t;!e||e instanceof He||(e=new He(e));const i=await aVe(e);return new i.constructor({portalItem:e,...i.properties})}async function aVe(t){await t.load();const e=new tae;return oVe(await nz(t,e))}async function nz(t,e){switch(t.type){case"3DTiles Service":return t.typeKeywords.includes("3DObject")?_Ve():t.typeKeywords.includes("GaussianSplat")?vVe():gVe();case"CSV":return bVe();case"Feature Collection":return hVe(t);case"Feature Service":return uVe(t,e);case"Feed":return EVe();case"GeoJson":return yVe();case"Group Layer":return CVe();case"Image Service":return dVe(t,e);case"KML":return wVe();case"Knowledge Graph Layer":return SVe();case"Map Service":return lVe(t,e);case"Media Layer":return IVe();case"Scene Service":return cVe(t,e);case"Stream Service":return pVe();case"Video Service":return fVe(t,e);case"Vector Tile Service":return mVe();case"WCS":return xVe();case"WFS":return $Ve();case"WMS":return MVe();case"WMTS":return TVe();default:throw new G("portal:unknown-item-type","Unknown item type '${type}'",{type:t.type})}}async function oVe(t){const e=t.className,i=No[e];return{constructor:await i(),properties:t.properties}}async function lVe(t,e){return await LVe(t,e)?{className:"TileLayer"}:{className:"MapImageLayer"}}async function uVe(t,e){const i=await az(t,e);if(typeof i=="object"){const{sourceJSON:r,className:s}=i,n={sourceJSON:r};return i.id!=null&&(n.layerId=i.id),{className:s||"FeatureLayer",properties:n}}return{className:"GroupLayer"}}async function cVe(t,e){const i=await az(t,e,async()=>{try{if(!t.url)return[];const{serverUrl:r}=await iae(t.url,{sceneLayerItem:t});return(await e.fetchServiceMetadata(r))?.tables??[]}catch{return[]}});if(typeof i=="object"){const r={};let s;if(i.id!=null?(r.layerId=i.id,s=`${t.url}/layers/${i.id}`):s=t.url,t.typeKeywords?.length){for(const a of Object.keys($L))if(t.typeKeywords.includes(a))return{className:$L[a]}}const n=await e.fetchServiceMetadata(s,{customParameters:await e.fetchCustomParameters(t,a=>tv(a)?.customParameters)});return{className:$L[n?.layerType]||"SceneLayer",properties:r}}return i===!1&&(await e.fetchServiceMetadata(t.url))?.layerType==="Voxel"?{className:"VoxelLayer"}:{className:"GroupLayer"}}async function hVe(t){await t.load();const e=Ob(t,"Map Notes"),i=Ob(t,"Markup");if(e||i)return{className:"MapNotesLayer"};if(Ob(t,"Route Layer"))return{className:"RouteLayer"};const r=await t.fetchData();return sz(r)===1?{className:"FeatureLayer"}:{className:"GroupLayer"}}async function dVe(t,e){await t.load();const i=t.typeKeywords?.map(p=>p.toLowerCase())??[];if(i.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(i.includes("tiled imagery"))return{className:"ImageryTileLayer"};const r=await e.fetchItemData(t),s=r?.layerType;if(s==="ArcGISTiledImageServiceLayer")return{className:"ImageryTileLayer"};if(s==="ArcGISImageServiceLayer")return{className:"ImageryLayer"};const n=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)}),a=n.cacheType?.toLowerCase(),o=n.capabilities?.toLowerCase().includes("tilesonly"),u=n.tileInfo?.format?.toLowerCase()??"",h=a==null&&["jpg","jpeg","png","png8","png24","png32","mixed"].includes(u);return a==="map"||h||o?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}function pVe(){return{className:"StreamLayer"}}async function fVe(t,e){return typeof await az(t,e)=="object"?{className:"VideoLayer"}:{className:"GroupLayer"}}function mVe(){return{className:"VectorTileLayer"}}function yVe(){return{className:"GeoJSONLayer"}}function gVe(){return{className:"IntegratedMesh3DTilesLayer"}}function vVe(){return{className:"GaussianSplatLayer"}}function _Ve(){return{className:"UnsupportedLayer"}}function bVe(){return{className:"CSVLayer"}}function wVe(){return{className:"KMLLayer"}}function SVe(){return{className:"KnowledgeGraphLayer"}}function xVe(){return{className:"WCSLayer"}}function $Ve(){return{className:"WFSLayer"}}function MVe(){return{className:"WMSLayer"}}function TVe(){return{className:"WMTSLayer"}}function EVe(){return{className:"StreamLayer"}}function CVe(){return{className:"GroupLayer"}}function IVe(){return{className:"MediaLayer"}}async function LVe(t,e){const{tileInfo:i}=await e.fetchServiceMetadata(t.url,{customParameters:await e.fetchCustomParameters(t)});return i}async function az(t,e,i){const{url:r,type:s}=t,n=s==="Feature Service";if(!r)return{};if(/\/\d+$/.test(r)){if(n){const u=await e.fetchServiceMetadata(r,{customParameters:await e.fetchCustomParameters(t,h=>tv(h)?.customParameters)});return t9(t,X4()),{id:u.id,className:sae(u.type),sourceJSON:u}}return{}}if(s==="Video Service")return!(((await e.fetchServiceMetadata(r)).layers?.length??0)>1)&&{};await t.load();let a=await e.fetchItemData(t);if(n){const{data:u,preferredHost:h}=await tVe(a,r,e);t9(t,h);const p=YA(u);if(typeof p=="object"){const y=iVe(u,p.id);p.className=rVe(y?.layerType)}return p}if(s==="Scene Service"&&(a=await sVe(t,a,e)),sz(a)>0)return YA(a);const o=await e.fetchServiceMetadata(r);return i&&(o.tables=await i()),YA(o)}function YA(t){return sz(t)===1&&{id:tv(t)?.id}}const AVe=Object.freeze(Object.defineProperty({__proto__:null,fromItem:nVe,selectLayerClassPath:nz},Symbol.toStringTag,{value:"Module"}));async function PVe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await c3(r.populateFromStyle());if(Wt(i),s.ok===!1){const n=s.error;e?.messages&&e.messages.push(new _a("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}async function nae(t,e,i){if(!e)return;const r=e.map(n=>jVe(n,i)),s=await Promise.allSettled(r);for(const n of s)n.status==="rejected"||n.value&&t.add(n.value)}const OVe={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GaussianSplatLayer:"GaussianSplatLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",Object3DTilesLayer:"UnsupportedLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",ViewshedLayer:"ViewshedLayer",Voxel:"VoxelLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},kVe={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},RVe={ArcGISFeatureLayer:"FeatureLayer"},DVe={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"UnsupportedLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},NVe={IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer"},aae={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",ArcGISVideoLayer:"VideoLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",get ParquetLayer(){return X("parquetlayer-persistence-enabled")?"ParquetLayer":"UnsupportedLayer"},SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},oae={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"SubtypeGroupLayer"},lae={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},zVe={...aae,LinkChartLayer:"LinkChartLayer"},FVe={...oae},VVe={...lae};async function jVe(t,e){return UVe(await GVe(t,e),t,e)}async function UVe(t,e,i){const r=new t;return r.read(e,i.context),r.type==="group"&&(e.layerType==="GroupLayer"?await lz(r,e,i):oz(e)?BVe(r,e,i.context):uae(e)&&await HVe(r,e,i.context)),await PVe(r,i.context),r}async function GVe(t,e){const i=e.context,r=qVe(i);let s=t.layerType||t.type;!s&&e?.defaultLayerType&&(s=e.defaultLayerType);const n=r[s];let a=n?No[n]:No.UnknownLayer;if(oz(t)){const o=i?.portal;if(t.itemId){const u=new He({id:t.itemId,portal:o});await u.load();const h=(await nz(u,new tae)).className||"UnknownLayer";a=No[h]}}else s==="ArcGISFeatureLayer"?q8e(t)||B8e(t)?a=No.MapNotesLayer:H8e(t)?a=No.RouteLayer:uae(t)&&(a=No.GroupLayer):t.wmtsInfo?.url&&t.wmtsInfo.layerIdentifier?a=No.WMTSLayer:s==="WFS"&&t.wfsInfo?.version!=="2.0.0"&&(a=No.UnsupportedLayer);return a()}function uae(t){return t.layerType!=="ArcGISFeatureLayer"||oz(t)?!1:(t.featureCollection?.layers?.length??0)>1}function oz(t){return t.type==="Feature Collection"}function qVe(t){let e;switch(t.origin){case"web-scene":switch(t.layerContainerType){case"basemap-base-layers":e=DVe;break;case"basemap-ground-layers":e=NVe;break;case"ground":e=kVe;break;case"tables":e=RVe;break;default:e=OVe}break;case"link-chart":switch(t.layerContainerType){case"basemap-base-layers":e=VVe;break;case"tables":e=FVe;break;default:e=zVe}break;default:switch(t.layerContainerType){case"basemap-base-layers":e=lae;break;case"tables":e=oae;break;default:e=aae}}return e}async function lz(t,e,i){const r=new $e,s=nae(r,Array.isArray(e.layers)?e.layers:[],i);try{try{if(await s,t.type==="group")return t.layers.addMany(r),t}catch(n){t.destroy();for(const a of r)a.destroy();throw n}}catch(n){throw n}}function BVe(t,e,i){e.itemId&&(t.portalItem=new He({id:e.itemId,portal:i?.portal}),t.when(()=>{const r=s=>{const n=s.layerId;cae(s,t,e,n,i);const a=e.featureCollection?.layers?.[n];a&&s.read(a,i)};t.layers?.forEach(r),t.tables?.forEach(r)}))}async function HVe(t,e,i){const r=No.FeatureLayer,s=await r(),n=e.featureCollection,a=n?.showLegend,o=n?.layers?.map((u,h)=>{const p=new s;p.read(u,i);const y={...i,ignoreDefaults:!0};return cae(p,t,e,h,y),a!=null&&p.read({showLegend:a},y),p});t.layers.addMany(o??[])}function cae(t,e,i,r,s){t.read({id:`${e.id}-sublayer-${r}`,visibility:i.visibleLayers?.includes(r)??!0},s)}const hae=Object.freeze(Object.defineProperty({__proto__:null,populateGroupLayer:lz,populateOperationalLayers:nae},Symbol.toStringTag,{value:"Module"})),WVe=Symbol("WebScene");async function ZVe(t){const e=[];for(const i of t.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const r=i.beforeSave();r&&e.push(r)}await Promise.allSettled(e)}const YVe=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function cet(t,e,i){let r=(t.messages??[]).filter(({type:s})=>s==="error").map(({name:s,message:n,details:a})=>new G(s,n,a));if(t.blockedRelativeUrls&&(r=r.concat(t.blockedRelativeUrls.map(s=>new G("url:unsupported",`Relative url '${s}' is not supported`)))),i){const{ignoreUnsupported:s,supplementalUnsupportedErrors:n=[],requiredPropertyChecksDisabled:a}=i;s&&(r=r.filter(({name:o})=>!(YVe.has(o)||n.includes(o)))),a&&(r=r.filter(o=>o.name!=="web-document-write:property-required"))}if(r.length>0)throw new G(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}let us=class extends cie(Lre(Ere(Cre(RX(kX(nN(bi))))))){constructor(t){super(t),this.allLayers=new Qa({getCollections:()=>[this.layers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=OX(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=Aw(async(e,i,r)=>{const{save:s,saveAs:n}=await K(()=>import("./groupLayerUtils-CueYoC0-.js"),__vite__mapDeps([419,420,359,302,360,361]),import.meta.url);switch(e){case 0:return s(this,i);case 1:return n(this,r,i)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([_e(()=>{let t=this.parent;for(;t&&"parent"in t&&t.parent;)t=t.parent;return t&&WVe in t},t=>{const e="prevent-adding-tables";this.removeHandles(e),t&&(this.tables.removeAll(),this.addHandles(Vs(()=>this.tables,"before-add",i=>{i.preventDefault(),le.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),e))},ps),_e(()=>this.visible,this._onVisibilityChange.bind(this),no)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===7}_writeLayers(t,e,i,r){const s=[];if(!t)return s;t.forEach(n=>{const a=p$(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);a?.layerType&&s.push(a)}),e.layers=s}set portalItem(t){this._set("portalItem",t)}readPortalItem(t,e,i){const{itemId:r,layerType:s}=e;if(s==="GroupLayer"&&r)return new He({id:r,portal:i?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}set visibilityMode(t){const e=this._get("visibilityMode")!==t;this._set("visibilityMode",t),e&&this._enforceVisibility(t,this.visible)}async beforeSave(){return ZVe(this)}load(t){const e=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service","Video Service"],layerModuleTypeMap:No,populateGroupLayer:lz},t).catch(i=>{if(zn(i),this.sourceIsPortalItem)throw i});return this.addResolvingPromise(e),Promise.resolve(this)}async loadAll(){return x4(this,t=>{t(this.layers,this.tables)})}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}layerAdded(t){t.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(t):this.visibilityMode==="inherited"&&(t.visible=this.visible),this.hasHandles(t.uid)?console.error(`Layer read to Grouplayer: uid=${t.uid}`):this.addHandles(_e(()=>t.visible,e=>this._onChildVisibilityChange(t,e),no),t.uid)}layerRemoved(t){this.removeHandles(t.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(t){this.layers.forEach(e=>{e!==t&&(e.visible=!1)})}_enforceVisibility(t,e){if(!Us(this).initialized)return;const i=this.layers;let r=i.find(s=>s.visible);switch(t){case"exclusive":i.length&&!r&&(r=i.at(0),r.visible=!0),this._turnOffOtherLayers(r);break;case"inherited":i.forEach(s=>{s.visible=e})}}_onVisibilityChange(t){this.visibilityMode==="inherited"&&this.layers.forEach(e=>{e.visible=t})}_onChildVisibilityChange(t,e){switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(t):this._isAnyLayerVisible()||(t.visible=!0);break;case"inherited":t.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(t=>t.visible)}};d([m({readOnly:!0,dependsOn:[]})],us.prototype,"allLayers",void 0),d([m({readOnly:!0})],us.prototype,"allTables",void 0),d([m({json:{read:!0,write:!0}})],us.prototype,"blendMode",void 0),d([m()],us.prototype,"fullExtent",void 0),d([m({readOnly:!0})],us.prototype,"sourceIsPortalItem",null),d([m({json:{read:!1,write:{ignoreOrigin:!0}}})],us.prototype,"layers",void 0),d([Le("layers")],us.prototype,"_writeLayers",null),d([m({type:["GroupLayer"]})],us.prototype,"operationalLayerType",void 0),d([m({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,i){return{enabled:t?.type==="Group Layer"&&i?.initiator!==this}}}},"web-scene":{read:!1,write:!1}}}})],us.prototype,"portalItem",null),d([Ge("web-map","portalItem",["itemId"])],us.prototype,"readPortalItem",null),d([Le("web-map","portalItem",{itemId:{type:String}})],us.prototype,"writePortalItem",null),d([m()],us.prototype,"spatialReference",void 0),d([m({json:{read:!1},readOnly:!0,value:"group"})],us.prototype,"type",void 0),d([m({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,i)=>{t!=="inherited"&&(e[i]=t)}}}}})],us.prototype,"visibilityMode",null),us=d([N("esri.layers.GroupLayer")],us);const dae=us,JVe=Object.freeze(Object.defineProperty({__proto__:null,default:dae},Symbol.toStringTag,{value:"Module"}));function RB(t){return t===1?"global":"local"}function XVe(t){return pae(t)||T4(t)||E4(t)}function pae(t){return Fd(t)||MP(t)}const QVe=12;var gr;let iv=(gr=class{constructor(e){const i=gr.checkUnsupported(e);if(i!=null)throw i;const r=e;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=Zd(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const s=r.lods.reduce((h,p)=>(p.level<h.minLod.level&&(h.minLod=p),h.max=Math.max(h.max,p.level),h),{minLod:r.lods[0],max:-1/0}),n=s.minLod,a=2**n.level;let o=n.resolution*a,u=n.scale*a;this.levels=new Array(s.max+1);for(let h=0;h<this.levels.length;h++)this.levels[h]={resolution:o,scale:u,tileSize:[o*r.size[0],o*r.size[1]]},o/=2,u/=2}clone(){return new gr(this.toTileInfo())}toTileInfo(){return new zr({dpi:this.dpi,origin:new Ne({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new _r({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,r,s){const n=this.levels[e],a=n.tileSize[0],o=n.tileSize[1];s[0]=this.origin[0]+r*a,s[2]=this.origin[0]+(r+1)*a,s[3]=this.origin[1]-i*o,s[1]=this.origin[1]-(i+1)*o}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=oj(e[0]),i[1]=lj(e[1]),i[2]=oj(e[2]),i[3]=lj(e[3])):this._isGCS&&(i[0]=au(e[0]),i[1]=au(e[1]),i[2]=au(e[2]),i[3]=au(e[3]))}getExtentGeometry(e,i,r,s=new at){return this.getExtent(e,i,r,dl),s.spatialReference=this.spatialReference,s.xmin=dl[0],s.ymin=dl[1],s.xmax=dl[2],s.ymax=dl[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const{resolution:r,scale:s}=this.levels[this.levels.length-1],n=r/2*this.pixelSize;this.levels.push({resolution:r/2,scale:s/2,tileSize:[n,n]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e,i=1/0){if(gr.checkUnsupported(e))return!1;const r=new gr(e);if(!r.spatialReference.equals(this.spatialReference)||r.pixelSize!==this.pixelSize)return!1;const s=Math.min(this.levels.length-1,r.levels.length-1,i),n=this.levels[s].resolution;let a=.5*n;return!js(r.origin[0],this.origin[0],a)||!js(r.origin[1],this.origin[1],a)?!1:(a=.5*n/2**s/this.pixelSize*QVe,js(n,r.levels[s].resolution,a))}rootTilesInExtent(e,i=null,r=1/0){const s=new Array,n=this.levels[0].tileSize;if(e==null||n[0]===0||n[1]===0)return s;gr.computeRowColExtent(e,n,this.origin,dl);let a=dl[1],o=dl[3],u=dl[0],h=dl[2];const p=h-u,y=o-a;if(p*y>r){const v=Math.floor(Math.sqrt(r));y>v&&(a=a+Math.floor(.5*y)-Math.floor(.5*v),o=a+v),p>v&&(u=u+Math.floor(.5*p)-Math.floor(.5*v),h=u+v)}for(let v=a;v<o;v++)for(let b=u;b<h;b++)s.push([0,v,b]);return i!=null&&(i[0]=this.origin[0]+u*n[0],i[1]=this.origin[1]-o*n[1],i[2]=this.origin[0]+h*n[0],i[3]=this.origin[1]-a*n[1]),s}static computeRowColExtent(e,i,r,s){const n=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+n-r[0])/i[0])),s[2]=Math.max(0,Math.ceil((e[2]-n-r[0])/i[0])),s[1]=Math.max(0,Math.floor((r[1]-e[3]+n)/i[1])),s[3]=Math.max(0,Math.ceil((r[1]-e[1]-n)/i[1]))}static isPowerOfTwo(e){const i=e.lods,r=i[0].resolution*2**i[0].level;return!i.some(s=>!K4(s.resolution,r/2**s.level))}static hasGapInLevels(e){const i=e.lods.map(r=>r.level);i.sort((r,s)=>r-s);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new G("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?uz():e.lods.length<1?new G("tilingscheme:generic","Tiling scheme must have at least one level"):gr.isPowerOfTwo(e)?gr.hasGapInLevels(e)?new G("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):gr.tileSizeSupported(e)?gr.hasOriginPerLODs(e)?new G("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new G("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new G("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const r=e[2]-e[0],s=e[3]-e[1],n=ba(i),a=1.2*Math.max(r,s),o=256,u=a/o,h=u*n*(96/.0254),p=new gr(new zr({size:[o,o],origin:new Ne({x:e[0]-.5*(a-r),y:e[3]+.5*(a-s)}),lods:[new _r({level:0,resolution:u,scale:h})],spatialReference:i}));return p.ensureMaxLod(20),p}static makeWebMercatorAuxiliarySphere(e){const i=new gr(gr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,r=16){const s=256/i,n=new gr(new zr({size:[i,i],origin:new Ne({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new _r({level:0,resolution:.703125*s,scale:295497598570834e-6*s})]}));return n.ensureMaxLod(r),n}get test(){}},gr.WebMercatorAuxiliarySphereTileInfo=new zr({size:[256,256],origin:new Ne({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ee.WebMercator}),spatialReference:Ee.WebMercator,lods:[new _r({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),gr.WebMercatorAuxiliarySphere=gr.makeWebMercatorAuxiliarySphere(19),gr);function uz(){return new G("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}const dl=Oi(),DB=64;lge(YP/10);const KVe=Oi();iv.WebMercatorAuxiliarySphere.getExtent(0,0,0,KVe);Oi([-180,-90,180,90]);function eje(t,e,i,r){if(t==null)return uz();const s=t.spatialReference;if(s.isGeographic&&!pae(s))return new G("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const n=iv.checkUnsupported(t);return n??(i==null?new G("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):tje(t,i)||(e==null||s.equals(e)||e.isWGS84&&s.isWebMercator?null:new G("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function tje(t,e){const i=t.lods,r=i[0].resolution*2**i[0].level,s=[r*t.size[0],r*t.size[1]],n=[t.origin.x,t.origin.y],a=Hge(e),o=Oi();iv.computeRowColExtent(a,s,n,o);const u=(o[2]-o[0])*(o[3]-o[1]);if(u>DB){const h=i[0].scale*2**i[0].level;let p=Math.max((a[3]-a[1])/t.size[1],(a[2]-a[0])/t.size[0])*h/r;const y=Math.floor(Math.log(p)/Math.log(10));return p=Math.ceil(p/10**y)*10**y,new G("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(h).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+p.toLocaleString()+".",{level0Scale:h,suggestedLevel0Scale:p,requiredNumRootTiles:u,allowedNumRootTiles:DB})}return null}const ije=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:eje},Symbol.toStringTag,{value:"Module"}));function rje(t,e,i,r){if(t==null)return uz();const s=t?.lods.length-1,n=t.spatialReference;if(n.isWebMercator){if(!iv.makeWebMercatorAuxiliarySphere(s).compatibleWith(t,r))return new G("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!XVe(n))return new G("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!iv.makeGCSWithTileSize(t.spatialReference,t.size[0],s).compatibleWith(t,r))return t.spatialReference.isWGS84?new G("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new G("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?null:new G("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const sje=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:rje},Symbol.toStringTag,{value:"Module"})),nje={1:sje,2:ije};function F5(t,e,i,r,s){return nje[r].checkIfTileInfoSupportedForViewSR(t,i,e,s)}function aje(t,e,i){const r=zye(t);if(r!=null){if(!$e.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const s=r.find(n=>F5(n.tileInfo,n.fullExtent,e,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}function oje(t,e){return t!=null&&(e==null||(e===2?!t.isGeographic||t.isWGS84||t.wkid===4490:t.isWebMercator||t.isWGS84||t.wkid===4490||t.wkid===104971||t.wkid===104905||t.wkid===104903))}async function lje(t,e={}){const{basemap:i,view:r}=t;await i.load(e),cje(i),await hje(i,r,e),Wt(e)}async function uje(t,e={}){const{basemap:i,view:r}=t;Wt(e);const s=i.baseLayers.find(o=>o.type==="unknown")?.loadError;if(s!=null)throw s;if(!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(e),Wt(e),i.baseLayers.length===0))return;const n=i.baseLayers.at(0);if(!Rye(n))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;NB()}await n.load(e),Wt(e);const a=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?n.tileInfo?.spatialReference:null]).filter(Qr);a.length!==0&&a.every(o=>!r.spatialReference.equals(o))&&NB()}function NB(){throw new G("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function cje(t){if(t.baseLayers.length===0&&t.groundLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!Aye(i)).map(i=>zB(i));if(e.length||t.groundLayers&&t.groundLayers.filter(i=>!Dye(i)).map(i=>zB(i)).length)throw e[0]}function zB(t){return new G("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function hje(t,e,i){let r=t.baseLayers.at(0);if(t.groundLayers?.length>0)r=t.groundLayers.at(0);else{if(!(t.baseLayers.length>0))return;r=t.baseLayers.at(0)}if(PY(r)){try{await r.load(i)}catch(s){const n="basemap-compatibility:unknown-error",a="Unknown basemap compatibility error",{name:o=n,message:u=a,details:h}=s;throw new G(o,u,h)}dje(r,e)}}function dje(t,e){const i=e.state.viewingMode;if(!i)return;let r,s;if(t?.type==="wmts"){const o=aje(t,e.spatialReference,i);if(o.tileInfo==null)throw new G("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=o.tileInfo,s=o.fullExtent}else r=t.tileInfo,s=t.fullExtent;if(r==null)return;if(!oje(r.spatialReference,i))throw new G(`basemapgalleryitem:spatial-reference-unsupported-${RB(i)}`,`Basemap spatial reference is unsupported in ${RB(i)} mode`);const n=t?.type==="vector-tile"?r.getCompatibleForVTL(256):null;if(i===1){let o=F5(r,s,null,i);if(o&&t?.type==="vector-tile"&&s!=null&&n&&!F5(n,s,null,i)&&(o=null),o){const u=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new G(`basemapgalleryitem:tiling-scheme-unsupported-${u}-global`,"Basemap tiling scheme is unsupported in global mode",{error:o})}}else if(iv.checkUnsupported(r))throw new G("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=e.basemapTerrain?.tilingScheme;if(a&&!a.compatibleWith(r)&&(t?.type!=="vector-tile"||!n||!a.compatibleWith(n)))throw new G("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let $l=class extends $m(Ce){constructor(t){super(t),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const t=()=>this.refresh();this.addHandles([_e(()=>this.basemap?.loadStatus,t),_e(()=>this.compatibilityFunction,t),_e(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,t),_e(()=>this.view?.ready,t),_e(()=>this.view?.spatialReference,t)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return w1e(this.view,this.basemap)}set basemap(t){t&&t.load().catch(()=>{}),this._set("basemap",t)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const t=this.basemap?.loadStatus;if(t!=="loaded"&&t!=="failed")return;if(!this.compatibilityFunction)return void(t==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const e=new AbortController,{signal:i}=e;this.compatibilityFunction(this,{signal:i}).then(()=>jw(()=>!this._spatialReferenceTask.updating,i)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(r=>{jr(r)||(this._set("state","error"),this._set("error",r))}),this._refreshController=e}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};d([m({readOnly:!0})],$l.prototype,"_spatialReferenceTask",null),d([m()],$l.prototype,"basemap",null),d([m()],$l.prototype,"compatibilityFunction",void 0),d([m({readOnly:!0})],$l.prototype,"error",void 0),d([m({readOnly:!0})],$l.prototype,"spatialReference",null),d([m({readOnly:!0})],$l.prototype,"state",void 0),d([m()],$l.prototype,"view",void 0),$l=d([N("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],$l);const fae=$l,mae=$e.ofType(Md);let tb=class extends Ce{constructor(t){super(t),this.basemaps=new mae}destroy(){this.basemaps.forEach(t=>t.destroy())}get state(){return"ready"}refresh(){}};d([m({type:mae})],tb.prototype,"basemaps",void 0),d([m({readOnly:!0})],tb.prototype,"state",null),tb=d([N("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],tb);const yae=tb,gae=$e.ofType(Md);let Ml=class extends RW(_4(yae)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new gae,this.filterFunction=null,this.portal=ge.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(_e(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.basemapGalleryGroupQuery3D,this.portal?.user,this.query,this.updateBasemapsCallback],()=>L0(this.refresh()),Lt))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(r)}catch(r){if(jr(r))throw r;le.getLogger(this).warn(new G("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?await this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),r=await Promise.all(i);return e.filter((s,n)=>r[n])}};d([m({readOnly:!0,type:gae})],Ml.prototype,"basemaps",void 0),d([m()],Ml.prototype,"filterFunction",void 0),d([m({type:ge})],Ml.prototype,"portal",void 0),d([m()],Ml.prototype,"query",void 0),d([m({readOnly:!0})],Ml.prototype,"state",null),d([m()],Ml.prototype,"updateBasemapsCallback",void 0),d([m()],Ml.prototype,"viewType",void 0),Ml=d([N("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Ml);const ib=Ml,vae=$e.ofType(fae);function pje(t){return t&&t.declaredClass==="esri.portal.Portal"}function fje(t){return t&&!(t instanceof ib)&&(!!t.portal||!!t.query)}function mje(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let ca=class extends bm{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new vae,this.source=new ib,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([_e(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Vs(()=>this.source?.basemaps,"change",e,{onListenerAdd:e}),Kr(()=>this.view,()=>{this.source instanceof ib&&(this.source.viewType=this.view?.type)},{once:!0})])}destroy(){const e=this.source.basemaps.find(i=>i===this.activeBasemap);e&&this.source.basemaps.remove(e),this.source?.destroy()}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){const i=this.view;if(!i?.map)return;if(!e||!i.ready)return i.map.basemap=e,void this._clearOverride("activeBasemap");const r=e.spatialReference||this.items?.find(s=>this.basemapEquals(e,s.basemap))?.spatialReference;if(r&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const s=i.spatialReference;if(r!=null&&!Ar(s,r)&&!ao(i.spatialReference,r)&&!gu())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void qc().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=e,this._clearOverride("activeBasemap"),r==null||Ar(i.spatialReference,r)||(i.spatialReference=r)}else i.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return PX(e)}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){return this.view?.type==="3d"?lje:uje}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||$e.isCollection(e)?new yae({basemaps:Array.isArray(e)?new $e(e):e}):pje(e)?new ib({portal:e}):fje(e)?new ib(e):mje(e)?e:null}get state(){return this.view?.ready&&this.source?DT(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return b1e(e,i)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(GM(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,r=i.findIndex(s=>s.basemap===e);return r===-1?i.findIndex(s=>this.basemapEquals(s.basemap,e)):r}_recreateItems(){const e=this.source?.basemaps??[],{view:i,compatibilityFunction:r}=this,s=new Map(this.items.map(a=>[a.basemap,a])),n=e.map(a=>{const o=s.get(a);return o?(s.delete(a),o):new fae({basemap:a,compatibilityFunction:r,view:i})});this.items.removeAll(),this.items.addMany(n),s.forEach(a=>a.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};d([m()],ca.prototype,"_loadingProjectionEngine",void 0),d([m({type:Md})],ca.prototype,"activeBasemap",null),d([Nt("activeBasemap")],ca.prototype,"castActiveBasemap",null),d([m({readOnly:!0})],ca.prototype,"activeBasemapIndex",null),d([m()],ca.prototype,"compatibilityFunction",null),d([m({readOnly:!0,type:vae})],ca.prototype,"items",void 0),d([m()],ca.prototype,"source",void 0),d([Nt("source")],ca.prototype,"castSource",null),d([m({readOnly:!0})],ca.prototype,"state",null),d([m()],ca.prototype,"view",void 0),ca=d([N("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],ca);const yje=ca,Mo="esri-basemap-gallery",To={base:Mo,sourceLoading:`${Mo}--source-loading`,loader:`${Mo}__loader`,item:`${Mo}__item`,itemContainer:`${Mo}__item-container`,itemContent:`${Mo}__item-content`,itemTitle:`${Mo}__item-title`,itemTagsContainer:`${Mo}__item-tags-container`,itemThumbnail:`${Mo}__item-thumbnail`,selectedItem:`${Mo}__item--selected`,itemError:`${Mo}__item--error`};let In=class extends Wi{constructor(e,i){super(e,i),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new yje,this._focusBasemapItemEnabled=!1,Pw(le.getLogger(this),"Basemap Gallery","arcgis-basemap-gallery",{version:"4.32"})}initialize(){this.addHandles(Kr(()=>this.source,()=>this.viewModel.loadSource(),{sync:!0,initial:!0}))}loadDependencies(){return Yc({scrim:()=>K(()=>import("./index-Bl7LazHz.js"),__vite__mapDeps([324,287,288,289,290,294,293,292]),import.meta.url),chip:()=>K(()=>import("./index-gTxvlsdY.js"),__vite__mapDeps([421,291,292,288,293,294,297,312,299,290,289]),import.meta.url)})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",r={[To.sourceLoading]:e,[ui.disabled]:i};return F("div",{class:this.classes(To.base,ui.widget,ui.panel,r),key:"container"},this._getContext())}_getContext(){if(this.viewModel.state==="unsupported")return F("div",{class:ui.empty,key:"empty-message"},F(t0,{level:this.headingLevel},this.messages.unsupported));if(this.source.state==="loading")return F("div",{class:To.loader,key:"loader"});const e=this.viewModel.items;return e.length>0?F("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:To.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},e.map((i,r)=>this._renderBasemapGalleryItem(i,r)).toArray()):F("div",{class:ui.empty,key:"empty-message"},F(t0,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:r,activeBasemapIndex:s}=this.viewModel,n=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(s-1,-1),r.length):this._getRoundRobinIndex(s+1,r.length),a=r.at(n);a?.state==="ready"&&(this.viewModel.activeBasemap=a.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){const r=M1e(e.basemap)||Si("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,n=e.basemap.portalItem?.snippet,a=e.error?.message||n||s,{viewModel:{state:o,activeBasemapIndex:u}}=this,h=this.disabled||o==="disabled",p=u===i,y=p||u===-1&&i===0?0:-1,v=o==="loading",b={[To.selectedItem]:p,[To.itemError]:e.state==="error"},w=`basemapgallery-item-${e.uid}`;return F("li",{afterUpdate:this._focusBasemapItem,"aria-checked":p.toString(),"aria-disabled":h.toString(),"aria-labelledby":w,bind:this,class:this.classes(To.item,b),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:y,title:a},F("img",{alt:"",class:To.itemThumbnail,src:r}),F("div",{class:To.itemContent,key:"content"},F("div",{class:To.itemTitle,key:"title"},F("span",{id:w},s)),g1e(e.basemap)?this._renderTags(e.basemap):null),e.state==="loading"||p&&v?F("calcite-scrim",null,F("span",{"aria-hidden":"true",class:ui.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return F("div",{class:To.itemTagsContainer,key:"tag"},this._render3DTag(),v1e(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return F("calcite-chip",{key:"tag-3d",label:e.tag3D,scale:"s"},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return F("calcite-chip",{appearance:"outline-fill",key:"tag-beta",label:e.tagBeta,scale:"s"},this.messages.tagBeta)}};d([m()],In.prototype,"activeBasemap",null),d([m()],In.prototype,"disabled",void 0),d([m()],In.prototype,"headingLevel",void 0),d([m()],In.prototype,"icon",null),d([m()],In.prototype,"label",null),d([m(),Hn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],In.prototype,"messages",void 0),d([m()],In.prototype,"source",null),d([m()],In.prototype,"view",null),d([m()],In.prototype,"viewModel",void 0),d([m()],In.prototype,"_focusBasemapItemEnabled",void 0),d([Gte()],In.prototype,"_handleClick",null),In=d([N("esri.widgets.BasemapGallery")],In);const gje=In;function vje(t){const e="metric";if(t==null)return e;const i=t.map,r=(i&&"portalItem"in i?i.portalItem?.portal:null)??ge.getDefault();switch(r.user?.units??r.units){case e:return e;case"english":return"imperial"}return fpe(t.spatialReference)??e}const _je={readOnly:!0,get(){return vje(this.view)}},Xs="esri-scale-bar",yi={base:Xs,labelContainer:`${Xs}__label-container`,rulerLabelContainer:`${Xs}__label-container--ruler`,lineLabelContainer:`${Xs}__label-container--line`,topLabelContainer:`${Xs}__label-container--top`,bottomLabelContainer:`${Xs}__label-container--bottom`,label:`${Xs}__label`,line:`${Xs}__line`,topLine:`${Xs}__line--top`,bottomLine:`${Xs}__line--bottom`,ruler:`${Xs}__ruler`,rulerBlock:`${Xs}__ruler-block`,barContainer:`${Xs}__bar-container`,rulerBarContainer:`${Xs}__bar-container--ruler`,lineBarContainer:`${Xs}__bar-container--line`};function _ae(t){if(!t)return null;const e=t.wkid;if(e)return kve[e];const i=t.wkt2??t.wkt;return i?bje(i):null}function bje(t){const e=Pve.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function ME(t){const e=_ae(t);if(wje(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function wje(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function Yx(t,e,i){const{a:r,eSq:s}=ME(i),n=Math.sqrt(s),a=Math.sin(e[1]*Dn),o=r*e[0]*Dn;let u;return s>0?u=r*((1-s)*(a/(1-s*(a*a))-1/(2*n)*Math.log((1-n*a)/(1+n*a))))*.5:u=r*a,t[0]=o,t[1]=u,t}function u2(t){return Zd(t)&&!!_ae(t)}function fet(t,e="square-meters"){if(t.some(a=>!u2(a.spatialReference)))throw new G("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let a=0;a<t.length;a++){const o=t[a],u=o.spatialReference,{radius:h,densificationRatio:p}=ME(u),y=h*p;i.push(xje(o,y))}const r=[],s=[0,0],n=[0,0];for(let a=0;a<i.length;a++){const{rings:o,spatialReference:u}=i[a];let h=0;for(let p=0;p<o.length;p++){const y=o[p];Yx(s,y[0],u),Yx(n,y[y.length-1],u);let v=n[0]*s[1]-s[0]*n[1];for(let b=0;b<y.length-1;b++)Yx(s,y[b+1],u),Yx(n,y[b],u),v+=n[0]*s[1]-s[0]*n[1];h+=v}h=Qt(h,"square-meters",e),r.push(h/-2)}return r}function Sje(t,e="meters"){if(!t)throw new G("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(r=>!u2(r.spatialReference)))throw new G("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<t.length;r++){const s=t[r],{spatialReference:n}=s,a=s.type==="polyline"?s.paths:s.rings;let o=0;for(let u=0;u<a.length;u++){const h=a[u];let p=0;for(let y=1;y<h.length;y++){const v=h[y-1][0],b=h[y][0],w=h[y-1][1],S=h[y][1];if(w!==S||v!==b){const M=new bae;wae(M,[v,w],[b,S],n),p+=M.distance}}o+=p}o=Qt(o,"meters",e),i.push(o)}return i}function xje(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new G("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!u2(i))throw new G("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=t.type==="polyline"?t.paths:t.rings,s=[],n=[0,0],a=new bae;for(const u of r){const h=[];s.push(h),h.push([u[0][0],u[0][1]]);let p,y,v=u[0][0],b=u[0][1];for(let w=0;w<u.length-1;w++){if(p=u[w+1][0],y=u[w+1][1],v===p&&b===y)continue;const S=[v,b];wae(a,[v,b],[p,y],i);const{azimuth:M,distance:T}=a,I=T/e;if(I>1){for(let L=1;L<=I-1;L++)JA(n,S,M,L*e,i),h.push(n.slice());JA(n,S,M,(T+Math.floor(I-1)*e)/2,i),h.push(n.slice())}JA(n,S,M,T,i),h.push(n.slice()),v=n[0],b=n[1]}}const o=dv(Ee,i);return t.type==="polyline"?new rr({paths:s,spatialReference:o}):new pi({rings:s,spatialReference:o})}let bae=class{constructor(e=0,i=void 0,r=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=r}};function JA(t,e,i,r,s){const n=e[0],a=e[1],o=n*Dn,u=a*Dn,h=(i??0)*Dn,{a:p,b:y,f:v}=ME(s),b=Math.sin(h),w=Math.cos(h),S=(1-v)*Math.tan(u),M=1/Math.sqrt(1+S*S),T=S*M,I=Math.atan2(S,w),L=M*b,O=L*L,R=1-O,z=R*(p*p-y*y)/(y*y),j=1+z/16384*(4096+z*(z*(320-175*z)-768)),U=z/1024*(256+z*(z*(74-47*z)-128));let B,Q,oe,ue=r/(y*j),Se=2*Math.PI;for(;Math.abs(ue-Se)>1e-12;)oe=Math.cos(2*I+ue),B=Math.sin(ue),Q=Math.cos(ue),Se=ue,ue=r/(y*j)+U*B*(oe+U/4*(Q*(2*oe*oe-1)-U/6*oe*(4*B*B-3)*(4*oe*oe-3)));const me=T*B-M*Q*w,ke=Math.atan2(T*Q+M*B*w,(1-v)*Math.sqrt(O+me*me)),te=v/16*R*(4+v*(4-3*R)),be=Math.atan2(B*b,M*Q-T*B*w)-(1-te)*v*L*(ue+te*B*(oe+te*Q*(2*oe*oe-1)));return t[0]=(o+be)/Dn,t[1]=ke/Dn,t}function wae(t,e,i,r){const s=e[0]*Dn,n=e[1]*Dn,a=i[0]*Dn,o=i[1]*Dn,{a:u,b:h,f:p,radius:y}=ME(r),v=a-s,b=Math.atan((1-p)*Math.tan(n)),w=Math.atan((1-p)*Math.tan(o)),S=Math.sin(b),M=Math.cos(b),T=Math.sin(w),I=Math.cos(w);let L,O,R,z,j,U,B,Q,oe,ue,Se=1e3,me=v;do{if(B=Math.sin(me),Q=Math.cos(me),R=Math.sqrt(I*B*(I*B)+(M*T-S*I*Q)*(M*T-S*I*Q)),R===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;j=S*T+M*I*Q,U=Math.atan2(R,j),oe=M*I*B/R,O=1-oe*oe,z=j-2*S*T/O,isNaN(z)&&(z=0),ue=p/16*O*(4+p*(4-3*O)),L=me,me=v+(1-ue)*p*oe*(U+ue*R*(z+ue*j*(2*z*z-1)))}while(Math.abs(me-L)>1e-12&&--Se>0);if(Se===0){const _t=y,W=Math.acos(Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos(a-s))*_t,pe=a-s,Te=Math.sin(pe)*Math.cos(o),Pe=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(pe),tt=Math.atan2(Te,Pe);return t.azimuth=tt/Dn,t.distance=W,t.reverseAzimuth=void 0,t}const ke=O*(u*u-h*h)/(h*h),te=ke/1024*(256+ke*(ke*(74-47*ke)-128)),be=h*(1+ke/16384*(4096+ke*(ke*(320-175*ke)-768)))*(U-te*R*(z+te/4*(j*(2*z*z-1)-te/6*z*(4*R*R-3)*(4*z*z-3)))),Me=Math.atan2(I*Math.sin(me),M*T-S*I*Math.cos(me)),et=Math.atan2(M*Math.sin(me),M*T*Math.cos(me)-S*I);return t.azimuth=Me/Dn,t.distance=be,t.reverseAzimuth=et/Dn,t}function yet(t){return u2(t)?t:Xo(t)?Ee.WGS84:null}function $je(t){return t>.5?{min:.5,max:1}:t>.2?{min:.2,max:.5}:{min:.1,max:.2}}function Mje(t,e){switch(e){case"metric":return t>1e3?{distance:Qt(t,"meters","kilometers"),unit:"kilometer"}:t>1?{distance:t,unit:"meter"}:t>.01?{distance:Qt(t,"meters","centimeters"),unit:"centimeter"}:{distance:Qt(t,"meters","millimeters"),unit:"millimeter"};case"imperial":return t>1609.344?{distance:Qt(t,"meters","miles"),unit:"mile"}:t>.3048?{distance:Qt(t,"meters","feet"),unit:"foot"}:{distance:Qt(t,"meters","inches"),unit:"inch"}}}function Tje(t){const{isWebMercator:e,wkt:i,wkt2:r}=t;return e||((r||i)?.includes("WGS_1984_Web_Mercator")??!1)}function FB({state:{paddedViewState:t},spatialReference:e,width:i}){return e.isWrappable&&t.worldScreenWidth<i}function VB(t,e){const{x:i,y:r}=t?If(e,!0):e;return[i,r]}let wg=class extends Ce{constructor(t){super(t),this.scaleComputedFrom=qi(),this.view=null}get state(){return this.view?.ready&&this.view.type==="2d"?DT(this.view)&&!this.view.inGeographicLayout?"disabled":"ready":"disabled"}getScaleBarProperties(t,e){if(this.state==="disabled"||isNaN(t)||!e||!this.view)return null;const i=this._getDistanceInMeters();return i==null?null:this._getScaleBarProps(t,i,e)}_getDistanceInMeters(){const{state:t,spatialReference:e}=this.view;if(!Fn(e))return null;const{isGeographic:i}=e,r=Tje(e);if(!i&&!r)return t.extent.width*(KW(e)??1);const[s,n]=this._getScaleMeasuringPoints(),a=r||i&&!u2(e)?Ee.WGS84:e,o=new rr({paths:[[VB(r,s),VB(r,n)]],spatialReference:a}),u=QK(o,10);let h;try{[h]=Sje([u],"meters")}catch{return null}return h}_getScaleMeasuringPoints(){const t=this.view,{width:e,height:i,position:r,spatialReference:s}=t;if(FB(t)){const u=Fs(s),{valid:h}=u;return[new Ne(h[0],0,s),new Ne(h[1],0,s)]}let n=this.scaleComputedFrom.y-r[1];n>i?n=i:n<0&&(n=0);const a=qi(0,n),o=qi(e,n);return[t.toMap(a),t.toMap(o)]}_getScaleBarProps(t,e,i){const r=this.view,s=t*e/(FB(r)?r.state.paddedViewState.worldScreenWidth:r.width);if(s<.001)return null;const n=Mje(s,i),{distance:a,unit:o}=n;let u=a,h=0;for(;u>=1;)u/=10,h++;const{min:p,max:y}=$je(u),v=y/u>=u/p?p:y;return{length:t*(v/u),value:10**h*v,unit:o}}};d([m()],wg.prototype,"scaleComputedFrom",void 0),d([m({readOnly:!0})],wg.prototype,"state",null),d([m()],wg.prototype,"view",void 0),wg=d([N("esri.widgets.ScaleBar.ScaleBarViewModel")],wg);const Eje=wg;function jB(t,e){return Uc(t,{style:"unit",unit:e,unitDisplay:"short"})}let Oo=class extends Wi{constructor(t,e){super(t,e),this.messages=null,this.style="line",this.viewModel=new Eje,Pw(le.getLogger(this),"Scale Bar","arcgis-scale-bar",{version:"4.32"})}initialize(){this.addHandles(_e(()=>{const{view:t}=this;return[t?.stationary,t?.center,t?.scale,t?.zoom]},([t])=>{t&&this.scheduleRender()}))}get icon(){return"actual-size"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get unit(){return this._defaultUnit}set unit(t){this._overrideIfSome("unit",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.viewModel.state==="disabled",e={[ui.disabled]:t};let i,r;if(!t){const{unit:s,style:n}=this,a=s==="metric"||s==="dual",o=100,u=s==="dual"?"line":n;if(s==="imperial"||s==="dual"){const h=this.viewModel.getScaleBarProperties(o,"imperial");h&&(r=u==="ruler"?this._renderRuler(h):this._renderLine(h,"bottom"))}if(a){const h=this.viewModel.getScaleBarProperties(o,"metric");h&&(i=u==="ruler"?this._renderRuler(h):this._renderLine(h,"top"))}}return F("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(yi.base,ui.widget,e)},i,r)}_renderRuler(t){const{length:e,unit:i,value:r}=t,s=Math.round(e),n=jB(r,i);return F("div",{class:this.classes(yi.barContainer,yi.rulerBarContainer),key:yi.rulerBarContainer},F("div",{class:yi.ruler,styles:{width:`${s}px`}},F("div",{class:yi.rulerBlock}),F("div",{class:yi.rulerBlock}),F("div",{class:yi.rulerBlock}),F("div",{class:yi.rulerBlock})),F("div",{class:this.classes(yi.labelContainer,yi.rulerLabelContainer)},F("div",{class:yi.label},"0"),F("div",{class:yi.label},n)))}_renderLine(t,e){const{length:i,unit:r,value:s}=t,n=Math.round(i),a=jB(s,r),o={[yi.topLabelContainer]:e==="top",[yi.bottomLabelContainer]:e==="bottom"},u=F("div",{class:this.classes(yi.labelContainer,yi.lineLabelContainer,o),key:yi.labelContainer},F("div",{class:yi.label},a)),h={[yi.topLine]:e==="top",[yi.bottomLine]:e==="bottom"},p=F("div",{class:this.classes(yi.line,h),key:yi.line,styles:{width:`${n}px`}});return F("div",{class:this.classes(yi.barContainer,yi.lineBarContainer),key:yi.lineBarContainer},[p,u])}_handleRootCreateOrUpdate(t){if(!this.viewModel)return;const{scaleComputedFrom:e}=this.viewModel,i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset,n=qi(r,s);(n.x!==e.x||n.y!==e.y)&&(this.viewModel.scaleComputedFrom=n)}};d([m(_je)],Oo.prototype,"_defaultUnit",void 0),d([m()],Oo.prototype,"icon",null),d([m()],Oo.prototype,"label",null),d([m(),Hn("esri/widgets/ScaleBar/t9n/ScaleBar")],Oo.prototype,"messages",void 0),d([m({type:["ruler","line"]})],Oo.prototype,"style",void 0),d([m({type:["metric","imperial","dual"]})],Oo.prototype,"unit",null),d([m()],Oo.prototype,"view",null),d([m()],Oo.prototype,"viewModel",void 0),Oo=d([N("esri.widgets.ScaleBar")],Oo);const Cje=Oo;function Ije(){const t=QA.useRef(null);return QA.useEffect(()=>{if(!t.current)return;const e=new DX({basemap:"dark-gray"}),i=new MLe({container:t.current,map:e,center:[-3.7,40.45],zoom:9}),r="./geojson/",s=U=>({title:"{NAMEUNIT}",expressionInfos:[{name:"mean2dec",expression:`
            var v = Number($feature.MEAN);
            return Round(v, 2);
          `}],content:`
        <b>Ao:</b> ${U.replace("Verano ","")}<br>
        <b>Valor promedio de superaciones del umbral de 120 g/m:</b><br>
        <span style="font-size: 16px;">
          <b>{expression/mean2dec}</b>
        </span>
      `}),n=()=>({type:"class-breaks",field:"MEAN",defaultSymbol:{type:"simple-fill",color:"#ffffff",outline:{color:"black",width:.3}},classBreakInfos:[{minValue:0,maxValue:10,color:"#E0F3F8",label:"< 10"},{minValue:10.001,maxValue:15,color:"#A8DDB5",label:"10 - 15"},{minValue:15.001,maxValue:20,color:"#7BCCC4",label:"15 - 20"},{minValue:20.001,maxValue:25,color:"#4EB3D3",label:"20 - 25"},{minValue:25.001,maxValue:30,color:"#FFA77F",label:"25 - 30"},{minValue:30.001,maxValue:35,color:"#FF5500",label:"30 - 35"},{minValue:35.001,maxValue:40,color:"#BD0026",label:"35 - 40"},{minValue:40.001,maxValue:45,color:"#800026",label:"40 - 45"},{minValue:45.001,maxValue:99999,color:"#8400A8",label:"> 45"}].map(U=>({minValue:U.minValue,maxValue:U.maxValue,label:U.label,symbol:{type:"simple-fill",color:U.color,outline:{color:"#666666ff",width:.3}}}))}),a=new hc({url:r+"verano_2020.geojson",title:"Verano 2020",renderer:n(),effect:"bloom(0.1, 1px, 0.0)",popupTemplate:s("Verano 2020"),visible:!1}),o=new hc({url:r+"verano_2021.geojson",title:"Verano 2021",renderer:n(),effect:"bloom(0.1, 1px, 0.0)",popupTemplate:s("Verano 2021"),visible:!1}),u=new hc({url:r+"verano_2022.geojson",title:"Verano 2022",renderer:n(),effect:"bloom(0.1, 1px, 0.0)",popupTemplate:s("Verano 2022"),visible:!1}),h=new hc({url:r+"verano_2023.geojson",title:"Verano 2023",renderer:n(),effect:"bloom(0.1, 1px, 0.0)",popupTemplate:s("Verano 2023"),visible:!1}),p=new hc({url:r+"verano_2024.geojson",title:"Verano 2024",renderer:n(),effect:"bloom(0.1, 1px, 0.0)",popupTemplate:s("Verano 2024"),visible:!0}),y=[a,o,u,h,p],v=new dae({title:"Superaciones de ozono segn el ao",visible:!0,visibilityMode:"independent",layers:[p,h,u,o,a]});e.add(v);const b=new hc({url:r+"zonas_calidad_aire.geojson",title:"Zonas de calidad del aire",renderer:{type:"simple",symbol:{type:"simple-fill",color:[0,0,0,0],outline:{color:"#000000ff",width:1,style:"dash"}}},labelingInfo:[{labelExpressionInfo:{expression:"$feature.DS_NOMBRE_"},symbol:{type:"text",color:"black",haloColor:"white",haloSize:1,font:{size:12,weight:"bold"}},labelPlacement:"center-center",minScale:2e6,maxScale:15e4}],labelsVisible:!0});e.add(b);const w=new hc({url:r+"estaciones_O3.geojson",title:"Estaciones de O",effect:"bloom(0.5, 1px, 0.0)",renderer:{type:"simple",symbol:{type:"picture-marker",height:15,url:"https://cdn-icons-png.flaticon.com/128/4982/4982386.png",width:15}},popupTemplate:{title:"{ETIQUETA}",expressionInfos:[{name:"v2020",expression:"Round($feature.O3_verano_2020, 2)"},{name:"v2021",expression:"Round($feature.O3_verano_2021, 2)"},{name:"v2022",expression:"Round($feature.O3_verano_2022, 2)"},{name:"v2023",expression:"Round($feature.O3_verano_2023, 2)"},{name:"v2024",expression:"Round($feature.O3_verano_2024, 2)"}],content:`
          <b>Municipio:</b> {LMUN}<br>
          <b>Tipo de estacin:</b> {Tipo_estacion}<br><br>

          <b>Superaciones de ozono (verano, das):</b><br>
          2020: {expression/v2020}<br>
          2021: {expression/v2021}<br>
          2022: {expression/v2022}<br>
          2023: {expression/v2023}<br>
          2024: {expression/v2024}
        `}});e.add(w);const S=new hc({url:r+"Comunidad_Madrid.geojson",title:"Lmite Comunidad de Madrid",effect:"bloom(1, 0.4px, 0.0)",renderer:{type:"simple",symbol:{type:"simple-fill",color:[0,0,0,0],outline:{color:[0,0,0,1],width:1.5}}}});e.add(S);const M=new p5e({view:i}),T=new ZA({view:i,content:M,expandIconClass:"esri-icon-layer-list",group:"widgets"});i.ui.add(T,"top-right");const I=new Kne({view:i}),L=new ZA({view:i,content:I,expandIconClass:"esri-icon-legend",group:"widgets"});i.ui.add(L,"top-right");const O=new gje({view:i}),R=new ZA({view:i,content:O,expandIconClass:"esri-icon-basemap",group:"top-right"});i.ui.add(R,"top-right");const z=new Cje({view:i});i.ui.add(z,"bottom-left");let j=null;return i.on("pointer-move",async U=>{try{const B=await i.hitTest(U);if(!B.results.length){j&&(j.remove(),j=null);return}const Q=B.results.find(ue=>y.includes(ue.graphic.layer));if(!Q){j&&(j.remove(),j=null);return}const oe=await i.whenLayerView(Q.graphic.layer);j&&j.remove(),j=oe.highlight(Q.graphic)}catch(B){console.error("Error en hover highlight:",B)}}),i.on("click",async U=>{try{const B=await i.hitTest(U);if(!B.results.length)return;const Q=B.results.find(oe=>y.includes(oe.graphic.layer));if(!Q)return;i.goTo({target:Q.graphic.geometry,scale:75e3},{duration:800,easing:"ease-in-out"})}catch(B){console.error("Error en zoom al click:",B)}}),S.when(()=>{i.goTo(S.fullExtent.expand(1.1))}),()=>i.destroy()},[]),XA.jsx("div",{ref:t,style:{width:"100%",height:"100vh"}})}zle.createRoot(document.getElementById("root")).render(XA.jsx(QA.StrictMode,{children:XA.jsx(Ije,{})}));export{va as $,sVe as A,sz as B,tae as C,rVe as D,nr as E,Nb as F,J as G,Fr as H,Lr as I,jye as J,Uye as K,K7 as L,ge as M,Fye as N,$e as O,B$e as P,X4 as Q,Gye as R,le as S,d7e as T,I0 as U,oqe as V,t9 as W,Zd as X,Ar as Y,Fd as Z,K as _,ZZe as a,nBe as a$,Xo as a0,hxe as a1,yt as a2,nye as a3,wt as a4,ve as a5,d as a6,m as a7,je as a8,Ee as a9,rr as aA,Ne as aB,C7 as aC,Lp as aD,Ap as aE,WB as aF,YB as aG,JB as aH,X as aI,Uje as aJ,Dje as aK,GNe as aL,x9e as aM,aZe as aN,gZe as aO,mw as aP,sn as aQ,AWe as aR,hEe as aS,C6e as aT,tne as aU,ew as aV,BT as aW,sr as aX,fs as aY,Xg as aZ,yU as a_,Ud as aa,Hw as ab,Lo as ac,dxe as ad,vr as ae,N as af,Ur as ag,aYe as ah,Lte as ai,Ate as aj,NZe as ak,YZe as al,KZe as am,cet as an,He as ao,_v as ap,M9e as aq,Wt as ar,a4 as as,vge as at,Cw as au,Ot as av,bH as aw,gD as ax,zo as ay,Jd as az,HZe as b,ao as b$,lJ as b0,Eqe as b1,Iw as b2,Cd as b3,B0 as b4,tw as b5,fi as b6,so as b7,n4 as b8,Ht as b9,hn as bA,uD as bB,Wy as bC,jse as bD,_m as bE,Z9e as bF,jee as bG,L9e as bH,rqe as bI,F3 as bJ,DAe as bK,P9e as bL,A9e as bM,nxe as bN,Ge as bO,Le as bP,Kh as bQ,Ce as bR,h3 as bS,Gd as bT,IGe as bU,Qr as bV,cqe as bW,N2e as bX,bV as bY,rj as bZ,Xve as b_,hv as ba,zs as bb,nH as bc,Ade as bd,gUe as be,DW as bf,Fs as bg,Fb as bh,nx as bi,cD as bj,JK as bk,Oi as bl,Df as bm,Oge as bn,F7e as bo,V7e as bp,TL as bq,P3 as br,oD as bs,lD as bt,EJ as bu,TJ as bv,uve as bw,Sc as bx,sO as by,L7e as bz,nYe as c,BMe as c$,Yd as c0,Bw as c1,Kb as c2,Ske as c3,dn as c4,nke as c5,Iee as c6,yke as c7,rTe as c8,bv as c9,j_e as cA,dX as cB,t1e as cC,GMe as cD,qY as cE,au as cF,V_e as cG,Mve as cH,Tve as cI,Eve as cJ,mTe as cK,zr as cL,_V as cM,jr as cN,sbe as cO,vt as cP,G5 as cQ,Ere as cR,Cre as cS,Lre as cT,nN as cU,hAe as cV,at as cW,zn as cX,bi as cY,zAe as cZ,See as c_,MTe as ca,aR as cb,_re as cc,dke as cd,bre as ce,vre as cf,xke as cg,gke as ch,rke as ci,ake as cj,Mm as ck,I3 as cl,Wde as cm,I4 as cn,L4 as co,Hde as cp,p3 as cq,f3 as cr,gTe as cs,XT as ct,Zr as cu,k$e as cv,Re as cw,xve as cx,wve as cy,OD as cz,XZe as d,BP as d$,uTe as d0,JMe as d1,XMe as d2,bTe as d3,Pn as d4,cie as d5,vRe as d6,Tt as d7,FAe as d8,NAe as d9,Z7e as dA,jqe as dB,oBe as dC,Yke as dD,wv as dE,_e as dF,LM as dG,av as dH,Ic as dI,nm as dJ,jn as dK,tde as dL,sBe as dM,Sb as dN,uc as dO,wO as dP,Qge as dQ,tW as dR,KA as dS,Q3e as dT,qB as dU,qie as dV,AQ as dW,cQe as dX,qde as dY,FKe as dZ,vXe as d_,Ui as da,ar as db,Pi as dc,en as dd,ln as de,Nr as df,j5 as dg,l7e as dh,ba as di,pi as dj,Gy as dk,Gi as dl,jW as dm,w$ as dn,i$ as dp,Ode as dq,Vc as dr,Vs as ds,qUe as dt,no as du,Sge as dv,Jx as dw,pt as dx,Yw as dy,ak as dz,dRe as e,lpe as e$,gXe as e0,lt as e1,es as e2,wRe as e3,Ua as e4,Aw as e5,jXe as e6,AYe as e7,BW as e8,ZW as e9,rm as eA,i4 as eB,vD as eC,aqe as eD,lb as eE,Zy as eF,Dw as eG,We as eH,sye as eI,O_ as eJ,Wo as eK,OY as eL,D2e as eM,DDe as eN,vye as eO,gye as eP,Uc as eQ,vqe as eR,Hd as eS,Ae as eT,LOe as eU,Ac as eV,IOe as eW,A1e as eX,ope as eY,Qt as eZ,upe as e_,x4 as ea,gY as eb,bt as ec,tD as ed,TH as ee,Xa as ef,axe as eg,mu as eh,TYe as ei,m3 as ej,HW as ek,i2e as el,TD as em,C2e as en,uqe as eo,Fn as ep,lqe as eq,CQ as er,V3 as es,_r as et,Vb as eu,C9e as ev,Nt as ew,$ce as ex,N9e as ey,Sue as ez,Ob as f,D3 as f$,cpe as f0,TUe as f1,EUe as f2,ys as f3,TP as f4,B3e as f5,tWe as f6,ct as f7,rWe as f8,xv as f9,MOe as fA,Un as fB,t9e as fC,E9e as fD,nDe as fE,n4e as fF,gw as fG,we as fH,ise as fI,Db as fJ,ase as fK,oQe as fL,Ev as fM,VKe as fN,jKe as fO,a4e as fP,XNe as fQ,jSe as fR,Zqe as fS,uBe as fT,t7e as fU,QB as fV,XB as fW,GY as fX,g2e as fY,CYe as fZ,EYe as f_,$m as fa,_4 as fb,fv as fc,Wf as fd,xi as fe,DK as ff,Kr as fg,Ve as fh,Hee as fi,dR as fj,EEe as fk,lu as fl,CW as fm,Lt as fn,Qa as fo,ps as fp,w9e as fq,Ns as fr,L0 as fs,b9e as ft,wee as fu,Oje as fv,kje as fw,Cee as fx,Mee as fy,Eee as fz,hRe as g,Bue as g$,lge as g0,nTe as g1,H0 as g2,_a as g3,Pke as g4,Qd as g5,P_e as g6,qMe as g7,Tee as g8,_Te as g9,z7e as gA,W7e as gB,R3 as gC,yet as gD,wae as gE,bae as gF,g0e as gG,v$e as gH,JA as gI,QJ as gJ,jD as gK,PYe as gL,fTe as gM,WGe as gN,BGe as gO,WJe as gP,Ww as gQ,Vr as gR,HGe as gS,XJe as gT,If as gU,gu as gV,qc as gW,ZGe as gX,qf as gY,que as gZ,Nwe as g_,n7e as ga,QT as gb,KT as gc,wUe as gd,bUe as ge,tHe as gf,R$e as gg,dv as gh,xXe as gi,XUe as gj,SXe as gk,lV as gl,o9e as gm,Rue as gn,iYe as go,Rd as gp,Nc as gq,zue as gr,Wb as gs,Bi as gt,mJ as gu,Ls as gv,Ut as gw,m7e as gx,z0 as gy,l9 as gz,cRe as h,an as h$,eP as h0,aQe as h1,tYe as h2,nbe as h3,D9e as h4,p7e as h5,s$ as h6,hO as h7,Sg as h8,y3 as h9,bm as hA,DJe as hB,CH as hC,pn as hD,Wd as hE,NT as hF,YP as hG,nX as hH,Nge as hI,Dg as hJ,Eue as hK,fu as hL,io as hM,xL as hN,kYe as hO,Wge as hP,gm as hQ,$Ae as hR,Mt as hS,uv as hT,lv as hU,qi as hV,V5e as hW,kf as hX,KW as hY,Qde as hZ,iZ as h_,Y7e as ha,wm as hb,u2 as hc,QK as hd,Sje as he,Si as hf,MWe as hg,yQe as hh,NN as hi,jNe as hj,iBe as hk,qqe as hl,S7e as hm,I9e as hn,DH as ho,VYe as hp,LUe as hq,Oke as hr,Im as hs,Dve as ht,L_e as hu,Rve as hv,k3 as hw,l_e as hx,CUe as hy,p9e as hz,kZe as i,Po as i$,cTe as i0,lj as i1,B0e as i2,o7e as i3,k0e as i4,MP as i5,T4 as i6,E4 as i7,Vi as i8,a7e as i9,VXe as iA,AY as iB,Zb as iC,k0 as iD,QJe as iE,qZe as iF,Ite as iG,VCe as iH,jCe as iI,AZe as iJ,yIe as iK,PZe as iL,TZe as iM,MZe as iN,vIe as iO,N1 as iP,LZe as iQ,rYe as iR,_Ee as iS,KWe as iT,Bee as iU,nZe as iV,wT as iW,rZe as iX,Tb as iY,sZe as iZ,MW as i_,M_e as ia,hX as ib,_Se as ic,tTe as id,pX as ie,Ude as ig,Rje as ih,e$ as ii,Wje as ij,hTe as ik,eTe as il,_ke as im,oK as io,Uqe as ip,MD as iq,F$e as ir,Rqe as is,kqe as it,bSe as iu,iJ as iv,_i as iw,eYe as ix,y0e as iy,e9 as iz,G as j,Dqe as j$,Z$ as j0,YWe as j1,rHe as j2,wJ as j3,Yb as j4,nO as j5,pm as j6,N0e as j7,$J as j8,sve as j9,D0e as jA,qg as jB,nv as jC,Gue as jD,KJ as jE,xYe as jF,Ir as jG,O9e as jH,oQ as jI,yde as jJ,un as jK,bLe as jL,sm as jM,X5 as jN,kue as jO,Aje as jP,nee as jQ,nD as jR,k as jS,hpe as jT,pu as jU,A$e as jV,FD as jW,Rge as jX,v7e as jY,hM as jZ,Nqe as j_,$ve as ja,Sve as jb,ZMe as jc,$Te as jd,TTe as je,G0e as jf,mE as jg,YJ as jh,Gde as ji,Jde as jj,YMe as jk,xee as jl,PM as jm,$9e as jn,ehe as jo,oUe as jp,hw as jq,CLe as jr,Xt as js,w7e as jt,n_e as ju,I7e as jv,u9 as jw,Hge as jx,ir as jy,SJ as jz,Xue as k,xRe as k$,Ms as k0,C3 as k1,tO as k2,E3 as k3,od as k4,tve as k5,nJe as k6,oGe as k7,iGe as k8,vl as k9,bWe as kA,_We as kB,fWe as kC,pWe as kD,sge as kE,B5 as kF,Xje as kG,H5 as kH,Qje as kI,Zw as kJ,AD as kK,VLe as kL,am as kM,r3 as kN,El as kO,ZXe as kP,u3 as kQ,jw as kR,eue as kS,kD as kT,Gqe as kU,Vqe as kV,mGe as kW,wAe as kX,rRe as kY,TAe as kZ,lRe as k_,Yje as ka,Jje as kb,Zje as kc,_ue as kd,ym as ke,c3 as kf,MN as kg,RT as kh,Wi as ki,VRe as kj,Ro as kk,ZRe as kl,YRe as km,Yc as kn,F as ko,ui as kp,Eb as kq,h5e as kr,s5e as ks,Hn as kt,n5e as ku,Bd as kv,vWe as kw,gWe as kx,yWe as ky,mWe as kz,sae as l,yH as l$,iU as l0,IRe as l1,bQ as l2,$Re as l3,TRe as l4,wi as l5,lE as l6,oE as l7,qke as l8,n2 as l9,e7e as lA,y$e as lB,ZWe as lC,Ppe as lD,Fpe as lE,Nw as lF,DUe as lG,PUe as lH,OUe as lI,br as lJ,yJe as lK,UG as lL,FJe as lM,WPe as lN,AJe as lO,PJe as lP,OJe as lQ,h9e as lR,Aue as lS,Tf as lT,Due as lU,ET as lV,jAe as lW,_Je as lX,HPe as lY,IJe as lZ,uH as l_,RAe as la,kT as lb,Fie as lc,QYe as ld,XYe as le,Wre as lf,CA as lg,YPe as lh,YYe as li,z0e as lj,vV as lk,dWe as ll,O4 as lm,Rpe as ln,e2 as lo,Gg as lp,m$e as lq,ece as lr,oZe as ls,Wce as lt,Y9e as lu,mMe as lv,yMe as lw,Jte as lx,Fq as ly,$ee as lz,No as m,E7 as m$,gt as m0,pv as m1,fr as m2,di as m3,ma as m4,nQe as m5,sQe as m6,LJe as m7,jPe as m8,Lie as m9,$7e as mA,Vje as mB,vZe as mC,Gc as mD,lYe as mE,eUe as mF,lQe as mG,By as mH,YUe as mI,v$ as mJ,tJ as mK,A7e as mL,gGe as mM,vGe as mN,_Ge as mO,q7e as mP,U7e as mQ,N7e as mR,A0e as mS,j7e as mT,ove as mU,Eye as mV,g7e as mW,yGe as mX,OBe as mY,Bf as mZ,Xge as m_,dE as ma,CT as mb,kAe as mc,zJe as md,gJe as me,vJe as mf,wJe as mg,SJe as mh,VPe as mi,xJe as mj,$Je as mk,MJe as ml,TJe as mm,EJe as mn,CJe as mo,ls as mp,_Ue as mq,Ew as mr,Tde as ms,d4 as mt,iUe as mu,tUe as mv,hge as mw,ahe as mx,nhe as my,T7e as mz,aet as n,Ore as n$,zge as n0,sJ as n1,bKe as n2,wKe as n3,bT as n4,_Ke as n5,oJ as n6,RKe as n7,uEe as n8,TWe as n9,IT as nA,$Ce as nB,Yle as nC,l9e as nD,lH as nE,t3 as nF,f9e as nG,Id as nH,FEe as nI,jEe as nJ,UEe as nK,jH as nL,DT as nM,g5e as nN,Tq as nO,W0 as nP,zxe as nQ,L3 as nR,pGe as nS,dGe as nT,fJ as nU,dJ as nV,c0e as nW,d0e as nX,y5 as nY,Rs as nZ,XRe as n_,EWe as na,lEe as nb,kKe as nc,Ps as nd,oJe as ne,lJe as nf,aJe as ng,WN as nh,Vse as ni,Hc as nj,Wc as nk,Qo as nl,jd as nm,Gt as nn,u6e as no,IQ as np,LQ as nq,zKe as nr,jJ as ns,b7e as nt,ALe as nu,XL as nv,Lw as nw,k9e as nx,dP as ny,cAe as nz,iae as o,dCe as o$,iK as o0,tK as o1,B3 as o2,jRe as o3,wq as o4,wXe as o5,f4 as o6,el as o7,eg as o8,Us as o9,$_e as oA,T_e as oB,h1 as oC,on as oD,fc as oE,dd as oF,Er as oG,qSe as oH,wMe as oI,uWe as oJ,Q1 as oK,Oc as oL,db as oM,JGe as oN,BPe as oO,tX as oP,Pb as oQ,Ld as oR,Hb as oS,bRe as oT,ZB as oU,r4 as oV,a9e as oW,vH as oX,WW as oY,mV as oZ,AH as o_,kr as oa,LXe as ob,nRe as oc,UXe as od,qGe as oe,Cl as of,YJe as og,fJe as oh,AKe as oi,dMe as oj,$We as ok,RW as ol,TW as om,j2e as on,U3 as oo,I$ as op,q2e as oq,CD as or,m2e as os,bJe as ot,kJe as ou,eD as ov,VAe as ow,e9e as ox,O_e as oy,gSe as oz,vm as p,Q5e as p$,GJe as p0,xm as p1,Al as p2,_Oe as p3,u7e as p4,xJ as p5,r7e as p6,Z4 as p7,WEe as p8,IH as p9,Ble as pA,GM as pB,XWe as pC,hCe as pD,QWe as pE,JWe as pF,Gee as pG,D6e as pH,uKe as pI,JD as pJ,CKe as pK,LPe as pL,cJe as pM,xKe as pN,BN as pO,qx as pP,gne as pQ,$Ke as pR,SKe as pS,nn as pT,yNe as pU,TKe as pV,EKe as pW,HNe as pX,bQe as pY,JXe as pZ,Lm as p_,u9e as pa,QP as pb,K2e as pc,Fqe as pd,zqe as pe,e4 as pf,U_e as pg,F_e as ph,iTe as pi,z_e as pj,ZJ as pk,$Se as pl,Pje as pm,fQ as pn,rO as po,XXe as pp,NBe as pq,DBe as pr,g$e as ps,BXe as pt,k4 as pu,vUe as pv,fN as pw,ePe as px,iD as py,Sy as pz,c9e as q,g9e as q$,V_ as q0,QUe as q1,OKe as q2,PKe as q3,LKe as q4,IKe as q5,F0e as q6,rEe as q7,Am as q8,$D as q9,MAe as qA,Xke as qB,oRe as qC,bBe as qD,wBe as qE,SBe as qF,pQe as qG,fQe as qH,Rf as qI,wd as qJ,dQe as qK,B4 as qL,T9e as qM,hQe as qN,uQe as qO,Bje as qP,see as qQ,y6e as qR,nKe as qS,hXe as qT,mEe as qU,fEe as qV,Fee as qW,cne as qX,pKe as qY,fKe as qZ,Vee as q_,ZYe as qa,Ede as qb,nK as qc,JYe as qd,POe as qe,YGe as qf,eOe as qg,FOe as qh,sXe as qi,GWe as qj,KJe as qk,SB as ql,m6e as qm,YNe as qn,M3 as qo,aB as qp,RWe as qq,MKe as qr,eq as qs,Uee as qt,PLe as qu,_c as qv,G0 as qw,uAe as qx,SAe as qy,xAe as qz,PVe as r,ree as r$,Z3 as r0,zc as r1,du as r2,As as r3,aD as r4,uJ as r5,Uw as r6,FN as r7,t2 as r8,qd as r9,Jr as rA,Vn as rB,Yr as rC,kke as rD,LSe as rE,RSe as rF,lBe as rG,Rke as rH,VNe as rI,the as rJ,S9e as rK,Gse as rL,Xd as rM,sZ as rN,f$e as rO,b0e as rP,w0e as rQ,g$ as rR,_7e as rS,lW as rT,o0e as rU,l0e as rV,cLe as rW,ro as rX,J3 as rY,FMe as rZ,J9e as r_,Tv as ra,Li as rb,JAe as rc,YAe as rd,$t as re,cd as rf,G4e as rg,fPe as rh,q4e as ri,Eie as rj,Uo as rk,gc as rl,qo as rm,kBe as rn,mA as ro,HUe as rp,eT as rq,js as rr,vTe as rs,_0e as rt,Dn as ru,qM as rv,IUe as rw,yE as rx,r0e as ry,BUe as rz,QZe as s,gAe as s$,aee as s0,J$e as s1,nHe as s2,nMe as s3,aHe as s4,m_e as s5,ZUe as s6,AUe as s7,fet as s8,Lc as s9,IWe as sA,VEe as sB,Dd as sC,sxe as sD,eK as sE,J2e as sF,Gs as sG,Gn as sH,DV as sI,Dde as sJ,jUe as sK,RBe as sL,xUe as sM,SUe as sN,ape as sO,Lg as sP,ihe as sQ,K3 as sR,MCe as sS,tGe as sT,aE as sU,xq as sV,yXe as sW,lWe as sX,L5 as sY,dKe as sZ,af as s_,rn as sa,JUe as sb,v9e as sc,W3e as sd,Dge as se,Gje as sf,Fje as sg,iH as sh,vje as si,MUe as sj,$Ue as sk,h7e as sl,$H as sm,Rxe as sn,b$e as so,Pl as sp,Kee as sq,Kje as sr,FWe as ss,VWe as st,jWe as su,UWe as sv,CWe as sw,LWe as sx,rge as sy,aw as sz,z5 as t,DWe as t$,zwe as t0,GGe as t1,RJe as t2,aSe as t3,nqe as t4,QGe as t5,tqe as t6,KGe as t7,iqe as t8,eqe as t9,AT as tA,ure as tB,lre as tC,QNe as tD,HOe as tE,BOe as tF,r5 as tG,kWe as tH,ZOe as tI,s2 as tJ,pEe as tK,oKe as tL,XOe as tM,lKe as tN,OWe as tO,cKe as tP,nXe as tQ,P6e as tR,A6e as tS,one as tT,MEe as tU,pFe as tV,PWe as tW,cWe as tX,hWe as tY,KNe as tZ,FNe as t_,sqe as ta,mZe as tb,NJe as tc,hV as td,XGe as te,kUe as tf,Mhe as tg,dXe as th,pXe as ti,aXe as tj,or as tk,QOe as tl,Zre as tm,rXe as tn,are as to,fE as tp,cXe as tq,aKe as tr,lXe as ts,Qe as tt,eke as tu,YOe as tv,oXe as tw,_ne as tx,PT as ty,Ab as tz,uet as u,dZe as u$,NWe as u0,qWe as u1,BWe as u2,wWe as u3,HWe as u4,WWe as u5,oEe as u6,yEe as u7,cEe as u8,hte as u9,M0e as uA,C7e as uB,jBe as uC,Z_e as uD,pJ as uE,qJ as uF,nW as uG,Mb as uH,m9e as uI,W_e as uJ,wGe as uK,kOe as uL,E7e as uM,ms as uN,q1e as uO,T7 as uP,WXe as uQ,HXe as uR,$5e as uS,tZe as uT,iZe as uU,i7e as uV,eZe as uW,qXe as uX,yZe as uY,pZe as uZ,fZe as u_,P0 as ua,zWe as ub,X3e as uc,d9e as ud,V0e as ue,Yq as uf,ZDe as ug,z2e as uh,EZe as ui,CZe as uj,t0 as uk,W2e as ul,mte as um,rw as un,nw as uo,Y0 as up,V2e as uq,i9e as ur,UAe as us,o5e as ut,PXe as uu,OXe as uv,pLe as uw,kXe as ux,FRe as uy,Fve as uz,oet as v,Sde as v$,hZe as v0,NEe as v1,Qee as v2,xWe as v3,SWe as v4,kEe as v5,FA as v6,S6e as v7,oWe as v8,Zle as v9,R7e as vA,B7e as vB,O7e as vC,D7e as vD,H7e as vE,lve as vF,HJe as vG,ZJe as vH,Ake as vI,u_e as vJ,y7e as vK,Pge as vL,Jw as vM,Xw as vN,Qw as vO,FYe as vP,Kxe as vQ,ZBe as vR,pPe as vS,aBe as vT,Wqe as vU,Xqe as vV,Yqe as vW,r9e as vX,yBe as vY,mBe as vZ,Hje as v_,xTe as va,jje as vb,eBe as vc,tBe as vd,q0e as ve,s1e as vf,r1e as vg,GJ as vh,Sre as vi,jwe as vj,I_e as vk,E_e as vl,C_e as vm,q_e as vn,i1e as vo,gre as vp,rGe as vq,d$e as vr,R_e as vs,sHe as vt,JZe as vu,sYe as vv,iHe as vw,BJe as vx,O0e as vy,P7e as vz,$L as w,_Ze as w$,Bqe as w0,x7e as w1,rBe as w2,X0 as w3,Iwe as w4,SMe as w5,mee as w6,y9e as w7,Sx as w8,$9 as w9,Hqe as wA,s7e as wB,f0e as wC,wSe as wD,MQe as wE,R4 as wF,KXe as wG,pZ as wH,aGe as wI,eQe as wJ,tQe as wK,Qqe as wL,nGe as wM,sGe as wN,M7e as wO,mD as wP,_9e as wQ,Kqe as wR,A_e as wS,iQe as wT,QXe as wU,vSe as wV,gE as wW,rQe as wX,G_e as wY,J7e as wZ,Q7e as w_,lGe as wa,Tqe as wb,Fo as wc,uJe as wd,ds as we,Gre as wf,YXe as wg,i5 as wh,YBe as wi,Gle as wj,zje as wk,Nje as wl,nve as wm,Jqe as wn,w_e as wo,A4e as wp,iXe as wq,Bre as wr,Tg as ws,SSe as wt,KUe as wu,Lqe as wv,kie as ww,xse as wx,$se as wy,RPe as wz,DZe as x,Em as x0,mJe as x1,UKe as x2,PFe as x3,qKe as x4,JVe as x5,tv as y,tVe as z};
