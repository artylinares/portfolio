import{g7 as y,c8 as z,cb as _,c0 as i,fu as D,c6 as s,c$ as C,fy as d,g1 as L,cs as k,c_ as m,f3 as N}from"./index-BJOYTI8a.js";import{r as O,c as f,f as w}from"./vectorStacks-BDH9BqnR.js";function tt(n){const t=n[0]*n[0]+n[4]*n[4]+n[8]*n[8],r=n[1]*n[1]+n[5]*n[5]+n[9]*n[9],c=n[2]*n[2]+n[6]*n[6]+n[10]*n[10];return Math.sqrt(Math.max(t,r,c))}function nt(n,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),c=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),u=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return y(n,r,c,u),n}function Q(n,t,r){Math.abs(n[0])>Math.abs(n[1])?y(t,0,1,0):y(t,1,0,0),z(r,n,t),z(t,r,n),_(r,r),_(t,t)}function rt(n,t,r,c=i()){const u=D(n),a=D(t),o=s(n,t)/(u*a);if(o<.9999999999999999){const e=Math.acos(o),h=((1-r)*u+r*a)/Math.sin(e),$=h/u*Math.sin((1-r)*e),g=h/a*Math.sin(r*e);return d(E,n,$),d(F,t,g),C(c,E,F)}return L(c,n,t,r)}const E=i(),F=i();function G(n=q){return[n[0],n[1],n[2],n[3]]}function ct(n=q[0],t=q[1],r=q[2],c=q[3]){return J(n,t,r,c,O.get())}function R(n,t){return J(t[0],t[1],t[2],t[3],n)}function ut(n){return n}function J(n,t,r,c,u=G()){return u[0]=n,u[1]=t,u[2]=r,u[3]=c,u}function S(n,t,r){const c=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],u=Math.abs(c-1)>1e-5&&c>1e-12?1/Math.sqrt(c):1;return r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function T(n,t,r,c=G()){const u=r[0]-t[0],a=r[1]-t[1],o=r[2]-t[2],e=n[0]-t[0],h=n[1]-t[1],$=n[2]-t[2],g=a*$-o*h,B=o*e-u*$,H=u*h-a*e,I=g*g+B*B+H*H,P=Math.abs(I-1)>1e-5&&I>1e-12?1/Math.sqrt(I):1;return c[0]=g*P,c[1]=B*P,c[2]=H*P,c[3]=-(c[0]*n[0]+c[1]*n[1]+c[2]*n[2]),c}function K(n,t,r,c=0,u=Math.floor(r*(1/3)),a=Math.floor(r*(2/3))){if(r<3)return!1;t(b,c);let o=u,e=!1;for(;o<r-1&&!e;)t(l,o),o++,e=!k(b,l);if(!e)return!1;for(o=Math.max(o,a),e=!1;o<r&&!e;)t(M,o),o++,m(x,b,l),_(x,x),m(A,l,M),_(A,A),e=!k(b,M)&&!k(l,M)&&Math.abs(s(x,A))<U;return e?(T(b,l,M,n),!0):(c!==0||u!==1||a!==2)&&K(n,t,r,0,1,2)}function et(n,t,r=!0){const c=t.length/3;return K(n,(u,a)=>y(u,t[3*a+0],t[3*a+1],t[3*a+2]),r?c-1:c)}const U=.99619469809,b=i(),l=i(),M=i(),x=i(),A=i();function ot(n,t,r){return t!==n&&R(n,t),n[3]=-s(n,r),n}function at(n,t){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function ft(n,t,r,c){return z(M,t,n),S(r,M,c)}function it(n,t,r,c){return j(v(n,t,m(f.get(),r,t),W,c))}function st(n,t,r){return t!=null&&j(v(n,t.origin,t.direction,X,r))}function ht(n,t,r){return j(v(n,t.origin,t.vector,0,r))}function gt(n,t,r){return j(v(n,t.origin,t.vector,1,r))}function Mt(n,t){return p(n,t)>=0}function $t(n,t){const r=s(n,t.ray.direction),c=-p(n,t.ray.origin);if(c<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return c>0;if((c<0||r<0)&&!(c<0&&r<0))return!0;const u=c/r;return r>0?u<t.c1&&(t.c1=u):u>t.c0&&(t.c0=u),t.c0<=t.c1}function lt(n,t){const r=s(n,t.ray.direction),c=-p(n,t.ray.origin);if(r>-1e-6&&r<1e-6)return c>0;const u=c/r;return r>0?u<t.c1&&(t.c1=u):u>t.c0&&(t.c0=u),t.c0<=t.c1}function mt(n,t,r){const c=d(f.get(),n,-n[3]),u=V(n,m(f.get(),t,c),f.get());return C(r,u,c),r}function bt(n,t,r,c){const u=n,a=f.get(),o=f.get();Q(u,a,o);const e=m(f.get(),r,t),h=w(a,e),$=w(o,e),g=w(u,e);return y(c,h,$,g)}function V(n,t,r){const c=d(f.get(),n,s(n,t));return m(r,t,c),r}function qt(n,t){return Math.abs(p(n,t))}function p(n,t){return s(n,t)+n[3]}function j(n){return n===0||n===1}function v(n,t,r,c,u){const a=s(n,r),o=p(n,t);if(a===0)return o>=0?2:3;let e=-o/a;return 1&c&&(e=N(e,0,1)),!(4&c)&&e<0||!(8&c)&&e>1?o>=0?2:3:(C(u,t,d(u,r,e)),o>=0?0:1)}const q=[0,0,1,0],W=12,X=8;export{ot as G,at as H,ft as I,it as J,st as K,ht as L,gt as N,Mt as O,$t as P,lt as Q,mt as R,K as S,bt as T,S as U,qt as W,p as X,v as Z,Q as a,rt as b,ct as d,nt as g,G as j,ut as k,tt as m,J as q,T as w,R as y,et as z};
