<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ciudad de 15 minutos · Accesibilidad urbana en Pozuelo de Alarcón</title>

  <link rel="icon" type="image/png" href="../../assets/icons/favicon.png">
  <link rel="stylesheet" href="../../assets/css/style.css" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WFXRE278Q4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-WFXRE278Q4');
  </script>
  
  <!-- Estilos específicos -->
  <style>
    .encabezado-proyecto { padding-bottom: 32px; }

    .cabecera-proyecto {
      margin-top: 40px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
    }

    .titulo-pagina-proyecto {
      font-size: clamp(1.6rem, 2.3vw, 2rem);
      margin-bottom: 6px;
    }

    .subtitulo-pagina-proyecto {
      font-size: 0.96rem;
      color: var(--color-texto-mas-suave);
      max-width: 38rem;
    }

    .enlace-volver-proyectos {
      font-size: 0.86rem;
      color: var(--color-texto-mas-suave);
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 6px 12px;
      white-space: nowrap;
      align-self: flex-start;
      text-decoration: none;
      transition: 0.16s ease-out;
    }

    .enlace-volver-proyectos:hover {
      border-color: var(--color-acento);
      color: var(--color-texto);
      background: rgba(255, 255, 255, 0.02);
    }

    .contenedor-proyecto-detalle .seccion { margin-top: 32px; }

    .imagen-proyecto {
      width: 100%;
      border-radius: 18px;
      margin: 16px 0 4px;
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .lista-detalle {
      margin-top: 8px;
      padding-left: 18px;
    }

    .lista-detalle li {
      margin-bottom: 6px;
      font-size: 0.95rem;
      color: var(--color-texto-suave);
    }

    .seccion-visor iframe {
      width: 100%;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: #000;
    }

    .nota-visor {
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--color-texto-mas-suave);
    }

    .bloque-volver-proyectos { margin-top: 32px; text-align: left; }

    /* --- Anchura visor --- */
    .contenedor-principal{
      overflow: visible;
    }

    .seccion-visor{
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      width: min(1300px, calc(100vw - 48px)); /* 48px = margen/padding de seguridad */
    }

    .seccion-visor iframe{
      width: 100%;
      display: block;
    }

    /* --- Gráfico de barras apiladas --- */
    .chart-wrap{
      height: 520px;
      overflow-y: auto;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.18);
      padding: 14px;
    }

    /* Desktop */
    #grafico_barrasapiladas .chart-wrap{
      height: 520px;   
      overflow-y: auto;
    }

    /* Tablet */
    @media (min-width: 769px) and (max-width: 1024px){
      #grafico_barrasapiladas .chart-wrap{
        height: 62vh;
        max-height: 620px;
        overflow-y: auto;
      }
    }

    /*Móvil*/ 
    @media (max-width: 768px){
      #grafico_barrasapiladas .chart-wrap{
        height: 70vh;          
        overflow-y: auto;
      }
    }

    #chartAccesibilidad{ display:block; width: 100%; }
    
    /* Barra del gráfico con tema oscuro (Chrome / Edge / Safari) */
    .chart-wrap::-webkit-scrollbar {
      width: 10px;
    }

    .chart-wrap::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.06);
      border-radius: 999px;
    }

    .chart-wrap::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.22);
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,0.35);
    }

    .chart-wrap::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.32);
    }

    /* Firefox */
    .chart-wrap {
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.28) rgba(255,255,255,0.06);
    }

    /*RESPONSIVE GENERAL*/
    @media (max-width: 768px) {
      .cabecera-proyecto {
        flex-direction: column;
        align-items: flex-start;
      }
      .enlace-volver-proyectos {
        align-self: stretch;
        text-align: center;
      }
    }

    @media (max-width: 768px){
      .seccion-visor iframe{
        height: 85vh;      /* más alto en móvil */
        min-height: 560px; /* evita que se quede pequeño */
      }
    }

  </style>
</head>

<body>

  <!-- ENCABEZADO -->
  <header class="encabezado encabezado-proyecto">
    <div class="contenedor encabezado-contenido">

      <nav class="menu-principal">
        <a href="../../index.html#sobre-mi" class="enlace-menu">Sobre mí</a>
        <a href="../../index.html#proyectos" class="enlace-menu enlace-activo">Proyectos</a>
        <a href="../../index.html#contacto" class="enlace-menu">Contacto</a>
      </nav>

      <div class="cabecera-proyecto">
        <div>
          <p class="etiqueta-rol">Proyecto GIS · Accesibilidad urbana</p>

          <h1 class="titulo-pagina-proyecto">
            Accesibilidad urbana y “Ciudad de los 15 minutos” en Pozuelo de Alarcón
          </h1>

          <p class="subtitulo-pagina-proyecto">
            Accesibilidad peatonal a servicios · Análisis multicriterio · Contraste con población · Leaflet.
          </p>
        </div>

        <a href="../../index.html#proyectos" class="enlace-volver-proyectos">
          ← Volver al portfolio
        </a>
      </div>

    </div>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="contenedor-principal contenedor-proyecto-detalle">

    <!-- CONTEXTO -->
    <section class="seccion" id="contexto">
      <div class="cabecera-seccion">
        <h2 class="titulo-seccion">Contexto</h2>
        <p class="subtitulo-seccion">
          Qué se analizó, por qué es relevante y cómo se interpretan los resultados.
        </p>
      </div>

      <div class="contenido-seccion">
        <p>
          Este proyecto ha consistido en analizar la accesibilidad peatonal a los servicios esenciales en Pozuelo de Alarcón
          bajo el enfoque de la <strong>“Ciudad de 15 los minutos”</strong>, evaluando el tiempo necesario para acceder a
          determinados servicios a pie desde las áreas residenciales.
        </p>

        <p>
          El objetivo principal es identificar patrones espaciales de accesibilidad y sintetizarlos en un
          <strong>índice multicriterio global</strong>, combinando análisis de red, tratamiento raster y agregación
          por sección censal. El resultado permite una lectura clara tanto a escala territorial como
          poblacional.
        </p>

        <p>
          Los resultados se visualizan mediante un <strong>visor web interactivo</strong>, que facilita la exploración
          de las clases temporales de accesibilidad y su relación con la distribución de la población,
          permitiendo identificar lás áreas mejor y peor servidas.
        </p>

        <ul class="lista-detalle">
          <li><strong>Ámbito geográfico:</strong> Pozuelo de Alarcón (Madrid).</li>
          <li><strong>Servicios analizados:</strong> sanidad, educación, transporte público, comercios, cultura y ocio, zonas verdes y oficinas públicas</li>
          <li><strong>Datos:</strong> red peatonal (OSM), servicios varios (OSM, Nomecalles), secciones censales (INE), suelo residencial (SIOSE AR).</li>
          <li><strong>Herramientas:</strong> ArcGIS Pro (Network Analyst y Spatial Analyst), Layout cartográfico y Leaflet.</li>
        </ul>
      </div>
    </section>

    <!-- VISOR WEB -->
    <section class="seccion seccion-visor" id="visor">
      <div class="cabecera-seccion">
        <h2 class="titulo-seccion">Visor interactivo</h2>
        <p class="subtitulo-seccion">
          Útil para explorar la accesibilidad peatonal a servicios en el municipio. Desarrollado con Leaflet.
        </p>
      </div>

      <div class="contenido-seccion">
        <iframe 
          src="..\..\apps\leaflet-accesibilidad\index.html"
          height="600"
          loading="lazy">
        </iframe>

        <p class="nota-visor">
          El visor permite explorar las clases de accesibilidad global por intervalos de tiempo y consultar indicadores por sección censal (población y métricas de accesibilidad).
        </p>
      </div>
    </section>

    <!-- METODOLOGÍA -->
    <section class="seccion" id="metodologia">
      <div class="cabecera-seccion">
        <h2 class="titulo-seccion">Metodología</h2>
        <p class="subtitulo-seccion">
          Síntesis del proceso de análisis y construcción del índice de accesibilidad.
        </p>
      </div>

      <div class="contenido-seccion">
        <p>
          El análisis se basa en un enfoque de <strong>accesibilidad peatonal por red</strong>,
          combinando tiempos de desplazamiento a pie con una integración multicriterio de
          distintos tipos de servicios urbanos.
        </p>

        <p>
          A partir de la red peatonal, se calcularon áreas de servicio temporales para cada
          variable de servicios, que posteriormente se transformaron en superficies continuas
          de accesibilidad. Estas capas se reclasificaron en rangos temporales homogéneos y se
          integraron en un <strong>índice global de accesibilidad</strong> mediante ponderaciones
          basadas en criterios propios.
        </p>

        <ul class="lista-detalle">
          <li>Cálculo de áreas de servicio peatonales mediante análisis de red.</li>
          <li>Conversión a raster y reclasificación por rangos temporales.</li>
          <li>Integración multicriterio de los distintos servicios.</li>
          <li>Agregación de resultados por sección censal.</li>
          <li>Cálculo de indicadores poblacionales y métricas resumen.</li>
        </ul>

        <p>
          Para contrastar los resultados de accesibilidad con la realidad demográfica, el índice
          se cruzó tanto con las <strong>secciones censales</strong> como con las
          <strong>parcelas de uso residencial</strong>. Este enfoque permitió relacionar las
          clases de accesibilidad con la localización efectiva de la población, cuantificando
          el número de habitantes incluido en cada rango temporal y evitando una interpretación
          basada únicamente en unidades administrativas.
        </p>

        <p>
          El resultado final se representa mediante clases temporales de accesibilidad y se
          publica en un visor web interactivo que permite explorar el patrón espacial y su
          relación con la distribución de la población.
        </p>
      </div>
    </section>



    <!-- RESULTADOS -->
    <section class="seccion" id="resultados">
      <div class="cabecera-seccion">
        <h2 class="titulo-seccion">Resultados principales</h2>
        <p class="subtitulo-seccion">
          Resumen orientativo que se sustituirá por los resultados reales.
        </p>
      </div>

      <div class="contenido-seccion">
        <p>
          El índice de accesibilidad global se expresa en cuatro rangos temporales
          (0-5, 5-15, 15-30 y &gt;30 minutos), representando el tiempo estimado de acceso peatonal
          a los servicios esenciales.
        </p>

        <p>
          Los resultados muestran una accesibilidad muy elevada en el conjunto del municipio, con una clara concentración 
          de los mejores valores en los tejidos urbanos más consolidados.

          Los principales déficits se localizan en ámbitos como urbanizaciones privadas (por ejemplo, La Finca) y la zona militar 
          de Retamares, espacios que, por su propia naturaleza, resultan inaccesibles para el ciudadano medio. En estos casos, la 
          ausencia de servicios no responde a una deficiente planificación urbana, sino a un modelo territorial deliberadamente 
          aislado, lo que refuerza la idea de que Pozuelo de Alarcón presenta, en términos generales, una dotación de servicios 
          muy adecuada.

          Otros sectores con peores resultados de accesibilidad, como el eje de la M-40 o el Monte del Pilar, también encuentran
          una explicación clara desde el punto de vista funcional, al tratarse de áreas aisladas y poco favorables para los 
          desplazamientos peatonales.
        </p>

        <p>
          En términos numéricos, los principales resultados son los siguientes:
        </p>

        <ul class="lista-detalle">
          <li><strong>Ciudad de 15 minutos:</strong> el 82,55% de la población reside en áreas con acceso ≤15 minutos.</li>
          <li><strong>Distribución de población:</strong> 55,74% (0-5 min), 26,82% (5-15 min), 15,83% (15-30 min), 1,62% (&gt;30 min).</li>
          <li><strong>Patrón espacial:</strong> mejores niveles en el eje central (centro urbano, estación, Avenida de Europa, Húmera y Somosaguas Sur).</li>
        </ul>

        <p>
          El cálculo de indicadores por sección censal (valor medio y clase dominante) permite
          contrastar la accesibilidad territorial con la distribución real de la población,
          aportando una lectura integrada del fenómeno.
        </p>

    </div>

    <!-- GRÁFICO · Distribución de población por accesibilidad (barras apiladas) -->
    <p>
      Para complementar esta lectura global y los valores agregados, el siguiente gráfico muestra cómo se distribuye la población 
      de cada sección censal en función del tiempo necesario para acceder a los servicios a pie. Esta representación permite comparar 
      de forma directa las distintas secciones y entender el peso relativo de cada clase de accesibilidad desde una perspectiva 
      poblacional, sin necesidad de explorar el visor cartográfico en detalle.
    </p> 
    <div class="contenido-seccion">
      <div class="chart-wrap">
        <canvas id="chartAccesibilidad"></canvas>
      </div>

      <p class="nota-visor" id="chartInfo">
        Pasa el ratón por una clase para ver el número de habitantes correspondiente.
      </p>
    </div>
    </section>

    <!-- CONCLUSIONES -->
    <section class="seccion" id="conclusiones">
      <div class="cabecera-seccion">
        <h2 class="titulo-seccion">Conclusiones</h2>
        <p class="subtitulo-seccion">
          Reflexión orientativa sobre el valor del análisis.
        </p>
      </div>

      <div class="contenido-seccion">
      <p>
        Este proyecto muestra cómo es posible analizar la accesibilidad urbana a los servicios esenciales de forma clara y comprensible, 
        combinando el estudio de los desplazamientos a pie con una visión global del territorio. El visor web permite explorar los 
        resultados de manera sencilla y entender las diferencias entre zonas a partir del tiempo necesario para acceder a los servicios.
      </p>

      <ul class="lista-detalle">
        <li>La accesibilidad peatonal es, en general, elevada en el conjunto del municipio.</li>
        <li>Las mejores condiciones se concentran en las áreas urbanas más consolidadas.</li>
        <li>Las situaciones de menor accesibilidad se localizan en ámbitos periféricos o de acceso restringido.</li>
      </ul>

      <p>
        En conjunto, los resultados ayudan a confirmar que Pozuelo de Alarcón cuenta con una buena dotación de servicios desde el punto 
        de vista de la accesibilidad a pie, al tiempo que permiten identificar de forma clara aquellas zonas donde el acceso es más limitado.
      </p>

      <p>
        En futuras ampliaciones, este análisis podría enriquecerse incorporando información más detallada sobre los servicios o la población, 
        así como explorando nuevos escenarios que ayuden a apoyar la toma de decisiones en el ámbito de la planificación urbana.
      </p>
      </div>
    </section>


    <!-- BOTÓN VOLVER -->
    <div class="bloque-volver-proyectos">
      <a href="../../index.html#proyectos" class="boton boton-secundario boton-volver-proyecto">
        ← Volver a la sección de proyectos
      </a>
    </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
  (() => {
    const DATA_URL = "./grafico_barrasapiladas.json";

    const fmtInt = (n) => new Intl.NumberFormat("es-ES", { maximumFractionDigits: 0 }).format(n);
    const fmtPct = (n) => new Intl.NumberFormat("es-ES", { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(n);

    window.addEventListener("DOMContentLoaded", async () => {
      const canvas = document.getElementById("chartAccesibilidad");
      const info = document.getElementById("chartInfo");

      if (!canvas) return;

      const res = await fetch(DATA_URL);
      const rows = await res.json();

      const labels = rows.map(r =>
        String(r.tipo || "").toLowerCase().includes("municip")
          ? "Promedio municipal"
          : String(r.cusec)
      );

      // Altura REAL del canvas (atributo). Esto es lo que habilita el scroll y evita solapes.
      const rowPx = 20; 
      canvas.height = Math.max(800, labels.length * rowPx + 140);



      // % por clase (apilado 100%)
      const pct_0_5   = rows.map(r => r.clases["0-5"].pct);
      const pct_5_15  = rows.map(r => r.clases["5-15"].pct);
      const pct_15_30 = rows.map(r => r.clases["15-30"].pct);
      const pct_30p   = rows.map(r => r.clases[">30"].pct);

      // Altura dinámica 
      const rowHeight = 25;
      canvas.height = Math.max(560, labels.length * rowHeight + 160);

      const ctx = canvas.getContext("2d");

      new Chart(ctx, {
        type: "bar",
        data: {
          labels,
          datasets: [
            {
              label: "0-5 min",
              data: pct_0_5,
              stack: "stack1",
              backgroundColor: "#1a5f1eff",
              borderColor: "#134616",     // tono más oscuro
              borderWidth: 1,
              barThickness: 11,
              maxBarThickness: 12
            },
            {
              label: "5-15 min",
              data: pct_5_15,
              stack: "stack1",
              backgroundColor: "#a8d8aaff",
              borderColor: "#84b687",     // tono más oscuro
              borderWidth: 1,
              barThickness: 11,
              maxBarThickness: 12
            },
            {
              label: "15-30 min",
              data: pct_15_30,
              stack: "stack1",
              backgroundColor: "#f7da8cff",
              borderColor: "#d9b85f",     // tono más oscuro
              borderWidth: 1,
              barThickness: 11,
              maxBarThickness: 12
            },
            {
              label: ">30 min",
              data: pct_30p,
              stack: "stack1",
              backgroundColor: "#EF9A9A",
              borderColor: "#d87e7e",     // tono más oscuro
              borderWidth: 1,
              barThickness: 11,
              maxBarThickness: 12
            }
          ]

        },
        options: {
          indexAxis: "y",
          responsive: false,
          maintainAspectRatio: false,
          interaction: { mode: "nearest", intersect: true },
          scales: {
            x: {
              stacked: true,
              min: 0,
              max: 100,
              grid: { color: "rgba(255,255,255,0.08)" },
              ticks: { color: "rgba(255,255,255,0.75)", callback: (v) => v + "%" }
            },
            y: {
              stacked: true,
              grid: { display: false },
              ticks: {
                color: "rgba(255,255,255,0.75)",
                font: (ctx) => ({
                  size: 11,
                  weight: ctx.index === 0 ? "700" : "400"
                })
              }
            }
          },
          plugins: {
            legend: { position: "top", labels: { color: "rgba(255,255,255,0.8)" } },
            tooltip: {
              callbacks: {
                title: (items) => labels[items[0].dataIndex],
                label: (item) => {
                  const idx = item.dataIndex;
                  const dsLabel = item.dataset.label;

                  const key =
                    dsLabel.startsWith("0") ? "0-5" :
                    dsLabel.startsWith("5") ? "5-15" :
                    dsLabel.startsWith("15") ? "15-30" : ">30";

                  const hab = rows[idx].clases[key].hab;
                  const pct = rows[idx].clases[key].pct;

                  if (info) info.textContent = `${labels[idx]} · ${dsLabel}: ${fmtInt(hab)} hab (${fmtPct(pct)}%)`;
                  return `${dsLabel}: ${fmtInt(hab)} hab (${fmtPct(pct)}%)`;
                },
                afterBody: (items) => {
                  const idx = items[0].dataIndex;
                  return `Población total: ${fmtInt(rows[idx].pob_total)} hab`;
                }
              }
            }
          }
        }
      });
    });
  })();
  </script>

</body>
</html>
